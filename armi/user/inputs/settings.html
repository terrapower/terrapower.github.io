<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="2.1. The Settings Input File" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://terrapower.github.io/armi/user/inputs/settings.html" />
<meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
<meta property="og:description" content="The settings input file defines a series of key/value pairs the define various information about the system you are modeling as well as which modules to run and various modeling/approximation setti..." />
<meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
<meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
<meta name="description" content="The settings input file defines a series of key/value pairs the define various information about the system you are modeling as well as which modules to run and various modeling/approximation setti..." />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2.1. The Settings Input File &mdash; ARMI 0.2.9 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_fixes.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-rendered-html.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/armiicon_16x16.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.2. The Blueprints Input File" href="blueprints.html" />
    <link rel="prev" title="2. Inputs" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ARMI
              <img src="../../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.2.9
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">User Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../user_install.html">1. Installation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">2. Inputs</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">2.1. The Settings Input File</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-armi-gui">2.1.1. The ARMI GUI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#some-special-settings">2.1.2. Some special settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="blueprints.html">2.2. The Blueprints Input File</a></li>
<li class="toctree-l3"><a class="reference internal" href="fuel_management.html">2.3. Fuel Management Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="settings_report.html">2.4. Settings Report</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../outputs/index.html">3. Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual_data_access.html">4. Accessing Data in ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reactor_parameters_report.html">5. Reactor Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core_parameters_report.html">6. Core Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../component_parameters_report.html">7. Component Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assembly_parameters_report.html">8. Assembly Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../block_parameters_report.html">9. Block Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../physics_coupling.html">10. Physics Coupling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../radial_and_axial_expansion.html">11. Radial and Axial Expansion and Contraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../accessingEntryPoints.html">12. Accessing Entry Points</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../.apidocs/modules.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #233C5B" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ARMI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">User Docs</a></li>
          <li class="breadcrumb-item"><a href="index.html"><span class="section-number">2. </span>Inputs</a></li>
      <li class="breadcrumb-item active"><span class="section-number">2.1. </span>The Settings Input File</li>
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-settings-input-file">
<h1><span class="section-number">2.1. </span>The Settings Input File<a class="headerlink" href="#the-settings-input-file" title="Permalink to this heading"></a></h1>
<p>The <strong>settings</strong> input file defines a series of key/value pairs the define various information about the system you are
modeling as well as which modules to run and various modeling/approximation settings. For example, it includes:</p>
<ul class="simple">
<li><p>The case title</p></li>
<li><p>The reactor power</p></li>
<li><p>The number of cycles to run</p></li>
<li><p>Which physics solvers to activate</p></li>
<li><p>Whether or not to perform a critical control search</p></li>
<li><p>Whether or not to do tight coupling iterations</p></li>
<li><p>What neutronics approximations specific to the chosen physics solver to apply</p></li>
<li><p>Environment settings (paths to external codes)</p></li>
<li><p>How many CPUs to use on a computer cluster</p></li>
</ul>
<p>This file is a YAML file that you can edit manually with a text editor or with the ARMI GUI.</p>
<p>Here is an excerpt from a settings file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">beta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.003454</span>
<span class="w">  </span><span class="nt">BOL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">branchVerbosity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
<span class="w">  </span><span class="nt">buGroups</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">  </span><span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">clusterExclusive</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="w">  </span><span class="nt">comment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Simple test input.</span>
<span class="w">  </span><span class="nt">crossSectionControl</span><span class="p">:</span>
<span class="w">    </span><span class="nt">DA</span><span class="p">:</span>
<span class="w">      </span><span class="nt">geometry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0D</span>
<span class="w">      </span><span class="nt">blockRepresentation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Median</span>
<span class="w">      </span><span class="nt">criticalBuckling</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>A full listing of settings available in the framework may be found in the <a class="reference internal" href="settings_report.html"><span class="doc">Table of all global settings</span></a>.</p>
<p>Many settings are provided by the ARMI Framework, and others are defined by various plugins.</p>
<section id="the-armi-gui">
<span id="armi-gui"></span><h2><span class="section-number">2.1.1. </span>The ARMI GUI<a class="headerlink" href="#the-armi-gui" title="Permalink to this heading"></a></h2>
<p>The ARMI GUI may be used to manipulate many common settings (though the GUI can’t change all of the settings).  The GUI
also enables the graphical manipulation of a reactor core map, and convenient automation of commands required to submit to a
cluster.  The GUI is a front-end to
these files. You can choose to use the GUI or not, ARMI doesn’t know or care — it just reads these files and runs them.</p>
<p>Note that one settings input file is required for each ARMI case, though many ARMI cases can refer to the same
Blueprints, Core Map, and Fuel Management inputs.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The ARMI GUI is not yet included in the open-source ARMI framework</p>
</div>
<section id="the-assembly-clicker">
<h3><span class="section-number">2.1.1.1. </span>The assembly clicker<a class="headerlink" href="#the-assembly-clicker" title="Permalink to this heading"></a></h3>
<p>The assembly clicker (in the <code class="docutils literal notranslate"><span class="pre">grids</span></code> editor) allows users to define the 2-D layout of the assemblies defined in the
<a class="reference internal" href="blueprints.html"><span class="doc">The Blueprints Input File</span></a>. This can be done in hexagon or cartesian. The results of this arrangement get written to
grids in blueprints. Click on the assembly palette on the right and click on the locations where you want to put the
assembly. By default, the input assumes a 1/3 core model, but you can create a full core model through the menu.</p>
<p>If you want one assembly type to fill all positions in a ring, right click it once it is placed and choose <code class="docutils literal notranslate"><span class="pre">Make</span> <span class="pre">ring</span>
<span class="pre">like</span> <span class="pre">this</span> <span class="pre">hex</span></code>. Once you submit the job or save the settings file (File -&gt; Save), you will be prompted for a new name
of the geometry file before the settings file is saved. The geometry setting in the main tab will also be updated.</p>
</section>
<section id="the-armi-environment-tab">
<h3><span class="section-number">2.1.1.2. </span>The ARMI Environment Tab<a class="headerlink" href="#the-armi-environment-tab" title="Permalink to this heading"></a></h3>
<p>The environment tab contains important settings about which version of ARMI you will run
and with which version of Python, etc. Most important is the <code class="docutils literal notranslate"><span class="pre">ARMI</span> <span class="pre">location</span></code> setting. This
points to the codebase that will run. If you want to run the released version of ARMI,
ensure that it is set in this setting. If you want to run a developer version, then be sure
to update this setting.</p>
<p>Other settings on this tab may need to be updated depending on your computational environment.
Talk to your system admins to determine which settings are best.</p>
</section>
</section>
<section id="some-special-settings">
<h2><span class="section-number">2.1.2. </span>Some special settings<a class="headerlink" href="#some-special-settings" title="Permalink to this heading"></a></h2>
<p>A few settings warrant additional discussion.</p>
<section id="detail-assemblies">
<span id="detail-assems"></span><h3><span class="section-number">2.1.2.1. </span>Detail assemblies<a class="headerlink" href="#detail-assemblies" title="Permalink to this heading"></a></h3>
<p>Many plugins perform more detailed analysis on certain regions of the reactor. Since the analyses
often take longer, ARMI has a feature, called <em>detail assemblies</em> to help. Different plugins
may treat detail assemblies differently, so it’s important to read the plugin documentation
as well. For example, a depletion plugin may perform pin-level depletion and rotation analysis
only on the detail assemblies. Or perhaps CFD thermal/hydraulics will be run on detail assemblies,
while subchannel T/H is run on the others.</p>
<p>Detail assemblies are specified by the user in a variety of ways,
through the GUI or the settings system.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The Detail Assemblies mechanism has begun to be too broad of a brush
for serious multiphysics calculations with each plugin treating them differently.
It is likely that this feature will be extended to be more flexible and less
surprising in the future.</p>
</div>
<dl class="simple">
<dt>Detail Assembly Locations BOL</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">detailAssemLocationsBOL</span></code> setting is a list of assembly location strings
(e.g. <code class="docutils literal notranslate"><span class="pre">004-003</span></code> for ring 4, position 3). Assemblies that are in these locations at the
beginning-of-life will be activated as detail assemblies.</p>
</dd>
<dt>Detail assembly numbers</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">detailAssemNums</span></code> setting is a list of <code class="docutils literal notranslate"><span class="pre">assemNum</span></code>s that can be inferred from a previous
case and specified, regardless of when the assemblies enter the core. This is useful for
activating detailed treatment of assemblies that enter the core at a later cycle.</p>
</dd>
<dt>Detail all assemblies</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">detailAllAssems</span></code> setting makes all assemblies in the problem detail assemblies</p>
</dd>
</dl>
</section>
<section id="kinetics-settings">
<span id="id1"></span><h3><span class="section-number">2.1.2.2. </span>Kinetics settings<a class="headerlink" href="#kinetics-settings" title="Permalink to this heading"></a></h3>
<p>In reactor physics analyses it is standard practice to represent reactivity
in either absolute units (i.e., dk/kk’ or pcm) or in dollars or cents. To
support this functionality, the framework supplies the <code class="docutils literal notranslate"><span class="pre">beta</span></code> and
<code class="docutils literal notranslate"><span class="pre">decayConstants</span></code> settings to apply the delayed neutron fraction and
precursor decay constants to the Core parameters during initialization.</p>
<p>These settings come with a few caveats:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">beta</span></code> setting supports two different meanings depending on
the type that is provided. If a single value is given, then this setting
is interpreted as the effective delayed neutron fraction for the
system. If a list of values is provided, then this setting is interpreted
as the group-wise (precursor family) delayed neutron fractions (useful for
reactor kinetics simulations).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">decayConstants</span></code> setting is used to define the precursor
decay constants for each group. When set, it must be
provided with a corresponding <code class="docutils literal notranslate"><span class="pre">beta</span></code> setting that has the
same number of groups. For example, if six-group delayed neutron
fractions are provided, the decay constants must also be provided
in the same six-group structure.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">beta</span></code> is interpreted as the effective delayed neutron fraction for
the system, then the <code class="docutils literal notranslate"><span class="pre">decayConstants</span></code> setting will not be utilized.</p></li>
<li><p>If both the group-wise <code class="docutils literal notranslate"><span class="pre">beta</span></code> and <code class="docutils literal notranslate"><span class="pre">decayConstants</span></code> are provided
and their number of groups are consistent, then the effective delayed
neutron fraction for the system is calculated as the summation of the
group-wise delayed neutron fractions.</p></li>
</ol>
</div></blockquote>
</section>
<section id="cycle-history">
<span id="id2"></span><h3><span class="section-number">2.1.2.3. </span>Cycle history<a class="headerlink" href="#cycle-history" title="Permalink to this heading"></a></h3>
<p>For all cases, <code class="docutils literal notranslate"><span class="pre">nCycles</span></code> and <code class="docutils literal notranslate"><span class="pre">power</span></code> must be specified by the user.
In the case that only a single state is to be examined (i.e. no burnup), the user need only additionally specify <code class="docutils literal notranslate"><span class="pre">nCycles</span> <span class="pre">=</span> <span class="pre">1</span></code>.</p>
<p>In the case of burnup, the reactor cycle history may be specified using either the simple or detailed
option.
The simple cycle history consists of the following case settings:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nCycles</span></code> (default = 1)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">burnSteps</span></code> (default = 4)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">availabilityFactor(s)</span></code> (default = 1.0)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cycleLength(s)</span></code> (default = 365.2425)</p></li>
</ul>
</div></blockquote>
<p>In addition, one may optionally use the <code class="docutils literal notranslate"><span class="pre">powerFractions</span></code> setting to change the reactor
power between each cycle.
With these settings, a user can define a history in which each cycle may vary
in power, length, and uptime.
The history is restricted, however, to each cycle having a constant power, to
each cycle having the same number of burnup nodes, and to those burnup nodes being
evenly spaced within each cycle.
An example simple cycle history might look like</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">power</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
<span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">R2</span><span class="p p-Indicator">]</span>
<span class="nt">powerFractions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">]</span>
<span class="nt">availabilityFactors</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.93</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>Note the use of the special shorthand list notation, where repeated values in a list can be specified using an “R” followed by the number of times the value is to be repeated.</p>
<p>The above scheme would represent 3 cycles of operation:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>100% power for 90 days, split into two segments of 45 days each, followed by 10 days shutdown (i.e. 90% capacity)</p></li>
<li><p>50% power for 30 days, split into two segments of 15 days each, followed by 70 days shutdown (i.e. 15% capacity)</p></li>
<li><p>100% power for 93 days, split into two segments of 46.5 days each, followed by 7 days shutdown (i.e. 93% capacity)</p></li>
</ol>
</div></blockquote>
<p>In each cycle, criticality calculations will be performed at 3 nodes evenly-spaced through the uptime portion of the cycle (i.e. <code class="docutils literal notranslate"><span class="pre">availabilityFactor``*``powerFraction</span></code>), without option for changing node spacing or frequency.
This input format can be useful for quick scoping and certain types of real analyses, but clearly has its limitations.</p>
<p>To overcome these limitations, the detailed cycle history, consisting of the <code class="docutils literal notranslate"><span class="pre">cycles</span></code> setting may be specified instead.
For each cycle, an entry to the <code class="docutils literal notranslate"><span class="pre">cycles</span></code> list is made with the following optional fields:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span> <span class="pre">fractions</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulative</span> <span class="pre">days</span></code>, <code class="docutils literal notranslate"><span class="pre">step</span> <span class="pre">days</span></code>, or <code class="docutils literal notranslate"><span class="pre">burn</span> <span class="pre">steps</span></code> + <code class="docutils literal notranslate"><span class="pre">cycle</span> <span class="pre">length</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">availability</span> <span class="pre">factor</span></code></p></li>
</ul>
</div></blockquote>
<p>An example detailed cycle history employing all of these fields could look like</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">power</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
<span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="nt">cycles</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span>
<span class="w">    </span><span class="nt">step days</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">98</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">power fractions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">availability factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">B</span>
<span class="w">    </span><span class="nt">cumulative days</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">72</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">78</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">86</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">power fractions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.95</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.93</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">C</span>
<span class="w">    </span><span class="nt">step days</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">R5</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">power fractions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">R5</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cycle length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">    </span><span class="nt">burn steps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">availability factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9</span>
</pre></div>
</div>
<p>Note that repeated values in a list may be again be entered using the shorthand notation for <code class="docutils literal notranslate"><span class="pre">step</span> <span class="pre">days</span></code>, <code class="docutils literal notranslate"><span class="pre">power</span> <span class="pre">fractions</span></code>, and <code class="docutils literal notranslate"><span class="pre">availability</span> <span class="pre">factors</span></code> (though not <code class="docutils literal notranslate"><span class="pre">cumulative</span> <span class="pre">days</span></code> because entries must be monotonically increasing).</p>
<p>Such a scheme would define the following cycles:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A 2 day power ramp followed by full power operations for 98 days, with three nodes clustered during the ramp and another at the end of the cycle, followed by 900 days of shutdown</p></li>
<li><p>A 2 day power ramp followed by a prolonged period at full power and then a slight power reduction for the last 14 days in the cycle</p></li>
<li><p>Constant full-power operation for 30 days split into six even increments</p></li>
<li><p>Constant full-power operation for 90 days, split into two equal-length 45 day segments, followed by 10 days of downtime</p></li>
</ol>
</div></blockquote>
<p>As can be seen, the detailed cycle history option provides much greated flexibility for simulating realistic operations, particularly power ramps or scenarios that call for unevenly spaced burnup nodes, such as xenon buildup in the early period of thermal reactor operations.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although the detailed cycle history option allows for powers to change within each cycle, it should be noted that the power over each step is still considered to be constant.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> field of the detailed cycle history is not yet used for anything, but this information will still be accessible on the operator during runtime.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cycles without names will be given the name <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When a detailed cycle history is combined with tight coupling, a subclass of <a class="reference internal" href="../../.apidocs/armi.physics.neutronics.latticePhysics.latticePhysicsInterface.html#armi.physics.neutronics.latticePhysics.latticePhysicsInterface.LatticePhysicsInterface.interactCoupled" title="armi.physics.neutronics.latticePhysics.latticePhysicsInterface.LatticePhysicsInterface.interactCoupled"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LatticePhysicsInterface.interactCoupled</span></code></a> should be used.</p>
</div>
</section>
<section id="restart-cases">
<span id="id3"></span><h3><span class="section-number">2.1.2.4. </span>Restart cases<a class="headerlink" href="#restart-cases" title="Permalink to this heading"></a></h3>
<p>Oftentimes the user is interested in re-examining just a specific set of time nodes from an existing run.
In these cases, it is sometimes not necessary to rerun an entire reactor history, and one may instead use one of the following options:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Snapshot, where the reactor state is loaded from a database and just a single time node is run.</p></li>
<li><p>Restart, where the cycle history is loaded from a database and the calculation continues through the remaining specified time history.</p></li>
</ol>
</div></blockquote>
<p>For either of these options, it is possible to alter the specific settings applied to the run by simply adjusting the case settings for the run.
For instance, a run that originally had only neutronics may incorporate thermal hydraulics during a snapshot run by adding in the relevant TH settings.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For either of these options, it is advisable to first create a new case settings file with a name different than the one from which you will be restarting off of, so as to not overwrite those results.</p>
</div>
<p>To run a snapshot, the following settings must be added to your case settings:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">runType</span></code> to <code class="docutils literal notranslate"><span class="pre">Snapshots</span></code></p></li>
<li><p>Add a list of cycle/node pairs corresponding to the desired snapshots to <code class="docutils literal notranslate"><span class="pre">dumpSnapshot</span></code> formatted as <code class="docutils literal notranslate"><span class="pre">'CCCNNN'</span></code></p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">reloadDBName</span></code> to the existing database file that you would like to load the reactor state from</p></li>
</ul>
</div></blockquote>
<p>An example of a snapshot run input:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Snapshots</span>
<span class="nt">reloadDBName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-old-results.h5</span>
<span class="nt">dumpSnapshot</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;000000&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;001002&#39;</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="c1"># would produce 2 snapshots, at BOL and at node 2 of cycle 1</span>
</pre></div>
</div>
<p>To run a restart, the following settings must be added to your case settings:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">runType</span></code> to <code class="docutils literal notranslate"><span class="pre">Standard</span></code></p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">loadStyle</span></code> to <code class="docutils literal notranslate"><span class="pre">fromDB</span></code></p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">startCycle</span></code> and <code class="docutils literal notranslate"><span class="pre">startNode</span></code> to the cycle/node that you would like to continue the calculation from (inclusive).</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">startNode</span></code> may use negative indexing.
* Set <code class="docutils literal notranslate"><span class="pre">reloadDBName</span></code> to the existing database file from which you would like to load the reactor history up to the restart point
* If you would like to change the specified reactor history (see <a class="reference internal" href="#restart-cases"><span class="std std-ref">Restart cases</span></a>), keep the history up to the restarting cycle/node
unchanged, and just alter the history after that point. This means that the cycle history specified in your restart run should include
all cycles/nodes up to the end of the simulation. For complicated restarts, it
may be necessary to use the detailed <code class="docutils literal notranslate"><span class="pre">cycles</span></code> setting, even if the original case only used the simple history option.</p>
</div></blockquote>
<p>A few examples of restart cases:</p>
<blockquote>
<div><ul>
<li><dl>
<dt>Restarting a calculation at a specific cycle/node and continuing for the remainder of the originally-specified cycle history:</dt><dd><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># old settings</span>
<span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromInput</span>
<span class="nt">loadingFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-blueprints.yaml</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># restart settings</span>
<span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromDB</span>
<span class="nt">startCycle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">startNode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">reloadDBName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-original-results.h5</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Add an additional cycle to the end of a case:</dt><dd><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># old settings</span>
<span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromInput</span>
<span class="nt">loadingFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-blueprints.yaml</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># restart settings</span>
<span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromDB</span>
<span class="nt">startCycle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">startNode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span>
<span class="nt">reloadDBName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-original-results.h5</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Restart but cut the reactor history short:</dt><dd><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># old settings</span>
<span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromInput</span>
<span class="nt">loadingFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-blueprints.yaml</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># restart settings</span>
<span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromDB</span>
<span class="nt">startCycle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="nt">startNode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">reloadDBName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-original-results.h5</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Restart with a different number of steps in the third cycle using the detailed <code class="docutils literal notranslate"><span class="pre">cycles</span></code> setting:</dt><dd><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># old settings</span>
<span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromInput</span>
<span class="nt">loadingFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-blueprints.yaml</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># restart settings</span>
<span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="nt">cycles</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cycle length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">    </span><span class="nt">burn steps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cycle length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">    </span><span class="nt">burn steps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cycle length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">    </span><span class="nt">burn steps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromDB</span>
<span class="nt">startCycle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="nt">startNode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">reloadDBName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-original-results.h5</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">skipCycles</span></code> setting is related to skipping the lattice physics calculation specifically, it is not required to do a restart run.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a href="#id4"><span class="problematic" id="id5">*</span></a>-SHUFFLES.txt file is required to do explicit repeated fuel management.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The restart.dat file is required to repeat the exact fuel management methods during a branch search. These can potentially modify the reactor state in ways that cannot be captures with the SHUFFLES.txt file.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ISO* binary cross section libraries are required to run cases that skip the lattice physics calculation (e.g. MC**2)</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The multigroup flux is not yet stored on the output databases. If you need to do a restart with these values (e.g. for depletion), then you need to reload from neutronics outputs.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Restarting a calculation with an different version of ARMI than what was used to produce the restarting database may result in undefined behavior.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="2. Inputs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="blueprints.html" class="btn btn-neutral float-right" title="2.2. The Blueprints Input File" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2023, TerraPower, LLC.
      <span class="lastupdated">Last updated on 2023-10-19.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>