

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="1. Inputs" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://terrapower.github.io/armi/user/inputs.html" />
<meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
<meta property="og:description" content="ARMI input files define the initial state of the reactor model and tell ARMI what kind of analysis should be performed on it. There are several input files: Settings file, Contains simulation param..." />
<meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
<meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
<meta name="description" content="ARMI input files define the initial state of the reactor model and tell ARMI what kind of analysis should be performed on it. There are several input files: Settings file, Contains simulation param..." />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Inputs &mdash; ARMI 0.6.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme_fixes.css?v=2b77b304" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=e5fbc548" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_style.css?v=678fb11e" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/modern.css?v=803738c0" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-test-results/common.css?v=9ec2c1d5" />

  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=1c28bd9a"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
      <script src="../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
      <script src="../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
      <script src="../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
      <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2. Outputs" href="outputs.html" />
    <link rel="prev" title="User Docs" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >

          
          
          <a href="../index.html" class="icon icon-home">
            ARMI
              <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">1. Inputs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#yaml-files">1.1. YAML Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-settings-input-file">1.2. The Settings Input File</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#the-armi-gui">1.2.1. The ARMI GUI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#some-special-settings">1.2.2. Some special settings</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#the-blueprints-input-file">1.3. The Blueprints Input File</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#blueprint-sections">1.3.1. Blueprint sections</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blocks-and-components">1.3.2. Blocks and Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#flags-and-naming">1.3.3. Flags and naming</a></li>
<li class="toctree-l4"><a class="reference internal" href="#assemblies">1.3.4. Assemblies</a></li>
<li class="toctree-l4"><a class="reference internal" href="#systems">1.3.5. Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="#grids">1.3.6. Grids</a></li>
<li class="toctree-l4"><a class="reference internal" href="#custom-isotopics">1.3.7. Custom Isotopics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advanced-topics">1.3.8. Advanced topics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#nuclide-flags">1.3.9. Nuclide Flags</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fuel-management-input">1.4. Fuel Management Input</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fuel-management-operations">1.4.1. Fuel Management Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="#choosing-assemblies-to-move">1.4.2. Choosing Assemblies to Move</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fuel-management-examples">1.4.3. Fuel Management Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fuel-management-tips">1.4.4. Fuel Management Tips</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-a-branch-search">1.4.5. Running a branch search</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#settings-report">1.5. Settings Report</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="outputs.html">2. Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="manual_data_access.html">3. Accessing Data in ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="reactor_parameters_report.html">4. Reactor Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="core_parameters_report.html">5. Core Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="component_parameters_report.html">6. Component Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="assembly_parameters_report.html">7. Assembly Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="block_parameters_report.html">8. Block Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="spatial_block_data.html">9. Spatial block data</a></li>
<li class="toctree-l2"><a class="reference internal" href="physics_coupling.html">10. Physics Coupling</a></li>
<li class="toctree-l2"><a class="reference internal" href="radial_and_axial_expansion.html">11. Radial and Axial Expansion and Contraction</a></li>
<li class="toctree-l2"><a class="reference internal" href="accessingEntryPoints.html">12. Accessing Entry Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="symmetry_handling.html">13. Symmetry Handling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../qa_docs/index.html">QA Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../.apidocs/modules.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #233C5B" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">User Docs</a></li>
      <li class="breadcrumb-item active"><span class="section-number">1. </span>Inputs</li>
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="inputs">
<h1><span class="section-number">1. </span>Inputs<a class="headerlink" href="#inputs" title="Link to this heading"></a></h1>
<p>ARMI input files define the initial state of the reactor model and tell ARMI what kind of analysis should be performed on it.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We have a <a class="reference internal" href="../tutorials/walkthrough_inputs.html#walkthrough-inputs"><span class="std std-ref">Building input files for a fast reactor</span></a> tutorial for a quick overview of the inputs.</p>
</div>
<p>There are several input files:</p>
<dl class="simple">
<dt>Settings file</dt><dd><p>Contains simulation parameters (like full power, cycle length, and which physics modules to activate) and all kind of modeling approximation settings (e.g. convergence criteria)</p>
</dd>
<dt>Blueprints file</dt><dd><p>Contains dimensions and composition of the components/blocks/assemblies in your reactor systems, from fuel pins to heat exchangers</p>
</dd>
<dt>Fuel management file</dt><dd><p>Describes how fuel moves around during a simulation</p>
</dd>
</dl>
<p>Depending on the type of analysis, developers may create other input files for things like: control logic, ex-core models for transients and shielding, etc.</p>
<section id="yaml-files">
<h2><span class="section-number">1.1. </span>YAML Files<a class="headerlink" href="#yaml-files" title="Link to this heading"></a></h2>
<p>ARMI’s input files all use the <a class="reference external" href="https://en.wikipedia.org/wiki/YAML">YAML</a> format. This is a well-known file format, chosen because it is human-readable and easy to hand-write. That being said, there are two details about the YAML format that are important to know:</p>
<dl class="simple">
<dt>Ordering</dt><dd><p>YAML is not order specific; however, one of the techniques used to limit the size of the input includes using YAML anchors to reuse block and component definitions. YAML anchors (e.g. <code class="docutils literal notranslate"><span class="pre">&amp;block_name</span></code>) must be defined before their corresponding alias (e.g. <code class="docutils literal notranslate"><span class="pre">*block_name</span></code>) used.</p>
</dd>
<dt>Duplicate Keys</dt><dd><p>YAML allows for duplicate keys. However, in ARMI, duplicates might be erroneous. Unfortunately, because the international YAML specification allows for duplicates, none of the YAML-parsing libraries see it as an error. You will have to hand-verify your inputs are correct.</p>
</dd>
</dl>
</section>
<section id="the-settings-input-file">
<h2><span class="section-number">1.2. </span>The Settings Input File<a class="headerlink" href="#the-settings-input-file" title="Link to this heading"></a></h2>
<p>The <strong>settings</strong> input file defines a series of key/value pairs the define various information about the system you are modeling as well as which modules to run and various modeling/approximation settings. For example, it includes:</p>
<ul class="simple">
<li><p>The case title</p></li>
<li><p>The reactor power</p></li>
<li><p>The number of cycles to run</p></li>
<li><p>Which physics solvers to activate</p></li>
<li><p>Whether or not to perform a critical control search</p></li>
<li><p>Whether or not to do tight coupling iterations</p></li>
<li><p>What neutronics approximations specific to the chosen physics solver to apply</p></li>
<li><p>Environment settings (paths to external codes)</p></li>
<li><p>How many CPUs to use on a computer cluster</p></li>
</ul>
<p>This file is a YAML file that you can edit manually with a text editor or with the ARMI GUI.</p>
<p>Here is an excerpt from a settings file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">settings</span><span class="p">:</span>
<span class="c1"># global</span>
<span class="w">  </span><span class="nt">availabilityFactor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">  </span><span class="nt">beta</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.003454</span>
<span class="w">  </span><span class="nt">branchVerbosity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug</span>
<span class="w">  </span><span class="nt">buGroups</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">  </span><span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">comment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Simple test input.</span>
<span class="w">  </span><span class="nt">cycleLength</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2000.0</span>
<span class="w">  </span><span class="nt">detailAssemLocationsBOL</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">002-001</span>
<span class="w">  </span><span class="nt">freshFeedType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">igniter fuel</span>
<span class="w">  </span><span class="nt">loadingFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">refSmallReactor.yaml</span>
</pre></div>
</div>
<p>A full listing of settings available in the framework may be found in the
<a class="reference internal" href="#settings-report"><span class="std std-ref">Table of all global settings</span></a> .</p>
<p>Many settings are provided by the ARMI Framework, and others are defined by various plugins.</p>
<section id="the-armi-gui">
<span id="armi-gui"></span><h3><span class="section-number">1.2.1. </span>The ARMI GUI<a class="headerlink" href="#the-armi-gui" title="Link to this heading"></a></h3>
<p>The ARMI GUI may be used to manipulate many common settings (though the GUI can’t change all of the settings). The GUI also enables the graphical manipulation of a reactor core map, and convenient automation of commands required to submit to a cluster. The GUI is a front-end to these files. You can choose to use the GUI or not, ARMI doesn’t know or care – it just reads these files and runs them.</p>
<p>Note that one settings input file is required for each ARMI case, though many ARMI cases can refer to the same Blueprints, Core Map, and Fuel Management inputs.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The ARMI GUI is not yet included in the open-source ARMI framework, but a simple grid editor GUI is, as described in <a class="reference internal" href="#grids"><span class="std std-ref">Grids</span></a></p>
</div>
<section id="the-assembly-clicker">
<h4><span class="section-number">1.2.1.1. </span>The assembly clicker<a class="headerlink" href="#the-assembly-clicker" title="Link to this heading"></a></h4>
<p>The assembly clicker (aka the <a class="reference internal" href="../.apidocs/armi.utils.gridEditor.html#module-armi.utils.gridEditor" title="armi.utils.gridEditor"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">Editor</span></code></a>) allows users to define the 2-D layout of the assemblies defined in the <a class="reference internal" href="#bp-input-file"><span class="std std-ref">The Blueprints Input File</span></a>. This can be done in hexagon or cartesian. The results of this arrangement get written to grids in blueprints. Click on the assembly palette on the right and click on the locations where you want to put the assembly. By default, the input assumes a 1/3 core model, but you can create a full core model through the menu.</p>
<p>If you want one assembly type to fill all positions in a ring, right click it once it is placed and choose <code class="docutils literal notranslate"><span class="pre">Make</span> <span class="pre">ring</span> <span class="pre">like</span> <span class="pre">this</span> <span class="pre">hex</span></code>. Once you submit the job or save the settings file (File -&gt; Save), you will be prompted for a new name of the geometry file before the settings file is saved. The geometry setting in the main tab will also be updated.</p>
</section>
<section id="the-armi-environment-tab">
<h4><span class="section-number">1.2.1.2. </span>The ARMI Environment Tab<a class="headerlink" href="#the-armi-environment-tab" title="Link to this heading"></a></h4>
<p>The environment tab contains important settings about which version of ARMI you will run and with which version of Python, etc. Most important is the <code class="docutils literal notranslate"><span class="pre">ARMI</span> <span class="pre">location</span></code> setting. This points to the codebase that will run. If you want to run the released version of ARMI, ensure that it is set in this setting. If you want to run a developer version, then be sure to update this setting.</p>
<p>Other settings on this tab may need to be updated depending on your computational environment. Talk to your system admins to determine which settings are best.</p>
</section>
</section>
<section id="some-special-settings">
<h3><span class="section-number">1.2.2. </span>Some special settings<a class="headerlink" href="#some-special-settings" title="Link to this heading"></a></h3>
<p>A few settings warrant additional discussion.</p>
<section id="detail-assemblies">
<span id="detail-assems"></span><h4><span class="section-number">1.2.2.1. </span>Detail assemblies<a class="headerlink" href="#detail-assemblies" title="Link to this heading"></a></h4>
<p>Many plugins perform more detailed analysis on certain regions of the reactor. Since the analyses often take longer, ARMI has a feature, called <em>detail assemblies</em> to help. Different plugins may treat detail assemblies differently, so it’s important to read the plugin documentation as well. For example, a depletion plugin may perform pin-level depletion and rotation analysis only on the detail assemblies. Or perhaps CFD thermal/hydraulics will be run on detail assemblies, while subchannel T/H is run on the others.</p>
<p>Detail assemblies are specified by the user in a variety of ways, through the GUI or the settings system.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The Detail Assemblies mechanism has begun to be too broad of a brush for serious multiphysics calculations with each plugin treating them differently. It is likely that this feature will be extended to be more flexible and less surprising in the future.</p>
</div>
<dl class="simple">
<dt>Detail Assembly Locations BOL</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">detailAssemLocationsBOL</span></code> setting is a list of assembly location strings
(e.g. <code class="docutils literal notranslate"><span class="pre">004-003</span></code> for ring 4, position 3). Assemblies that are in these locations at the
beginning-of-life will be activated as detail assemblies.</p>
</dd>
<dt>Detail assembly numbers</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">detailAssemNums</span></code> setting is a list of <code class="docutils literal notranslate"><span class="pre">assemNum</span></code>s that can be inferred from a previous
case and specified, regardless of when the assemblies enter the core. This is useful for
activating detailed treatment of assemblies that enter the core at a later cycle.</p>
</dd>
<dt>Detail all assemblies</dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">detailAllAssems</span></code> setting makes all assemblies in the problem detail assemblies</p>
</dd>
</dl>
</section>
<section id="kinetics-settings">
<span id="id1"></span><h4><span class="section-number">1.2.2.2. </span>Kinetics settings<a class="headerlink" href="#kinetics-settings" title="Link to this heading"></a></h4>
<p>In reactor physics analyses it is standard practice to represent reactivity in either absolute units (i.e., dk/kk’ or pcm) or in dollars or cents. To support this functionality, the framework supplies the <code class="docutils literal notranslate"><span class="pre">beta</span></code> and <code class="docutils literal notranslate"><span class="pre">decayConstants</span></code> settings to apply the delayed neutron fraction and precursor decay constants to the Core parameters during initialization.</p>
<p>These settings come with a few caveats:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">beta</span></code> setting supports two different meanings depending on
the type that is provided. If a single value is given, then this setting
is interpreted as the effective delayed neutron fraction for the
system. If a list of values is provided, then this setting is interpreted
as the group-wise (precursor family) delayed neutron fractions (useful for
reactor kinetics simulations).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">decayConstants</span></code> setting is used to define the precursor
decay constants for each group. When set, it must be
provided with a corresponding <code class="docutils literal notranslate"><span class="pre">beta</span></code> setting that has the
same number of groups. For example, if six-group delayed neutron
fractions are provided, the decay constants must also be provided
in the same six-group structure.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">beta</span></code> is interpreted as the effective delayed neutron fraction for
the system, then the <code class="docutils literal notranslate"><span class="pre">decayConstants</span></code> setting will not be utilized.</p></li>
<li><p>If both the group-wise <code class="docutils literal notranslate"><span class="pre">beta</span></code> and <code class="docutils literal notranslate"><span class="pre">decayConstants</span></code> are provided
and their number of groups are consistent, then the effective delayed
neutron fraction for the system is calculated as the summation of the
group-wise delayed neutron fractions.</p></li>
</ol>
</div></blockquote>
</section>
<section id="cycle-history">
<span id="id2"></span><h4><span class="section-number">1.2.2.3. </span>Cycle history<a class="headerlink" href="#cycle-history" title="Link to this heading"></a></h4>
<p>For all cases, <code class="docutils literal notranslate"><span class="pre">nCycles</span></code> and <code class="docutils literal notranslate"><span class="pre">power</span></code> must be specified by the user. In the case that only a single state is to be examined (i.e. no burnup), the user need only additionally specify <code class="docutils literal notranslate"><span class="pre">nCycles</span> <span class="pre">=</span> <span class="pre">1</span></code>.</p>
<p>In the case of burnup, the reactor cycle history may be specified using either the simple or detailed option. The simple cycle history consists of the following case settings:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">power</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nCycles</span></code> (default = 1)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">burnSteps</span></code> (default = 4)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">availabilityFactor(s)</span></code> (default = 1.0)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cycleLength(s)</span></code> (default = 365.2425)</p></li>
</ul>
</div></blockquote>
<p>In addition, one may optionally use the <code class="docutils literal notranslate"><span class="pre">powerFractions</span></code> setting to change the reactor power between each cycle. With these settings, a user can define a history in which each cycle may vary in power, length, and uptime. The history is restricted, however, to each cycle having a constant power, to each cycle having the same number of burnup nodes, and to those burnup nodes being evenly spaced within each cycle. An example simple cycle history might look like</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">power</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
<span class="w">    </span><span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">    </span><span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">R2</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">powerFractions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">availabilityFactors</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.9</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.3</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.93</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>Note the use of the special shorthand list notation, where repeated values in a list can be specified using an “R” followed by the number of times the value is to be repeated.</p>
<p>The above scheme would represent 3 cycles of operation:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>100% power for 90 days, split into two segments of 45 days each, followed by 10 days shutdown (i.e. 90% capacity)</p></li>
<li><p>50% power for 30 days, split into two segments of 15 days each, followed by 70 days shutdown (i.e. 15% capacity)</p></li>
<li><p>100% power for 93 days, split into two segments of 46.5 days each, followed by 7 days shutdown (i.e. 93% capacity)</p></li>
</ol>
</div></blockquote>
<p>In each cycle, criticality calculations will be performed at 3 nodes evenly-spaced through the uptime portion of the cycle (i.e. <code class="docutils literal notranslate"><span class="pre">availabilityFactor``*``powerFraction</span></code>), without option for changing node spacing or frequency.
This input format can be useful for quick scoping and certain types of real analyses, but clearly has its limitations.</p>
<p>To overcome these limitations, the detailed cycle history, consisting of the <code class="docutils literal notranslate"><span class="pre">cycles</span></code> setting may be specified instead.
For each cycle, an entry to the <code class="docutils literal notranslate"><span class="pre">cycles</span></code> list is made with the following optional fields:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">power</span> <span class="pre">fractions</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumulative</span> <span class="pre">days</span></code>, <code class="docutils literal notranslate"><span class="pre">step</span> <span class="pre">days</span></code>, or <code class="docutils literal notranslate"><span class="pre">burn</span> <span class="pre">steps</span></code> + <code class="docutils literal notranslate"><span class="pre">cycle</span> <span class="pre">length</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">availability</span> <span class="pre">factor</span></code></p></li>
</ul>
</div></blockquote>
<p>An example detailed cycle history employing all of these fields could look like</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">power</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000000</span>
<span class="w">    </span><span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">    </span><span class="nt">cycles</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span>
<span class="w">        </span><span class="nt">step days</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">98</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">power fractions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">availability factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.1</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">B</span>
<span class="w">        </span><span class="nt">cumulative days</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">72</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">78</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">86</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">power fractions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0.2</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">1.0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.95</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.93</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">C</span>
<span class="w">        </span><span class="nt">step days</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">5</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">R5</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">power fractions</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">R5</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cycle length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">        </span><span class="nt">burn steps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="nt">availability factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9</span>
</pre></div>
</div>
<p>Note that repeated values in a list may be again be entered using the shorthand notation for <code class="docutils literal notranslate"><span class="pre">step</span> <span class="pre">days</span></code>, <code class="docutils literal notranslate"><span class="pre">power</span> <span class="pre">fractions</span></code>, and <code class="docutils literal notranslate"><span class="pre">availability</span> <span class="pre">factors</span></code> (though not <code class="docutils literal notranslate"><span class="pre">cumulative</span> <span class="pre">days</span></code> because entries must be monotonically increasing).</p>
<p>Such a scheme would define the following cycles:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A 2 day power ramp followed by full power operations for 98 days, with three nodes clustered during the ramp and another at the end of the cycle, followed by 900 days of shutdown</p></li>
<li><p>A 2 day power ramp followed by a prolonged period at full power and then a slight power reduction for the last 14 days in the cycle</p></li>
<li><p>Constant full-power operation for 30 days split into six even increments</p></li>
<li><p>Constant full-power operation for 90 days, split into two equal-length 45 day segments, followed by 10 days of downtime</p></li>
</ol>
</div></blockquote>
<p>As can be seen, the detailed cycle history option provides much flexibility for simulating realistic operations, particularly power ramps or scenarios that call for unevenly spaced burnup nodes, such as xenon buildup in the early period of thermal reactor operations.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although the detailed cycle history option allows for powers to change within each cycle, it should be noted that the power over each step is still considered to be constant.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> field of the detailed cycle history is not yet used for anything, but this information will still be accessible on the operator during runtime.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cycles without names will be given the name <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When a detailed cycle history is combined with tight coupling, a subclass of <a class="reference internal" href="../.apidocs/armi.physics.neutronics.latticePhysics.latticePhysicsInterface.html#armi.physics.neutronics.latticePhysics.latticePhysicsInterface.LatticePhysicsInterface.interactCoupled" title="armi.physics.neutronics.latticePhysics.latticePhysicsInterface.LatticePhysicsInterface.interactCoupled"><code class="xref py py-meth docutils literal notranslate"><span class="pre">LatticePhysicsInterface.interactCoupled</span></code></a> should be used.</p>
</div>
</section>
<section id="restart-cases">
<span id="id3"></span><h4><span class="section-number">1.2.2.4. </span>Restart cases<a class="headerlink" href="#restart-cases" title="Link to this heading"></a></h4>
<p>Oftentimes the user is interested in re-examining just a specific set of time nodes from an existing run.
In these cases, it is sometimes not necessary to rerun an entire reactor history, and one may instead use one of the following options:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>Snapshot, where the reactor state is loaded from a database and just a single time node is run.</p></li>
<li><p>Restart, where the cycle history is loaded from a database and the calculation continues through the remaining specified time history.</p></li>
</ol>
</div></blockquote>
<p>For either of these options, it is possible to alter the specific settings applied to the run by simply adjusting the case settings for the run.
For instance, a run that originally had only neutronics may incorporate thermal hydraulics during a snapshot run by adding in the relevant TH settings.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For either of these options, it is advisable to first create a new case settings file with a name different than the one from which you will be restarting off of, so as to not overwrite those results.</p>
</div>
<p>To run a snapshot, the following settings must be added to your case settings:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">runType</span></code> to <code class="docutils literal notranslate"><span class="pre">Snapshots</span></code></p></li>
<li><p>Add a list of cycle/node pairs corresponding to the desired snapshots to <code class="docutils literal notranslate"><span class="pre">dumpSnapshot</span></code> formatted as <code class="docutils literal notranslate"><span class="pre">'CCCNNN'</span></code></p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">reloadDBName</span></code> to the existing database file that you would like to load the reactor state from</p></li>
</ul>
</div></blockquote>
<p>An example of a snapshot run input:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Snapshots</span>
<span class="nt">reloadDBName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-old-results.h5</span>
<span class="nt">dumpSnapshot</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&#39;000000&#39;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&#39;001002&#39;</span><span class="p p-Indicator">]</span><span class="w"> </span><span class="c1"># 2 snapshots at BOL and cycle 1-node 2</span>
</pre></div>
</div>
<p>To run a restart, the following settings must be added to your case settings:</p>
<blockquote>
<div><ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">runType</span></code> to <code class="docutils literal notranslate"><span class="pre">Standard</span></code></p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">loadStyle</span></code> to <code class="docutils literal notranslate"><span class="pre">fromDB</span></code></p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">startCycle</span></code> and <code class="docutils literal notranslate"><span class="pre">startNode</span></code> to the cycle/node that you would like to continue the calculation from (inclusive). <code class="docutils literal notranslate"><span class="pre">startNode</span></code> may use negative indexing.</p></li>
<li><p>Set <code class="docutils literal notranslate"><span class="pre">reloadDBName</span></code> to the existing database file from which you would like to load the reactor history up to the restart point</p></li>
<li><p>If you would like to change the specified reactor history (see <a class="reference internal" href="#restart-cases"><span class="std std-ref">Restart cases</span></a>), keep the history up to the restarting cycle/node unchanged, and just alter the history after that point. This means that the cycle history specified in your restart run should include all cycles/nodes up to the end of the simulation. For complicated restarts, it may be necessary to use the detailed <code class="docutils literal notranslate"><span class="pre">cycles</span></code> setting, even if the original case only used the simple history option.</p></li>
</ul>
</div></blockquote>
<p>A few examples of restart cases:</p>
<blockquote>
<div><ul>
<li><dl>
<dt>Restarting a calculation at a specific cycle/node and continuing for the remainder of the originally-specified cycle history:</dt><dd><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># old settings</span>
<span class="nt">settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="w">    </span><span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromInput</span>
<span class="w">    </span><span class="nt">loadingFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-blueprints.yaml</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># restart settings</span>
<span class="nt">settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="w">    </span><span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromDB</span>
<span class="w">    </span><span class="nt">startCycle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">startNode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">reloadDBName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-original-results.h5</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Add an additional cycle to the end of a case:</dt><dd><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># old settings</span>
<span class="nt">settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="w">    </span><span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromInput</span>
<span class="w">    </span><span class="nt">loadingFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-blueprints.yaml</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># restart settings</span>
<span class="nt">settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="w">    </span><span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromDB</span>
<span class="w">    </span><span class="nt">startCycle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">startNode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-1</span>
<span class="w">    </span><span class="nt">reloadDBName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-original-results.h5</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Restart but cut the reactor history short:</dt><dd><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># old settings</span>
<span class="nt">settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">    </span><span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="w">    </span><span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromInput</span>
<span class="w">    </span><span class="nt">loadingFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-blueprints.yaml</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># restart settings</span>
<span class="nt">settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="w">    </span><span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromDB</span>
<span class="w">    </span><span class="nt">startCycle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">startNode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">reloadDBName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-original-results.h5</span>
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Restart with a different number of steps in the third cycle using the detailed <code class="docutils literal notranslate"><span class="pre">cycles</span></code> setting:</dt><dd><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># old settings</span>
<span class="nt">settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">    </span><span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">cycleLengths</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">100</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="w">    </span><span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromInput</span>
<span class="w">    </span><span class="nt">loadingFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-blueprints.yaml</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># restart settings</span>
<span class="nt">settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
<span class="w">    </span><span class="nt">cycles</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cycle length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">        </span><span class="nt">burn steps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cycle length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">        </span><span class="nt">burn steps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cycle length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">        </span><span class="nt">burn steps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="w">    </span><span class="nt">runType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span>
<span class="w">    </span><span class="nt">loadStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fromDB</span>
<span class="w">    </span><span class="nt">startCycle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">startNode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">reloadDBName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-original-results.h5</span>
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">skipCycles</span></code> setting is related to skipping the lattice physics calculation specifically, it is not required to do a restart run.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ISO binary cross section libraries are required to run cases that skip the lattice physics calculation (e.g. MC^2)</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Restarting a calculation with an different version of ARMI than what was used to produce the restarting database may result in undefined behavior.</p>
</div>
</section>
<section id="shuffling">
<h4><span class="section-number">1.2.2.5. </span>Shuffling<a class="headerlink" href="#shuffling" title="Link to this heading"></a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">explicitRepeatShuffles</span></code> setting points to a <code class="docutils literal notranslate"><span class="pre">*-SHUFFLES.txt</span></code> file that records moves from a previous
run for exact repetition.</p>
</div>
<p>Users may also define a custom shuffle plan in a YAML file referenced by the <code class="docutils literal notranslate"><span class="pre">shuffleSequenceFile</span></code> setting. The YAML
format organizes data by cycle in a <code class="docutils literal notranslate"><span class="pre">sequence</span></code> mapping. Keys are the cycle where the shuffling should occur during
the beginning-of-cycle step. The first available cycle where shuffling will occur is cycle 1. Each cycle contains a
list of high-level actions. An action is a  mapping containing one of the keys <code class="docutils literal notranslate"><span class="pre">cascade</span></code>, <code class="docutils literal notranslate"><span class="pre">misloadSwap</span></code>, or
<code class="docutils literal notranslate"><span class="pre">extraRotations</span></code>. <code class="docutils literal notranslate"><span class="pre">cascade</span></code> chains describe a sequence of assembly displacements beginning with a fresh fuel
assembly and ending with the final location’s assembly being discharged. Optional <code class="docutils literal notranslate"><span class="pre">fuelEnrichment</span></code> lists specify the
U235 weight fraction enrichment for each axial block in the fresh assembly, from bottom to top, including zeroes for
non-fuel blocks. <code class="docutils literal notranslate"><span class="pre">misloadSwap</span></code> swaps the assemblies at two locations after all cascades are processed.
<code class="docutils literal notranslate"><span class="pre">extraRotations</span></code> map final location labels to relative counterclockwise angles in degrees and are applied after all
cascades, misload swaps, and any algorithmic rotation routines defined with the <code class="docutils literal notranslate"><span class="pre">assemblyRotationAlgorithm</span></code> setting.
The angle is relative to the assembly’s current orientation and whatever assembly ends up at the given location is
rotated. Valid angles depend on the assembly’s geometry.</p>
<p>Extra rotations therefore:</p>
<ul class="simple">
<li><p>apply to whatever assembly resides at the specified location once all cascades and misload swaps are complete;</p></li>
<li><p>rotate the assembly relative to its current orientation; and</p></li>
<li><p>execute after any algorithmic rotation routines.</p></li>
</ul>
<p>A cascade with no final destination defaults to deleting the assembly. Assemblies can be retained in the model by
ending the cascade with <code class="docutils literal notranslate"><span class="pre">SFP</span></code>. When <code class="docutils literal notranslate"><span class="pre">SFP</span></code> is specified, the discharged assembly is stored in the spent fuel pool
even if the <code class="docutils literal notranslate"><span class="pre">trackAssems</span></code> setting is <code class="docutils literal notranslate"><span class="pre">False</span></code>; <code class="docutils literal notranslate"><span class="pre">Delete</span></code> always removes the assembly from the model.</p>
<p>Assemblies may also be re-inserted from the spent fuel pool by starting a cascade with <code class="docutils literal notranslate"><span class="pre">SFP</span></code> and providing an
<code class="docutils literal notranslate"><span class="pre">assemblyName</span></code> for the assembly to load. No assembly type is required in this case. The cascade then proceeds as
normal from the destination location. For example</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">sequence</span><span class="p">:</span>
<span class="w">  </span><span class="nt">1</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cascade</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;outer</span><span class="nv"> </span><span class="s">fuel&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;009-045&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;008-004&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;SFP&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">fuelEnrichment</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.12</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.14</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.15</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">]</span><span class="w">  </span><span class="c1"># wt fraction U235 by block</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">misloadSwap</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;009-045&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;008-004&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">extraRotations</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="s">&quot;009-045&quot;</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="nv">60</span><span class="p p-Indicator">}</span>
<span class="w">  </span><span class="nt">2</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">cascade</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;outer</span><span class="nv"> </span><span class="s">fuel&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;010-046&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;009-045&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;Delete&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">fuelEnrichment</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">0</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.12</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.14</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0.15</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>A cascade that loads an assembly from the SFP may look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span>  <span class="n">code</span><span class="p">::</span> <span class="n">yaml</span>
</pre></div>
</div>
<blockquote>
<div><dl class="simple">
<dt>sequence:</dt><dd><dl class="simple">
<dt>1:</dt><dd><ul class="simple">
<li><p>cascade: [“SFP”, “005-003”, “SFP”]
assemblyName: “A0073”</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</div></blockquote>
<p>This example retrieves assembly <code class="docutils literal notranslate"><span class="pre">A0073</span></code> from the spent fuel pool and places it in location <code class="docutils literal notranslate"><span class="pre">005-003</span></code> while sending
the previous occupant of <code class="docutils literal notranslate"><span class="pre">005-003</span></code>  to the pool.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Consider using yaml anchors <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> and aliases <code class="docutils literal notranslate"><span class="pre">*</span></code> to reduce repetition.</p>
</div>
<p>For cycle 1 above, the actions execute in the following order:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The assembly originally at <code class="docutils literal notranslate"><span class="pre">008-004</span></code> is discharged to the spent fuel pool <code class="docutils literal notranslate"><span class="pre">SFP</span></code>.</p></li>
<li><p>The assembly originally at <code class="docutils literal notranslate"><span class="pre">009-045</span></code> moves to <code class="docutils literal notranslate"><span class="pre">008-004</span></code>.</p></li>
<li><p>A fresh <code class="docutils literal notranslate"><span class="pre">outer</span> <span class="pre">fuel</span></code> assembly is created with the specified axial enrichment profile and inserted at <code class="docutils literal notranslate"><span class="pre">009-045</span></code>.</p></li>
<li><p>The fresh assembly and the moved assembly at <code class="docutils literal notranslate"><span class="pre">008-004</span></code> are swapped, leaving the fresh assembly at <code class="docutils literal notranslate"><span class="pre">008-004</span></code> and the moved assembly back at <code class="docutils literal notranslate"><span class="pre">009-045</span></code>.</p></li>
<li><p>The assembly now at <code class="docutils literal notranslate"><span class="pre">009-045</span></code> is rotated an additional 60 degrees counterclockwise.</p></li>
</ol>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The restart.dat file is required to repeat the exact fuel management methods during a branch search. These can potentially modify the reactor state in ways that cannot be captures with the SHUFFLES.txt file.</p>
</div>
</section>
<section id="zones">
<h4><span class="section-number">1.2.2.6. </span>Zones<a class="headerlink" href="#zones" title="Link to this heading"></a></h4>
<p>Zones are a collection of assemblies that share some similar characteristics. A zone might be those assemblies with
a similar orrificing pattern or a some subset of fuel assemblies. Some codes may wish to study behavior by lumping the
reactor into a few channels with bulk or aggregated properties. Users can collect assemblies in each of these channels
through the <code class="xref py py-attr docutils literal notranslate"><span class="pre">zones</span></code> attribute on the core. See also the
<a class="reference internal" href="../.apidocs/armi.reactor.zones.html#armi.reactor.zones.Zones" title="armi.reactor.zones.Zones"><code class="xref py py-class docutils literal notranslate"><span class="pre">Zones</span></code></a> class.</p>
<p>Users can define these zones with the <code class="docutils literal notranslate"><span class="pre">zonesFile</span></code> setting. It must point to YAML file that contains the high-level key
<code class="docutils literal notranslate"><span class="pre">customZonesMap</span></code> containing a map of <code class="docutils literal notranslate"><span class="pre">location:</span> <span class="pre">zone</span></code> maps.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">customZonesMap</span><span class="p">:</span>
<span class="w">  </span><span class="nt">001-001</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">primary control</span>
<span class="w">  </span><span class="nt">002-001</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fuel z0</span>
<span class="w">  </span><span class="nt">003-001</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fuel z0</span>
<span class="w">  </span><span class="nt">004-001</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fuel z1</span>
<span class="w">  </span><span class="nt">004-002</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">secondary control</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">location</span></code> keys are the ARMI ring-position assembly identifier. It is not required to have every assembly
be inside a zone. But assemblies not listed will not be added to any zone, i.e., there is no default zone.</p>
<p>This example would produce four zones:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">primary</span> <span class="pre">control</span></code> containing the center assembly at <code class="docutils literal notranslate"><span class="pre">001-001</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fuel</span> <span class="pre">z0</span></code> containing two fuel assemblies: <code class="docutils literal notranslate"><span class="pre">002-001</span></code> and <code class="docutils literal notranslate"><span class="pre">003-001</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fuel</span> <span class="pre">z1</span></code> containing one fuel assembly: <code class="docutils literal notranslate"><span class="pre">004-001</span></code>, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">secondary</span> <span class="pre">control</span></code> containing the assembly at <code class="docutils literal notranslate"><span class="pre">004-002</span></code>.</p></li>
</ol>
<p>An alternative method is with the <code class="docutils literal notranslate"><span class="pre">zoneDefinitions</span></code> setting in the primary settings file. This contains a list of
zone names and the assemblies that make up that zone. The following would create an identical zone structure as above.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">zoneDefinitions</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;primary</span><span class="nv"> </span><span class="s">control:</span><span class="nv"> </span><span class="s">001-001&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;fuel</span><span class="nv"> </span><span class="s">z0:</span><span class="nv"> </span><span class="s">002-001,</span><span class="nv"> </span><span class="s">003-001&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;fuel</span><span class="nv"> </span><span class="s">z1:</span><span class="nv"> </span><span class="s">004-001&quot;</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;secondary</span><span class="nv"> </span><span class="s">control:</span><span class="nv"> </span><span class="s">004-002&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These are list of strings, not additional maps. Wrapping in quotations is required to process the zone definitions.</p>
</div>
<p>These zones will be populated according to the <a class="reference internal" href="../.apidocs/armi.reactor.cores.html#armi.reactor.cores.Core.buildManualZones" title="armi.reactor.cores.Core.buildManualZones"><code class="xref py py-meth docutils literal notranslate"><span class="pre">buildManualZones()</span></code></a> core method.</p>
</section>
</section>
</section>
<section id="the-blueprints-input-file">
<span id="bp-input-file"></span><h2><span class="section-number">1.3. </span>The Blueprints Input File<a class="headerlink" href="#the-blueprints-input-file" title="Link to this heading"></a></h2>
<p>The <strong>blueprints</strong> input defines the dimensions of structures in the reactor, as well as their material makeup. In a typical case, pin dimensions, isotopic composition, control definitions, coolant type, etc. are defined here. The specifics of each assembly type are then overlaid, possibly including enrichment distributions and other material modifications.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the <a class="reference internal" href="../.apidocs/armi.reactor.blueprints.html#module-armi.reactor.blueprints" title="armi.reactor.blueprints"><code class="xref py py-mod docutils literal notranslate"><span class="pre">blueprints</span></code></a> module for implementation and more detail.</p>
</div>
<p>This input file is formatted using <a class="reference external" href="https://en.wikipedia.org/wiki/YAML">YAML</a>, which allows text-based change tracking for design control. ARMI does not have a blueprints-editing GUI yet, but may in the future.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can point many ARMI runs to the same Blueprints input file using full paths in <code class="docutils literal notranslate"><span class="pre">loadingFile</span></code> setting.</p>
</div>
<p>ARMI adds an <code class="docutils literal notranslate"><span class="pre">!include</span></code> YAML tag, which can be used to include the contents of an external YAML file in any part of a blueprints file. The can be useful for sharing core or assembly pin layouts amongst multiple cases. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>grids:
    core: !include path/to/core_grid.yaml
</pre></div>
</div>
<p>Would have the effect of copy-pasting the contents of <code class="docutils literal notranslate"><span class="pre">path/to/core_grid.yaml</span></code> into the main blueprints file. The rules that ARMI uses to handle things like indentation of the included text are usually rather intuitive, but sometimes it can be useful to witness the behavior first-hand. The <code class="docutils literal notranslate"><span class="pre">expand-bp</span></code> command can be used to do a dry run for testing inputs with !includes.</p>
<p>ARMI models are built hierarchically, first by defining components, and then by larger and larger collections of the levels of the reactor.</p>
<section id="blueprint-sections">
<h3><span class="section-number">1.3.1. </span>Blueprint sections<a class="headerlink" href="#blueprint-sections" title="Link to this heading"></a></h3>
<p>The <strong>blueprints</strong> input file has several sections that corresponds to different levels of the reactor
hierarchy. You will generally build inputs “bottoms up”, first by defining elementary pieces (like pins)
and then collecting them into the core and reactor.</p>
<p>The ARMI data model is represented schematically below, and the blueprints are defined accordingly:</p>
<figure class="align-center" id="id13">
<img alt="../_images/armi_reactor_objects.png" src="../_images/armi_reactor_objects.png" />
<figcaption>
<p><span class="caption-text">The primary data containers in ARMI</span><a class="headerlink" href="#id13" title="Link to this image"></a></p>
</figcaption>
</figure>
<dl class="simple">
<dt><a class="reference internal" href="#blocks-and-components"><span class="std std-ref">blocks</span></a>:</dt><dd><p>Defines <a class="reference internal" href="../.apidocs/armi.reactor.components.component.html#armi.reactor.components.component.Component" title="armi.reactor.components.component.Component"><code class="xref py py-class docutils literal notranslate"><span class="pre">Component</span></code></a> inputs for a
<a class="reference internal" href="../.apidocs/armi.reactor.blocks.html#armi.reactor.blocks.Block" title="armi.reactor.blocks.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">Block</span></code></a>.</p>
</dd>
<dt><a class="reference internal" href="#assemblies"><span class="std std-ref">assemblies</span></a>:</dt><dd><p>Defines vertical stacks of blocks used to define the axial profile of an
<a class="reference internal" href="../.apidocs/armi.reactor.assemblies.html#armi.reactor.assemblies.Assembly" title="armi.reactor.assemblies.Assembly"><code class="xref py py-class docutils literal notranslate"><span class="pre">Assembly</span></code></a>.</p>
</dd>
<dt><a class="reference internal" href="#systems"><span class="std std-ref">systems</span></a>:</dt><dd><p>Reactor-level structures like the core, the spent fuel pool, pumps, the head, etc.</p>
</dd>
<dt><a class="reference internal" href="#grids"><span class="std std-ref">grids</span></a>:</dt><dd><p>Lattice definitions for the core map or pin maps</p>
</dd>
<dt><a class="reference internal" href="#nuclide-flags"><span class="std std-ref">nuclide flags</span></a>:</dt><dd><p>Special setting: Specifies nuclide modeling options, whether a nuclide is being modeled for cross sections and/or
depletion. For instance, it allows you to ignore nuclides above Curium for depletion speed.
This also allows you to expand elements to a subset of nuclides. For example, you can
choose to expand Oxygen to just Oxygen-16 and neglect Oxygen-17 and 18.</p>
</dd>
<dt><a class="reference internal" href="#custom-isotopics"><span class="std std-ref">custom isotopics</span></a>:</dt><dd><p>Special setting: defines user-specified isotopic compositions.</p>
</dd>
</dl>
<p>The core map input files can be graphically manipulated with the
<a class="reference internal" href="../.apidocs/armi.utils.gridEditor.html#module-armi.utils.gridEditor" title="armi.utils.gridEditor"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">editor</span></code></a>.</p>
</section>
<section id="blocks-and-components">
<span id="id5"></span><h3><span class="section-number">1.3.2. </span>Blocks and Components<a class="headerlink" href="#blocks-and-components" title="Link to this heading"></a></h3>
<p>Blocks and components are defined together in the <strong>blueprints</strong> input.</p>
<p>We will start with a component, and then define the whole <code class="docutils literal notranslate"><span class="pre">blocks:</span></code> input. The structure will be something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blocks</span><span class="p">:</span>
    <span class="n">block</span> <span class="n">name</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">component</span> <span class="n">name</span> <span class="mi">1</span><span class="p">:</span>
            <span class="o">...</span>
        <span class="n">component</span> <span class="n">name</span> <span class="mi">2</span><span class="p">:</span>
    <span class="n">block</span> <span class="n">name</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">component</span> <span class="n">name</span> <span class="mi">1</span><span class="p">:</span>
            <span class="o">...</span>
        <span class="n">component</span> <span class="n">name</span> <span class="mi">2</span><span class="p">:</span>
            <span class="o">...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also define components at the top level of the blueprints file under the <code class="docutils literal notranslate"><span class="pre">components:</span></code> top level
section, but bringing anything defined there into the reactor model must currently be done programmatically. We are
currently developing additional input capabilities to use these more flexibly.</p>
<p>Associated with this is a <code class="docutils literal notranslate"><span class="pre">component</span> <span class="pre">groups:</span></code> section which can collect different free components with different
volume fractions. This also is not fully implemented yet.</p>
</div>
<section id="defining-a-component">
<h4><span class="section-number">1.3.2.1. </span>Defining a Component<a class="headerlink" href="#defining-a-component" title="Link to this heading"></a></h4>
<p>The <strong>Components</strong> section defines the pin (if modeling a pin-type reactor) and assembly in-plane dimensions (axial
dimensions are defined in the <a class="reference internal" href="#assemblies"><span class="std std-ref">Assemblies</span></a> input) and the material makeups of each
<a class="reference internal" href="../.apidocs/armi.reactor.components.html#module-armi.reactor.components" title="armi.reactor.components"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Component</span></code></a>. <a class="reference internal" href="../.apidocs/armi.reactor.blocks.html#module-armi.reactor.blocks" title="armi.reactor.blocks"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Blocks</span></code></a> are defined here as collections
of geometric components that have specific temperatures, dimensions, material properties, and isotopic compositions.</p>
<p>An component may be defined as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fuel</span><span class="p">:</span>
    <span class="n">shape</span><span class="p">:</span> <span class="n">Circle</span>
    <span class="n">material</span><span class="p">:</span> <span class="n">UZr</span>
    <span class="n">Tinput</span><span class="p">:</span> <span class="mf">20.0</span>
    <span class="n">Thot</span><span class="p">:</span> <span class="mf">450.0</span>
    <span class="n">mult</span><span class="p">:</span> <span class="mi">169</span>
    <span class="nb">id</span><span class="p">:</span> <span class="mf">0.0</span>
    <span class="n">od</span><span class="p">:</span> <span class="mf">0.757</span>
</pre></div>
</div>
<p>Here we have provided the following information:</p>
<dl class="simple">
<dt>Component name</dt><dd><p>The component name (<code class="docutils literal notranslate"><span class="pre">fuel</span></code>) is specified at the top. Some physics kernels interpret names specially, so
pay attention to any naming conventions. As a general rule, you can expect that people will be doing regex
on your name, so you should not use any of these characters in your component names:
<code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">^</span> <span class="pre">$</span> <span class="pre">*</span> <span class="pre">+</span> <span class="pre">?</span> <span class="pre">{</span> <span class="pre">}</span> <span class="pre">[</span> <span class="pre">]</span> <span class="pre">\</span> <span class="pre">|</span> <span class="pre">(</span> <span class="pre">)</span> <span class="pre">:</span></code>.</p>
</dd>
<dt>shape</dt><dd><p>The shape will be extruded to the length specified in the <code class="docutils literal notranslate"><span class="pre">assemblies</span></code> input section below. ARMI contains
a variety of built-in simple shapes, and plugins can define their own design-specific/proprietary shapes.</p>
</dd>
<dt>material</dt><dd><p>The material links the component to a certain set of thermo-physical properties (e.g. temperature-dependent thermal
expansion coefficients, density, thermal conductivity, etc., which are used in the various physics kernels.
Natural isotopic composition is determined from this material specification as well (unless custom isotopics are
supplied). The entry here should either be a class name of a valid material (<code class="docutils literal notranslate"><span class="pre">UZr</span></code>) or a <code class="docutils literal notranslate"><span class="pre">module:className</span></code> pair
for specifying specific material (e.g. <code class="docutils literal notranslate"><span class="pre">armi.materials.uZr:UZr</span></code>).
Materials are handled through the <a class="reference internal" href="../.apidocs/armi.materials.html#module-armi.materials" title="armi.materials"><code class="xref py py-mod docutils literal notranslate"><span class="pre">material</span> <span class="pre">library</span></code></a>.</p>
</dd>
<dt>T<sub>input</sub></dt><dd><p>The temperature (in C) that corresponds to the input dimensions given here. This facilitates automatic thermal
expansion.</p>
</dd>
<dt>T<sub>hot</sub></dt><dd><p>The temperature (in C) that the component dimensions will be thermal expanded to (using material properties based on
the <code class="docutils literal notranslate"><span class="pre">material</span></code> input). To disable automatic thermal expansion, set T<sub>input</sub> and T<sub>hot</sub> both to the same value</p>
</dd>
<dt>mult</dt><dd><p>Multiplicity specifies how many duplicates of this component exist in this block. If you want 169 pins per assembly,
this would be 169. This does not explicitly describe the location of the pins. Note that many fast-neutron systems
only need volume fractions, not precise spatial locations, at least for pre-conceptual/simple studies.</p>
</dd>
<dt>id</dt><dd><p>Inner diameter (in cm). Each shape has different required input dimension keys. For annulus, set id to non-zero.</p>
</dd>
<dt>od</dt><dd><p>Outer diameter (in cm).</p>
</dd>
</dl>
</section>
<section id="component-types">
<span id="componenttypes"></span><h4><span class="section-number">1.3.2.2. </span>Component Types<a class="headerlink" href="#component-types" title="Link to this heading"></a></h4>
<p>Each component has a variety of dimensions to define the shape and composition. All dimensions are in cm. The following
is a list of included component shapes and their dimension inputs. Again, additional/custom components with arbitrary
dimensions may be provided by the user via plugins.</p>
<div class="docutils container">
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 27.8%" />
<col style="width: 72.2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Component Name</p></th>
<th class="head"><p>Dimensions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Component</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ShapedComponent</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Circle</p></td>
<td><p>od, id, mult, modArea</p></td>
</tr>
<tr class="row-odd"><td><p>Hexagon</p></td>
<td><p>op, ip, mult, modArea</p></td>
</tr>
<tr class="row-even"><td><p>Rectangle</p></td>
<td><p>lengthOuter, lengthInner, widthOuter, widthInner, mult, modArea</p></td>
</tr>
<tr class="row-odd"><td><p>SolidRectangle</p></td>
<td><p>lengthOuter, widthOuter, mult, modArea</p></td>
</tr>
<tr class="row-even"><td><p>Square</p></td>
<td><p>widthOuter, widthInner, mult, modArea</p></td>
</tr>
<tr class="row-odd"><td><p>Triangle</p></td>
<td><p>base, height, mult, modArea</p></td>
</tr>
<tr class="row-even"><td><p>HoledHexagon</p></td>
<td><p>op, holeOD, nHoles, holeRadFromCenter, mult, modArea</p></td>
</tr>
<tr class="row-odd"><td><p>HexHoledCircle</p></td>
<td><p>od, holeOP, mult, modArea</p></td>
</tr>
<tr class="row-even"><td><p>FilletedHexagon</p></td>
<td><p>op, ip, iR, oR, mult, modArea</p></td>
</tr>
<tr class="row-odd"><td><p>HoledRectangle</p></td>
<td><p>holeOD, lengthOuter, widthOuter, mult, modArea</p></td>
</tr>
<tr class="row-even"><td><p>HoledSquare</p></td>
<td><p>holeOD, widthOuter, mult, modArea</p></td>
</tr>
<tr class="row-odd"><td><p>Helix</p></td>
<td><p>od, axialPitch, helixDiameter, mult, id, modArea</p></td>
</tr>
<tr class="row-even"><td><p>Sphere</p></td>
<td><p>od, id, mult, modArea</p></td>
</tr>
<tr class="row-odd"><td><p>Cube</p></td>
<td><p>lengthOuter, lengthInner, widthOuter, widthInner, heightOuter, heightInner, mult, modArea</p></td>
</tr>
<tr class="row-even"><td><p>RadialSegment</p></td>
<td><p>inner_radius, outer_radius, height, mult, inner_theta, outer_theta</p></td>
</tr>
<tr class="row-odd"><td><p>DifferentialRadialSegment</p></td>
<td><p>inner_radius, radius_differential, inner_axial, height, inner_theta, azimuthal_differential, mult</p></td>
</tr>
<tr class="row-even"><td><p>NullComponent</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>UnshapedComponent</p></td>
<td><p>modArea</p></td>
</tr>
<tr class="row-even"><td><p>UnshapedVolumetricComponent</p></td>
<td><p>op, volume</p></td>
</tr>
<tr class="row-odd"><td><p>ZeroMassComponent</p></td>
<td><p>op, volume</p></td>
</tr>
<tr class="row-even"><td><p>PositiveOrNegativeVolumeComponent</p></td>
<td><p>op, volume</p></td>
</tr>
<tr class="row-odd"><td><p>DerivedShape</p></td>
<td><p>modArea</p></td>
</tr>
</tbody>
</table>
</div>
<p>When a <code class="docutils literal notranslate"><span class="pre">DerivedShape</span></code> is specified as the final component in a block, its area is inferred from the difference
between the area of the block and the sum of the areas comprised by the other components in the block. This is useful
for complex shapes like coolant surrounding a lattice of pins.</p>
</section>
<section id="component-links">
<span id="componentlinks"></span><h4><span class="section-number">1.3.2.3. </span>Component Links<a class="headerlink" href="#component-links" title="Link to this heading"></a></h4>
<p>Dimensions of a component may depend on the dimensions of a previously-defined component in the same block. For
instance, the sodium bond between fuel and cladding. The format is simply <code class="docutils literal notranslate"><span class="pre">&lt;componentName&gt;.&lt;dimensionName&gt;</span></code>. The
dimension names are available in the table above.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blocks</span><span class="p">:</span>
    <span class="n">fuel</span><span class="p">:</span>                       <span class="c1"># block name</span>
        <span class="n">fuel</span><span class="p">:</span>                   <span class="c1"># component name</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Circle</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">UZr</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="nb">id</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">isotopics</span><span class="p">:</span> <span class="n">LABEL1</span>
            <span class="n">mult</span><span class="p">:</span> <span class="mf">169.0</span>
            <span class="n">od</span><span class="p">:</span> <span class="mf">0.757</span>
        <span class="n">bond</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Circle</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">Sodium</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">450.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">450.0</span>
            <span class="n">mult</span><span class="p">:</span> <span class="n">fuel</span><span class="o">.</span><span class="n">mult</span>
            <span class="nb">id</span><span class="p">:</span> <span class="n">fuel</span><span class="o">.</span><span class="n">od</span>         <span class="c1"># bond is connected to the outside of fuel</span>
            <span class="n">od</span><span class="p">:</span> <span class="n">clad</span><span class="o">.</span><span class="n">id</span>         <span class="c1"># and the inside of the clad</span>
        <span class="n">clad</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Circle</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">HT9</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">450.0</span>
            <span class="nb">id</span><span class="p">:</span> <span class="mf">0.905</span>
            <span class="n">mult</span><span class="p">:</span> <span class="n">fuel</span><span class="o">.</span><span class="n">mult</span>
            <span class="n">od</span><span class="p">:</span> <span class="mf">1.045</span>
</pre></div>
</div>
<p>Linked component dimensions (such as <code class="docutils literal notranslate"><span class="pre">bond.id</span></code> being linked to <code class="docutils literal notranslate"><span class="pre">fuel.od</span></code>) remain linked
as dimensions change. For example when the above defined fuel is expanded from cold temperature of
25 to the hot temperature of 600 the <code class="docutils literal notranslate"><span class="pre">bond.id</span></code> will still be whatever the <code class="docutils literal notranslate"><span class="pre">fuel.od</span></code> is. This can
result in the displacement of material. For example, in the above case, if the fuel expansion
removes more cross sectional area than the clad expansion creates, the amount of thermal bond will be
reduced. This is physical since, in reality, the fluid would be displaced as dimensions
change.</p>
</section>
<section id="pin-lattices">
<h4><span class="section-number">1.3.2.4. </span>Pin lattices<a class="headerlink" href="#pin-lattices" title="Link to this heading"></a></h4>
<p>Pin lattices may be explicitly defined in the block/component input in conjunction with the <code class="docutils literal notranslate"><span class="pre">grids</span></code> input section. A
block may assigned a grid name, and then each component may be assigned one or more grid specifiers.</p>
<p>For example, the following input section specifies that fuel pins will occupy all grid positions
marked with a <code class="docutils literal notranslate"><span class="pre">1</span></code> and cladding components will occupy all grid positions marked with either
a <code class="docutils literal notranslate"><span class="pre">1</span></code> or a <code class="docutils literal notranslate"><span class="pre">2</span></code>. This situation may be desirable when some burnable poison pins use the same
cladding as the fuel pins.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blocks</span><span class="p">:</span>
    <span class="n">fuel</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">block_fuel</span>
        <span class="n">grid</span> <span class="n">name</span><span class="p">:</span> <span class="n">fuelgrid</span>
        <span class="n">fuel</span><span class="p">:</span>
            <span class="n">flags</span><span class="p">:</span> <span class="n">fuel</span> <span class="n">test</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Circle</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">UZr</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="nb">id</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">mult</span><span class="p">:</span> <span class="mf">169.0</span>
            <span class="n">od</span><span class="p">:</span> <span class="mf">0.86602</span>
            <span class="n">latticeIDs</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">clad</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Circle</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">HT9</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">470.0</span>
            <span class="nb">id</span><span class="p">:</span> <span class="mf">1.0</span>
            <span class="n">mult</span><span class="p">:</span> <span class="n">fuel</span><span class="o">.</span><span class="n">mult</span>
            <span class="n">od</span><span class="p">:</span> <span class="mf">1.09</span>
            <span class="n">latticeIDs</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A <code class="docutils literal notranslate"><span class="pre">grid</span></code> with the name <code class="docutils literal notranslate"><span class="pre">fuelgrid</span></code> must be defined as well in the grid input section.</p>
</div>
</section>
</section>
<section id="flags-and-naming">
<span id="naming-flags"></span><h3><span class="section-number">1.3.3. </span>Flags and naming<a class="headerlink" href="#flags-and-naming" title="Link to this heading"></a></h3>
<p>All objects in the ARMI Reactor Model possess a set of
<a class="reference internal" href="../.apidocs/armi.reactor.flags.html#armi.reactor.flags.Flags" title="armi.reactor.flags.Flags"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.reactor.flags.Flags</span></code></a>, which can be used to affect the way that the
various physics kernels treat each object. Most flags are named after common reactor
components, like <code class="docutils literal notranslate"><span class="pre">FUEL</span></code>, or <code class="docutils literal notranslate"><span class="pre">CLAD</span></code>, and are used to declare <cite>what something is</cite> in the
reactor model. Various physics or other framework operations can then be
parameterized to target specific types of things. For instance, the fuel handling code
can infer that blocks with the <code class="docutils literal notranslate"><span class="pre">GRID_PLATE</span></code> flag should be considered stationary and
not move them with the rest of the block stack in an assembly.</p>
<p>Historically, flags have also been used to describe directly <cite>what should be done</cite> with
an object in the reactor model. For instance, an object with the <code class="docutils literal notranslate"><span class="pre">DEPLETABLE</span></code> flag set
will participate in isotopic depletion analysis, whereas objects without the
<code class="docutils literal notranslate"><span class="pre">DEPLETION</span></code> flag set will not. This has led to a lot of confusion, as the meaning of
various flags is buried deep within the code, and can conflict from place to place. We
are trying to align around a <cite>what something is</cite> interpretation, and bind those to
specific behaviors with settings. For more details, see <a class="reference internal" href="../.apidocs/armi.reactor.flags.html#module-armi.reactor.flags" title="armi.reactor.flags"><code class="xref py py-mod docutils literal notranslate"><span class="pre">armi.reactor.flags</span></code></a>.</p>
<p>The set of specific flags that should be set on an object can be specified in one of two
ways for each object defined in the blueprints. The most precise way is to use include a
<code class="docutils literal notranslate"><span class="pre">flags:</span></code> entry for the object blueprint in question. In the example above, the
<code class="docutils literal notranslate"><span class="pre">fuel</span></code> component sets the <code class="docutils literal notranslate"><span class="pre">FUEL</span></code> and <code class="docutils literal notranslate"><span class="pre">TEST</span></code> flags. When specifying flags in this
way, the value specified must be completely and unambiguously convertible into valid
Flags. If it cannot, it will lead to an error when constructing the object.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">flags:</span></code> is empty, or not specified, then the name of the object blueprint will be
used to infer as many flags as possible. In the above example, the <code class="docutils literal notranslate"><span class="pre">clad</span></code> component
will get the <code class="docutils literal notranslate"><span class="pre">CLAD</span></code> flag from its name.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Additional flags may be specified from plugins, but this should be done with care; see the
<a class="reference internal" href="../.apidocs/armi.reactor.flags.html#module-armi.reactor.flags" title="armi.reactor.flags"><code class="xref py py-mod docutils literal notranslate"><span class="pre">armi.reactor.flags</span></code></a> module and <a class="reference internal" href="../.apidocs/armi.plugins.html#armi.plugins.ArmiPlugin.defineFlags" title="armi.plugins.ArmiPlugin.defineFlags"><code class="xref py py-meth docutils literal notranslate"><span class="pre">armi.plugins.ArmiPlugin.defineFlags()</span></code></a> plugin hook for more details.</p>
</div>
</section>
<section id="assemblies">
<span id="id6"></span><h3><span class="section-number">1.3.4. </span>Assemblies<a class="headerlink" href="#assemblies" title="Link to this heading"></a></h3>
<p>Once components and blocks are defined, Assemblies can be created as extruded stacks of blocks from bottom to top. The
assemblies use YAML anchors to refer to the blocks defined in the previous section.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We aren’t happy with the use of anchors to refer to blocks, and plan to change it (back) to just using the
block names directly. However, the use of anchors for input to be applied to multiple assemblies (e.g. heights) is
quite nice.</p>
</div>
<p>A complete definition of an inner-core assembly may be seen below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">assemblies</span><span class="p">:</span>
    <span class="n">heights</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">standard_heights</span> <span class="p">[</span><span class="mf">10.05</span><span class="p">,</span> <span class="mf">20.10</span><span class="p">,</span> <span class="mf">30.15</span><span class="p">,</span> <span class="mf">20.10</span><span class="p">,</span> <span class="mf">20.10</span><span class="p">,</span> <span class="mf">30.15</span><span class="p">]</span>
    <span class="n">axial</span> <span class="n">mesh</span> <span class="n">points</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">standard_axial_mesh_points</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
    <span class="n">inner</span> <span class="n">core</span><span class="p">:</span>
        <span class="n">specifier</span><span class="p">:</span> <span class="n">IC</span>
        <span class="n">blocks</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">inner_core_blocks</span> <span class="p">[</span><span class="o">*</span><span class="n">block_shield</span><span class="p">,</span> <span class="o">*</span><span class="n">block_fuel</span><span class="p">,</span> <span class="o">*</span><span class="n">block_fuel</span><span class="p">,</span> <span class="o">*</span><span class="n">block_fuel</span><span class="p">,</span> <span class="o">*</span><span class="n">block_fuel</span><span class="p">,</span> <span class="o">*</span><span class="n">block_plenum</span><span class="p">]</span>
        <span class="n">height</span><span class="p">:</span> <span class="o">*</span><span class="n">standard_heights</span>
        <span class="n">axial</span> <span class="n">mesh</span> <span class="n">points</span><span class="p">:</span> <span class="o">*</span><span class="n">standard_axial_mesh_points</span>
        <span class="n">hotChannelFactors</span><span class="p">:</span> <span class="n">TWRPclad</span>
        <span class="n">material</span> <span class="n">modifications</span><span class="p">:</span>
            <span class="n">U235_wt_frac</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.002</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
            <span class="n">ZR_wt_frac</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">]</span>
        <span class="n">nozzleType</span><span class="p">:</span> <span class="n">Inner</span>
        <span class="n">xs</span> <span class="n">types</span><span class="p">:</span> <span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">,</span> <span class="n">E</span><span class="p">,</span> <span class="n">F</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While component dimensions are entered as cold dimensions, axial heights may be entered as
either cold or hot dimensions. In older versions of ARMI, it was required to enter heights
in the hot dimension (this behavior is preserved by setting <cite>inputHeightsConsideredHot: True</cite>).
However, with the
<code class="xref py py-class docutils literal notranslate"><span class="pre">axial</span> <span class="pre">expansion</span> <span class="pre">changer</span></code>,
heights may be entered at cold temperatures (<cite>inputHeightsConsideredHot: False</cite>). Each Assembly will then
be expanded to its hot dimensions upon construction.</p>
</div>
<p>For many cases, a shared height and axial mesh point definition is sufficient. These can be included globally as shown
above and linked with anchors, or specified explicitly.</p>
<dl>
<dt>specifier</dt><dd><p>The Geometry Assembly Specifier, which is a two-letter ID, such as “IC” (for inner core), “SH”
(for shield), etc. correspond with labels in the geometry input file that is created by the GUI
hex dragger.</p>
</dd>
<dt>xs types</dt><dd><p>The <strong>cross-section type</strong> is usually a single capital letter that identifies which cross section
(XS) set will be applied to the block. Each cross section set must be defined for at least one
block with fissile fuel. When the lattice physics code executes in ARMI, it determines the
representative blocks from each cross section type and burnup group and runs it to create the
cross section set for all blocks of the same type and in the same burnup group. Generally, it is
best to set blocks that have much different compositions to have separate cross section types. The
tradeoff is that the more XS types you define, the more CPU time the case will take to run.</p>
<p>Representing xsType by a single capital letter (A-Z) or number (0-9) limits users to 36 groups. So ARMI
will allow 2-letter xsType designations if and only if the <code class="docutils literal notranslate"><span class="pre">buGroups</span></code> setting has length 1 (i.e. no burnup groups are defined). This is useful for high-fidelity XS modeling.</p>
<p>ARMI is able to use lower-case letters (a-z) for an additional 26 cross section groups, but this
should only be done when working on a case-sensitive file system. On a case-insensitive file system
(Windows, and some MacOS systems) this could cause unpredictable errors.</p>
</dd>
<dt>axial mesh points</dt><dd><p>Blocks will be broken up into this many uniform mesh points in the deterministic neutronics
solvers (e.g. DIF3D). This allows you to define large blocks that have multiple flux points within
them. You have to keep the neutronic mesh somewhat uniform in order to maintain numerical
stability of the solvers. It is important to note that the axial mesh must be uniform throughout
the core for many physics kernels, so be sure all block interfaces are consistent among all
assemblies in the core. Blocks deplete and get most state variables on the block mesh defined by
the height specification. Provisions for multiple meshes for different physics are being planned.</p>
</dd>
<dt>hotChannelFactors</dt><dd><p>A label to define which set of hot channel factors (HCFs) get applied to
this block in the thermal/hydraulic calculations. There are various valid sets included with ARMI.</p>
</dd>
<dt>nozzleType</dt><dd><p>This is a string that identifies what type of inlet nozzle an assembly has. This parameter could
be used in an implementation of a thermal-hydraulics solver with flow orificing to apply
different pressure loss coefficients and/or flow rates to different types of assemblies.</p>
</dd>
<dt>material modifications</dt><dd><p>These are a variety of modifications that are made to the
materials in blocks in these locations. It may include the fuel enrichment (mass frac.), poison
enrichment (mass frac.), zirconium mass frac, and any additional options required to fully define
the material loaded in the component. The material definitions in the material library define
valid modifications for them.</p>
<div class="docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Material Name</p></th>
<th class="head"><p>Available Modifications</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>B4C</p></td>
<td><p>B10_wt_frac, theoretical_density, TD_frac</p></td>
</tr>
<tr class="row-odd"><td><p>FuelMaterial</p></td>
<td><p>class1_custom_isotopics, class2_custom_isotopics, class1_wt_frac, customIsotopics</p></td>
</tr>
<tr class="row-even"><td><p>Lithium</p></td>
<td><p>LI_wt_frac, LI6_wt_frac</p></td>
</tr>
<tr class="row-odd"><td><p>Sulfur</p></td>
<td><p>sulfur_density_frac, TD_frac</p></td>
</tr>
<tr class="row-even"><td><p>ThU</p></td>
<td><p>U233_wt_frac, class1_custom_isotopics, class2_custom_isotopics, class1_wt_frac, customIsotopics</p></td>
</tr>
<tr class="row-odd"><td><p>Thorium</p></td>
<td><p>class1_custom_isotopics, class2_custom_isotopics, class1_wt_frac, customIsotopics, class1_custom_isotopics, class2_custom_isotopics, class1_wt_frac, customIsotopics</p></td>
</tr>
<tr class="row-even"><td><p>ThoriumOxide</p></td>
<td><p>TD_frac, class1_custom_isotopics, class1_wt_frac, class2_custom_isotopics, customIsotopics</p></td>
</tr>
<tr class="row-odd"><td><p>UThZr</p></td>
<td><p>U235_wt_frac, ZR_wt_frac, class1_custom_isotopics, class2_custom_isotopics, class1_wt_frac, customIsotopics</p></td>
</tr>
<tr class="row-even"><td><p>UZr</p></td>
<td><p>U235_wt_frac, ZR_wt_frac, class1_custom_isotopics, class2_custom_isotopics, class1_wt_frac, customIsotopics</p></td>
</tr>
<tr class="row-odd"><td><p>Uranium</p></td>
<td><p>U235_wt_frac, TD_frac, class1_custom_isotopics, class2_custom_isotopics, class1_wt_frac, customIsotopics</p></td>
</tr>
<tr class="row-even"><td><p>UraniumOxide</p></td>
<td><p>TD_frac, U235_wt_frac, class1_custom_isotopics, class1_wt_frac, class2_custom_isotopics, customIsotopics</p></td>
</tr>
</tbody>
</table>
</div>
<p>The class 1/class 2 modifications in fuel materials are used to identify mixtures of
custom isotopics labels for input scenarios where a varying blend of a high-reactivity
feed with a low-reactivity feed. This is often useful for closed fuel cycles. For example,
you can define any fuel material as being made of LWR-derived TRU plus depleted uranium
at various weight fractions. Note that this input style only adjusts the heavy metal.</p>
<p>To enable the application of different values for the same material modification type
on different components within a block, the user may specify material modifications
by component. This is useful, for instance, when two pins within an assembly
made of the same base material have different fuel enrichments. This is done
using the <code class="docutils literal notranslate"><span class="pre">by</span> <span class="pre">component</span></code> attribute to the material modifications as in:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blocks</span><span class="p">:</span>
    <span class="n">fuel</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">block_fuel</span>
        <span class="n">fuel1</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">component_fuel_fuel1</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Hexagon</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">UZr</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="n">ip</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">mult</span><span class="p">:</span> <span class="mi">1</span>
            <span class="n">op</span><span class="p">:</span> <span class="mf">10.0</span>
        <span class="n">fuel2</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">component_fuel_fuel2</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Hexagon</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">UZr</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="n">ip</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">mult</span><span class="p">:</span> <span class="mi">1</span>
            <span class="n">op</span><span class="p">:</span> <span class="mf">10.0</span>
<span class="n">assemblies</span><span class="p">:</span>
    <span class="n">fuel</span> <span class="n">a</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">assembly_a</span>
        <span class="n">specifier</span><span class="p">:</span> <span class="n">IC</span>
        <span class="n">blocks</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span><span class="n">block_fuel</span><span class="p">]</span>
        <span class="n">height</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span>
        <span class="n">axial</span> <span class="n">mesh</span> <span class="n">points</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">xs</span> <span class="n">types</span><span class="p">:</span> <span class="p">[</span><span class="n">A</span><span class="p">]</span>
        <span class="n">material</span> <span class="n">modifications</span><span class="p">:</span>
            <span class="n">by</span> <span class="n">component</span><span class="p">:</span>
                <span class="n">fuel1</span><span class="p">:</span>
                    <span class="n">U235_wt_frac</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.20</span><span class="p">]</span>
                <span class="n">fuel2</span><span class="p">:</span>
                    <span class="n">Zr_wt_frac</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.02</span><span class="p">]</span>
            <span class="n">U235_wt_frac</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.30</span><span class="p">]</span>
</pre></div>
</div>
<p>Material modifications specified on the <code class="docutils literal notranslate"><span class="pre">material</span> <span class="pre">modifications</span></code> level are referred to as “block default” values
and apply to all components on the block not associated with a by-component value. This example would apply an
enrichment of 20% to the <code class="docutils literal notranslate"><span class="pre">fuel1</span></code> component and an enrichment of 30% to all other components in the block that
accept the <code class="docutils literal notranslate"><span class="pre">U235_wt_frac</span></code> material modification.</p>
<p>All by-component material modifications override any block default material modifications of the same type. In
addition, any by-component entries omitted for a given axial block will revert to the block default (or material
class default, if no block default value is provided and a material class default exists) value:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blocks</span><span class="p">:</span>
    <span class="n">fuel</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">block_fuel</span>
        <span class="n">fuel1</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">component_fuel_fuel1</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Hexagon</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">UZr</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="n">ip</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">mult</span><span class="p">:</span> <span class="mi">1</span>
            <span class="n">op</span><span class="p">:</span> <span class="mf">10.0</span>
        <span class="n">fuel2</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">component_fuel_fuel2</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Hexagon</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">UZr</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="n">ip</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">mult</span><span class="p">:</span> <span class="mi">1</span>
            <span class="n">op</span><span class="p">:</span> <span class="mf">10.0</span>
<span class="n">assemblies</span><span class="p">:</span>
    <span class="n">fuel</span> <span class="n">a</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">assembly_a</span>
        <span class="n">specifier</span><span class="p">:</span> <span class="n">IC</span>
        <span class="n">blocks</span><span class="p">:</span> <span class="p">[</span><span class="o">*</span><span class="n">block_fuel</span><span class="p">,</span> <span class="o">*</span><span class="n">block_fuel</span><span class="p">]</span>
        <span class="n">height</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
        <span class="n">axial</span> <span class="n">mesh</span> <span class="n">points</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">xs</span> <span class="n">types</span><span class="p">:</span> <span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">A</span><span class="p">]</span>
        <span class="n">material</span> <span class="n">modifications</span><span class="p">:</span>
            <span class="n">by</span> <span class="n">component</span><span class="p">:</span>
                <span class="n">fuel1</span><span class="p">:</span>
                    <span class="n">U235_wt_frac</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.20</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span> <span class="c1"># &lt;-- the U235_wt_frac for the second block will go to the block default value</span>
                <span class="n">fuel2</span><span class="p">:</span> <span class="c1"># the U235_wt_frac for fuel2 component in both axial blocks will go to the block default values</span>
                    <span class="n">Zr_wt_frac</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.02</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span> <span class="c1"># &lt;-- the Zr_wt_frac for the second block will go to the material class default because there is no block default value</span>
            <span class="n">U235_wt_frac</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.30</span><span class="p">,</span> <span class="mf">0.30</span><span class="p">]</span>
</pre></div>
</div>
</dd>
</dl>
<p>The first block listed is defined at the bottom of the core. This is typically a grid plate or some other structure.</p>
</section>
<section id="systems">
<span id="id7"></span><h3><span class="section-number">1.3.5. </span>Systems<a class="headerlink" href="#systems" title="Link to this heading"></a></h3>
<p>Once assemblies are defined they can be grouped together into the Core, the spent fuel pool (SFP), etc.</p>
<p>A complete reactor structure with a core and a SFP may be seen below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">systems</span><span class="p">:</span>
    <span class="n">core</span><span class="p">:</span>
        <span class="n">grid</span> <span class="n">name</span><span class="p">:</span> <span class="n">core</span>
        <span class="n">origin</span><span class="p">:</span>
            <span class="n">x</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">y</span><span class="p">:</span> <span class="mf">10.1</span>
            <span class="n">z</span><span class="p">:</span> <span class="mf">1.1</span>
    <span class="n">Spent</span> <span class="n">Fuel</span> <span class="n">Pool</span><span class="p">:</span>
        <span class="nb">type</span><span class="p">:</span> <span class="n">sfp</span>
        <span class="n">grid</span> <span class="n">name</span><span class="p">:</span> <span class="n">sfp</span>
        <span class="n">origin</span><span class="p">:</span>
            <span class="n">x</span><span class="p">:</span> <span class="mf">1000.0</span>
            <span class="n">y</span><span class="p">:</span> <span class="mf">12.1</span>
            <span class="n">z</span><span class="p">:</span> <span class="mf">1.1</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">origin</span></code> defines the point of origin in global space in units of cm. This allows you to define the relative
position of the various structures. The <code class="docutils literal notranslate"><span class="pre">grid</span> <span class="pre">name</span></code> inputs are string mappings to the grid definitions described
below.</p>
<section id="plugin-behavior">
<h4><span class="section-number">1.3.5.1. </span>Plugin Behavior<a class="headerlink" href="#plugin-behavior" title="Link to this heading"></a></h4>
<p>The <a class="reference internal" href="../.apidocs/armi.plugins.html#armi.plugins.ArmiPlugin.defineSystemBuilders" title="armi.plugins.ArmiPlugin.defineSystemBuilders"><code class="xref py py-meth docutils literal notranslate"><span class="pre">armi.plugins.ArmiPlugin.defineSystemBuilders()</span></code></a> method can be provided by plugins to control how ARMI converts
the <code class="docutils literal notranslate"><span class="pre">systems</span></code> section into <code class="docutils literal notranslate"><span class="pre">Composite</span></code>s to be modeled. By default, the <code class="docutils literal notranslate"><span class="pre">type</span></code> field is used to determine what
object is created. The default <a class="reference internal" href="../.apidocs/armi.reactor.html#armi.reactor.ReactorPlugin" title="armi.reactor.ReactorPlugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.reactor.ReactorPlugin</span></code></a> provides the following mapping:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">type</span></code> Value</p></th>
<th class="head"><p>Builds</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">core</span></code> (default)</p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Core</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">excore</span></code></p></td>
<td><p><a class="reference internal" href="../.apidocs/armi.reactor.excoreStructure.html#armi.reactor.excoreStructure.ExcoreStructure" title="armi.reactor.excoreStructure.ExcoreStructure"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExcoreStructure</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sfp</span></code></p></td>
<td><p><a class="reference internal" href="../.apidocs/armi.reactor.spentFuelPool.html#armi.reactor.spentFuelPool.SpentFuelPool" title="armi.reactor.spentFuelPool.SpentFuelPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpentFuelPool</span></code></a></p></td>
</tr>
</tbody>
</table>
<p>Plugins are able to provide a superset (e.g., <code class="docutils literal notranslate"><span class="pre">core</span></code>, <code class="docutils literal notranslate"><span class="pre">excore</span></code>, and <code class="docutils literal notranslate"><span class="pre">sfp</span></code>) and new mappings of values to builders.</p>
</section>
</section>
<section id="grids">
<span id="id8"></span><h3><span class="section-number">1.3.6. </span>Grids<a class="headerlink" href="#grids" title="Link to this heading"></a></h3>
<p>Grids are described inside a blueprint file using <code class="docutils literal notranslate"><span class="pre">lattice</span> <span class="pre">map</span></code> or <code class="docutils literal notranslate"><span class="pre">grid</span> <span class="pre">contents</span></code> fields to
define arrangements in Hex, Cartesian, or R-Z-Theta. The optional <code class="docutils literal notranslate"><span class="pre">lattice</span> <span class="pre">pitch</span></code> entry allows
you to specify spacing between objects that is different from tight packing. This input is required
in mixed geometry cases, for example if Hexagonal assemblies are to be loaded into a Cartesian
arrangement. The contents of a grid may defined using one of the following:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">lattice</span> <span class="pre">map:</span></code></dt><dd><p>A ASCII map representing the grid contents</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">grid</span> <span class="pre">contents:</span></code></dt><dd><p>a direct YAML representation of the contents</p>
</dd>
</dl>
<p>Example grid definitions are shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">grids</span><span class="p">:</span>
    <span class="n">control</span><span class="p">:</span>
        <span class="n">geom</span><span class="p">:</span> <span class="nb">hex</span>
        <span class="n">symmetry</span><span class="p">:</span> <span class="n">full</span>
        <span class="n">lattice</span> <span class="nb">map</span><span class="p">:</span> <span class="o">|</span>
           <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">4</span>
            <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
             <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="mi">1</span> <span class="mi">8</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
              <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
               <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                 <span class="o">-</span> <span class="o">-</span> <span class="o">-</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                  <span class="o">-</span> <span class="o">-</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                   <span class="o">-</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                    <span class="mi">7</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                     <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                      <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                       <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                        <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                         <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                          <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">3</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                           <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                            <span class="mi">1</span> <span class="mi">6</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
                             <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span> <span class="mi">1</span>
<span class="n">sfp</span><span class="p">:</span>
    <span class="n">symmetry</span><span class="p">:</span> <span class="n">full</span>
    <span class="n">geom</span><span class="p">:</span> <span class="n">cartesian</span>
    <span class="n">lattice</span> <span class="n">pitch</span><span class="p">:</span>
        <span class="n">x</span><span class="p">:</span> <span class="mf">50.0</span>
        <span class="n">y</span><span class="p">:</span> <span class="mf">50.0</span>
    <span class="n">grid</span> <span class="n">contents</span><span class="p">:</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]:</span> <span class="n">MC</span>
        <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]:</span> <span class="n">MC</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]:</span> <span class="n">MC</span>
        <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]:</span> <span class="n">MC</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We have gone through some effort to allow both pin and core grid definitions to share this
input and it may improve in the future.</p>
</div>
<p>You may set up some kinds of grids (e.g. 1/3 and full core hex or Cartesian core
loadings) using our interactive graphical grid editor described more in
<a class="reference internal" href="../.apidocs/armi.utils.gridEditor.html#module-armi.utils.gridEditor" title="armi.utils.gridEditor"><code class="xref py py-mod docutils literal notranslate"><span class="pre">armi.utils.gridEditor</span></code></a>.</p>
<figure class="align-center" id="id14">
<img alt="../_images/gridEditor.png" src="../_images/gridEditor.png" />
<figcaption>
<p><span class="caption-text">An example of the Grid Editor being used on a FFTF input file</span><a class="headerlink" href="#id14" title="Link to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="custom-isotopics">
<span id="id9"></span><h3><span class="section-number">1.3.7. </span>Custom Isotopics<a class="headerlink" href="#custom-isotopics" title="Link to this heading"></a></h3>
<p>In some cases (such as benchmarking a previous reactor), the default mass fractions from the
material library are not what you want to model. In these cases, you may override the isotopic
composition provided by the material library in this section. There are three ways to specify
the isotopics: <code class="docutils literal notranslate"><span class="pre">mass</span> <span class="pre">fractions</span></code> (sum to 1.0), <code class="docutils literal notranslate"><span class="pre">number</span> <span class="pre">densities</span></code> (in atoms/barn-cm), or
<code class="docutils literal notranslate"><span class="pre">number</span> <span class="pre">fractions</span></code> (sum to 1.0). For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">custom</span> <span class="n">isotopics</span><span class="p">:</span>
    <span class="n">LABEL1</span><span class="p">:</span>
        <span class="nb">input</span> <span class="nb">format</span><span class="p">:</span> <span class="n">mass</span> <span class="n">fractions</span>
        <span class="n">density</span><span class="p">:</span> <span class="mf">7.79213903298633</span>
        <span class="n">C</span><span class="p">:</span> <span class="mf">0.000664847887388523</span>
        <span class="n">CR</span><span class="p">:</span> <span class="mf">0.182466356404319</span>
        <span class="n">CU</span><span class="p">:</span> <span class="mf">0.00323253628006144</span>
        <span class="n">FE</span><span class="p">:</span> <span class="mf">0.705266053783901</span>
        <span class="n">MN</span><span class="p">:</span> <span class="mf">0.0171714161260001</span>
        <span class="n">MO</span><span class="p">:</span> <span class="mf">0.00233843050046998</span>
        <span class="n">NI</span><span class="p">:</span> <span class="mf">0.0831976890804466</span>
        <span class="n">SI</span><span class="p">:</span> <span class="mf">0.00566266993741259</span>
</pre></div>
</div>
<p>See the <a class="reference internal" href="../.apidocs/armi.nucDirectory.nuclideBases.html#module-armi.nucDirectory.nuclideBases" title="armi.nucDirectory.nuclideBases"><code class="xref py py-mod docutils literal notranslate"><span class="pre">List</span> <span class="pre">of</span> <span class="pre">Nuclides</span></code></a> for all valid entries. Note that
ARMI will expand elemental nuclides to their natural isotopics in most cases (to correspond with the
nuclear data library).</p>
<p>The (mass) <code class="docutils literal notranslate"><span class="pre">density</span></code> input is invalid when specifying <code class="docutils literal notranslate"><span class="pre">number</span> <span class="pre">densities</span></code>; the code will present an error message.</p>
<p>Material density may be specified in custom isotopics either explicitly in a <code class="docutils literal notranslate"><span class="pre">mass</span> <span class="pre">fractions</span></code> input
format (shown above) or implicitly with <code class="docutils literal notranslate"><span class="pre">number</span> <span class="pre">densities</span></code>. This is fairly straightforward for the
<code class="docutils literal notranslate"><span class="pre">Custom</span></code> material, as it has no baseline density. Density may also be specified for components using
materials which have entries in the materials library. Users should be aware of the following interactions
when specifying a custom density for components using a library material:</p>
<blockquote>
<div><p>1. The library material density will not be changed. Only the component(s) with the custom isotopics
entry will have the density modification.</p>
<p>2. Density specified by custom isotopics will override all other density modifications in the component
construction phase (e.g. <code class="docutils literal notranslate"><span class="pre">TD_frac</span></code> entries).</p>
<p>3. Only the component density is changed, not other material properties are altered to account for the
change in composition/density.</p>
<p>4. Density can only be specified using custom isotopics for non- <code class="docutils literal notranslate"><span class="pre">Custom</span></code> materials that have some
initial density. Don’t try to make <code class="docutils literal notranslate"><span class="pre">Void</span></code> have mass!</p>
</div></blockquote>
<p>Densities specified using <code class="docutils literal notranslate"><span class="pre">Custom</span> <span class="pre">Isotopics</span></code> are applied in component construction, and should be specified
at the input temperature for the component. Note that when overriding the density of a library material, all
other properties of that material (e.g. expansion coefficients) will continue to be used as if the component
consisted of the library material. In other words, ARMI will still think the component is made out of the
original material!</p>
</section>
<section id="advanced-topics">
<h3><span class="section-number">1.3.8. </span>Advanced topics<a class="headerlink" href="#advanced-topics" title="Link to this heading"></a></h3>
<section id="overlapping-shapes">
<h4><span class="section-number">1.3.8.1. </span>Overlapping shapes<a class="headerlink" href="#overlapping-shapes" title="Link to this heading"></a></h4>
<p>Solids of different compositions in contact with each other present complications during thermal
expansion. The ARMI Framework does not perform calculations to see exactly how such
scenarios will behave mechanically; it instead focuses on conserving mass. To do this, users should
input a zero-dimension component linking the 2 solid components made of the special <code class="docutils literal notranslate"><span class="pre">Void</span></code> material.
This gap will allow the 2 components to thermally expand
independently while keeping track of the overlapping area.</p>
<p>It is important to keep track of the areas
when a DerivedShape is included in a block design because ARMI calculates the
derived area by taking the full area of the block and subtracting the total area of
the non-DerivedShapes. If area between thermally-expanding solids was not accounted for, this
would non-physically add or subtract coolant into these gaps. To model overlapping components
heterogeneously, it is suggested to use a <a class="reference internal" href="../.apidocs/armi.reactor.converters.blockConverters.html#module-armi.reactor.converters.blockConverters" title="armi.reactor.converters.blockConverters"><code class="xref py py-mod docutils literal notranslate"><span class="pre">block</span> <span class="pre">converter</span></code></a>.</p>
<p>Additionally, it should be noted that assigning <code class="docutils literal notranslate"><span class="pre">mult:</span> <span class="pre">fuel.mult</span></code> will be ever-so-slightly slower
than just defining the actual value. This is because ARMI needs to find the sibling
component and get the siblings <code class="docutils literal notranslate"><span class="pre">mult</span></code>. If you are concerned about performance at that level and don’t expect
<code class="docutils literal notranslate"><span class="pre">mult</span></code> to change much in your case, you can replace the constant link (i.e. it does not change over time)
with a YAML anchor and alias.</p>
</section>
<section id="component-area-modifications">
<h4><span class="section-number">1.3.8.2. </span>Component area modifications<a class="headerlink" href="#component-area-modifications" title="Link to this heading"></a></h4>
<p>In some scenarios, it is desired to have one component’s area be subtracted or added to another. For
example, the area of the skids in a skid duct design needs to be subtracted from the interstitial
coolant. The mechanism to handle this involves adding a parameter to the component to be
modified after all the required ones in the form of <code class="docutils literal notranslate"><span class="pre">&lt;componentName&gt;.add</span></code> or
<code class="docutils literal notranslate"><span class="pre">&lt;componentName&gt;.sub</span></code>. The component to be added or subtracted must be defined before the
component that is being modified. This allows fairly complicated configurations to be modeled
without explicitly defining new components.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blocks</span><span class="p">:</span>
    <span class="n">rect</span> <span class="k">with</span> <span class="mi">100</span> <span class="n">holes</span><span class="p">:</span>
        <span class="n">holes</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Circle</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">Sodium</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mi">600</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mi">600</span>
            <span class="n">mult</span><span class="p">:</span> <span class="mi">100</span>
            <span class="n">od</span><span class="p">:</span> <span class="mf">0.05</span>
        <span class="n">square</span> <span class="n">of</span> <span class="n">steel</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Square</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">Iron</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="n">widthOuter</span><span class="p">:</span> <span class="mf">3.0</span>
            <span class="n">modArea</span><span class="p">:</span> <span class="n">holes</span><span class="o">.</span><span class="n">sub</span>      <span class="c1"># &quot;holes&quot; is the name of the other component</span>
</pre></div>
</div>
</section>
<section id="putting-it-all-together-to-make-a-block">
<h4><span class="section-number">1.3.8.3. </span>Putting it all together to make a Block<a class="headerlink" href="#putting-it-all-together-to-make-a-block" title="Link to this heading"></a></h4>
<p>Here is a complete fuel block definition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blocks</span><span class="p">:</span>
    <span class="n">fuel</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">block_fuel</span>
        <span class="n">bond</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Circle</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">Sodium</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">450.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">450.0</span>
            <span class="nb">id</span><span class="p">:</span> <span class="n">fuel</span><span class="o">.</span><span class="n">od</span>
            <span class="n">mult</span><span class="p">:</span> <span class="n">fuel</span><span class="o">.</span><span class="n">mult</span>
            <span class="n">od</span><span class="p">:</span> <span class="n">cladding</span><span class="o">.</span><span class="n">id</span>
        <span class="n">clad</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Circle</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">HT9</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">450.0</span>
            <span class="nb">id</span><span class="p">:</span> <span class="mf">0.905</span>
            <span class="n">mult</span><span class="p">:</span> <span class="n">fuel</span><span class="o">.</span><span class="n">mult</span>
            <span class="n">od</span><span class="p">:</span> <span class="mf">1.045</span>
        <span class="n">coolant</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">DerivedShape</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">Sodium</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">450.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">450.0</span>
        <span class="n">duct</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Hexagon</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">HT9</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">450.0</span>
            <span class="n">ip</span><span class="p">:</span> <span class="mf">15.2</span>
            <span class="n">mult</span><span class="p">:</span> <span class="mf">1.0</span>
            <span class="n">op</span><span class="p">:</span> <span class="mf">16.2</span>
        <span class="n">fuel</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Circle</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">UZr</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">600.0</span>
            <span class="nb">id</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">isotopics</span><span class="p">:</span> <span class="n">LABEL1</span>
            <span class="n">mult</span><span class="p">:</span> <span class="mf">169.0</span>
            <span class="n">od</span><span class="p">:</span> <span class="mf">0.757</span>
        <span class="n">intercoolant</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Hexagon</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">Sodium</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">450.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">450.0</span>
            <span class="n">ip</span><span class="p">:</span> <span class="n">duct</span><span class="o">.</span><span class="n">op</span>
            <span class="n">mult</span><span class="p">:</span> <span class="mf">1.0</span>
            <span class="n">op</span><span class="p">:</span> <span class="mf">16.79</span>
        <span class="n">wire</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Helix</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">HT9</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">450.0</span>
            <span class="n">axialPitch</span><span class="p">:</span> <span class="mf">30.0</span>
            <span class="n">helixDiameter</span><span class="p">:</span> <span class="mf">1.145</span>
            <span class="nb">id</span><span class="p">:</span> <span class="mf">0.0</span>
            <span class="n">mult</span><span class="p">:</span> <span class="n">fuel</span><span class="o">.</span><span class="n">mult</span>
            <span class="n">od</span><span class="p">:</span> <span class="mf">0.1</span>
</pre></div>
</div>
</section>
<section id="making-blocks-with-unshaped-components">
<h4><span class="section-number">1.3.8.4. </span>Making blocks with unshaped components<a class="headerlink" href="#making-blocks-with-unshaped-components" title="Link to this heading"></a></h4>
<p>Sometimes you will want to make a homogeneous block,  which is a mixture of multiple
materials, and will not want to define an exact shape for each of the components in
the block. In this case unshaped components can be used, but ARMI still requires there
to be at least one component with shape to define the pitch of the block.</p>
<p>In the example below, the block is a rectangular pitch so one of the
components is defined as a rectangle to indicate this. Its outer dimensions determine
the pitch of the block. The inner dimensions can be whatever is necessary to
preserve the area fraction. Note that rectangular blocks have pitch defined by two
numbers, since they may not be a square. In this case the rectangle component is half
the area fraction and the other two components are one quarter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blocks</span><span class="p">:</span>
    <span class="n">fuel</span><span class="p">:</span>
        <span class="n">clad</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Rectangle</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">HT9</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">lengthOuter</span><span class="p">:</span> <span class="mf">3.0</span>
            <span class="n">lengthInner</span><span class="p">:</span> <span class="mf">2.4</span>
            <span class="n">widthOuter</span><span class="p">:</span> <span class="mf">2.0</span>
            <span class="n">widthInner</span><span class="p">:</span> <span class="mf">1.25</span>
            <span class="n">mult</span><span class="p">:</span><span class="mf">1.0</span>
        <span class="n">fuel</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">UnshapedComponent</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">UZr</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">area</span> <span class="o">=</span> <span class="mf">1.5</span>
        <span class="n">coolant</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">UnshapedComponent</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">Sodium</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">area</span> <span class="o">=</span> <span class="mf">1.5</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When using this method avoid thermal expansion by setting TInput=THot, or
your pitch component dimensions might change, thus changing your pitch.</p>
</div>
<p>Alternatively, a void (empty) component with zero area can be added for defining the
pitch, and then all three components can be defined as unshaped. The downside, is there
are now four components, but only three that have actual area and composition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">blocks</span><span class="p">:</span>
    <span class="n">fuel</span><span class="p">:</span>
        <span class="n">clad</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">UnshapedComponent</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">HT9</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">area</span><span class="p">:</span> <span class="mf">3.0</span>
        <span class="n">fuel</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">UnshapedComponent</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">UZr</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">area</span> <span class="o">=</span> <span class="mf">1.5</span>
        <span class="n">coolant</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">UnshapedComponent</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">Sodium</span>
            <span class="n">Tinput</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">Thot</span><span class="p">:</span> <span class="mf">25.0</span>
            <span class="n">area</span> <span class="o">=</span> <span class="mf">1.5</span>
        <span class="n">PitchDefiningComponent</span><span class="p">:</span>
            <span class="n">shape</span><span class="p">:</span> <span class="n">Rectangle</span>
            <span class="n">material</span><span class="p">:</span> <span class="n">Void</span>
            <span class="n">lengthOuter</span><span class="p">:</span> <span class="mf">3.0</span>
            <span class="n">lengthInner</span><span class="p">:</span> <span class="mf">3.0</span>
            <span class="n">widthOuter</span><span class="p">:</span> <span class="mf">2.0</span>
            <span class="n">widthInner</span><span class="p">:</span> <span class="mf">2.0</span>
            <span class="n">mult</span><span class="p">:</span><span class="mf">1.0</span>
</pre></div>
</div>
<p>This can similarly be done for hex geometry and and a hexagon with Outer Pitch (<code class="docutils literal notranslate"><span class="pre">op</span></code>).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The rest of the input described below are scheduled to be moved into the settings input file, since their nature is that of a setting.</p>
</div>
</section>
</section>
<section id="nuclide-flags">
<span id="id10"></span><h3><span class="section-number">1.3.9. </span>Nuclide Flags<a class="headerlink" href="#nuclide-flags" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">nuclide</span> <span class="pre">flags</span></code> setting allows the user to choose which nuclides they
would like to consider in the problem, and whether or not each nuclide should
transmute and decay. For example, sometimes you may not want to deplete trace
elements in structural materials, but in other analysis you might. If the
nuclide should deplete, it must have <code class="docutils literal notranslate"><span class="pre">burn:</span> <span class="pre">true</span></code>. If it is to be included
in the problem at all, it must be have <code class="docutils literal notranslate"><span class="pre">xs:</span> <span class="pre">true</span></code> All nuclides that will be
produced via transmutation/decay  must also have <code class="docutils literal notranslate"><span class="pre">burn:</span> <span class="pre">true</span></code>, so if you add
Thorium, make sure to add all other actinides in its chain. You can use the
<code class="docutils literal notranslate"><span class="pre">expandTo:</span></code> section to list a subset of natural nuclides to expand
into. If you leave this section out, a default set of nuclide flags will be
applied to your problem. Remember this
section when you start changing which nuclides are modeled and which ones
deplete.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># this is a YAML comment</span>
<span class="n">nuclide</span> <span class="n">flags</span><span class="p">:</span>
    <span class="n">AL</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">AM241</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">C</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">carbon_flags</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>    <span class="c1"># an anchor to &quot;carbon_flags&quot;</span>
    <span class="n">CA</span><span class="p">:</span> <span class="o">*</span><span class="n">carbon_flags</span>
    <span class="n">CL</span><span class="p">:</span> <span class="o">*</span><span class="n">carbon_flags</span>
    <span class="n">CO</span><span class="p">:</span> <span class="o">*</span><span class="n">carbon_flags</span>                           <span class="c1"># the alias back to &quot;carbon_flags&quot;</span>
    <span class="n">CR</span><span class="p">:</span> <span class="o">*</span><span class="n">carbon_flags</span>
    <span class="n">CU</span><span class="p">:</span> <span class="o">*</span><span class="n">carbon_flags</span>
    <span class="n">FE</span><span class="p">:</span> <span class="o">*</span><span class="n">carbon_flags</span>
    <span class="n">H</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">MN</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">MO</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">N</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">NA</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">NI</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">O</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">expandTo</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;O16&quot;</span><span class="p">,</span> <span class="s2">&quot;O17&quot;</span><span class="p">]}</span>
    <span class="n">P</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">PU238</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">PU239</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">PU240</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">PU241</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">PU242</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">S</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">SI</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">U234</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">U235</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">U236</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
    <span class="n">U238</span><span class="p">:</span> <span class="p">{</span><span class="n">burn</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span> <span class="n">xs</span><span class="p">:</span> <span class="n">true</span><span class="p">}</span>
</pre></div>
</div>
<p>The code will crash if materials used in <a class="reference internal" href="#blocks-and-components"><span class="std std-ref">Blocks and Components</span></a> contain nuclides not defined in
<code class="docutils literal notranslate"><span class="pre">nuclide</span> <span class="pre">flags</span></code>. A failure can also occur if the burn chain is missing a nuclide.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>We plan to upgrade the default behavior of this to inherit from all defined materials
in a problem to reduce the user-input burden.</p>
</div>
</section>
</section>
<section id="fuel-management-input">
<span id="id11"></span><h2><span class="section-number">1.4. </span>Fuel Management Input<a class="headerlink" href="#fuel-management-input" title="Link to this heading"></a></h2>
<p>Fuel management in ARMI is specified through custom Python scripts that often reside
in the working directory of a run (but can be anywhere if you use full paths). During a normal run,
ARMI checks for two fuel management settings:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">shuffleLogic</span></code></dt><dd><p>The path to the Python source file or dotted import path to a module that contains the user’s custom fuel
management logic</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fuelHandlerName</span></code></dt><dd><p>The name of a FuelHandler class that ARMI will look for in the Fuel Management Input module or file
specified by <code class="docutils literal notranslate"><span class="pre">shuffleLogic</span></code>. Since it’s input, it’s the user’s responsibility
to design and place that object in that module or file.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We consider the limited syntax needed to express fuel management in Python
code itself to be sufficiently expressive and simple for non-programmers to
actually use. Indeed, this has been our experience.</p>
</div>
<p>The ARMI Operator will call its fuel handler’s <code class="docutils literal notranslate"><span class="pre">outage</span></code> method before each cycle (and, if requested, during branch
search calculations). The <a class="reference internal" href="../.apidocs/armi.physics.fuelCycle.fuelHandlers.html#armi.physics.fuelCycle.fuelHandlers.FuelHandler.outage" title="armi.physics.fuelCycle.fuelHandlers.FuelHandler.outage"><code class="xref py py-meth docutils literal notranslate"><span class="pre">outage()</span></code></a> method
will perform bookkeeping operations, and eventually
call the user-defined <code class="docutils literal notranslate"><span class="pre">chooseSwaps</span></code> method (located in Fuel Management Input). <code class="docutils literal notranslate"><span class="pre">chooseSwaps</span></code> will
generally contain calls to <a class="reference internal" href="../.apidocs/armi.physics.fuelCycle.fuelHandlers.html#armi.physics.fuelCycle.fuelHandlers.FuelHandler.findAssembly" title="armi.physics.fuelCycle.fuelHandlers.FuelHandler.findAssembly"><code class="xref py py-meth docutils literal notranslate"><span class="pre">findAssembly()</span></code></a>,
<a class="reference internal" href="../.apidocs/armi.physics.fuelCycle.fuelHandlers.html#armi.physics.fuelCycle.fuelHandlers.FuelHandler.swapAssemblies" title="armi.physics.fuelCycle.fuelHandlers.FuelHandler.swapAssemblies"><code class="xref py py-meth docutils literal notranslate"><span class="pre">swapAssemblies()</span></code></a> ,
<a class="reference internal" href="../.apidocs/armi.physics.fuelCycle.fuelHandlers.html#armi.physics.fuelCycle.fuelHandlers.FuelHandler.swapCascade" title="armi.physics.fuelCycle.fuelHandlers.FuelHandler.swapCascade"><code class="xref py py-meth docutils literal notranslate"><span class="pre">swapCascade()</span></code></a>, and
<a class="reference internal" href="../.apidocs/armi.physics.fuelCycle.fuelHandlers.html#armi.physics.fuelCycle.fuelHandlers.FuelHandler.dischargeSwap" title="armi.physics.fuelCycle.fuelHandlers.FuelHandler.dischargeSwap"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dischargeSwap()</span></code></a>, which are the primary
fuel management operations and can be found in the fuel management module.</p>
<p>Also found in the user-defined Fuel Management Input module is a <code class="docutils literal notranslate"><span class="pre">getFactors</span></code> method, which is used to control which
shuffling routines get called and at which time.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the <a class="reference internal" href="../.apidocs/armi.physics.fuelCycle.fuelHandlers.html#module-armi.physics.fuelCycle.fuelHandlers" title="armi.physics.fuelCycle.fuelHandlers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">fuelHandlers</span> <span class="pre">module</span></code></a> for more details.</p>
</div>
<section id="fuel-management-operations">
<h3><span class="section-number">1.4.1. </span>Fuel Management Operations<a class="headerlink" href="#fuel-management-operations" title="Link to this heading"></a></h3>
<p>In the ARMI, the assemblies can be moved as units around the reactor with swapAssemblies,
dischargeSwap, and swapCascade of a <code class="docutils literal notranslate"><span class="pre">FuelHandler</span></code> interface.</p>
<section id="swapassemblies">
<h4><span class="section-number">1.4.1.1. </span>swapAssemblies<a class="headerlink" href="#swapassemblies" title="Link to this heading"></a></h4>
<p>swapAssemblies is the simplest fuel management operation. Given two assembly objects, this method will switch
their locations.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">swapAssemblies</span><span class="p">(</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="dischargeswap">
<h4><span class="section-number">1.4.1.2. </span>dischargeSwap<a class="headerlink" href="#dischargeswap" title="Link to this heading"></a></h4>
<p>A discharge swap is a simple operation that puts a new assembly into the reactor while discharging
an outgoing one.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">dischargeSwap</span><span class="p">(</span><span class="n">newIncoming</span><span class="p">,</span><span class="n">oldOutgoing</span><span class="p">)</span>
</pre></div>
</div>
<p>This operation keeps track of the outgoing assembly in a SpentFuelPool object that the Reactor
object has access to so you can see how much of what you discharged.</p>
</section>
<section id="swapcascade">
<h4><span class="section-number">1.4.1.3. </span>swapCascade<a class="headerlink" href="#swapcascade" title="Link to this heading"></a></h4>
<p>SwapCascade is a more powerful swapping function that can swap a list of assemblies in a “daisy-chain” type
of operation. These are useful for doing the main overtone shuffling operations such as convergent shuffling
and/or convergent-divergent shuffling. If we load up the list of assemblies, the first one will be put in the
last one’s position, and all others will shift accordingly.</p>
<p>As an example, consider assemblies 1 through 5 in core positions A through E.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">swapCascade</span><span class="p">([</span><span class="n">a1</span><span class="p">,</span><span class="n">a2</span><span class="p">,</span><span class="n">a3</span><span class="p">,</span><span class="n">a4</span><span class="p">,</span><span class="n">a5</span><span class="p">])</span>
</pre></div>
</div>
<p>This table shows the positions of the assemblies before and after the swap cascade.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Assembly</p></th>
<th class="head"><p>Position Before Swap Cascade</p></th>
<th class="head"><p>Position After Swap Cascade</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>A</p></td>
<td><p>E</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>B</p></td>
<td><p>A</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>C</p></td>
<td><p>B</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>D</p></td>
<td><p>C</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>E</p></td>
<td><p>D</p></td>
</tr>
</tbody>
</table>
<p>Arbitrarily complex cascades can thusly be assembled by choosing the order of the assemblies passed into swapCascade.</p>
</section>
</section>
<section id="choosing-assemblies-to-move">
<h3><span class="section-number">1.4.2. </span>Choosing Assemblies to Move<a class="headerlink" href="#choosing-assemblies-to-move" title="Link to this heading"></a></h3>
<p>The methods described in the previous section require known assemblies to shuffle. Choosing these assemblies is
the essence of fuel shuffling design. The single method used for these purposes is the FuelHandler’s <code class="docutils literal notranslate"><span class="pre">findAssembly</span></code>
method. This method is very general purpose, and ranks in the top 3 most important
methods of the ARMI altogether.</p>
<p>To use it, just say:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findAssembly</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="s1">&#39;maxPercentBu&#39;</span><span class="p">,</span><span class="n">compareTo</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
</pre></div>
</div>
<p>This will return the assembly in the reactor that has a maximum burnup closest to 20%.
Other inputs to findAssembly are summarized in the API docs of
<a class="reference internal" href="../.apidocs/armi.physics.fuelCycle.fuelHandlers.html#armi.physics.fuelCycle.fuelHandlers.FuelHandler.findAssembly" title="armi.physics.fuelCycle.fuelHandlers.FuelHandler.findAssembly"><code class="xref py py-meth docutils literal notranslate"><span class="pre">findAssembly()</span></code></a>.</p>
</section>
<section id="fuel-management-examples">
<h3><span class="section-number">1.4.3. </span>Fuel Management Examples<a class="headerlink" href="#fuel-management-examples" title="Link to this heading"></a></h3>
<section id="convergent-divergent">
<h4><span class="section-number">1.4.3.1. </span>Convergent-Divergent<a class="headerlink" href="#convergent-divergent" title="Link to this heading"></a></h4>
<p>Convergent-divergent shuffling is when fresh assemblies march in from the outside until
they approach the jump ring, at which point they jump to the center and diverge until
they reach the jump ring again, where they now jump to the outer periphery of the core,
or become discharged.</p>
<p>If the jump ring is 6,  the order of target rings is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">13</span><span class="p">]</span>
</pre></div>
</div>
<p>In this case, assemblies converge from ring 13 to 12, to 11, to 10, …, to 6, and then
jump to 1 and diverge until they get back to 6. In a discharging equilibrium case, the
highest burned assembly in the jumpRing should get discharged and the lowest should
jump by calling a dischargeSwap on cascade[0] and a fresh feed after this cascade is
run.</p>
<p>The convergent rings in this case are 7 through 13 and the divergent ones are 1
through 5 are the divergent ones.</p>
</section>
</section>
<section id="fuel-management-tips">
<h3><span class="section-number">1.4.4. </span>Fuel Management Tips<a class="headerlink" href="#fuel-management-tips" title="Link to this heading"></a></h3>
<p>Some mistakes are common. Follow these tips.</p>
<blockquote>
<div><ul class="simple">
<li><p>Always make sure your assembly-level types in the settings file are up to date
with the grids in your bluepints file. Otherwise you’ll be moving feeds when you
want to move igniters, or something.</p></li>
<li><p>Use the exclusions list! If you move a cascade and then the next cascade tries
to run, it will choose your newly-moved assemblies if they fit your criteria in
<code class="docutils literal notranslate"><span class="pre">findAssemblies</span></code>. This leads to very confusing results. Therefore, once you move
assemblies, you should default to adding them to the exclusions list.</p></li>
<li><p>Print cascades during debugging. After you’ve built a cascade to swap, print it
out and check the locations and types of each assembly in it. Is it what you want?</p></li>
<li><p>Watch <code class="docutils literal notranslate"><span class="pre">typeNum</span></code> in the database. You can get good intuition about what is
getting moved by viewing this parameter.</p></li>
</ul>
</div></blockquote>
</section>
<section id="running-a-branch-search">
<h3><span class="section-number">1.4.5. </span>Running a branch search<a class="headerlink" href="#running-a-branch-search" title="Link to this heading"></a></h3>
<p>ARMI can perform a branch search where a number of fuel management operations
are performed in parallel and the preferred one is chosen and proceeded with.
The key to any branch search is writing a fuel handler that can interpret
<strong>fuel management factors</strong>, defined as keyed values between 0 and 1.</p>
<p>As an example, a fuel handler may be written to interpret two factors, <code class="docutils literal notranslate"><span class="pre">numDischarges</span></code>
and <code class="docutils literal notranslate"><span class="pre">chargeEnrich</span></code>. One method in the fuel handler would then take
the value of <code class="docutils literal notranslate"><span class="pre">factors['numDischarges']</span></code> and multiply it by the maximum
number of discharges (often set by another user setting) and then discharge
this many assemblies. Similarly, another method would take the <code class="docutils literal notranslate"><span class="pre">factors['chargeEnrich']</span></code>
value (between 0 and 1) and multiply it by the maximum allowable enrichment
(again, usually controlled by a user setting) to determine which enrichment
should be used to fabricate new assemblies.</p>
<p>Given a fuel handler that can thusly interpret factors between 0 and 1, the
concept of branch searches is simple. They simply build uniformly distributed
lists between 0 and 1 across however many CPUs are available and cases on all
of them, passing one of each of the factors to each CPU in parallel. When the cases
finish, the branch search determines the optimal result and selects the corresponding
value of the factor to proceed.</p>
<p>Branch searches are controlled by custom <code class="docutils literal notranslate"><span class="pre">getFactorList</span></code> methods specified in the
<code class="docutils literal notranslate"><span class="pre">shuffleLogic</span></code> input modules or files. This method should return two things:</p>
<blockquote>
<div><ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">defaultFactors</span></code>; a dictionary with user-defined keys and values between
0 and 1 for each key. These factors will be passed to the <code class="docutils literal notranslate"><span class="pre">chooseSwaps</span></code>
method, which is typically overridden by the user in custom fuel handling code.
The fuel handling code should interpret the values and move the fuel
according to what is sent.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">factorSearchFlags</span></code> list, which lists the keys to be branch searched.
The search will optimize the first key first, and then do a second pass
on the second key, holding the optimal first value constant, and so on.</p></li>
</ul>
</div></blockquote>
<p>Such a method may look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">getFactorList</span><span class="p">(</span><span class="n">cycle</span><span class="p">,</span><span class="n">cs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

    <span class="c1"># init default shuffling factors</span>
    <span class="n">defaultFactors</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;chargeEnrich&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;numDischarges&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">}</span>
    <span class="n">factorSearchFlags</span><span class="o">=</span><span class="p">[]</span> <span class="c1"># init factors to run branch searches on</span>

    <span class="c1"># determine when to activate various factors / searches</span>
    <span class="k">if</span> <span class="n">cycle</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">]:</span>
        <span class="c1"># shuffling happens before neutronics so skip the first cycle.</span>
        <span class="n">defaultFactors</span><span class="p">[</span><span class="s1">&#39;chargeEnrich&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">defaultFactors</span><span class="p">[</span><span class="s1">&#39;numDischarges&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>
        <span class="n">factorSearchFlags</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;chargeEnrich&#39;</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">defaultFactors</span><span class="p">,</span><span class="n">factorSearchFlags</span>
</pre></div>
</div>
<p>Once a proper <code class="docutils literal notranslate"><span class="pre">getFactorList</span></code> method exists and a fuel handler object exists that can interpret the factors, activate a branch search during a regular run by selecting the <strong>Branch Search</strong> option on the GUI.</p>
<p>The <strong>best</strong> result from the branch search is determined by comparing the <em>keff</em> values with the <code class="docutils literal notranslate"><span class="pre">targetK</span></code> setting, which is available for setting in the GUI. The branch with <em>keff</em> closest to the setting, while still being above 1.0 is chosen.</p>
</section>
</section>
<section id="settings-report">
<span id="id12"></span><h2><span class="section-number">1.5. </span>Settings Report<a class="headerlink" href="#settings-report" title="Link to this heading"></a></h2>
<p>This document lists all the <a class="reference internal" href="#the-settings-input-file"><span class="std std-ref">settings</span></a> in ARMI.</p>
<p>They are all accessible to developers through the <a class="reference internal" href="../.apidocs/armi.settings.caseSettings.html#armi.settings.caseSettings.Settings" title="armi.settings.caseSettings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.settings.caseSettings.Settings</span></code></a> object, which is typically stored in a variable named <code class="docutils literal notranslate"><span class="pre">cs</span></code>. Interfaces have access to a simulation’s settings through <code class="docutils literal notranslate"><span class="pre">self.cs</span></code>.</p>
<div class="docutils container">
<div class="break-before ssp-landscape docutils container">
<table class="ssp-tiny docutils align-default" id="id15">
<caption><span class="caption-text">ARMI Settings</span><a class="headerlink" href="#id15" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 40.0%" />
<col style="width: 15.0%" />
<col style="width: 15.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Options</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Tin</p></td>
<td><p>The inlet temperature of the reactor in C</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">360.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Tout</p></td>
<td><p>The outlet temperature of the reactor in C</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">510.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>acceptableBlockAreaError</p></td>
<td><p>The limit of error between a block’s cross- sectional area and the reference block used during the assembly area consistency check</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1e-05</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>aclpDoseLimit</p></td>
<td><p>Dose limit in dpa used to position the above-core load pad(if one exists)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">80.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>assemFlagsToSkipAxialExpa nsion</p></td>
<td><p>Assemblies that match a flag on this list will not be axially expanded.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>assemblyRotationAlgorithm</p></td>
<td><p>The algorithm to use to rotate the detail assemblies while shuffling</p></td>
<td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['',</span> <span class="pre">'buRe</span></code> <code class="docutils literal notranslate"><span class="pre">ducingAsse</span></code> <code class="docutils literal notranslate"><span class="pre">mblyRotati</span></code> <code class="docutils literal notranslate"><span class="pre">on',</span> <span class="pre">'simp</span></code> <code class="docutils literal notranslate"><span class="pre">leAssembly</span></code> <code class="docutils literal notranslate"><span class="pre">Rotation']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>assemblyRotationStationar y</p></td>
<td><p>Whether or not to rotate assemblies that are not shuffled.This can only be True if ‘rotation’ is true.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>availabilityFactor</p></td>
<td><p>Availability factor of the plant. This is the fraction of the time that the plant is operating. If variable, use <cite>availabilityFactors</cite> setting.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>availabilityFactors</p></td>
<td><p>List of availability factor of each cycle as a fraction (fraction of time plant is not in an outage). R is repeat. For example [0.5, 1.0, ‘9R’] is 1 50% followed by 10 100%. Empty list is constant duration set by <cite>availabilityFactor</cite>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>axialExpansion</p></td>
<td><p>Perform axial fuel expansion. This will adjust fuel block lengths.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>axialMeshRefinementFactor</p></td>
<td><p>Multiplicative factor on the Global Flux number of mesh per block. Used for axial mesh refinement.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>bcCoefficient</p></td>
<td><p>Value for the parameter A of the generalized boundary condition.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>beta</p></td>
<td><p>Individual precursor group delayed neutron fractions</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>bondRemoval</p></td>
<td><p>Toggles fuel performance bond removal. This will remove thermal bond from the fuel.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>boundaries</p></td>
<td><p>External Neutronic Boundary Conditions. Reflective does not include axial.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Extrapolat</span></code> <code class="docutils literal notranslate"><span class="pre">ed</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['Extrapol</span></code> <code class="docutils literal notranslate"><span class="pre">ated',</span> <span class="pre">'Re</span></code> <code class="docutils literal notranslate"><span class="pre">flective',</span></code> <code class="docutils literal notranslate"><span class="pre">'Infinite'</span></code> <code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">'ZeroSur</span></code> <code class="docutils literal notranslate"><span class="pre">faceFlux',</span></code> <code class="docutils literal notranslate"><span class="pre">'ZeroInwar</span></code> <code class="docutils literal notranslate"><span class="pre">dCurrent',</span></code> <code class="docutils literal notranslate"><span class="pre">'Generaliz</span></code> <code class="docutils literal notranslate"><span class="pre">ed']</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>branchVerbosity</p></td>
<td><p>Verbosity of the non- primary MPI nodes</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">error</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['debug',</span></code> <code class="docutils literal notranslate"><span class="pre">'extra',</span></code> <code class="docutils literal notranslate"><span class="pre">'info',</span> <span class="pre">'i</span></code> <code class="docutils literal notranslate"><span class="pre">mportant',</span></code> <code class="docutils literal notranslate"><span class="pre">'prompt',</span></code> <code class="docutils literal notranslate"><span class="pre">'warning',</span></code> <code class="docutils literal notranslate"><span class="pre">'error']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>buGroups</p></td>
<td><p>The range of burnups where cross-sections will be the same for a given cross section type (units of %FIMA)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[10,</span> <span class="pre">20,</span></code> <code class="docutils literal notranslate"><span class="pre">30]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>burnChainFileName</p></td>
<td><p>Path to YAML file that has the depletion chain defined in it</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">burn-</span></code> <code class="docutils literal notranslate"><span class="pre">chain.yaml</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>burnSteps</p></td>
<td><p>Number of depletion substeps, n, in one cycle. Note: There will be n+1 time nodes and the burnup step time will be computed as cycle length/n when the simple cycles input format is used.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>burnupPeakingFactor</p></td>
<td><p>The peak/avg factor for burnup and DPA. If it is not set the current flux peaking is used (this is typically conservatively high).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>circularRingMode</p></td>
<td><p>Toggle between circular ring definitions to hexagonal ring definitions</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>circularRingOrder</p></td>
<td><p>Order by which locations are sorted in circular rings for equilibrium shuffling</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">angle</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['angle',</span></code> <code class="docutils literal notranslate"><span class="pre">'distance'</span></code> <code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">'distanc</span></code> <code class="docutils literal notranslate"><span class="pre">eSmart']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>circularRingPitch</p></td>
<td><p>The relative pitch to be used to define a single circular ring in circular shuffling</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>claddingStrain</p></td>
<td><p>Evaluate cladding strain.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>claddingWastage</p></td>
<td><p>Evaluate cladding wastage.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>clearXS</p></td>
<td><p>Delete all cross section libraries before regenerating them.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>comment</p></td>
<td><p>A comment describing this case</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>copyFilesFrom</p></td>
<td><p>A list of files that need to be copied at the start of a run.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>copyFilesTo</p></td>
<td><p>A list of directories to copy provided files into at the start of a run.This list can be of length zero (copy to working dir), 1 (copy all files to the same place), or it must be the same length as copyFilesFrom</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>coverage</p></td>
<td><p>Turn on coverage report generation which tracks all the lines of code that execute during a run</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>coverageConfigFile</p></td>
<td><p>User-defined coverage configuration file</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>crossSectionControl</p></td>
<td><p>Data structure defining how cross sections are created</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;XSSetting</span></code> <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">with</span> <span class="pre">XS</span></code> <code class="docutils literal notranslate"><span class="pre">IDs</span> <span class="pre">dict_k</span></code> <code class="docutils literal notranslate"><span class="pre">eys([])&gt;</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>cycleLength</p></td>
<td><p>Duration of one single cycle in days. If <cite>availabilityFactor</cite> is below 1, the reactor will be at power less than this. If variable, use <cite>cycleLengths</cite> setting.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">365.242199</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>cycleLengths</p></td>
<td><p>List of durations of each cycle in days. The at- power duration will be affected by <cite>availabilityFactor</cite>. R is repeat. For example [100, 150, ‘9R’] is 1 100 day cycle followed by 10 150 day cycles. Empty list is constant duration set by <cite>cycleLength</cite>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>cycles</p></td>
<td><p>YAML dict defining the cycle history of the case. Options at each cycle include: <cite>name</cite>, <cite>cumulative days</cite>, <cite>step days</cite>, <cite>availability factor</cite>, <cite>cycle length</cite>, <cite>burn steps</cite>, and <cite>power fractions</cite>. If specified, do not use any of the case settings <cite>cycleLength(s)</cite>, <cite>availabilityFactor(s)</cite>, <cite>powerFractions</cite>, or <cite>burnSteps</cite>. Must also specify <cite>nCycles</cite> and <cite>power</cite>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>cyclesSkipTightCouplingIn teraction</p></td>
<td><p>List of cycle numbers skip tight coupling interaction for. Will still update component temps, etc during these cycles, will just not iterate a second (or more) time.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>db</p></td>
<td><p>Write the state information to a database at every timestep</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>debugMem</p></td>
<td><p>Turn on memory debugging options to help find problems with the code</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>debugMemSize</p></td>
<td><p>Show size of objects during memory debugging</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>decayConstants</p></td>
<td><p>Individual precursor group delayed neutron decay constants</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>defaultSnapshots</p></td>
<td><p>Generate snapshots at BOL, MOL, and EOL.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>deferredInterfaceNames</p></td>
<td><p>Interfaces to delay the normal operations of for special circumstance problem avoidance</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>deferredInterfacesCycle</p></td>
<td><p>The supplied list of interface names in deferredInterfaceNames will begin normal operations on this cycle number</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>detailAllAssems</p></td>
<td><p>All assemblies will have ‘detailed’ treatment. Note: This option is interpreted differently by different modules.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>detailAssemLocationsBOL</p></td>
<td><p>Assembly locations for assemblies that will have ‘detailed’ treatment. This option will track assemblies in the core at BOL. Note: This option is interpreted differently by different modules.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>detailAssemNums</p></td>
<td><p>Assembly numbers(IDs) for assemblies that will have ‘detailed’ treatment. This option will track assemblies that not in the core at BOL. Note: This option is interpreted differently by different modules.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>detailedAxialExpansion</p></td>
<td><p>Allow each assembly to expand independently of the others. Results in non-uniform axial mesh. Neutronics kernel must be able to handle.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>disableBlockTypeExclusion InXsGeneration</p></td>
<td><p>Control which blocks get merged together by the XSGM. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code> or <code class="docutils literal notranslate"><span class="pre">True</span></code> then all block types in the XS ID will be considered. If set to <code class="docutils literal notranslate"><span class="pre">False</span></code> then a default of [‘fuel’] will be used. Can also be set to an exact list of strings for types to consider.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>doTH</p></td>
<td><p>Activate thermal hydraulics calculations.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>dpaPerFluence</p></td>
<td><p>A quick and dirty conversion that is used to get dpaPeak</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4.01568627</span></code> <code class="docutils literal notranslate"><span class="pre">451e-22</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>dpaXsSet</p></td>
<td><p>The cross sections to use when computing displacements per atom.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dpa_EBRII_</span></code> <code class="docutils literal notranslate"><span class="pre">HT9</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['',</span> <span class="pre">'dpa_</span></code> <code class="docutils literal notranslate"><span class="pre">EBRII_INC6</span></code> <code class="docutils literal notranslate"><span class="pre">00',</span> <span class="pre">'dpa_</span></code> <code class="docutils literal notranslate"><span class="pre">EBRII_INCX</span></code> <code class="docutils literal notranslate"><span class="pre">750',</span> <span class="pre">'dpa</span></code> <code class="docutils literal notranslate"><span class="pre">_EBRII_HT9</span></code> <code class="docutils literal notranslate"><span class="pre">',</span> <span class="pre">'dpa_EB</span></code> <code class="docutils literal notranslate"><span class="pre">RII_PE16',</span></code> <code class="docutils literal notranslate"><span class="pre">'dpa_EBRII</span></code> <code class="docutils literal notranslate"><span class="pre">_INC625']</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>dumpSnapshot</p></td>
<td><p>List of snapshots to perform detailed reactor analysis, such as reactivity coefficient generation.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>eigenProb</p></td>
<td><p>Is this a eigenvalue problem or a fixed source problem?</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>epsEig</p></td>
<td><p>Convergence criteria for calculating the eigenvalue in the global flux solver</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1e-07</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>epsFSAvg</p></td>
<td><p>Convergence criteria for average fission source</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1e-05</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>epsFSPoint</p></td>
<td><p>Convergence criteria for point fission source</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1e-05</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>eqDirect</p></td>
<td><p>Does the equilibrium search with repetitive shuffing but with direct shuffling rather than the fast way</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>existingFixedSource</p></td>
<td><p>Specify an exiting fixed source input file.</p></td>
<td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['',</span></code> <code class="docutils literal notranslate"><span class="pre">'FIXSRC',</span></code> <code class="docutils literal notranslate"><span class="pre">'VARSRC']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>explicitRepeatShuffles</p></td>
<td><p>Path to file that contains a detailed shuffling history that is to be repeated exactly.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fgRemoval</p></td>
<td><p>Toggles fuel performance fission gas removal. This will remove fission gas from the fuel.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>fissionGasYieldFraction</p></td>
<td><p>The fraction of gaseous atoms produced per fission event, assuming a fission product yield of 2.0</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.25</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fluxRecon</p></td>
<td><p>Perform detailed flux and power reconstruction</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>forceDbParams</p></td>
<td><p>A list of parameter names that should always be written to the database, regardless of their Parameter Definition’s typical saveToDB status. This is only honored if the DatabaseInterface is used.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fpModel</p></td>
<td><p>This setting is used to determine how fission products are treated in an analysis. By choosing <cite>noFissionProducts</cite>, no fission products will be added. By selecting, <cite>infinitelyDilute</cite>, lumped fission products will be initialized to a very small number on the blocks/components that require them. By choosing <cite>MO99</cite>, the fission products will be represented only by Mo-99. This is a simplistic assumption that is commonly used by fast reactor analyses in scoping calculations and is not necessarily a great assumption for depletion evaluations. Finally, by choosing <cite>explicitFissionProducts</cite> the fission products will be added explicitly to the blocks/components that are depletable. This is useful for detailed tracking of fission products.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">infinitely</span></code> <code class="docutils literal notranslate"><span class="pre">Dilute</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['noFissio</span></code> <code class="docutils literal notranslate"><span class="pre">nProducts'</span></code> <code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">'infinit</span></code> <code class="docutils literal notranslate"><span class="pre">elyDilute'</span></code> <code class="docutils literal notranslate"><span class="pre">,</span> <span class="pre">'MO99',</span></code> <code class="docutils literal notranslate"><span class="pre">'explicitF</span></code> <code class="docutils literal notranslate"><span class="pre">issionProd</span></code> <code class="docutils literal notranslate"><span class="pre">ucts']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>fpModelLibrary</p></td>
<td><p>This setting should be used when <cite>fpModel</cite> is set to <cite>explicitFissionPr oducts</cite>. It is used in conjunction with any nuclideFlags defined in the blueprints to configure all the nuclides that are modeled within the core. Selecting any library option will add all nuclides from the selected library to the model so that analysts do not need to change their inputs when modifying the fission product treatment for calculations.</p></td>
<td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['',</span></code> <code class="docutils literal notranslate"><span class="pre">'MC2-3']</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>freshFeedType</p></td>
<td><p>The type of fresh fuel added to the core, used in certain pre-defined fuel shuffling logic sequences.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">feed</span> <span class="pre">fuel</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['feed</span></code> <code class="docutils literal notranslate"><span class="pre">fuel',</span></code> <code class="docutils literal notranslate"><span class="pre">'igniter</span></code> <code class="docutils literal notranslate"><span class="pre">fuel',</span></code> <code class="docutils literal notranslate"><span class="pre">'inner</span></code> <code class="docutils literal notranslate"><span class="pre">driver</span></code> <code class="docutils literal notranslate"><span class="pre">fuel']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>fuelHandlerName</p></td>
<td><p>The name of the FuelHandler class in the shuffle logic module to activate</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>fuelPerformanceEngine</p></td>
<td><p>Fuel performance engine that determines fission gas removal, bond removal, axial growth, wastage, and cladding strain.</p></td>
<td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>genReports</p></td>
<td><p>Employ the use of the reporting utility for ARMI, generating HTML and ASCII summaries of the run</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>genXS</p></td>
<td><p>Generate multigroup cross sections for the selected particle type(s) using the specified lattice physics kernel (see Lattice Physics tab). When not set, the XS library will be auto- loaded from an existing ISOTXS in the working directory, but fail if there is no ISOTXS.</p></td>
<td></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['',</span></code> <code class="docutils literal notranslate"><span class="pre">'Neutron',</span></code> <code class="docutils literal notranslate"><span class="pre">'Neutron</span></code> <code class="docutils literal notranslate"><span class="pre">and</span></code> <code class="docutils literal notranslate"><span class="pre">Gamma']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>globalFluxActive</p></td>
<td><p>Calculate the global flux at each timestep for the selected particle type(s) using the specified neutronics kernel.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Neutron</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['',</span></code> <code class="docutils literal notranslate"><span class="pre">'Neutron',</span></code> <code class="docutils literal notranslate"><span class="pre">'Neutron</span></code> <code class="docutils literal notranslate"><span class="pre">and</span></code> <code class="docutils literal notranslate"><span class="pre">Gamma']</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>gridPlateDpaXsSet</p></td>
<td><p>The cross sections to use for grid plate blocks DPA when computing displacements per atom.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dpa_EBRII_</span></code> <code class="docutils literal notranslate"><span class="pre">HT9</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['',</span> <span class="pre">'dpa_</span></code> <code class="docutils literal notranslate"><span class="pre">EBRII_INC6</span></code> <code class="docutils literal notranslate"><span class="pre">00',</span> <span class="pre">'dpa_</span></code> <code class="docutils literal notranslate"><span class="pre">EBRII_INCX</span></code> <code class="docutils literal notranslate"><span class="pre">750',</span> <span class="pre">'dpa</span></code> <code class="docutils literal notranslate"><span class="pre">_EBRII_HT9</span></code> <code class="docutils literal notranslate"><span class="pre">',</span> <span class="pre">'dpa_EB</span></code> <code class="docutils literal notranslate"><span class="pre">RII_PE16',</span></code> <code class="docutils literal notranslate"><span class="pre">'dpa_EBRII</span></code> <code class="docutils literal notranslate"><span class="pre">_INC625']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>groupStructure</p></td>
<td><p>Energy group structure to use in neutronics simulations</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ANL33</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['ANL9',</span></code> <code class="docutils literal notranslate"><span class="pre">'ANL33',</span></code> <code class="docutils literal notranslate"><span class="pre">'ANL70',</span></code> <code class="docutils literal notranslate"><span class="pre">'ANL116',</span></code> <code class="docutils literal notranslate"><span class="pre">'ANL230',</span></code> <code class="docutils literal notranslate"><span class="pre">'ANL703',</span></code> <code class="docutils literal notranslate"><span class="pre">'ANL1041',</span></code> <code class="docutils literal notranslate"><span class="pre">'ANL2082',</span></code> <code class="docutils literal notranslate"><span class="pre">'ARMI33',</span></code> <code class="docutils literal notranslate"><span class="pre">'ARMI45',</span></code> <code class="docutils literal notranslate"><span class="pre">'348']</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>growToFullCoreAfterLoad</p></td>
<td><p>Grows from 1/3 to full core after loading a 1/3 symmetric snapshot. Note: This is needed when a full core model is needed and the database was produced using a third core model.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>independentVariables</p></td>
<td><p>List of (independentVarName, value) tuples to inform optimization post- processing</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>initializeBurnChain</p></td>
<td><p>This setting is paired with the <cite>burnChainFileName</cite> setting. When enabled, this will initialize the burn-chain on initializing the case and is required for running depletion calculations where the transmutations and decays are controlled by the framework. If an external software, such as ORIGEN, contains data for the burn-chain already embedded then this may be disabled.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>inners</p></td>
<td><p>XY and Axial partial current sweep inner iterations. 0 lets the neutronics code pick a default.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>inputHeightsConsideredHot</p></td>
<td><p>This is a flag to determine if block heights, as provided in blueprints, are at hot dimensions. If false, block heights are at cold/as-built dimensions and will be thermally expanded as appropriate.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>jumpRingNum</p></td>
<td><p>The number of hex rings jumped when distributing the feed assemblies in the alternating concentric rings or checkerboard shuffle patterns (convergent / divergent shuffling).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">8</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>latticePhysicsFrequency</p></td>
<td><p>Define the frequency at which cross sections are updated with new lattice physics interactions.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOC</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['never',</span></code> <code class="docutils literal notranslate"><span class="pre">'BOL',</span></code> <code class="docutils literal notranslate"><span class="pre">'BOC',</span> <span class="pre">'ev</span></code> <code class="docutils literal notranslate"><span class="pre">eryNode',</span></code> <code class="docutils literal notranslate"><span class="pre">'firstCoup</span></code> <code class="docutils literal notranslate"><span class="pre">ledIterati</span></code> <code class="docutils literal notranslate"><span class="pre">on',</span></code> <code class="docutils literal notranslate"><span class="pre">'all']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>levelsPerCascade</p></td>
<td><p>The number of moves made per cascade when performing convergent or divergent shuffle patterns.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">14</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>lfpCompositionFilePath</p></td>
<td><p>Path to the file that contains lumped fission product composition definitions (e.g. equilibrium yields). This is unused when the <cite>explicitFissionProducts</cite> or <cite>MO99</cite> modeling options are selected.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">referenceF</span></code> <code class="docutils literal notranslate"><span class="pre">issionProd</span></code> <code class="docutils literal notranslate"><span class="pre">ucts.dat</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>loadFromDBEveryNode</p></td>
<td><p>Every node loaded from reference database</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>loadPadElevation</p></td>
<td><p>The elevation of the bottom of the above-core load pad (ACLP) in cm from the bottom of the upper grid plate. Used for calculating the load pad dose</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>loadPadLength</p></td>
<td><p>The length of the load pad. Used to compute average and peak dose.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>loadStyle</p></td>
<td><p>Description of how the ARMI case will be initialized</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">fromInput</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['fromInpu</span></code> <code class="docutils literal notranslate"><span class="pre">t',</span></code> <code class="docutils literal notranslate"><span class="pre">'fromDB']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>loadingFile</p></td>
<td><p>The blueprints/loading input file path containing component dimensions, materials, etc.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>makeAllBlockLFPsIndepende nt</p></td>
<td><p>Flag to make all blocks have independent lumped fission products. Note that this is forced to be True when the <cite>explicitFissionProducts</cite> modeling option is selected or an interface named <cite>mcnp</cite> is on registered on the operator stack.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>materialNamespaceOrder</p></td>
<td><p>Ordered list of Python namespaces for finding materials by class name. This allows users to choose between different implementations of reactor materials. For example, the framework comes with a basic UZr material, but power users will want to override it with their own UZr subclass. This allows users to specify to get materials out of a plugin rather than from the framework.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>mcnpLibraryVersion</p></td>
<td><p>This setting controls the nuclides in the problem according to the available nuclides in the selected library. For instance, some MCNP libraries contain elemental nuclides while others do not. Only used when MCNP is selected as neutronicsKernel.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">B-VII.1</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['ENDF/B-</span></code> <code class="docutils literal notranslate"><span class="pre">V.0',</span> <span class="pre">'END</span></code> <code class="docutils literal notranslate"><span class="pre">F/B-</span></code> <code class="docutils literal notranslate"><span class="pre">VII.0',</span> <span class="pre">'E</span></code> <code class="docutils literal notranslate"><span class="pre">NDF/B-</span></code> <code class="docutils literal notranslate"><span class="pre">VII.1',</span> <span class="pre">'E</span></code> <code class="docutils literal notranslate"><span class="pre">NDF/B-</span></code> <code class="docutils literal notranslate"><span class="pre">VIII.0']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>minMeshSizeRatio</p></td>
<td><p>This is the minimum ratio of mesh sizes (dP1/(dP1 + dP2)) allowable – only active if automaticVariableMesh flag is set to True</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.15</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>minimumFissileFraction</p></td>
<td><p>Minimum fissile fraction (fissile number densities / heavy metal number densities).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.045</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>minimumNuclideDensity</p></td>
<td><p>Density to use for nuclides and fission products at infinite dilution. This is also used as the minimum density considered for computing macroscopic cross sections.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1e-15</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>moduleVerbosity</p></td>
<td><p>Verbosity of any module- specific loggers that are set</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{}</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>nCycles</p></td>
<td><p>Number of cycles that will be simulated. Fuel management happens at the beginning of each cycle. Can include active (full- power) cycles as well as post-shutdown decay-heat steps. For restart cases, this value should include both cycles from the restart plus any additional cycles to be run after <cite>startCycle</cite>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>nTasks</p></td>
<td><p>Number of parallel tasks to request on the cluster</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>neutronicsKernel</p></td>
<td><p>The neutronics / depletion solver for global flux solve.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>neutronicsType</p></td>
<td><p>The type of neutronics solution that is desired.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">real</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['real',</span></code> <code class="docutils literal notranslate"><span class="pre">'adjoint',</span></code> <code class="docutils literal notranslate"><span class="pre">'both']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>nonUniformAssemFlags</p></td>
<td><p>Assemblies that match a flag group on this list will not have their mesh changed with the reference mesh of the core for uniform mesh cases (non-detailed axial expansion). Another plugin may need to make the mesh uniform if necessary.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>numberMeshPerEdge</p></td>
<td><p>Number of mesh per block edge for finite- difference planar mesh refinement.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>outers</p></td>
<td><p>XY and Axial partial current sweep max outer iterations.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">100</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>outputCacheLocation</p></td>
<td><p>Location where cached calculations are stored and retrieved if exactly the same as the calculation requested. Empty string will not cache.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>outputFileExtension</p></td>
<td><p>The default extension for plots</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">jpg</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['jpg',</span></code> <code class="docutils literal notranslate"><span class="pre">'png',</span></code> <code class="docutils literal notranslate"><span class="pre">'svg',</span></code> <code class="docutils literal notranslate"><span class="pre">'pdf']</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>plotShuffleArrows</p></td>
<td><p>Make plots with arrows showing each move.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>plots</p></td>
<td><p>Generate additional plots throughout the ARMI analysis</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>power</p></td>
<td><p>Nameplate thermal power of the reactor. Can be varied by setting the powerFractions setting.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>powerDensity</p></td>
<td><p>Thermal power of the Reactor, per gram of Heavy metal mass. Ignore this setting if the <cite>power</cite> setting is non- zero.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>powerFractions</p></td>
<td><p>List of power fractions at each cycle (fraction of rated thermal power the plant achieves). R is repeat. For example [0.5, 1.0, ‘9R’] is 1 50% followed by 10 100%. Specify zeros to indicate decay-only cycles (i.e. for decay heat analysis). None implies always full rated power.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>profile</p></td>
<td><p>Turn on the profiler for the submitted case. The profiler results will not include all import times.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>reloadDBName</p></td>
<td><p>Name of the database file to load initial conditions from</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>removePerCycle</p></td>
<td><p>The number of fuel assemblies removed per cycle at equilibrium.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">3</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>restartNeutronics</p></td>
<td><p>Restart global flux case using outputs from last time as a guess</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>rmExternalFilesAtBOC</p></td>
<td><p>Clean up files at the beginning of each cycle (BOC)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>rmExternalFilesAtEOL</p></td>
<td><p>Clean up intermediate files after the run completes (EOL)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>runLatticePhysicsBeforeSh uffling</p></td>
<td><p>Forces the Generation of Cross Sections Prior to Shuffling the Fuel Assemblies. Note: This is recommended when performing equilibrium shuffling branching searches.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>runType</p></td>
<td><p>Type of run that this is, e.g. a normal run through all cycles, a snapshot- loaded reactivity coefficient run, etc.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Standard</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['Standard</span></code> <code class="docutils literal notranslate"><span class="pre">',</span> <span class="pre">'Equili</span></code> <code class="docutils literal notranslate"><span class="pre">brium',</span> <span class="pre">'S</span></code> <code class="docutils literal notranslate"><span class="pre">napshots']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>savePhysicsFiles</p></td>
<td><p>List of snapshots to dump reactor physics kernel input and output files. Can be used to perform follow-on analysis.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>shuffleLogic</p></td>
<td><p>Path to a Python script or dotted module path that handles the fuel shuffling for this case. This is user-defined per run as a dynamic input.</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>shuffleSequenceFile</p></td>
<td><p>Path to a YAML file defining a custom shuffle sequence</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>skipCycles</p></td>
<td><p>Number of cycles to be skipped during the calculation. Note: This is typically used when repeating only a portion of a calculation or repeating a run.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>sortReactor</p></td>
<td><p>If unsorted, ArmiObject IDs will be by the order they were added to the Reactor.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>startCycle</p></td>
<td><p>Cycle number to continue calculation from. Database will load from the time step just before. For snapshots use <cite>dumpSnapshot</cite>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>startNode</p></td>
<td><p>Timenode number (0 for BOC, etc.) to continue calculation from. Database will load from the time step just before.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>stationaryBlockFlags</p></td>
<td><p>Blocks with these flags will not move in moves. Used for fuel management.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['GRID_PLA</span></code> <code class="docutils literal notranslate"><span class="pre">TE']</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>summarizeAssemDesign</p></td>
<td><p>Print a summary of the assembly design details at BOL</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>syncDbAfterWrite</p></td>
<td><p>Copy the output database from the fast scratch space to the shared network drive after each write.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">True</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>targetK</p></td>
<td><p>Target criticality (k-effective) for cycle length, branch, and equilibrium search</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.005</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>tempGroups</p></td>
<td><p>The range of fuel temperatures where cross- sections will be the same for a given cross section type (units of degrees C)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>tightCoupling</p></td>
<td><p>Boolean to turn on/off tight coupling</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>tightCouplingMaxNumIters</p></td>
<td><p>Maximum number of iterations for tight coupling.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>tightCouplingSettings</p></td>
<td><p>Data structure defining the tight coupling parameters and convergence criteria for each interface.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;TightCoup</span></code> <code class="docutils literal notranslate"><span class="pre">lingSettin</span></code> <code class="docutils literal notranslate"><span class="pre">gs</span> <span class="pre">with</span></code> <code class="docutils literal notranslate"><span class="pre">Interface</span></code> <code class="docutils literal notranslate"><span class="pre">functions</span></code> <code class="docutils literal notranslate"><span class="pre">dict_keys(</span></code> <code class="docutils literal notranslate"><span class="pre">[])&gt;</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>tolerateBurnupChange</p></td>
<td><p>Burnup window for computing cross sections. If the prior cross sections were computed within the window, new cross sections will not be generated and the prior calculated cross sections will be used.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">0.0</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>trace</p></td>
<td><p>Activate Python trace module to print out each line as it’s executed</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>trackAssems</p></td>
<td><p>Retain discharged assemblies in a spent fuel pool so their histories can be analyzed or the assemblies reused. Turning this off removes discharged assemblies to minimize memory and database size. Assemblies explicitly discharged to the spent fuel pool remain regardless, allowing selective tracking.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>uniformMeshMinimumSize</p></td>
<td><p>Minimum mesh size used when generating an axial mesh for the uniform mesh converter. Providing a value for this setting allows fuel and control material boundaries to be enforced better in uniform mesh.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>userPlugins</p></td>
<td><p>YAML list defining the locations of UserPlugin subclasses. You can enter the full ARMI import path: armi.test.test_wha t.MyPlugin, or you can enter the full file path: /path/to/my/pluginz.py:My Plugin</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>verbosity</p></td>
<td><p>How verbose the output will be</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">info</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['debug',</span></code> <code class="docutils literal notranslate"><span class="pre">'extra',</span></code> <code class="docutils literal notranslate"><span class="pre">'info',</span> <span class="pre">'i</span></code> <code class="docutils literal notranslate"><span class="pre">mportant',</span></code> <code class="docutils literal notranslate"><span class="pre">'prompt',</span></code> <code class="docutils literal notranslate"><span class="pre">'warning',</span></code> <code class="docutils literal notranslate"><span class="pre">'error']</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>versions</p></td>
<td><p>Versions of ARMI, and any Apps or Plugins that register a version here.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">{}</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>xsBlockRepresentation</p></td>
<td><p>The type of averaging to perform when creating cross sections for a group of blocks</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Average</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['Median',</span></code> <code class="docutils literal notranslate"><span class="pre">'Average',</span></code> <code class="docutils literal notranslate"><span class="pre">'FluxWeigh</span></code> <code class="docutils literal notranslate"><span class="pre">tedAverage</span></code> <code class="docutils literal notranslate"><span class="pre">',</span> <span class="pre">'Compon</span></code> <code class="docutils literal notranslate"><span class="pre">entAverage</span></code> <code class="docutils literal notranslate"><span class="pre">1DSlab']</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>xsBucklingConvergence</p></td>
<td><p>Convergence criteria for the buckling iteration if it is available in the lattice physics solver</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1e-05</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>xsEigenvalueConvergence</p></td>
<td><p>Convergence criteria for the eigenvalue in the lattice physics kernel</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1e-05</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>xsKernel</p></td>
<td><p>Method to determine broad group cross sections for assemblies</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">MC2v3</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">['',</span></code> <code class="docutils literal notranslate"><span class="pre">'MC2v2',</span></code> <code class="docutils literal notranslate"><span class="pre">'MC2v3',</span> <span class="pre">'</span></code> <code class="docutils literal notranslate"><span class="pre">MC2v3-</span></code> <code class="docutils literal notranslate"><span class="pre">PARTISN',</span></code> <code class="docutils literal notranslate"><span class="pre">'SERPENT']</span></code></p></td>
</tr>
<tr class="row-even"><td><p>xsScatteringOrder</p></td>
<td><p>Scattering order for the lattice physics calculation</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">3</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>zoneDefinitions</p></td>
<td><p>Manual definitions of zones as lists of assembly locations (e.g. “zoneName: loc1, loc2, loc3”) . Zones are groups of assemblies used by various summary and calculation routines. See also zonesFile for an alternative method of specifying zones.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[]</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>zonesFile</p></td>
<td><p>Input file containing the definition of Zones to be applied to the reactor. See also zoneDefinitions for an alternative method of specifying zones.</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="User Docs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="outputs.html" class="btn btn-neutral float-right" title="2. Outputs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2025, TerraPower, LLC.
      <span class="lastupdated">Last updated on 2025-12-18.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>