

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="armi.bookkeeping.visualization.xdmf module" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/.apidocs/armi.bookkeeping.visualization.xdmf.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="Support for dumping XDMF files. XDMF is a data interchange format that allows for separate representation of the data itself and a description of how those data are to be interpreted. The data desc..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>armi.bookkeeping.visualization.xdmf module &mdash; ARMI 0.1.7 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.bookkeeping.historyTracker module" href="armi.bookkeeping.historyTracker.html" />
    <link rel="prev" title="armi.bookkeeping.visualization.vtk module" href="armi.bookkeeping.visualization.vtk.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blog/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.bookkeeping.html">armi.bookkeeping package</a> &raquo;</li>
        
          <li><a href="armi.bookkeeping.visualization.html">armi.bookkeeping.visualization package</a> &raquo;</li>
        
      <li>armi.bookkeeping.visualization.xdmf module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/terrapower/armi/blob/master/doc/.apidocs/armi.bookkeeping.visualization.xdmf.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.bookkeeping.visualization.xdmf">
<span id="armi-bookkeeping-visualization-xdmf-module"></span><h1>armi.bookkeeping.visualization.xdmf module<a class="headerlink" href="#module-armi.bookkeeping.visualization.xdmf" title="Permalink to this headline">¶</a></h1>
<p>Support for dumping XDMF files.</p>
<p><a class="reference external" href="http://www.xdmf.org/index.php/Main_Page">XDMF</a> is a data interchange format that
allows for separate representation of the data itself and a description of how those
data are to be interpreted. The data description (“light” data) lives in an XML file,
while the actual data (in our case, data to be plotted), as well as the data describing
the mesh (“hard” data) can be stored in HDF5 files, binary files, or embedded directly
into the XML file. In most cases, this allows for visualizing data directly out of an
ARMI database file. Using the <code class="docutils literal notranslate"><span class="pre">XdmfDumper</span></code> will produce an XML file (with an <code class="docutils literal notranslate"><span class="pre">.xdmf</span></code>
extension) containing the description of data, as well as an HDF5 file containing the
mesh. Together with the input database, the <code class="docutils literal notranslate"><span class="pre">.xdmf</span></code> file can be opened in a
visualization tool that supports XDMF.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Paraview seems to have rather good support for XDMF, while VisIt does not. The main
issue seems to be that VisIt does not properly render the general polyhedra that
XDMF supports. Unfortunately, we __need__ to use this to show hexagonal geometries,
since it’s the only way to get a hexagonal prism without splitting up the mesh into
wedges. To do that would require splitting the parameter data, which would defeat
the main benefit of using XMDF in the first place (to be able to plot out of the
original Database file). Cartesian and R-X-Theta geometries in VisIt seem to work
fine. Support for polyhedra is being tracked in <a class="reference external" href="https://github.com/visit-dav/visit/issues/1287">#1287</a>.</p>
</div>
<dl class="function">
<dt id="armi.bookkeeping.visualization.xdmf._getAttributesFromDataset">
<code class="sig-prename descclassname">armi.bookkeeping.visualization.xdmf.</code><code class="sig-name descname">_getAttributesFromDataset</code><span class="sig-paren">(</span><em class="sig-param">d: h5py._hl.dataset.Dataset</em><span class="sig-paren">)</span> &#x2192; Dict[str, str]<a class="reference internal" href="../_modules/armi/bookkeeping/visualization/xdmf.html#_getAttributesFromDataset"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf._getAttributesFromDataset" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="armi.bookkeeping.visualization.xdmf.XdmfDumper">
<em class="property">class </em><code class="sig-prename descclassname">armi.bookkeeping.visualization.xdmf.</code><code class="sig-name descname">XdmfDumper</code><span class="sig-paren">(</span><em class="sig-param">baseName: str</em>, <em class="sig-param">inputName: Optional[str] = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/visualization/xdmf.html#XdmfDumper"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf.XdmfDumper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="armi.bookkeeping.visualization.dumper.html#armi.bookkeeping.visualization.dumper.VisFileDumper" title="armi.bookkeeping.visualization.dumper.VisFileDumper"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.bookkeeping.visualization.dumper.VisFileDumper</span></code></a></p>
<p>VisFileDumper implementation for XDMF format.</p>
<p>The general strategy of this dumper is to create a new HDF5 file that contains just
the necessary mesh information for each dumped time step. The XML that
describes/points to these data is stored internally as <code class="docutils literal notranslate"><span class="pre">ElementTree</span></code> objects until
the end. When all time steps have been processed, these elements have time
information added to them, and are collected into a “TemporalCollection” Grid and
written to an <code class="docutils literal notranslate"><span class="pre">.xdmf</span></code> file.</p>
<dl class="method">
<dt id="armi.bookkeeping.visualization.xdmf.XdmfDumper.__enter__">
<code class="sig-name descname">__enter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/visualization/xdmf.html#XdmfDumper.__enter__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf.XdmfDumper.__enter__" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepare to write states.</p>
<p>The dumper keeps track of <code class="docutils literal notranslate"><span class="pre">&lt;Grid&gt;</span></code> tags that need to be written into a
Collection at the end. This also opens an auxiliary HDF5 file for writing meshes
at each time step.</p>
</dd></dl>

<dl class="method">
<dt id="armi.bookkeeping.visualization.xdmf.XdmfDumper.__exit__">
<code class="sig-name descname">__exit__</code><span class="sig-paren">(</span><em class="sig-param">type</em>, <em class="sig-param">value</em>, <em class="sig-param">traceback</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/visualization/xdmf.html#XdmfDumper.__exit__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf.XdmfDumper.__exit__" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize file writing.</p>
<p>This writes all of the <code class="docutils literal notranslate"><span class="pre">&lt;Grid&gt;</span></code> tags into a Collection for all time steps, and
closes the input database and mesh-bearing HDF5 file.</p>
</dd></dl>

<dl class="method">
<dt id="armi.bookkeeping.visualization.xdmf.XdmfDumper._dedupTimes">
<em class="property">static </em><code class="sig-name descname">_dedupTimes</code><span class="sig-paren">(</span><em class="sig-param">times: List[float]</em><span class="sig-paren">)</span> &#x2192; List[float]<a class="reference internal" href="../_modules/armi/bookkeeping/visualization/xdmf.html#XdmfDumper._dedupTimes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf.XdmfDumper._dedupTimes" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure that no two times are the same.</p>
<p>Duplicates will be resolved by bumping each subsequent duplicate time forward by
some epsilon, cascading following duplicates by the same amount until no
duplicates remain. This will fail in the case where there are already times that
are within Ndup*epsilon of each other. In such cases, this function probably
isn’t valid anyways.</p>
</dd></dl>

<dl class="method">
<dt id="armi.bookkeeping.visualization.xdmf.XdmfDumper.dumpState">
<code class="sig-name descname">dumpState</code><span class="sig-paren">(</span><em class="sig-param">r: armi.reactor.reactors.Reactor</em>, <em class="sig-param">includeParams: Optional[Set[str]] = None</em>, <em class="sig-param">excludeParams: Optional[Set[str]] = None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/visualization/xdmf.html#XdmfDumper.dumpState"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf.XdmfDumper.dumpState" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a <code class="docutils literal notranslate"><span class="pre">&lt;Grid&gt;</span></code> for a single timestep, as well as supporting HDF5 datasets.</p>
</dd></dl>

<dl class="method">
<dt id="armi.bookkeeping.visualization.xdmf.XdmfDumper._collectObjectData">
<code class="sig-name descname">_collectObjectData</code><span class="sig-paren">(</span><em class="sig-param">objs: List[armi.reactor.composites.ArmiObject], timeGroupName, node: xml.etree.ElementTree.Element</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/visualization/xdmf.html#XdmfDumper._collectObjectData"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf.XdmfDumper._collectObjectData" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan for things that look plottable in the input database.</p>
<p>“Plottable” things are anything that have int or float data, and the same number
of elements as there are objects.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This makes some assumptions as to the structure of the database.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="armi.bookkeeping.visualization.xdmf.XdmfDumper._makeBlockMesh">
<code class="sig-name descname">_makeBlockMesh</code><span class="sig-paren">(</span><em class="sig-param">r: armi.reactor.reactors.Reactor</em>, <em class="sig-param">indexMap</em><span class="sig-paren">)</span> &#x2192; xml.etree.ElementTree.Element<a class="reference internal" href="../_modules/armi/bookkeeping/visualization/xdmf.html#XdmfDumper._makeBlockMesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf.XdmfDumper._makeBlockMesh" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="armi.bookkeeping.visualization.xdmf.XdmfDumper._makeAssemblyMesh">
<code class="sig-name descname">_makeAssemblyMesh</code><span class="sig-paren">(</span><em class="sig-param">r: armi.reactor.reactors.Reactor</em>, <em class="sig-param">indexMap</em><span class="sig-paren">)</span> &#x2192; xml.etree.ElementTree.Element<a class="reference internal" href="../_modules/armi/bookkeeping/visualization/xdmf.html#XdmfDumper._makeAssemblyMesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf.XdmfDumper._makeAssemblyMesh" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="armi.bookkeeping.visualization.xdmf.XdmfDumper._makeGenericMesh">
<em class="property">static </em><code class="sig-name descname">_makeGenericMesh</code><span class="sig-paren">(</span><em class="sig-param">name: str</em>, <em class="sig-param">nCells: int</em>, <em class="sig-param">vertexData: h5py._hl.dataset.Dataset</em>, <em class="sig-param">topologyData: h5py._hl.dataset.Dataset</em><span class="sig-paren">)</span> &#x2192; xml.etree.ElementTree.Element<a class="reference internal" href="../_modules/armi/bookkeeping/visualization/xdmf.html#XdmfDumper._makeGenericMesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf.XdmfDumper._makeGenericMesh" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="armi.bookkeeping.visualization.xdmf.XdmfDumper._abc_impl">
<code class="sig-name descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf.XdmfDumper._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="armi.bookkeeping.visualization.xdmf._getTopologyFromShape">
<code class="sig-prename descclassname">armi.bookkeeping.visualization.xdmf.</code><code class="sig-name descname">_getTopologyFromShape</code><span class="sig-paren">(</span><em class="sig-param">b: armi.reactor.blocks.Block</em>, <em class="sig-param">offset: int</em><span class="sig-paren">)</span> &#x2192; Tuple[int, List[int]]<a class="reference internal" href="../_modules/armi/bookkeeping/visualization/xdmf.html#_getTopologyFromShape"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.bookkeeping.visualization.xdmf._getTopologyFromShape" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of vertices used to make the shape, and XDMF topology values.</p>
<p>The size of the XDMF topology values cannot be used directly in computing the next
offset because it sometimes contains vertex indices __and__ sizing information.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="armi.bookkeeping.historyTracker.html" class="btn btn-neutral float-right" title="armi.bookkeeping.historyTracker module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="armi.bookkeeping.visualization.vtk.html" class="btn btn-neutral float-left" title="armi.bookkeeping.visualization.vtk module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2021, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2021-09-13.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>