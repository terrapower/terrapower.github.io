<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="armi.mpiActions module" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://terrapower.github.io/armi/.apidocs/armi.mpiActions.html" />
<meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
<meta property="og:description" content="This module provides an abstract class to be used to implement “MPI actions.”. MPI actions are tasks, activities, or work that can be executed on the worker nodes. The standard workflow is essentia..." />
<meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
<meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
<meta name="description" content="This module provides an abstract class to be used to implement “MPI actions.”. MPI actions are tasks, activities, or work that can be executed on the worker nodes. The standard workflow is essentia..." />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>armi.mpiActions module &mdash; ARMI 0.2.9 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme_fixes.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-rendered-html.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.pluginManager module" href="armi.pluginManager.html" />
    <link rel="prev" title="armi.meta module" href="armi.meta.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >

          
          
          <a href="../index.html" class="icon icon-home">
            ARMI
              <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.2.9
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="armi.html#armi.disableFutureConfigures"><code class="docutils literal notranslate"><span class="pre">disableFutureConfigures()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#armi.isStableReleaseVersion"><code class="docutils literal notranslate"><span class="pre">isStableReleaseVersion()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#armi.init"><code class="docutils literal notranslate"><span class="pre">init()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#armi.getDefaultPlugins"><code class="docutils literal notranslate"><span class="pre">getDefaultPlugins()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#armi.getDefaultPluginManager"><code class="docutils literal notranslate"><span class="pre">getDefaultPluginManager()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#armi.isConfigured"><code class="docutils literal notranslate"><span class="pre">isConfigured()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#armi.getPluginManager"><code class="docutils literal notranslate"><span class="pre">getPluginManager()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#armi.getPluginManagerOrFail"><code class="docutils literal notranslate"><span class="pre">getPluginManagerOrFail()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#armi.getApp"><code class="docutils literal notranslate"><span class="pre">getApp()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#armi.configure"><code class="docutils literal notranslate"><span class="pre">configure()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#armi.applyAsyncioWindowsWorkaround"><code class="docutils literal notranslate"><span class="pre">applyAsyncioWindowsWorkaround()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#subpackages">Subpackages</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="armi.apps.html">armi.apps module</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.conftest.html">armi.conftest module</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.context.html">armi.context module</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.interfaces.html">armi.interfaces module</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.meta.html">armi.meta module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">armi.mpiActions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.pluginManager.html">armi.pluginManager module</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.plugins.html">armi.plugins module</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.runLog.html">armi.runLog module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #233C5B" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">armi</a></li>
          <li class="breadcrumb-item"><a href="armi.html">armi package</a></li>
      <li class="breadcrumb-item active">armi.mpiActions module</li>
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-armi.mpiActions">
<span id="armi-mpiactions-module"></span><h1>armi.mpiActions module<a class="headerlink" href="#module-armi.mpiActions" title="Permalink to this heading"></a></h1>
<p>This module provides an abstract class to be used to implement “MPI actions.”.</p>
<p>MPI actions are tasks, activities, or work that can be executed on the worker nodes. The standard
workflow is essentially that the primary node creates an <a class="reference internal" href="#armi.mpiActions.MpiAction" title="armi.mpiActions.MpiAction"><code class="xref py py-class docutils literal notranslate"><span class="pre">MpiAction</span></code></a>,
sends it to the workers, and then both the primary and the workers
<a class="reference internal" href="#armi.mpiActions.MpiAction.invoke" title="armi.mpiActions.MpiAction.invoke"><code class="xref py py-meth docutils literal notranslate"><span class="pre">invoke()</span></code></a> together. For example:</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Sample MPI Action Workflow</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 5%" />
<col style="width: 60%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Step</p></th>
<th class="head"><p>Code</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p><strong>primary</strong>: <a class="reference internal" href="#armi.mpiActions.MpiAction" title="armi.mpiActions.MpiAction"><code class="xref py py-class docutils literal notranslate"><span class="pre">distributeState</span> <span class="pre">=</span> <span class="pre">DistributeStateAction()</span></code></a></p>
<p><strong>worker</strong>: <code class="code docutils literal notranslate"><span class="pre">action</span> <span class="pre">=</span> <span class="pre">context.MPI_COMM.bcast(None,</span> <span class="pre">root=0)</span></code></p>
</td>
<td><p><strong>primary</strong>: Initializing a distribute state action.</p>
<p><strong>worker</strong>: Waiting for something to do, as determined by the primary, this happens within the
worker’s <code class="xref py py-meth docutils literal notranslate"><span class="pre">workerOperate()</span></code>.</p>
</td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p><strong>primary</strong>: <code class="code docutils literal notranslate"><span class="pre">context.MPI_COMM.bcast(distributeState,</span> <span class="pre">root=0)</span></code></p>
<p><strong>worker</strong>: <code class="code docutils literal notranslate"><span class="pre">action</span> <span class="pre">=</span> <span class="pre">context.MPI_COMM.bcast(None,</span> <span class="pre">root=0)</span></code></p>
</td>
<td><p><strong>primary</strong>: Broadcasts a distribute state action to all the worker nodes</p>
<p><strong>worker</strong>: Receives the action from the primary, which is a
<a class="reference internal" href="#armi.mpiActions.DistributeStateAction" title="armi.mpiActions.DistributeStateAction"><code class="xref py py-class docutils literal notranslate"><span class="pre">DistributeStateAction</span></code></a>.</p>
</td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p><strong>primary</strong>: <code class="code docutils literal notranslate"><span class="pre">distributeState.invoke(self.o,</span> <span class="pre">self.r,</span> <span class="pre">self.cs)</span></code></p>
<p><strong>worker</strong>: <code class="code docutils literal notranslate"><span class="pre">action.invoke(self.o,</span> <span class="pre">self.r,</span> <span class="pre">self.cs)</span></code></p>
</td>
<td><p>Both invoke the action, and are in sync. Any broadcast or receive within the action should
also be synced up.</p></td>
</tr>
</tbody>
</table>
<p>In order to create a new, custom MPI Action, inherit from <a class="reference internal" href="#armi.mpiActions.MpiAction" title="armi.mpiActions.MpiAction"><code class="xref py py-class docutils literal notranslate"><span class="pre">MpiAction</span></code></a>,
and override the <a class="reference internal" href="#armi.mpiActions.MpiAction.invokeHook" title="armi.mpiActions.MpiAction.invokeHook"><code class="xref py py-meth docutils literal notranslate"><span class="pre">invokeHook()</span></code></a> method.</p>
<dl class="py class">
<dt class="sig sig-object py" id="armi.mpiActions.MpiAction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.mpiActions.</span></span><span class="sig-name descname"><span class="pre">MpiAction</span></span><a class="reference internal" href="../_modules/armi/mpiActions.html#MpiAction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.MpiAction" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Base of all MPI actions.</p>
<p>MPI Actions are tasks that can be executed without needing lots of other
information. When a worker node sits in its main loop, and receives an MPI Action, it will
simply call <a class="reference internal" href="#armi.mpiActions.MpiAction.invoke" title="armi.mpiActions.MpiAction.invoke"><code class="xref py py-meth docutils literal notranslate"><span class="pre">invoke()</span></code></a>.</p>
<dl class="py property">
<dt class="sig sig-object py" id="armi.mpiActions.MpiAction.parallel">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parallel</span></span><a class="headerlink" href="#armi.mpiActions.MpiAction.parallel" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.mpiActions.MpiAction.invokeAsMaster">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">invokeAsMaster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#MpiAction.invokeAsMaster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.MpiAction.invokeAsMaster" title="Permalink to this definition"></a></dt>
<dd><p>Simplified method to call from the primary process.</p>
<p>This can be used in place of:</p>
<blockquote>
<div><p>someInstance = MpiAction()
someInstance = COMM_WORLD.bcast(someInstance, root=0)
someInstance.invoke(o, r, cs)</p>
</div></blockquote>
<p>Interestingly, the code above can be used in two ways:</p>
<ol class="arabic simple">
<li><p>Both the primary and worker can call the above code at the same time, or</p></li>
<li><p>the primary can run the above code, which will be handled by the worker’s main loop.</p></li>
</ol>
<p>Option number 2 is the most common usage.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method will not work if the constructor (i.e. <code class="code docutils literal notranslate"><span class="pre">__init__</span></code>) requires
additional arguments. Since the method body is so simple, it is strong discouraged to
add a <code class="code docutils literal notranslate"><span class="pre">*args</span></code> or <code class="code docutils literal notranslate"><span class="pre">**kwargs</span></code> arguments to this method.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>o</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">armi.operators.Operator</span></code>) – If an operator is not necessary, supply <code class="code docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>r</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">armi.operators.Reactor</span></code>) – If a reactor is not necessary, supply <code class="code docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.mpiActions.MpiAction.broadcast">
<span class="sig-name descname"><span class="pre">broadcast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#MpiAction.broadcast"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.MpiAction.broadcast" title="Permalink to this definition"></a></dt>
<dd><p>A wrapper around <code class="docutils literal notranslate"><span class="pre">bcast</span></code>, on the primary node can be run with an equals sign, so that it
can be consistent within both primary and worker nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>obj</strong> – This is any object that can be broadcast, if it is None, then it will broadcast itself,
which triggers it to run on the workers (assuming the workers are in the worker main loop.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">armi.operators.operator.OperatorMPI.workerOperate</span></code></dt><dd><p>receives this on the workers and calls <code class="docutils literal notranslate"><span class="pre">invoke</span></code></p>
</dd>
</dl>
</div>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>The standard <code class="docutils literal notranslate"><span class="pre">bcast</span></code> method creates a new instance even for the root process. Consequently,
when passing an object, references can be broken to the original object. Therefore, this
method, returns the original object when called by the primary node, or the broadcasted
object when called on the worker nodes.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.mpiActions.MpiAction.gather">
<span class="sig-name descname"><span class="pre">gather</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#MpiAction.gather"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.MpiAction.gather" title="Permalink to this definition"></a></dt>
<dd><p>A wrapper around <code class="docutils literal notranslate"><span class="pre">MPI_COMM.gather</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>obj</strong> – This is any object that can be gathered, if it is None, then it will gather itself.</p>
</dd>
</dl>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>The returned list will contain a reference to the original gathered object, without making a copy of it.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.mpiActions.MpiAction.invoke">
<span class="sig-name descname"><span class="pre">invoke</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#MpiAction.invoke"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.MpiAction.invoke" title="Permalink to this definition"></a></dt>
<dd><p>This method is called by worker nodes, and passed the worker node’s operator, reactor and
settings file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>o</strong> (<a class="reference internal" href="armi.operators.operator.html#armi.operators.operator.Operator" title="armi.operators.operator.Operator"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.operators.operator.Operator</span></code></a>) – the operator for this process</p></li>
<li><p><strong>r</strong> (<a class="reference internal" href="armi.reactor.reactors.html#armi.reactor.reactors.Reactor" title="armi.reactor.reactors.Reactor"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.reactor.reactors.Reactor</span></code></a>) – the reactor represented in this process</p></li>
<li><p><strong>cs</strong> (<a class="reference internal" href="armi.settings.caseSettings.html#armi.settings.caseSettings.Settings" title="armi.settings.caseSettings.Settings"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.settings.caseSettings.Settings</span></code></a>) – the case settings</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>result</strong> – result from invokeHook</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)">object</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.mpiActions.MpiAction.mpiFlatten">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mpiFlatten</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">allCPUResults</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#MpiAction.mpiFlatten"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.MpiAction.mpiFlatten" title="Permalink to this definition"></a></dt>
<dd><p>Flatten results to the same order they were in before making a list of mpiIter results.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#armi.mpiActions.MpiAction.mpiIter" title="armi.mpiActions.MpiAction.mpiIter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mpiIter</span></code></a></dt><dd><p>used for distributing objects/tasks</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.mpiActions.MpiAction.mpiIter">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mpiIter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">objectsForAllCoresToIter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#MpiAction.mpiIter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.MpiAction.mpiIter" title="Permalink to this definition"></a></dt>
<dd><p>Generate the subset of objects one node is responsible for in MPI.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Each CPU will get similar number of objects. E.G. if there are 12 objects and 5
CPUs, the first 2 CPUs will get 3 objects and the last 3 CPUS will get 2.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>objectsForAllCoresToIter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><em>list</em></a>) – List of all objects that need to have an MPI calculation performed on.
Note, that since len() is needed this method cannot accept a generator.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#armi.mpiActions.MpiAction.mpiFlatten" title="armi.mpiActions.MpiAction.mpiFlatten"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mpiFlatten</span></code></a></dt><dd><p>used for collecting results</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.mpiActions.MpiAction.invokeHook">
<span class="sig-name descname"><span class="pre">invokeHook</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#MpiAction.invokeHook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.MpiAction.invokeHook" title="Permalink to this definition"></a></dt>
<dd><p>This method must be overridden in sub-clases.</p>
<p>This method is called by worker nodes, and has access to the worker node’s operator,
reactor, and settings (through <code class="code docutils literal notranslate"><span class="pre">self.o</span></code>, <code class="code docutils literal notranslate"><span class="pre">self.r</span></code>, and <code class="code docutils literal notranslate"><span class="pre">self.cs</span></code>).
It must return a boolean value of <code class="code docutils literal notranslate"><span class="pre">True</span></code> or <code class="code docutils literal notranslate"><span class="pre">False</span></code>, otherwise the worker node
will raise an exception and terminate execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>result</strong> – Dependent on implementation</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.12)">object</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.mpiActions.runActions">
<span class="sig-prename descclassname"><span class="pre">armi.mpiActions.</span></span><span class="sig-name descname"><span class="pre">runActions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numPerNode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">serial</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#runActions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.runActions" title="Permalink to this definition"></a></dt>
<dd><p>Run a series of MpiActions in parallel, or in series if <code class="code docutils literal notranslate"><span class="pre">serial=True</span></code>.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>The number of actions DOES NOT need to match <code class="code docutils literal notranslate"><span class="pre">context.MPI_SIZE</span></code>.</p>
<p>Calling this method may invoke MPI Split which will change the MPI_SIZE during the action. This allows someone to
call MPI operations without being blocked by tasks which are not doing the same thing.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.mpiActions.runActionsInSerial">
<span class="sig-prename descclassname"><span class="pre">armi.mpiActions.</span></span><span class="sig-name descname"><span class="pre">runActionsInSerial</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">o</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">actions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#runActionsInSerial"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.runActionsInSerial" title="Permalink to this definition"></a></dt>
<dd><p>Run a series of MpiActions in serial.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This will set the <cite>MpiAction.serial</cite> attribute to <code class="code docutils literal notranslate"><span class="pre">True</span></code>, and the <cite>MpiAction.broadcast</cite> and <cite>MpiAction.gather</cite>
methods will basically just return the value being supplied.</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="armi.mpiActions.DistributionAction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.mpiActions.</span></span><span class="sig-name descname"><span class="pre">DistributionAction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">actions</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#DistributionAction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.DistributionAction" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#armi.mpiActions.MpiAction" title="armi.mpiActions.MpiAction"><code class="xref py py-class docutils literal notranslate"><span class="pre">MpiAction</span></code></a></p>
<p>This MpiAction scatters the workload of multiple actions to available resources.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This currently only works from the root (of COMM_WORLD). Eventually, it would be nice to make
it possible for sub-tasks to manage their own communicators and spawn their own work within some
sub-communicator.</p>
<p>This performs an MPI Split operation and takes over the context.MPI_COMM and associated varaibles.
For this reason, it is possible that when someone thinks they have distributed information to all
nodes, it may only be a subset that was necessary to perform the number of actions needed by this
DsitributionAction.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="armi.mpiActions.DistributionAction.invokeHook">
<span class="sig-name descname"><span class="pre">invokeHook</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#DistributionAction.invokeHook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.DistributionAction.invokeHook" title="Permalink to this definition"></a></dt>
<dd><p>Overrides invokeHook to distribute work amongst available resources as requested.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Two things about this method make it non-recursive</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="armi.mpiActions.MpiActionError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.mpiActions.</span></span><span class="sig-name descname"><span class="pre">MpiActionError</span></span><a class="reference internal" href="../_modules/armi/mpiActions.html#MpiActionError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.MpiActionError" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.12)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>Exception class raised when error conditions occur during an MpiAction.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="armi.mpiActions.DistributeStateAction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.mpiActions.</span></span><span class="sig-name descname"><span class="pre">DistributeStateAction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">skipInterfaces</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#DistributeStateAction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.DistributeStateAction" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#armi.mpiActions.MpiAction" title="armi.mpiActions.MpiAction"><code class="xref py py-class docutils literal notranslate"><span class="pre">MpiAction</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="armi.mpiActions.DistributeStateAction.invokeHook">
<span class="sig-name descname"><span class="pre">invokeHook</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/mpiActions.html#DistributeStateAction.invokeHook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.mpiActions.DistributeStateAction.invokeHook" title="Permalink to this definition"></a></dt>
<dd><p>Sync up all nodes with the reactor, the cs, and the interfaces.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This is run by all workers and the primary any time the code needs to sync all processors.</p>
</div>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="armi.meta.html" class="btn btn-neutral float-left" title="armi.meta module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="armi.pluginManager.html" class="btn btn-neutral float-right" title="armi.pluginManager module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2023, TerraPower, LLC.
      <span class="lastupdated">Last updated on 2023-11-30.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>