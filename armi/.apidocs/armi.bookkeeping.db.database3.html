

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="armi.bookkeeping.db.database3 module" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/.apidocs/armi.bookkeeping.db.database3.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="ARMI Database implementation, version 3. This Implementation of the database is a significant departure from the previous. One of the foundational concepts in this version is that a reactor model s..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>armi.bookkeeping.db.database3 module &mdash; ARMI 0.2.3 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../_static/assets/jsonview.bundle.js"></script>
        <script src="../_static/assets/jsonview_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables.min.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.bookkeeping.db.factory module" href="armi.bookkeeping.db.factory.html" />
    <link rel="prev" title="armi.bookkeeping.db.database module" href="armi.bookkeeping.db.database.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements/index.html">Requirements</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.tests.html">armi.tests package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.bookkeeping.html">armi.bookkeeping package</a> &raquo;</li>
        
          <li><a href="armi.bookkeeping.db.html">armi.bookkeeping.db package</a> &raquo;</li>
        
      <li>armi.bookkeeping.db.database3 module</li>
    
    
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.bookkeeping.db.database3">
<span id="armi-bookkeeping-db-database3-module"></span><h1>armi.bookkeeping.db.database3 module<a class="headerlink" href="#module-armi.bookkeeping.db.database3" title="Permalink to this headline">¶</a></h1>
<p>ARMI Database implementation, version 3.</p>
<p>This Implementation of the database is a significant departure from the previous. One of
the foundational concepts in this version is that a reactor model should be fully
recoverable from the database itself; all the way down to the component level. As a
result, the structure of the underlying data is bound to the hierarchical Composite
Reactor Model, rather than an ad hoc collection of Block parameter fields and other
parameters. Furthermore, this format is intended to be more dynamic, permitting as-yet
undeveloped levels and classes in the Composite Reactor Model to be supported as they
are added. More high-level discussion is contained in <a class="reference internal" href="../user/outputs/database.html"><span class="doc">The Database File</span></a>.</p>
<p>The most important contents of this module are the <a class="reference internal" href="#armi.bookkeeping.db.database3.DatabaseInterface" title="armi.bookkeeping.db.database3.DatabaseInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatabaseInterface</span></code></a>, the
<a class="reference internal" href="#armi.bookkeeping.db.database3.Database3" title="armi.bookkeeping.db.database3.Database3"><code class="xref py py-class docutils literal notranslate"><span class="pre">Database3</span></code></a> class, the <a class="reference internal" href="#armi.bookkeeping.db.database3.Layout" title="armi.bookkeeping.db.database3.Layout"><code class="xref py py-class docutils literal notranslate"><span class="pre">Layout</span></code></a> class, and the special data
packing/unpacking functions. The <code class="docutils literal notranslate"><span class="pre">Database3</span></code> class contains most of the functionality
for interacting with the underlying data. This includes things like dumping a Reactor
state to the database and loading it back again, as well as extracting historical data
for a given object or collection of object from the database file. When interacting with
the database file, the <code class="docutils literal notranslate"><span class="pre">Layout</span></code> class is used to help map the hierarchical Composite
Reactor Model to the flat representation in the database.</p>
<p>Refer to <a class="reference internal" href="armi.bookkeeping.db.html#module-armi.bookkeeping.db" title="armi.bookkeeping.db"><code class="xref py py-mod docutils literal notranslate"><span class="pre">armi.bookkeeping.db</span></code></a> for notes about versioning.</p>
<div class="section" id="minor-revision-changelog">
<h2>Minor revision changelog<a class="headerlink" href="#minor-revision-changelog" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>3.1: Improve the handling of reading/writing grids.</p></li>
<li><p>3.2: Change the strategy for storing large attributes from using an Object Reference
to an external dataset to using a special string starting with an “&#64;” symbol (e.g.,
“&#64;/c00n00/attrs/5_linkedDims”). This was done to support copying time node datasets
from one file to another without invalidating the references. Support is maintained
for reading previous versions, and for performing a <code class="docutils literal notranslate"><span class="pre">mergeHistory()</span></code> and converting
to the new reference strategy, but the old version cannot be written.</p></li>
<li><p>3.3: Compress the way locations are stored in the database and allow MultiIndex
locations to be read and written.</p></li>
<li><p>3.4: Modified the way that locations are stored in the database to include complete
indices for indices that can be composed from multiple grids. This was done since the
space is already being used to be able to store them, and because having complete
indices allows for more efficient means of extracting information based on location
without having to compose the full model.</p></li>
</ul>
</div></blockquote>
<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.getH5GroupName">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">getH5GroupName</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeNode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statePointName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#getH5GroupName"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.getH5GroupName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.describeInterfaces">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">describeInterfaces</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#describeInterfaces"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.describeInterfaces" title="Permalink to this definition">¶</a></dt>
<dd><p>Function for exposing interface(s) to other code</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.updateGlobalAssemblyNum">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">updateGlobalAssemblyNum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#updateGlobalAssemblyNum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.updateGlobalAssemblyNum" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">DatabaseInterface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="armi.interfaces.html#armi.interfaces.Interface" title="armi.interfaces.Interface"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.interfaces.Interface</span></code></a></p>
<p>Handles interactions between the ARMI data model and the persistent data storage
system.</p>
<p>This reads/writes the ARMI state to/from the database and helps derive state
information that can be derived.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'database'</span></em><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the interface. This is undefined for the base class, and must be
overridden by any concrete class that extends this one.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.database">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">database</span></span><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.database" title="Permalink to this definition">¶</a></dt>
<dd><p>Presents the internal database object, if it exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.interactBOL">
<span class="sig-name descname"><span class="pre">interactBOL</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.interactBOL"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.interactBOL" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the database if the main interface was not available. (Begining of Life)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.initDB">
<span class="sig-name descname"><span class="pre">initDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><span class="pre">os.PathLike</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.initDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.initDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Open the underlying database to be written to, and write input files to DB.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Main Interface calls this so that the database is available as early as
possible in the run. The database interface interacts near the end of the
interface stack (so that all the parameters have been updated) while the Main
Interface interacts first.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.interactEveryNode">
<span class="sig-name descname"><span class="pre">interactEveryNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.interactEveryNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.interactEveryNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Write to database.</p>
<p>DBs should receive the state information of the run at each node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.interactEOC">
<span class="sig-name descname"><span class="pre">interactEOC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.interactEOC"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.interactEOC" title="Permalink to this definition">¶</a></dt>
<dd><p>In case anything changed since last cycle (e.g. rxSwing), update DB. (End of Cycle)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.interactEOL">
<span class="sig-name descname"><span class="pre">interactEOL</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.interactEOL"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.interactEOL" title="Permalink to this definition">¶</a></dt>
<dd><p>DB’s should be closed at run’s end. (End of Life)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.interactError">
<span class="sig-name descname"><span class="pre">interactError</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.interactError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.interactError" title="Permalink to this definition">¶</a></dt>
<dd><p>Get shutdown state information even if the run encounters an error</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.interactDistributeState">
<span class="sig-name descname"><span class="pre">interactDistributeState</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.interactDistributeState"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.interactDistributeState" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconnect to pre-existing database.</p>
<p>DB is created and managed by the primary node only but we can still connect to it
from workers to enable things like history tracking.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.distributable">
<span class="sig-name descname"><span class="pre">distributable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.distributable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.distributable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.prepRestartRun">
<span class="sig-name descname"><span class="pre">prepRestartRun</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.prepRestartRun"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.prepRestartRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the data history from the database requested in the case setting
<cite>reloadDBName</cite>.</p>
<p>Reactor state is put at the cycle/node requested in the case settings
<cite>startCycle</cite> and <cite>startNode</cite>, having loaded the state from all cycles prior
to that in the requested database.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Mixing the use of simple vs detailed cycles settings is allowed, provided
that the cycle histories prior to <cite>startCycle</cite>/<cite>startNode</cite> are equivalent.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.loadState">
<span class="sig-name descname"><span class="pre">loadState</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeNode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeStepName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updateGlobalAssemNum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.loadState"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.loadState" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a fresh reactor and applies it to the Operator.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Will load preferentially from the <cite>fileName</cite> if passed. Otherwise will load from
existing database in memory or <cite>cs[“reloadDBName”]</cite> in that order.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.10)"><strong>RuntimeError</strong></a> – If fileName is specified and that  file does not have the time step.
    If fileName is not specified and neither the database in memory, nor the
    <cite>cs[“reloadDBName”]</cite> have the time step specified.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.getHistory">
<span class="sig-name descname"><span class="pre">getHistory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableSequence" title="(in Python v3.10)"><span class="pre">MutableSequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byLocation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.getHistory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.getHistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Get historical parameter values for a single object.</p>
<p>This is mostly a wrapper around the same function on the <code class="docutils literal notranslate"><span class="pre">Database3</span></code> class,
but knows how to return the current value as well.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#armi.bookkeeping.db.database3.Database3.getHistory" title="armi.bookkeeping.db.database3.Database3.getHistory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Database3.getHistory</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.DatabaseInterface.getHistories">
<span class="sig-name descname"><span class="pre">getHistories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableSequence" title="(in Python v3.10)"><span class="pre">MutableSequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byLocation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#DatabaseInterface.getHistories"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.DatabaseInterface.getHistories" title="Permalink to this definition">¶</a></dt>
<dd><p>Get historical parameter values for one or more objects.</p>
<p>This is mostly a wrapper around the same function on the <code class="docutils literal notranslate"><span class="pre">Database3</span></code> class,
but knows how to return the current value as well.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#armi.bookkeeping.db.database3.Database3.getHistories" title="armi.bookkeeping.db.database3.Database3.getHistories"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Database3.getHistories</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">Database3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.10)"><span class="pre">os.PathLike</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">permission</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="armi.bookkeeping.db.database.html#armi.bookkeeping.db.database.Database" title="armi.bookkeeping.db.database.Database"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.bookkeeping.db.database.Database</span></code></a></p>
<p>Version 3 of the ARMI Database, handling serialization and loading of Reactor states.</p>
<p>This implementation of the database pushes all objects in the Composite Reactor
Model into the database. This process is aided by the <code class="docutils literal notranslate"><span class="pre">Layout</span></code> class, which
handles the packing and unpacking of the structure of the objects, their
relationships, and their non-parameter attributes.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><cite>doc/user/outputs/database</cite> for more details.</p>
</div>
<p>Create a new Database3 object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> – name of the file</p></li>
<li><p><strong>permission</strong> – file permissions, write (“w”) or read (“r”)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.timeNodeGroupPattern">
<span class="sig-name descname"><span class="pre">timeNodeGroupPattern</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">re.compile('^c(\\d\\d)n(\\d\\d)$')</span></em><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.timeNodeGroupPattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.h5db">
<span class="sig-name descname"><span class="pre">h5db</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">h5py._hl.files.File</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.h5db" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.version">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.versionMajor">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">versionMajor</span></span><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.versionMajor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.versionMinor">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">versionMinor</span></span><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.versionMinor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.grabLocalCommitHash">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">grabLocalCommitHash</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.grabLocalCommitHash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.grabLocalCommitHash" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to determine the local Git commit.</p>
<p>We have to be sure to handle the errors where the code is run on a system that
doesn’t have Git installed. Or if the code is simply not run from inside a repo.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The commit hash if it exists, otherwise “unknown”.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completedSuccessfully</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the DB and perform cleanups and auto-conversions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.splitDatabase">
<span class="sig-name descname"><span class="pre">splitDatabase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keepTimeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.splitDatabase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.splitDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>Discard all data except for specific time steps, retaining old data in a separate file.</p>
<p>This is useful when performing more exotic analyses, where each “time step” may
not represent a specific point in time, but something more nuanced. For example,
equilibrium cases store a new “cycle” for each iteration as it attempts to
converge the equilibrium cycle. At the end of the run, the last “cycle” is the
converged equilibrium cycle, whereas the previous cycles constitute the path to
convergence, which we typically wish to discard before further analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keepTimeSteps</strong> – A collection of the time steps to retain</p></li>
<li><p><strong>label</strong> – An informative label for the backed-up database. Usually something like
“-all-iterations”. Will be interposed between the source name and the “.h5”
extension.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The name of the new, backed-up database file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.fileName">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fileName</span></span><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.fileName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.loadCS">
<span class="sig-name descname"><span class="pre">loadCS</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.loadCS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.loadCS" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to load settings from the database file</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>There are no guarantees here. If the database was written from a different version of ARMI than you are using,
these results may not be usable. For instance, the database could have been written from a vastly old or future
version of ARMI from the code you are using.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.loadBlueprints">
<span class="sig-name descname"><span class="pre">loadBlueprints</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.loadBlueprints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.loadBlueprints" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to load reactor blueprints from the database file</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>There are no guarantees here. If the database was written from a different version of ARMI than you are using,
these results may not be usable. For instance, the database could have been written from a vastly old or future
version of ARMI from the code you are using.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.loadGeometry">
<span class="sig-name descname"><span class="pre">loadGeometry</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.loadGeometry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.loadGeometry" title="Permalink to this definition">¶</a></dt>
<dd><p>This is primarily just used for migrations.
The “geometry files” were replaced by <code class="docutils literal notranslate"><span class="pre">systems:</span></code> and <code class="docutils literal notranslate"><span class="pre">grids:</span></code> sections of <code class="docutils literal notranslate"><span class="pre">Blueprints</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.writeInputsToDB">
<span class="sig-name descname"><span class="pre">writeInputsToDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">csString</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geomString</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bpString</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.writeInputsToDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.writeInputsToDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Write inputs into the database based the CaseSettings.</p>
<p>This is not DRY on purpose. The goal is that any particular Database
implementation should be very stable, so we dont want it to be easy to change
one Database implementation’s behavior when trying to change another’s.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This is hard-coded to read the entire file contents into memory and write that
directly into the database. We could have the cs/blueprints/geom write to a
string, however the ARMI log file contains a hash of each files’ contents. In
the future, we should be able to reproduce a calculation with confidence that
the inputs are identical.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.readInputsFromDB">
<span class="sig-name descname"><span class="pre">readInputsFromDB</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.readInputsFromDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.readInputsFromDB" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.mergeHistory">
<span class="sig-name descname"><span class="pre">mergeHistory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputDB</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startCycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startNode</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.mergeHistory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.mergeHistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy time step data up to, but not including the passed cycle and node.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This is used for restart runs with the standard operator for example.
The current time step (being loaded from) should not be copied, as that
time steps data will be written at the end of the time step.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.genTimeStepGroups">
<span class="sig-name descname"><span class="pre">genTimeStepGroups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><span class="pre">Generator</span></a><span class="p"><span class="pre">[</span></span><span class="pre">h5py._hl.group.Group</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.genTimeStepGroups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.genTimeStepGroups" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator of HDF5 Groups for all time nodes, or for the passed selection.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.getLayout">
<span class="sig-name descname"><span class="pre">getLayout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getLayout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.getLayout" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Layout object representing the requested cycle and time node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.genTimeSteps">
<span class="sig-name descname"><span class="pre">genTimeSteps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><span class="pre">Generator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.genTimeSteps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.genTimeSteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator of (cycle, node) tuples that are present in the DB.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.genAuxiliaryData">
<span class="sig-name descname"><span class="pre">genAuxiliaryData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><span class="pre">Generator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.genAuxiliaryData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.genAuxiliaryData" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator of names of auxiliary data on the requested time point.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.getAuxiliaryDataPath">
<span class="sig-name descname"><span class="pre">getAuxiliaryDataPath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getAuxiliaryDataPath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.getAuxiliaryDataPath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.getH5Group">
<span class="sig-name descname"><span class="pre">getH5Group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statePointName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getH5Group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.getH5Group" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the H5Group for the current ARMI timestep.</p>
<p>This method can be used to allow other interfaces to place data into the database
at the correct timestep.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.hasTimeStep">
<span class="sig-name descname"><span class="pre">hasTimeStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeNode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statePointName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.hasTimeStep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.hasTimeStep" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if (cycle, timeNode, statePointName) is contained in the database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.writeToDB">
<span class="sig-name descname"><span class="pre">writeToDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reactor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statePointName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.writeToDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.writeToDB" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.syncToSharedFolder">
<span class="sig-name descname"><span class="pre">syncToSharedFolder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.syncToSharedFolder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.syncToSharedFolder" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy DB to run working directory.</p>
<p>Needed when multiple MPI processes need to read the same db, for example
when a history is needed from independent runs (e.g. for fuel performance on
a variety of assemblies).</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>At some future point, we may implement a client-server like DB system which
would render this kind of operation unnecessary.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statePointName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowMissing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updateGlobalAssemNum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a new reactor from (cycle, node).</p>
<p>Case settings, blueprints, and geom can be provided by the client, or read from
the database itself. Providing these from the client could be useful when
performing snapshot runs or the like, where it is expected to use results from a
run using different settings, then continue with new settings. Even in this
case, the blueprints and geom should probably be the same as the original run.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cycle</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – cycle number</p></li>
<li><p><strong>node</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – time node</p></li>
<li><p><strong>cs</strong> (<em>armi.settings.Settings</em><em> (</em><em>optional</em><em>)</em>) – if not provided one is read from the database</p></li>
<li><p><strong>bp</strong> (<em>armi.reactor.Blueprints</em><em> (</em><em>Optional</em><em>)</em>) – if not provided one is read from the database</p></li>
<li><p><strong>statePointName</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – Optional arbitrary statepoint name (e.g., “special” for “c00n00-special/”)</p></li>
<li><p><strong>allowMissing</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Whether to emit a warning, rather than crash if reading a database
with undefined parameters. Default False.</p></li>
<li><p><strong>updateGlobalAssemNum</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – Whether to update the global assembly number to the value stored in
r.core.p.maxAssemNum. Default True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>root</strong> – The top-level object stored in the database; usually a Reactor.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ArmiObject</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.getHistoryByLocation">
<span class="sig-name descname"><span class="pre">getHistoryByLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getHistoryByLocation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.getHistoryByLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parameter histories at a specific location.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.getHistoriesByLocation">
<span class="sig-name descname"><span class="pre">getHistoriesByLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getHistoriesByLocation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.getHistoriesByLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parameter histories at specific locations.</p>
<dl class="simple">
<dt>This has a number of limitations, which should in practice not be too limiting:</dt><dd><ul class="simple">
<li><p>The passed objects must have IndexLocations. This type of operation doesn’t
make much sense otherwise.</p></li>
<li><p>The passed objects must exist in a hierarchy that leads to a Core
object, which serves as an anchor that can fully define all index locations.
This could possibly be made more general by extending grids, but that gets a
little more complicated.</p></li>
<li><p>All requested objects must exist under the <strong>same</strong> anchor object, and at the
same depth below it.</p></li>
<li><p>All requested objects must have the same type.</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comps</strong> (<em>list of ArmiObject</em>) – The components/composites that currently occupy the location that you want
histories at. ArmiObjects are passed, rather than locations, because this
makes it easier to figure out things related to layout.</p></li>
<li><p><strong>params</strong> (<em>List of str</em><em>, </em><em>optional</em>) – The parameter names for the parameters that we want the history of. If None,
all parameter history is given</p></li>
<li><p><strong>timeSteps</strong> (<em>List of</em><em> (</em><em>cycle</em><em>, </em><em>node</em><em>) </em><em>tuples</em><em>, </em><em>optional</em>) – The time nodes that you want history for. If None, all available time nodes
will be returned.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.getHistory">
<span class="sig-name descname"><span class="pre">getHistory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getHistory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.getHistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Get parameter history for a single ARMI Object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comps</strong> – An individual ArmiObject</p></li>
<li><p><strong>params</strong> – parameters to gather</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary of str/list pairs.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Database3.getHistories">
<span class="sig-name descname"><span class="pre">getHistories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getHistories"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Database3.getHistories" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parameter histories for a sequence of ARMI Objects.</p>
<p>This implementation is unaware of the state of the reactor outside of the
database itself, and is therefore not usually what client code should be calling
directly during normal ARMI operation. It only knows about historical data that
have actually been written to the database. Usually one wants to be able to get
historical, plus current data, for which the similar method on the
DatabaseInterface may be more useful.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comps</strong> – Something that is iterable multiple times</p></li>
<li><p><strong>params</strong> – parameters to gather.</p></li>
<li><p><strong>timeSteps</strong> – Selection of time nodes to get data for. If omitted, return full history</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary ArmiObject (input): dict of str/list pairs containing ((cycle,
node), value).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.10)">dict</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Layout">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">Layout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">h5group</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Layout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Layout" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>The Layout class describes the hierarchical layout of the composite Reactor model in a flat representation.</p>
<p>A Layout is built up by starting at the root of a composite tree and recursively
appending each node in the tree to the list of data. So for a typical Reactor model,
the data will be ordered by depth-first search: [r, c, a1, a1b1, a1b1c1, a1b1c2, a1b2,
a1b2c1, …, a2, …].</p>
<p>The layout is also responsible for storing Component attributes, like location,
material, and temperatures (from blueprints), which aren’t stored as Parameters.
Temperatures, specifically, are rather complicated beasts in ARMI, and more
fundamental changes to how we deal with them may allow us to remove them from
Layout.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>As this format is liable to be consumed by other code, it is important to specify
its structure so that code attempting to read/write Layouts can make safe
assumptions. Below is a list of things to be aware of. More will be added as issues
arise or things become more precise:</p>
<blockquote>
<div><ul class="simple">
<li><p>Elements in Layout are stored in depth-first order. This permits use of
algorithms such as Pre-Order Tree Traversal for efficient traversal of regions of
the model.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">indexInData</span></code> increases monotonically within each object <code class="docutils literal notranslate"><span class="pre">type</span></code>. This means
that, for instance, the data for all <code class="docutils literal notranslate"><span class="pre">HexBlock</span></code> children of a given parent
are stored contiguously within the <code class="docutils literal notranslate"><span class="pre">HexBlock</span></code> group, and will not be
interleaved with data from the <code class="docutils literal notranslate"><span class="pre">HexBlock</span></code> children of any of the parent’s
siblings.</p></li>
<li><p>Aside from the hierarchy itself, there is no guarantee what order objects are
stored in the layout.  “<cite>The</cite> <code class="docutils literal notranslate"><span class="pre">Core</span></code>” is not necessarily the first child of the
<code class="docutils literal notranslate"><span class="pre">Reactor</span></code>, and is not guaranteed to use the zeroth grid.</p></li>
</ul>
</div></blockquote>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Layout.writeToDB">
<span class="sig-name descname"><span class="pre">writeToDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">h5group</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Layout.writeToDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Layout.writeToDB" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.Layout.computeAncestors">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">computeAncestors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">serialNum</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numChildren</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Layout.computeAncestors"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.Layout.computeAncestors" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list containing the serial number of the parent corresponding to each
object at the given depth.</p>
<p>Depth in this case means how many layers to reach up to find the desired
ancestor. A depth of 1 will yield the direct parent of each element, depth of 2
would yield the elemen’s parent’s parent, and so on.</p>
<p>The zero-th element will always be None, as the first object is the root element
and so has no parent. Subsequent depths will result in more Nones.</p>
<p>This function is useful for forming a lightweight sense of how the database
contents stitch together, without having to go to the trouble of fully unpacking
the Reactor model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>serialNum</strong> (<em>List of int</em>) – List of serial numbers for each object/element, as laid out in Layout</p></li>
<li><p><strong>numChildren</strong> (<em>List of int</em>) – List of numbers of children for each object/element, as laid out in Layout</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is not using a recursive approach for a couple of reasons. First, the
iterative form isn’t so bad; we just need two stacks. Second, the interface of
the recursive function would be pretty unwieldy. We are progressively
consuming two lists, of which we would need to keep passing down with an
index/cursor, or progressively slice them as we go, which would be pretty
inefficient.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.allSubclasses">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">allSubclasses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cls</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#allSubclasses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.allSubclasses" title="Permalink to this definition">¶</a></dt>
<dd><p>This currently include Materials… and it should not.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.packSpecialData">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">packSpecialData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">paramName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.10)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.10)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#packSpecialData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.packSpecialData" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce data that wouldn’t otherwise play nicely with HDF5/numpy arrays to a format
that will.</p>
<p>This is the main entry point for conforming “strange” data into something that will
both fit into a numpy array/HDF5 dataset, and be recoverable to its original-ish
state when reading it back in. This is accomplished by detecting a handful of known
offenders and using various HDF5 attributes to store necessary auxiliary data. It is
important to keep in mind that the data that is passed in has already been converted
to a numpy array, so the top dimension is always representing the collection of
composites that are storing the parameters. For instance, if we are dealing with a
Block parameter, the first index in the numpy array of data is the block index; so
if each block has a parameter that is a dictionary, <code class="docutils literal notranslate"><span class="pre">data</span></code> would be a ndarray,
where each element is a dictionary. This routine supports a number of different
“strange” things:</p>
<ul class="simple">
<li><p>Dict[str, float]: These are stored by finding the set of all keys for all
instances, and storing those keys as a list in an attribute. The data themselves
are stored as arrays indexed by object, then key index. Dictionaries lacking data
for a key store a nan in it’s place. This will work well in instances where most
objects have data for most keys.</p></li>
<li><p>Jagged arrays: These are stored by concatenating all of the data into a single,
one-dimensional array, and storing attributes to describe the shapes of each
object’s data, and an offset into the beginning of each object’s data.</p></li>
<li><p>Arrays with <code class="docutils literal notranslate"><span class="pre">None</span></code> in them: These are stored by replacing each instance of
<code class="docutils literal notranslate"><span class="pre">None</span></code> with a magical value that shouldn’t be encountered in realistic
scenarios.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – An ndarray storing the data that we want to stuff into the database. These are
usually dtype=Object, which is how we usually end up here in the first place.</p></li>
<li><p><strong>paramName</strong> – The parameter name that we are trying to store data for. This is mostly used for
diagnostics.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#armi.bookkeeping.db.database3.unpackSpecialData" title="armi.bookkeeping.db.database3.unpackSpecialData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unpackSpecialData</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.unpackSpecialData">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">unpackSpecialData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">attrs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">paramName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#unpackSpecialData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.unpackSpecialData" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract data from a specially-formatted HDF5 dataset into a numpy array.</p>
<p>This should invert the operations performed by <a class="reference internal" href="#armi.bookkeeping.db.database3.packSpecialData" title="armi.bookkeeping.db.database3.packSpecialData"><code class="xref py py-func docutils literal notranslate"><span class="pre">packSpecialData()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – Specially-formatted data array straight from the database.</p></li>
<li><p><strong>attrs</strong> – The attributes associated with the dataset that contained the data.</p></li>
<li><p><strong>paramName</strong> – The name of the parameter that is being unpacked. Only used for diagnostics.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An ndarray containing the closest possible representation of the data that was
originally written to the database.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#armi.bookkeeping.db.database3.packSpecialData" title="armi.bookkeeping.db.database3.packSpecialData"><code class="xref py py-obj docutils literal notranslate"><span class="pre">packSpecialData</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.replaceNonsenseWithNones">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">replaceNonsenseWithNones</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">paramName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#replaceNonsenseWithNones"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.replaceNonsenseWithNones" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace special nonsense values with <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
<p>This essentially reverses the operations performed by
<a class="reference internal" href="#armi.bookkeeping.db.database3.replaceNonesWithNonsense" title="armi.bookkeeping.db.database3.replaceNonesWithNonsense"><code class="xref py py-func docutils literal notranslate"><span class="pre">replaceNonesWithNonsense()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – The array from the database that contains special <code class="docutils literal notranslate"><span class="pre">None</span></code> nonsense values.</p></li>
<li><p><strong>paramName</strong> – The param name who’s data we are dealing with. Only used for diagnostics.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#armi.bookkeeping.db.database3.replaceNonesWithNonsense" title="armi.bookkeeping.db.database3.replaceNonesWithNonsense"><code class="xref py py-obj docutils literal notranslate"><span class="pre">replaceNonesWithNonsense</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.replaceNonesWithNonsense">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">replaceNonesWithNonsense</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">paramName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">nones</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.10)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#replaceNonesWithNonsense"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.replaceNonesWithNonsense" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace instances of <code class="docutils literal notranslate"><span class="pre">None</span></code> with nonsense values that can be detected/recovered
when reading.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – The numpy array containing <code class="docutils literal notranslate"><span class="pre">None</span></code> values that need to be replaced.</p></li>
<li><p><strong>paramName</strong> – The name of the parameter who’s data we are treating. Only used for diagnostics.</p></li>
<li><p><strong>nones</strong> – An array containing the index locations on the <code class="docutils literal notranslate"><span class="pre">None</span></code> elements. It is a little
strange to pass these, in but we find these indices to determine whether we need
to call this function in the first place, so might as well pass it in, so that
we don’t need to perform the operation again.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This only supports situations where the data is a straight-up <code class="docutils literal notranslate"><span class="pre">None</span></code>, or a valid,
database-storable numpy array (or easily convertable to one (e.g. tuples/lists with
numerical values)). This does not support, for instance, a numpy ndarray with some
Nones in it.</p>
<p>For example, the following is supported:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]</span>
</pre></div>
</div>
<p>However, the following is not:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#armi.bookkeeping.db.database3.replaceNonsenseWithNones" title="armi.bookkeeping.db.database3.replaceNonsenseWithNones"><code class="xref py py-obj docutils literal notranslate"><span class="pre">replaceNonsenseWithNones</span></code></a></dt><dd><p>Reverses this operation.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.database3.collectBlockNumberDensities">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.database3.</span></span><span class="sig-name descname"><span class="pre">collectBlockNumberDensities</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blocks</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.10)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#collectBlockNumberDensities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.database3.collectBlockNumberDensities" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect block-by-block homogenized number densities for each nuclide.</p>
<p>Long ago, composition was stored on block params. No longer; they are on the
component numberDensity params. These block-level params, are still useful to see
compositions in some visualization tools. Rather than keep them on the reactor
model, we dynamically compute them here and slap them in the database. These are
ignored upon reading and will not affect the results.</p>
<p>Remove this once a better viz tool can view composition distributions. Also remove
the try/except in <code class="docutils literal notranslate"><span class="pre">_readParams</span></code></p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="armi.bookkeeping.db.factory.html" class="btn btn-neutral float-right" title="armi.bookkeeping.db.factory module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="armi.bookkeeping.db.database.html" class="btn btn-neutral float-left" title="armi.bookkeeping.db.database module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2022, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2022-06-27.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>