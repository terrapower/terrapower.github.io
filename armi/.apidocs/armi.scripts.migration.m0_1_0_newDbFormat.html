

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="armi.scripts.migration.m0_1_0_newDbFormat module" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/.apidocs/armi.scripts.migration.m0_1_0_newDbFormat.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="Migrate ARMI databases to newer versions. Oftentimes, code changes cause databases from previous versions to become invalid, yet users still want to be able to load from the old cases. These script..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>armi.scripts.migration.m0_1_0_newDbFormat module &mdash; ARMI 0.2.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.scripts.migration.m0_1_0_settings module" href="armi.scripts.migration.m0_1_0_settings.html" />
    <link rel="prev" title="armi.scripts.migration.crossSectionBlueprintsToSettings module" href="armi.scripts.migration.crossSectionBlueprintsToSettings.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.scripts.html">armi.scripts package</a> &raquo;</li>
        
          <li><a href="armi.scripts.migration.html">armi.scripts.migration package</a> &raquo;</li>
        
      <li>armi.scripts.migration.m0_1_0_newDbFormat module</li>
    
    
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.scripts.migration.m0_1_0_newDbFormat">
<span id="armi-scripts-migration-m0-1-0-newdbformat-module"></span><h1>armi.scripts.migration.m0_1_0_newDbFormat module<a class="headerlink" href="#module-armi.scripts.migration.m0_1_0_newDbFormat" title="Permalink to this headline">Â¶</a></h1>
<p>Migrate ARMI databases to newer versions.</p>
<p>Oftentimes, code changes cause databases from previous versions
to become invalid, yet users still want to be able to load from
the old cases. These scripts assist in converting old
databases to new ones.</p>
<p>This is expected to be extended with version-dependent chains.</p>
<dl class="class">
<dt id="armi.scripts.migration.m0_1_0_newDbFormat.ConvertDB2toDB3">
<em class="property">class </em><code class="sig-prename descclassname">armi.scripts.migration.m0_1_0_newDbFormat.</code><code class="sig-name descname">ConvertDB2toDB3</code><span class="sig-paren">(</span><em class="sig-param">stream=None</em>, <em class="sig-param">path=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/scripts/migration/m0_1_0_newDbFormat.html#ConvertDB2toDB3"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.scripts.migration.m0_1_0_newDbFormat.ConvertDB2toDB3" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="armi.scripts.migration.base.html#armi.scripts.migration.base.DatabaseMigration" title="armi.scripts.migration.base.DatabaseMigration"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.scripts.migration.base.DatabaseMigration</span></code></a></p>
<p>Convert ARMI DB version 2 to DB version 3.</p>
<dl class="method">
<dt id="armi.scripts.migration.m0_1_0_newDbFormat.ConvertDB2toDB3.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/scripts/migration/m0_1_0_newDbFormat.html#ConvertDB2toDB3.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.scripts.migration.m0_1_0_newDbFormat.ConvertDB2toDB3.apply" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Apply migration.</p>
<p>This is generally called from a subclass.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="armi.scripts.migration.m0_1_0_newDbFormat._migrateDatabase">
<code class="sig-prename descclassname">armi.scripts.migration.m0_1_0_newDbFormat.</code><code class="sig-name descname">_migrateDatabase</code><span class="sig-paren">(</span><em class="sig-param">databasePath</em>, <em class="sig-param">preCollector</em>, <em class="sig-param">visitor</em>, <em class="sig-param">postApplier</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/scripts/migration/m0_1_0_newDbFormat.html#_migrateDatabase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.scripts.migration.m0_1_0_newDbFormat._migrateDatabase" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Generic database-traversing system to apply custom version-specific migrations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>databasePath</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) â Path to DB file to be converted</p></li>
<li><p><strong>preCollector</strong> (<em>callable</em>) â Function that acts on oldDB and produces some generic data object</p></li>
<li><p><strong>visitor</strong> (<em>callable</em>) â Function that will be called on each dataset of the old HDF5 database.
This should map information into the new DB.</p></li>
<li><p><strong>postApplier</strong> (<em>callable</em>) â Function that will run after all visiting is done. Will have acecss
to the pre-collected data.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#OSError" title="(in Python v3.10)"><strong>OSError</strong></a> â When database is not found.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="armi.scripts.migration.m0_1_0_newDbFormat._visit">
<code class="sig-prename descclassname">armi.scripts.migration.m0_1_0_newDbFormat.</code><code class="sig-name descname">_visit</code><span class="sig-paren">(</span><em class="sig-param">newDB</em>, <em class="sig-param">preCollection</em>, <em class="sig-param">name</em>, <em class="sig-param">dataset</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/scripts/migration/m0_1_0_newDbFormat.html#_visit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.scripts.migration.m0_1_0_newDbFormat._visit" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="armi.scripts.migration.m0_1_0_newDbFormat._preCollector">
<code class="sig-prename descclassname">armi.scripts.migration.m0_1_0_newDbFormat.</code><code class="sig-name descname">_preCollector</code><span class="sig-paren">(</span><em class="sig-param">oldDB</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/scripts/migration/m0_1_0_newDbFormat.html#_preCollector"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.scripts.migration.m0_1_0_newDbFormat._preCollector" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="armi.scripts.migration.m0_1_0_newDbFormat._postApplier">
<code class="sig-prename descclassname">armi.scripts.migration.m0_1_0_newDbFormat.</code><code class="sig-name descname">_postApplier</code><span class="sig-paren">(</span><em class="sig-param">oldDB</em>, <em class="sig-param">newDB</em>, <em class="sig-param">preCollection</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/scripts/migration/m0_1_0_newDbFormat.html#_postApplier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.scripts.migration.m0_1_0_newDbFormat._postApplier" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="armi.scripts.migration.m0_1_0_newDbFormat._updateLayout">
<code class="sig-prename descclassname">armi.scripts.migration.m0_1_0_newDbFormat.</code><code class="sig-name descname">_updateLayout</code><span class="sig-paren">(</span><em class="sig-param">newDB</em>, <em class="sig-param">preCollection</em>, <em class="sig-param">name</em>, <em class="sig-param">dataset</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/scripts/migration/m0_1_0_newDbFormat.html#_updateLayout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.scripts.migration.m0_1_0_newDbFormat._updateLayout" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="armi.scripts.migration.m0_1_0_newDbFormat._updateParams">
<code class="sig-prename descclassname">armi.scripts.migration.m0_1_0_newDbFormat.</code><code class="sig-name descname">_updateParams</code><span class="sig-paren">(</span><em class="sig-param">newDB</em>, <em class="sig-param">preCollection</em>, <em class="sig-param">name</em>, <em class="sig-param">dataset</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/scripts/migration/m0_1_0_newDbFormat.html#_updateParams"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.scripts.migration.m0_1_0_newDbFormat._updateParams" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Visit parameters and apply migration transformations.</p>
<p>Does not affect input or layout.</p>
</dd></dl>

<dl class="function">
<dt id="armi.scripts.migration.m0_1_0_newDbFormat._collectParamRenames">
<code class="sig-prename descclassname">armi.scripts.migration.m0_1_0_newDbFormat.</code><code class="sig-name descname">_collectParamRenames</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/scripts/migration/m0_1_0_newDbFormat.html#_collectParamRenames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.scripts.migration.m0_1_0_newDbFormat._collectParamRenames" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="armi.scripts.migration.m0_1_0_newDbFormat._collectSymmetry">
<code class="sig-prename descclassname">armi.scripts.migration.m0_1_0_newDbFormat.</code><code class="sig-name descname">_collectSymmetry</code><span class="sig-paren">(</span><em class="sig-param">oldDB</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/scripts/migration/m0_1_0_newDbFormat.html#_collectSymmetry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.scripts.migration.m0_1_0_newDbFormat._collectSymmetry" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Read symmetry and geomType off old-style geometry input str in DB.</p>
</dd></dl>

<dl class="function">
<dt id="armi.scripts.migration.m0_1_0_newDbFormat._applyRenames">
<code class="sig-prename descclassname">armi.scripts.migration.m0_1_0_newDbFormat.</code><code class="sig-name descname">_applyRenames</code><span class="sig-paren">(</span><em class="sig-param">newDB</em>, <em class="sig-param">renames</em>, <em class="sig-param">name</em>, <em class="sig-param">dataset</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/scripts/migration/m0_1_0_newDbFormat.html#_applyRenames"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.scripts.migration.m0_1_0_newDbFormat._applyRenames" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="armi.scripts.migration.m0_1_0_settings.html" class="btn btn-neutral float-right" title="armi.scripts.migration.m0_1_0_settings module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="armi.scripts.migration.crossSectionBlueprintsToSettings.html" class="btn btn-neutral float-left" title="armi.scripts.migration.crossSectionBlueprintsToSettings module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2022, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2022-01-17.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>