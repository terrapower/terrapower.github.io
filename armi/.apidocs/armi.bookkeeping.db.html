

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="armi.bookkeeping.db package" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/.apidocs/armi.bookkeeping.db.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="The db package is responsible for reading and writing the state of the reactor to/from disk. As an ARMI run progresses, this is periodically updated as the primary output file. It can also be an in..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>armi.bookkeeping.db package &mdash; ARMI 0.2.5 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../_static/assets/jsonview.bundle.js"></script>
        <script src="../_static/assets/jsonview_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables.min.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.bookkeeping.db.tests package" href="armi.bookkeeping.db.tests.html" />
    <link rel="prev" title="armi.bookkeeping package" href="armi.bookkeeping.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements/index.html">Requirements</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.tests.html">armi.tests package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.bookkeeping.html">armi.bookkeeping package</a> &raquo;</li>
        
      <li>armi.bookkeeping.db package</li>
    
    
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.bookkeeping.db">
<span id="armi-bookkeeping-db-package"></span><h1>armi.bookkeeping.db package<a class="headerlink" href="#module-armi.bookkeeping.db" title="Permalink to this headline">¶</a></h1>
<p>The db package is responsible for reading and writing the state of the reactor to/from disk.</p>
<p>As an ARMI run progresses, this is periodically updated as the primary output file.
It can also be an input file for follow-on analysis or restart runs.</p>
<p>This module contains factories for selecting and building DB-related objects.</p>
<div class="section" id="when-updating-a-db-version">
<h2>When updating a db version<a class="headerlink" href="#when-updating-a-db-version" title="Permalink to this headline">¶</a></h2>
<p>The code associated with reading and writing database files may not benefit from Don’t
Repeat Yourself (DRY) practices in the same way as other code. Therefore, do not share
code between different major versions of the databases. Create a new module if you are
creating a new major database version.</p>
</div>
<div class="section" id="database-revision-changelog">
<h2>Database revision changelog<a class="headerlink" href="#database-revision-changelog" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul>
<li><p>1: Originally, calculation results were stored in a SQL database.</p></li>
<li><p>2: The storage format was changed to HDF5. This required less external
infrastructure than SQL. However, the implementation did not store a complete
model of a reactor, but a ghost of assembly, block, and reactor parameters that
could be applied to an existing reactor model (so long as the dimensions were
consistent). This was inconvenient and error prone.</p></li>
<li><p>3: The HDF5 format was kept, but the schema was made more flexible to permit
storing the entire reactor model. All objects in the ARMI Composite Model are
written to the database, and the model can be completely recovered from just the
HDF5 file.</p>
<blockquote>
<div><ul class="simple">
<li><p>3.1: Improved the handling of reading/writing grids.</p></li>
<li><p>3.2: Changed the strategy for storing large attributes to using a special
string starting with an “&#64;” symbol (e.g., “&#64;/c00n00/attrs/5_linkedDims”). This
was done to support copying time node datasets from one file to another without
invalidating the references. Support was maintained for reading previous
versions, by performing a <code class="docutils literal notranslate"><span class="pre">mergeHistory()</span></code> and converting to the new naming
strategy, but the old version cannot be written.</p></li>
<li><p>3.3: Compressed the way locations are stored in the database and allow
MultiIndex locations to be read and written.</p></li>
<li><p>3.4: Modified the way locations are stored in the database to include complete
indices for indices that can be composed from multiple grids. Having complete
indices allows for more efficient means of extracting information based on
location, without having to compose the full model.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.</span></span><span class="sig-name descname"><span class="pre">Database3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.11)"><span class="pre">os.PathLike</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">permission</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Version 3 of the ARMI Database, handling serialization and loading of Reactor states.</p>
<p>This implementation of the database pushes all objects in the Composite Reactor
Model into the database. This process is aided by the <code class="docutils literal notranslate"><span class="pre">Layout</span></code> class, which
handles the packing and unpacking of the structure of the objects, their
relationships, and their non-parameter attributes.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><cite>doc/user/outputs/database</cite> for more details.</p>
</div>
<p>Create a new Database3 object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> – name of the file</p></li>
<li><p><strong>permission</strong> – file permissions, write (“w”) or read (“r”)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.timeNodeGroupPattern">
<span class="sig-name descname"><span class="pre">timeNodeGroupPattern</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">re.compile('^c(\\d\\d)n(\\d\\d)$')</span></em><a class="headerlink" href="#armi.bookkeeping.db.Database3.timeNodeGroupPattern" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.version">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">version</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></em><a class="headerlink" href="#armi.bookkeeping.db.Database3.version" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.versionMajor">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">versionMajor</span></span><a class="headerlink" href="#armi.bookkeeping.db.Database3.versionMajor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.versionMinor">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">versionMinor</span></span><a class="headerlink" href="#armi.bookkeeping.db.Database3.versionMinor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.open">
<span class="sig-name descname"><span class="pre">open</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.open"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.grabLocalCommitHash">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">grabLocalCommitHash</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.grabLocalCommitHash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.grabLocalCommitHash" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to determine the local Git commit.</p>
<p>We have to be sure to handle the errors where the code is run on a system that
doesn’t have Git installed. Or if the code is simply not run from inside a repo.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The commit hash if it exists, otherwise “unknown”.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">completedSuccessfully</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the DB and perform cleanups and auto-conversions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.splitDatabase">
<span class="sig-name descname"><span class="pre">splitDatabase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">keepTimeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.splitDatabase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.splitDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>Discard all data except for specific time steps, retaining old data in a separate file.</p>
<p>This is useful when performing more exotic analyses, where each “time step” may
not represent a specific point in time, but something more nuanced. For example,
equilibrium cases store a new “cycle” for each iteration as it attempts to
converge the equilibrium cycle. At the end of the run, the last “cycle” is the
converged equilibrium cycle, whereas the previous cycles constitute the path to
convergence, which we typically wish to discard before further analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>keepTimeSteps</strong> – A collection of the time steps to retain</p></li>
<li><p><strong>label</strong> – An informative label for the backed-up database. Usually something like
“-all-iterations”. Will be interposed between the source name and the “.h5”
extension.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The name of the new, backed-up database file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.fileName">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fileName</span></span><a class="headerlink" href="#armi.bookkeeping.db.Database3.fileName" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.loadCS">
<span class="sig-name descname"><span class="pre">loadCS</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.loadCS"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.loadCS" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to load settings from the database file</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>There are no guarantees here. If the database was written from a different version of ARMI than you are using,
these results may not be usable. For instance, the database could have been written from a vastly old or future
version of ARMI from the code you are using.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.loadBlueprints">
<span class="sig-name descname"><span class="pre">loadBlueprints</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.loadBlueprints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.loadBlueprints" title="Permalink to this definition">¶</a></dt>
<dd><p>Attempt to load reactor blueprints from the database file</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>There are no guarantees here. If the database was written from a different version of ARMI than you are using,
these results may not be usable. For instance, the database could have been written from a vastly old or future
version of ARMI from the code you are using.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.loadGeometry">
<span class="sig-name descname"><span class="pre">loadGeometry</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.loadGeometry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.loadGeometry" title="Permalink to this definition">¶</a></dt>
<dd><p>This is primarily just used for migrations.
The “geometry files” were replaced by <code class="docutils literal notranslate"><span class="pre">systems:</span></code> and <code class="docutils literal notranslate"><span class="pre">grids:</span></code> sections of <code class="docutils literal notranslate"><span class="pre">Blueprints</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.writeInputsToDB">
<span class="sig-name descname"><span class="pre">writeInputsToDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">csString</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geomString</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bpString</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.writeInputsToDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.writeInputsToDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Write inputs into the database based the CaseSettings.</p>
<p>This is not DRY on purpose. The goal is that any particular Database
implementation should be very stable, so we dont want it to be easy to change
one Database implementation’s behavior when trying to change another’s.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This is hard-coded to read the entire file contents into memory and write that
directly into the database. We could have the cs/blueprints/geom write to a
string, however the ARMI log file contains a hash of each files’ contents. In
the future, we should be able to reproduce a calculation with confidence that
the inputs are identical.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.readInputsFromDB">
<span class="sig-name descname"><span class="pre">readInputsFromDB</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.readInputsFromDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.readInputsFromDB" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.mergeHistory">
<span class="sig-name descname"><span class="pre">mergeHistory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputDB</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startCycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startNode</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.mergeHistory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.mergeHistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy time step data up to, but not including the passed cycle and node.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This is used for restart runs with the standard operator for example.
The current time step (being loaded from) should not be copied, as that
time steps data will be written at the end of the time step.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.genTimeStepGroups">
<span class="sig-name descname"><span class="pre">genTimeStepGroups</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.11)"><span class="pre">Generator</span></a><span class="p"><span class="pre">[</span></span><span class="pre">h5py._hl.group.Group</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.genTimeStepGroups"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.genTimeStepGroups" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator of HDF5 Groups for all time nodes, or for the passed selection.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.getLayout">
<span class="sig-name descname"><span class="pre">getLayout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getLayout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.getLayout" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a Layout object representing the requested cycle and time node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.genTimeSteps">
<span class="sig-name descname"><span class="pre">genTimeSteps</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.11)"><span class="pre">Generator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.genTimeSteps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.genTimeSteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator of (cycle, node) tuples that are present in the DB.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.genAuxiliaryData">
<span class="sig-name descname"><span class="pre">genAuxiliaryData</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.11)"><span class="pre">Generator</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.genAuxiliaryData"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.genAuxiliaryData" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a generator of names of auxiliary data on the requested time point.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.getAuxiliaryDataPath">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">getAuxiliaryDataPath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getAuxiliaryDataPath"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.getAuxiliaryDataPath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.keys">
<span class="sig-name descname"><span class="pre">keys</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.keys"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.keys" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.getH5Group">
<span class="sig-name descname"><span class="pre">getH5Group</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statePointName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getH5Group"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.getH5Group" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the H5Group for the current ARMI timestep.</p>
<p>This method can be used to allow other interfaces to place data into the database
at the correct timestep.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.hasTimeStep">
<span class="sig-name descname"><span class="pre">hasTimeStep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeNode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statePointName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.hasTimeStep"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.hasTimeStep" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns True if (cycle, timeNode, statePointName) is contained in the database.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.writeToDB">
<span class="sig-name descname"><span class="pre">writeToDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reactor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statePointName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.writeToDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.writeToDB" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.syncToSharedFolder">
<span class="sig-name descname"><span class="pre">syncToSharedFolder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.syncToSharedFolder"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.syncToSharedFolder" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy DB to run working directory.</p>
<p>Needed when multiple MPI processes need to read the same db, for example
when a history is needed from independent runs (e.g. for fuel performance on
a variety of assemblies).</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>At some future point, we may implement a client-server like DB system which
would render this kind of operation unnecessary.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.load">
<span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">statePointName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowMissing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updateGlobalAssemNum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updateMasterCs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.load"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a new reactor from (cycle, node).</p>
<p>Case settings and blueprints can be provided by the client, or read from the database itself.
Providing these from the client could be useful when performing snapshot runs
or where it is expected to use results from a run using different settings and
continue with new settings (or if blueprints are not on the database).
Geometry is read from the database itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cycle</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Cycle number</p></li>
<li><p><strong>node</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – Time node. If value is negative, will be indexed from EOC backwards
like a list.</p></li>
<li><p><strong>cs</strong> (<em>armi.settings.Settings</em><em> (</em><em>optional</em><em>)</em>) – If not provided one is read from the database</p></li>
<li><p><strong>bp</strong> (<em>armi.reactor.Blueprints</em><em> (</em><em>optional</em><em>)</em>) – If not provided one is read from the database</p></li>
<li><p><strong>statePointName</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Optional arbitrary statepoint name (e.g., “special” for “c00n00-special/”)</p></li>
<li><p><strong>allowMissing</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to emit a warning, rather than crash if reading a database
with undefined parameters. Default False.</p></li>
<li><p><strong>updateGlobalAssemNum</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to update the global assembly number to the value stored in
r.core.p.maxAssemNum. Default True.</p></li>
<li><p><strong>updateMasterCs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether to apply the cs (whether provided as an argument or read from
the database) as the primary for the case. Default True. Can be useful
if you don’t intend to use the loaded reactor as the basis for further
computations in the current operator.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>root</strong> – The top-level object stored in the database; usually a Reactor.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ArmiObject</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.getHistoryByLocation">
<span class="sig-name descname"><span class="pre">getHistoryByLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getHistoryByLocation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.getHistoryByLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parameter histories at a specific location.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.getHistoriesByLocation">
<span class="sig-name descname"><span class="pre">getHistoriesByLocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getHistoriesByLocation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.getHistoriesByLocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parameter histories at specific locations.</p>
<dl class="simple">
<dt>This has a number of limitations, which should in practice not be too limiting:</dt><dd><ul class="simple">
<li><p>The passed objects must have IndexLocations. This type of operation doesn’t
make much sense otherwise.</p></li>
<li><p>The passed objects must exist in a hierarchy that leads to a Core
object, which serves as an anchor that can fully define all index locations.
This could possibly be made more general by extending grids, but that gets a
little more complicated.</p></li>
<li><p>All requested objects must exist under the <strong>same</strong> anchor object, and at the
same depth below it.</p></li>
<li><p>All requested objects must have the same type.</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comps</strong> (<em>list of ArmiObject</em>) – The components/composites that currently occupy the location that you want
histories at. ArmiObjects are passed, rather than locations, because this
makes it easier to figure out things related to layout.</p></li>
<li><p><strong>params</strong> (<em>List of str</em><em>, </em><em>optional</em>) – The parameter names for the parameters that we want the history of. If None,
all parameter history is given</p></li>
<li><p><strong>timeSteps</strong> (<em>List of</em><em> (</em><em>cycle</em><em>, </em><em>node</em><em>) </em><em>tuples</em><em>, </em><em>optional</em>) – The time nodes that you want history for. If None, all available time nodes
will be returned.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.getHistory">
<span class="sig-name descname"><span class="pre">getHistory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getHistory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.getHistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Get parameter history for a single ARMI Object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comps</strong> – An individual ArmiObject</p></li>
<li><p><strong>params</strong> – parameters to gather</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary of str/list pairs.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Database3.getHistories">
<span class="sig-name descname"><span class="pre">getHistories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#Database3.getHistories"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Database3.getHistories" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the parameter histories for a sequence of ARMI Objects.</p>
<p>This implementation is unaware of the state of the reactor outside of the
database itself, and is therefore not usually what client code should be calling
directly during normal ARMI operation. It only knows about historical data that
have actually been written to the database. Usually one wants to be able to get
historical, plus current data, for which the similar method on the
DatabaseInterface may be more useful.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>comps</strong> – Something that is iterable multiple times</p></li>
<li><p><strong>params</strong> – parameters to gather.</p></li>
<li><p><strong>timeSteps</strong> – Selection of time nodes to get data for. If omitted, return full history</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary ArmiObject (input): dict of str/list pairs containing ((cycle,
node), value).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.11)">dict</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.</span></span><span class="sig-name descname"><span class="pre">DatabaseInterface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="armi.interfaces.html#armi.interfaces.Interface" title="armi.interfaces.Interface"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.interfaces.Interface</span></code></a></p>
<p>Handles interactions between the ARMI data model and the persistent data storage
system.</p>
<p>This reads/writes the ARMI state to/from the database and helps derive state
information that can be derived.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.name">
<span class="sig-name descname"><span class="pre">name</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'database'</span></em><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the interface. This is undefined for the base class, and must be
overridden by any concrete class that extends this one.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.database">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">database</span></span><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.database" title="Permalink to this definition">¶</a></dt>
<dd><p>Presents the internal database object, if it exists.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.interactBOL">
<span class="sig-name descname"><span class="pre">interactBOL</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.interactBOL"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.interactBOL" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the database if the main interface was not available. (Begining of Life)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.initDB">
<span class="sig-name descname"><span class="pre">initDB</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.11)"><span class="pre">os.PathLike</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.initDB"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.initDB" title="Permalink to this definition">¶</a></dt>
<dd><p>Open the underlying database to be written to, and write input files to DB.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Main Interface calls this so that the database is available as early as
possible in the run. The database interface interacts near the end of the
interface stack (so that all the parameters have been updated) while the Main
Interface interacts first.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.interactEveryNode">
<span class="sig-name descname"><span class="pre">interactEveryNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.interactEveryNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.interactEveryNode" title="Permalink to this definition">¶</a></dt>
<dd><p>Write to database.</p>
<p>DBs should receive the state information of the run at each node.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<ul class="simple">
<li><p>if tight coupling is enabled, the DB will be written in operator.py::Operator::_timeNodeLoop
via writeDBEveryNode</p></li>
</ul>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.writeDBEveryNode">
<span class="sig-name descname"><span class="pre">writeDBEveryNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.writeDBEveryNode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.writeDBEveryNode" title="Permalink to this definition">¶</a></dt>
<dd><p>write the database at the end of the time node</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.interactEOC">
<span class="sig-name descname"><span class="pre">interactEOC</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.interactEOC"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.interactEOC" title="Permalink to this definition">¶</a></dt>
<dd><p>In case anything changed since last cycle (e.g. rxSwing), update DB. (End of Cycle)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.interactEOL">
<span class="sig-name descname"><span class="pre">interactEOL</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.interactEOL"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.interactEOL" title="Permalink to this definition">¶</a></dt>
<dd><p>DB’s should be closed at run’s end. (End of Life)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.interactError">
<span class="sig-name descname"><span class="pre">interactError</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.interactError"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.interactError" title="Permalink to this definition">¶</a></dt>
<dd><p>Get shutdown state information even if the run encounters an error</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.interactDistributeState">
<span class="sig-name descname"><span class="pre">interactDistributeState</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.interactDistributeState"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.interactDistributeState" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconnect to pre-existing database.</p>
<p>DB is created and managed by the primary node only but we can still connect to it
from workers to enable things like history tracking.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.distributable">
<span class="sig-name descname"><span class="pre">distributable</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.distributable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.distributable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.prepRestartRun">
<span class="sig-name descname"><span class="pre">prepRestartRun</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.prepRestartRun"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.prepRestartRun" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the data history from the database requested in the case setting
<cite>reloadDBName</cite>.</p>
<p>Reactor state is put at the cycle/node requested in the case settings
<cite>startCycle</cite> and <cite>startNode</cite>, having loaded the state from all cycles prior
to that in the requested database.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Mixing the use of simple vs detailed cycles settings is allowed, provided
that the cycle histories prior to <cite>startCycle</cite>/<cite>startNode</cite> are equivalent.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.loadState">
<span class="sig-name descname"><span class="pre">loadState</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeNode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeStepName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fileName</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">updateGlobalAssemNum</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.loadState"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.loadState" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads a fresh reactor and applies it to the Operator.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Will load preferentially from the <cite>fileName</cite> if passed. Otherwise will load from
existing database in memory or <cite>cs[“reloadDBName”]</cite> in that order.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.11)"><strong>RuntimeError</strong></a> – If fileName is specified and that  file does not have the time step.
    If fileName is not specified and neither the database in memory, nor the
    <cite>cs[“reloadDBName”]</cite> have the time step specified.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.getHistory">
<span class="sig-name descname"><span class="pre">getHistory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableSequence" title="(in Python v3.11)"><span class="pre">MutableSequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byLocation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.getHistory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.getHistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Get historical parameter values for a single object.</p>
<p>This is mostly a wrapper around the same function on the <code class="docutils literal notranslate"><span class="pre">Database3</span></code> class,
but knows how to return the current value as well.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#armi.bookkeeping.db.Database3.getHistory" title="armi.bookkeeping.db.Database3.getHistory"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Database3.getHistory</span></code></a></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.bookkeeping.db.DatabaseInterface.getHistories">
<span class="sig-name descname"><span class="pre">getHistories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">comps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeSteps</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.MutableSequence" title="(in Python v3.11)"><span class="pre">MutableSequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">byLocation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.reactor.composites.html#armi.reactor.composites.ArmiObject" title="armi.reactor.composites.ArmiObject"><span class="pre">armi.reactor.composites.ArmiObject</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/databaseInterface.html#DatabaseInterface.getHistories"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.DatabaseInterface.getHistories" title="Permalink to this definition">¶</a></dt>
<dd><p>Get historical parameter values for one or more objects.</p>
<p>This is mostly a wrapper around the same function on the <code class="docutils literal notranslate"><span class="pre">Database3</span></code> class,
but knows how to return the current value as well.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#armi.bookkeeping.db.Database3.getHistories" title="armi.bookkeeping.db.Database3.getHistories"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Database3.getHistories</span></code></a></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.compareDatabases">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.</span></span><span class="sig-name descname"><span class="pre">compareDatabases</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refFileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">srcFileName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">exclusions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.11)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="armi.bookkeeping.db.compareDB3.html#armi.bookkeeping.db.compareDB3.DiffResults" title="armi.bookkeeping.db.compareDB3.DiffResults"><span class="pre">armi.bookkeeping.db.compareDB3.DiffResults</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/compareDB3.html#compareDatabases"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.compareDatabases" title="Permalink to this definition">¶</a></dt>
<dd><p>High-level method to compare two ARMI H5 files, given file paths.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.databaseFactory">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.</span></span><span class="sig-name descname"><span class="pre">databaseFactory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dbName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">permission</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db/factory.html#databaseFactory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.databaseFactory" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an appropriate object for interacting with a database file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dbName</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – Path to db file, e.g. <cite>baseCase.h5</cite></p></li>
<li><p><strong>permission</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – String defining permission, <cite>r</cite> for read only. See armi.bookeeping.db.permissions</p></li>
<li><p><strong>version</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>optional</em>) – Version of database you want to read or write. In many cases ARMI will
auto-detect. For advanced users.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This is not a proper factory, as the different database versions do not present a
common interface. However, this is useful code, since it at least creates an object
based on some knowledge of how to probe around. This allows client code to just
interrogate the type of the returned object to figure out to do based on whatever it
needs.</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.</span></span><span class="sig-name descname"><span class="pre">Permissions</span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/permissions.html#Permissions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.Permissions" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Mappings to HDF5 permissions flags</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions.READ_ONLY_FME">
<span class="sig-name descname"><span class="pre">READ_ONLY_FME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'r'</span></em><a class="headerlink" href="#armi.bookkeeping.db.Permissions.READ_ONLY_FME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions.READ_WRITE_FME">
<span class="sig-name descname"><span class="pre">READ_WRITE_FME</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'r+'</span></em><a class="headerlink" href="#armi.bookkeeping.db.Permissions.READ_WRITE_FME" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions.CREATE_FILE_TIE">
<span class="sig-name descname"><span class="pre">CREATE_FILE_TIE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'w'</span></em><a class="headerlink" href="#armi.bookkeeping.db.Permissions.CREATE_FILE_TIE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions.CREATE_FILE_FIE">
<span class="sig-name descname"><span class="pre">CREATE_FILE_FIE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'w-'</span></em><a class="headerlink" href="#armi.bookkeeping.db.Permissions.CREATE_FILE_FIE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions.CREATE_FILE_FIE2">
<span class="sig-name descname"><span class="pre">CREATE_FILE_FIE2</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'x'</span></em><a class="headerlink" href="#armi.bookkeeping.db.Permissions.CREATE_FILE_FIE2" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions.READ_WRITE_CREATE">
<span class="sig-name descname"><span class="pre">READ_WRITE_CREATE</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'a'</span></em><a class="headerlink" href="#armi.bookkeeping.db.Permissions.READ_WRITE_CREATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions.DEFAULT">
<span class="sig-name descname"><span class="pre">DEFAULT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'a'</span></em><a class="headerlink" href="#armi.bookkeeping.db.Permissions.DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions.read">
<span class="sig-name descname"><span class="pre">read</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'r',</span> <span class="pre">'r+'}</span></em><a class="headerlink" href="#armi.bookkeeping.db.Permissions.read" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions.write">
<span class="sig-name descname"><span class="pre">write</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'a',</span> <span class="pre">'r+',</span> <span class="pre">'w',</span> <span class="pre">'w-',</span> <span class="pre">'x'}</span></em><a class="headerlink" href="#armi.bookkeeping.db.Permissions.write" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions.create">
<span class="sig-name descname"><span class="pre">create</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'a',</span> <span class="pre">'w',</span> <span class="pre">'w-',</span> <span class="pre">'x'}</span></em><a class="headerlink" href="#armi.bookkeeping.db.Permissions.create" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.bookkeeping.db.Permissions.all">
<span class="sig-name descname"><span class="pre">all</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{'a',</span> <span class="pre">'r',</span> <span class="pre">'r+',</span> <span class="pre">'w',</span> <span class="pre">'w-',</span> <span class="pre">'x'}</span></em><a class="headerlink" href="#armi.bookkeeping.db.Permissions.all" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.convertDatabase">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.</span></span><span class="sig-name descname"><span class="pre">convertDatabase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputDBName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputDBName</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputVersion</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Optional" title="(in Python v3.11)"><span class="pre">Optional</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><span class="pre">List</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db.html#convertDatabase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.convertDatabase" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert database files between different versions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputDB</strong> – name of the complete hierarchy database</p></li>
<li><p><strong>outputDB</strong> – name of the output database that should be consistent with XTView</p></li>
<li><p><strong>outputVersion</strong> – version of the database to convert to. Defaults to latest version</p></li>
<li><p><strong>nodes</strong> – optional list of specific (cycle,node)s to convert</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.loadOperator">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.</span></span><span class="sig-name descname"><span class="pre">loadOperator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pathToDb</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loadCycle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">loadNode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allowMissing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/bookkeeping/db.html#loadOperator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.loadOperator" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an operator given the path to a database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pathToDb</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a>) – The path of the database to load from.</p></li>
<li><p><strong>loadCycle</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The cycle to load the reactor state from.</p></li>
<li><p><strong>loadNode</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a>) – The time node to load the reactor from.</p></li>
<li><p><strong>allowMissing</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether to emit a warning, rather than crash if reading a database
with undefined parameters. Default False.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">armi.operator.Operator.loadState</span></code></dt><dd><p>A method for loading reactor state that is useful if you already have an operator and a reactor object. loadOperator varies in that it supplies these given only a database file. loadState should be used if you are in the middle of an ARMI calculation and need load a different time step.</p>
</dd>
</dl>
</div>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>The operator will have a reactor attached that is loaded to the specified cycle
and node. The operator will not be in the same state that it was at that cycle and
node, only the reactor.</p>
</div>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">o</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">loadOperator</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;pathToDatabase&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">r</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cs</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">cs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">timeNode</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">getFPMass</span><span class="p">()</span>  <span class="c1"># Note since it is loaded from step 1 there are fission products.</span>
<span class="go">12345.67</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.bookkeeping.db.updateGlobalAssemblyNum">
<span class="sig-prename descclassname"><span class="pre">armi.bookkeeping.db.</span></span><span class="sig-name descname"><span class="pre">updateGlobalAssemblyNum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></span></span><a class="reference internal" href="../_modules/armi/bookkeeping/db/database3.html#updateGlobalAssemblyNum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.bookkeeping.db.updateGlobalAssemblyNum" title="Permalink to this definition">¶</a></dt>
<dd><p>Updated the global assembly number counter in ARMI, using the assemblies
read from a database.</p>
</dd></dl>

</div>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.tests.html">armi.bookkeeping.db.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="armi.bookkeeping.db.tests.html#submodules">Submodules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="armi.bookkeeping.db.tests.test_comparedb3.html">armi.bookkeeping.db.tests.test_comparedb3 module</a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.bookkeeping.db.tests.test_database3.html">armi.bookkeeping.db.tests.test_database3 module</a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.bookkeeping.db.tests.test_databaseInterface.html">armi.bookkeeping.db.tests.test_databaseInterface module</a></li>
<li class="toctree-l3"><a class="reference internal" href="armi.bookkeeping.db.tests.test_layout.html">armi.bookkeeping.db.tests.test_layout module</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.compareDB3.html">armi.bookkeeping.db.compareDB3 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.database3.html">armi.bookkeeping.db.database3 module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.databaseInterface.html">armi.bookkeeping.db.databaseInterface module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.factory.html">armi.bookkeeping.db.factory module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.layout.html">armi.bookkeeping.db.layout module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.permissions.html">armi.bookkeeping.db.permissions module</a></li>
<li class="toctree-l1"><a class="reference internal" href="armi.bookkeeping.db.typedefs.html">armi.bookkeeping.db.typedefs module</a></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="armi.bookkeeping.db.tests.html" class="btn btn-neutral float-right" title="armi.bookkeeping.db.tests package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="armi.bookkeeping.html" class="btn btn-neutral float-left" title="armi.bookkeeping package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2023, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2023-01-17.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>