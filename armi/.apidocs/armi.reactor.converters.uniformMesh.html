

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="armi.reactor.converters.uniformMesh module" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/.apidocs/armi.reactor.converters.uniformMesh.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="Converts reactor with arbitrary axial meshing (e.g. multiple assemblies with different axial meshes) to one with a global uniform axial mesh. Useful for preparing inputs for physics codes that requ..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>armi.reactor.converters.uniformMesh module &mdash; ARMI 0.1.7 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.reactor.parameters package" href="armi.reactor.parameters.html" />
    <link rel="prev" title="armi.reactor.converters.pinTypeBlockConverters module" href="armi.reactor.converters.pinTypeBlockConverters.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blog/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.reactor.html">armi.reactor package</a> &raquo;</li>
        
          <li><a href="armi.reactor.converters.html">armi.reactor.converters package</a> &raquo;</li>
        
      <li>armi.reactor.converters.uniformMesh module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/terrapower/armi/blob/master/doc/.apidocs/armi.reactor.converters.uniformMesh.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.reactor.converters.uniformMesh">
<span id="armi-reactor-converters-uniformmesh-module"></span><h1>armi.reactor.converters.uniformMesh module<a class="headerlink" href="#module-armi.reactor.converters.uniformMesh" title="Permalink to this headline">¶</a></h1>
<p>Converts reactor with arbitrary axial meshing (e.g. multiple assemblies with different
axial meshes) to one with a global uniform axial mesh.</p>
<p>Useful for preparing inputs for physics codes that require structured meshes
from a more flexible ARMI reactor mesh.</p>
<p>This is implemented generically but includes a concrete subclass for
neutronics-specific parameters. This is used for build input files
for codes like DIF3D which require axially uniform meshes.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>Build an average reactor with aligned axial meshes from a reactor with arbitrarily
unaligned axial meshes in a way that conserves nuclide mass</p></li>
<li><p>Translate state information computed on the uniform mesh back to the unaligned mesh.</p></li>
<li><p>For neutronics cases, all neutronics-related block params should be translated, as
well as the multigroup real and adjoint flux.</p></li>
</ol>
<p class="rubric">Examples</p>
<p>converter = uniformMesh.NeutronicsUniformMeshConverter()
uniformReactor = converter.convert(reactor)
# do calcs, then:
converter.applyStateToOriginal()</p>
<p>The mesh mapping happens as described in the figure:</p>
<div class="figure align-default">
<img alt="../_images/axial_homogenization.png" src="../_images/axial_homogenization.png" />
</div>
<dl class="class">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter">
<em class="property">class </em><code class="sig-prename descclassname">armi.reactor.converters.uniformMesh.</code><code class="sig-name descname">UniformMeshGeometryConverter</code><span class="sig-paren">(</span><em class="sig-param">cs=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="armi.reactor.converters.geometryConverters.html#armi.reactor.converters.geometryConverters.GeometryConverter" title="armi.reactor.converters.geometryConverters.GeometryConverter"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.reactor.converters.geometryConverters.GeometryConverter</span></code></a></p>
<p>Build uniform mesh version of the source reactor</p>
<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.convert">
<code class="sig-name descname">convert</code><span class="sig-paren">(</span><em class="sig-param">r=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.convert"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new reactor with a uniform mesh.</p>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._checkConversion">
<code class="sig-name descname">_checkConversion</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter._checkConversion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._checkConversion" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform checks to ensure conversion occurred properly.</p>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.initNewReactor">
<em class="property">static </em><code class="sig-name descname">initNewReactor</code><span class="sig-paren">(</span><em class="sig-param">sourceReactor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.initNewReactor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.initNewReactor" title="Permalink to this definition">¶</a></dt>
<dd><p>Built an empty version of the new reactor.</p>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._computeAverageAxialMesh">
<code class="sig-name descname">_computeAverageAxialMesh</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter._computeAverageAxialMesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._computeAverageAxialMesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes an average axial mesh based on the first fuel assembly</p>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._createNewAssembly">
<em class="property">static </em><code class="sig-name descname">_createNewAssembly</code><span class="sig-paren">(</span><em class="sig-param">sourceAssembly</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter._createNewAssembly"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._createNewAssembly" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.makeAssemWithUniformMesh">
<em class="property">static </em><code class="sig-name descname">makeAssemWithUniformMesh</code><span class="sig-paren">(</span><em class="sig-param">sourceAssem</em>, <em class="sig-param">newMesh</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.makeAssemWithUniformMesh"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.makeAssemWithUniformMesh" title="Permalink to this definition">¶</a></dt>
<dd><p>Build new assembly based on a source assembly but apply the uniform mesh.</p>
<p>The new assemblies must have appropriately mapped number densities as
input for a neutronics solve. They must also have other relevant
state parameters for follow-on steps. Thus, this maps many parameters
from the ARMI mesh to the uniform mesh.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.applyStateToOriginal" title="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.applyStateToOriginal"><code class="xref py py-meth docutils literal notranslate"><span class="pre">applyStateToOriginal()</span></code></a></dt><dd><p>basically the reverse on the way out.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._buildAllUniformAssemblies">
<code class="sig-name descname">_buildAllUniformAssemblies</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter._buildAllUniformAssemblies"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._buildAllUniformAssemblies" title="Permalink to this definition">¶</a></dt>
<dd><p>Loop through each new block for each mesh point and apply conservation of atoms.</p>
<p>We use the submesh and allow blocks to be as small as the smallest submesh to
avoid unnecessarily diffusing small blocks into huge ones (e.g. control blocks
into plenum).</p>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.plotConvertedReactor">
<code class="sig-name descname">plotConvertedReactor</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.plotConvertedReactor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.plotConvertedReactor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._setParamsToUpdate">
<code class="sig-name descname">_setParamsToUpdate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter._setParamsToUpdate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._setParamsToUpdate" title="Permalink to this definition">¶</a></dt>
<dd><p>Gather a list of parameters that will be mapped between reactors.</p>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._clearStateOnReactor">
<code class="sig-name descname">_clearStateOnReactor</code><span class="sig-paren">(</span><em class="sig-param">reactor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter._clearStateOnReactor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._clearStateOnReactor" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete existing state that will be updated so they don’t increment.</p>
<p>The summations should start at zero but will happen for all overlaps.</p>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.applyStateToOriginal">
<code class="sig-name descname">applyStateToOriginal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.applyStateToOriginal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.applyStateToOriginal" title="Permalink to this definition">¶</a></dt>
<dd><p>Now that state is computed on the uniform mesh, map it back to ARMI mesh.</p>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._mapStateFromReactorToOther">
<code class="sig-name descname">_mapStateFromReactorToOther</code><span class="sig-paren">(</span><em class="sig-param">sourceReactor</em>, <em class="sig-param">destReactor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter._mapStateFromReactorToOther"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter._mapStateFromReactorToOther" title="Permalink to this definition">¶</a></dt>
<dd><p>Map parameters from one reactor to another.</p>
<p>Used for preparing and uniform reactor as well as for mapping its results
back to the original reactor.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter">
<em class="property">class </em><code class="sig-prename descclassname">armi.reactor.converters.uniformMesh.</code><code class="sig-name descname">NeutronicsUniformMeshConverter</code><span class="sig-paren">(</span><em class="sig-param">cs=None</em>, <em class="sig-param">calcReactionRates=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#NeutronicsUniformMeshConverter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter" title="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter</span></code></a></p>
<p>A uniform mesh converter that specifically maps neutronics parameters.</p>
<p>This is useful for codes like DIF3D.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>If a case runs where two mesh conversions happen one after the other
(e.g. a fixed source gamma transport step that needs appropriate
fission rates), it is essential that the neutronics params be
mapped onto the newly converted reactor as well as off of it
back to the source reactor.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cs</strong> (<em>obj</em><em>, </em><em>optional</em>) – Case settings object.</p></li>
<li><p><strong>calcReactionRates</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – Set to True by default, but if set to False the reaction
rate calculation after the neutron flux is remapped will
not be calculated.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter._checkConversion">
<code class="sig-name descname">_checkConversion</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#NeutronicsUniformMeshConverter._checkConversion"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter._checkConversion" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure both reactors have the same power and that it’s equal to user-input.</p>
<p>On the initial neutronics run, of course source power will be zero.</p>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter._setParamsToUpdate">
<code class="sig-name descname">_setParamsToUpdate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#NeutronicsUniformMeshConverter._setParamsToUpdate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter._setParamsToUpdate" title="Permalink to this definition">¶</a></dt>
<dd><p>Activate conversion of various neutronics paramters.</p>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter._clearStateOnReactor">
<code class="sig-name descname">_clearStateOnReactor</code><span class="sig-paren">(</span><em class="sig-param">reactor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#NeutronicsUniformMeshConverter._clearStateOnReactor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter._clearStateOnReactor" title="Permalink to this definition">¶</a></dt>
<dd><p>Also clear mgFlux params.</p>
</dd></dl>

<dl class="method">
<dt id="armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter._mapStateFromReactorToOther">
<code class="sig-name descname">_mapStateFromReactorToOther</code><span class="sig-paren">(</span><em class="sig-param">sourceReactor</em>, <em class="sig-param">destReactor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#NeutronicsUniformMeshConverter._mapStateFromReactorToOther"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter._mapStateFromReactorToOther" title="Permalink to this definition">¶</a></dt>
<dd><p>Map parameters from one reactor to another.</p>
<p>Used for preparing and uniform reactor as well as for mapping its results
back to the original reactor.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="armi.reactor.converters.uniformMesh._setNumberDensitiesFromOverlaps">
<code class="sig-prename descclassname">armi.reactor.converters.uniformMesh.</code><code class="sig-name descname">_setNumberDensitiesFromOverlaps</code><span class="sig-paren">(</span><em class="sig-param">block</em>, <em class="sig-param">overlappingBlockInfo</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#_setNumberDensitiesFromOverlaps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh._setNumberDensitiesFromOverlaps" title="Permalink to this definition">¶</a></dt>
<dd><p>Set number densities on a block based on overlapping blocks</p>
<p>A conservation of number of atoms technique is used to map the non-uniform number densities onto the uniform
neutronics mesh. When the number density of a height <span class="math notranslate nohighlight">\(H\)</span> neutronics mesh block <span class="math notranslate nohighlight">\(N^{\prime}\)</span> is
being computed from one or more blocks in the ARMI mesh with number densities <span class="math notranslate nohighlight">\(N_i\)</span> and
heights <span class="math notranslate nohighlight">\(h_i\)</span>, the following formula is used:</p>
<div class="math notranslate nohighlight">
\[N^{\prime} =  \sum_i N_i \frac{h_i}{H}\]</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#armi.reactor.converters.uniformMesh._setStateFromOverlaps" title="armi.reactor.converters.uniformMesh._setStateFromOverlaps"><code class="xref py py-func docutils literal notranslate"><span class="pre">_setStateFromOverlaps()</span></code></a></dt><dd><p>does this for state other than number densities.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="function">
<dt id="armi.reactor.converters.uniformMesh._setStateFromOverlaps">
<code class="sig-prename descclassname">armi.reactor.converters.uniformMesh.</code><code class="sig-name descname">_setStateFromOverlaps</code><span class="sig-paren">(</span><em class="sig-param">sourceAssembly</em>, <em class="sig-param">destinationAssembly</em>, <em class="sig-param">setter</em>, <em class="sig-param">getter</em>, <em class="sig-param">paramNames=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#_setStateFromOverlaps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh._setStateFromOverlaps" title="Permalink to this definition">¶</a></dt>
<dd><p>Set state info on a assembly based on a source assembly with a different axial mesh</p>
<p>This solves an averaging equation from the source to the destination.</p>
<div class="math notranslate nohighlight">
\[&lt;P&gt; = \frac{\int_{z_1}^{z_2} P(z) dz}{\int_{z_1}^{z_2} dz}\]</div>
<p>which can be solved piecewise for z-coordinates along the source blocks.</p>
<p>For volume-integrated params (like block power), one must note that the piecewise
integrals have the fraction of overlapping source height in them, not the overlapping
height itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sourceAssembly</strong> (<a class="reference internal" href="armi.reactor.assemblies.html#armi.reactor.assemblies.Assembly" title="armi.reactor.assemblies.Assembly"><em>Assembly</em></a>) – assem that has the state</p></li>
<li><p><strong>destinationAssembly</strong> (<a class="reference internal" href="armi.reactor.assemblies.html#armi.reactor.assemblies.Assembly" title="armi.reactor.assemblies.Assembly"><em>Assembly</em></a>) – assem that has is getting the state from sourceAssembly</p></li>
<li><p><strong>setter</strong> (<em>function</em>) – A function that takes (block, val) and sets val as state on block.</p></li>
<li><p><strong>getter</strong> (<em>function</em>) – takes block as an argument, returns relevant state that has __add__ capabilities.</p></li>
<li><p><strong>paramNames</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – List of param names to set/get. Ok to skip if getter does not use param names.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>setter and getter are meant to be generated with particular state info (e.g. mgFlux or params).</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#armi.reactor.converters.uniformMesh._setNumberDensitiesFromOverlaps" title="armi.reactor.converters.uniformMesh._setNumberDensitiesFromOverlaps"><code class="xref py py-func docutils literal notranslate"><span class="pre">_setNumberDensitiesFromOverlaps()</span></code></a></dt><dd><p>does this but does smarter caching for number densities.</p>
</dd>
</dl>
</div>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="armi.reactor.parameters.html" class="btn btn-neutral float-right" title="armi.reactor.parameters package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="armi.reactor.converters.pinTypeBlockConverters.html" class="btn btn-neutral float-left" title="armi.reactor.converters.pinTypeBlockConverters module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2021, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2021-10-27.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>