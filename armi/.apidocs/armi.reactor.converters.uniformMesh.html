

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="armi.reactor.converters.uniformMesh module" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/.apidocs/armi.reactor.converters.uniformMesh.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="Converts reactor with arbitrary axial meshing (e.g. multiple assemblies with different axial meshes) to one with a global uniform axial mesh. Useful for preparing inputs for physics codes that requ..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>armi.reactor.converters.uniformMesh module &mdash; ARMI 0.2.5 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../_static/assets/jsonview.bundle.js"></script>
        <script src="../_static/assets/jsonview_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables.min.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.reactor.parameters package" href="armi.reactor.parameters.html" />
    <link rel="prev" title="armi.reactor.converters.pinTypeBlockConverters module" href="armi.reactor.converters.pinTypeBlockConverters.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements/index.html">Requirements</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.tests.html">armi.tests package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.reactor.html">armi.reactor package</a> &raquo;</li>
        
          <li><a href="armi.reactor.converters.html">armi.reactor.converters package</a> &raquo;</li>
        
      <li>armi.reactor.converters.uniformMesh module</li>
    
    
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.reactor.converters.uniformMesh">
<span id="armi-reactor-converters-uniformmesh-module"></span><h1>armi.reactor.converters.uniformMesh module<a class="headerlink" href="#module-armi.reactor.converters.uniformMesh" title="Permalink to this headline">Â¶</a></h1>
<p>Converts reactor with arbitrary axial meshing (e.g. multiple assemblies with different
axial meshes) to one with a global uniform axial mesh.</p>
<p>Useful for preparing inputs for physics codes that require structured meshes
from a more flexible ARMI reactor mesh.</p>
<p>This is implemented generically but includes a concrete subclass for
neutronics-specific parameters. This is used for build input files
for codes like DIF3D which require axially uniform meshes.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">Â¶</a></h2>
<ol class="arabic simple">
<li><p>Build an average reactor with aligned axial meshes from a reactor with arbitrarily
unaligned axial meshes in a way that conserves nuclide mass</p></li>
<li><p>Translate state information computed on the uniform mesh back to the unaligned mesh.</p></li>
<li><p>For neutronics cases, all neutronics-related block params should be translated, as
well as the multigroup real and adjoint flux.</p></li>
</ol>
<p class="rubric">Examples</p>
<p>converter = uniformMesh.NeutronicsUniformMeshConverter()
converter.convert(reactor)
uniformReactor = converter.convReactor
# do calcs, then:
converter.applyStateToOriginal()</p>
<p>The mesh mapping happens as described in the figure:</p>
<div class="figure align-default">
<img alt="../_images/axial_homogenization.png" src="../_images/axial_homogenization.png" />
</div>
<dl class="py class">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.reactor.converters.uniformMesh.</span></span><span class="sig-name descname"><span class="pre">UniformMeshGeometryConverter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="armi.reactor.converters.geometryConverters.html#armi.reactor.converters.geometryConverters.GeometryConverter" title="armi.reactor.converters.geometryConverters.GeometryConverter"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.reactor.converters.geometryConverters.GeometryConverter</span></code></a></p>
<p>This geometry converter can be used to change the axial mesh structure of the reactor core.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<dl class="simple">
<dt>There are several staticmethods available on this class that allow for:</dt><dd><ul class="simple">
<li><p>Creation of a new reactor without applying a new uniform axial mesh. See: <cite>&lt;UniformMeshGeometryConverter.initNewReactor&gt;</cite></p></li>
<li><p>Creation of a new assembly with a new axial mesh applied. See: <cite>&lt;UniformMeshGeometryConverter.makeAssemWithUniformMesh&gt;</cite></p></li>
<li><p>Resetting the parameter state of an assembly back to the defaults for the provided block parameters. See: <cite>&lt;UniformMeshGeometryConverter.clearStateOnAssemblies&gt;</cite></p></li>
<li><p>Mapping number densities and block parameters between one assembly to another. See: <cite>&lt;UniformMeshGeometryConverter.setAssemblyStateFromOverlaps&gt;</cite></p></li>
</ul>
</dd>
</dl>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.REACTOR_PARAM_MAPPING_CATEGORIES">
<span class="sig-name descname"><span class="pre">REACTOR_PARAM_MAPPING_CATEGORIES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.REACTOR_PARAM_MAPPING_CATEGORIES" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.BLOCK_PARAM_MAPPING_CATEGORIES">
<span class="sig-name descname"><span class="pre">BLOCK_PARAM_MAPPING_CATEGORIES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[]</span></em><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.BLOCK_PARAM_MAPPING_CATEGORIES" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.convert">
<span class="sig-name descname"><span class="pre">convert</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.convert"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.convert" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Create a new reactor core with a uniform mesh.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.initNewReactor">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">initNewReactor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sourceReactor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.initNewReactor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.initNewReactor" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Build a new, yet empty, reactor with the same settings as sourceReactor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sourceReactor</strong> (<a class="reference internal" href="armi.reactor.reactors.html#armi.reactor.reactors.Reactor" title="armi.reactor.reactors.Reactor"><code class="xref py py-class docutils literal notranslate"><span class="pre">Reactor</span></code></a> object.) â original reactor to be copied</p></li>
<li><p><strong>cs</strong> (<em>CaseSetting object</em>) â Complete settings object</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.applyStateToOriginal">
<span class="sig-name descname"><span class="pre">applyStateToOriginal</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.applyStateToOriginal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.applyStateToOriginal" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Apply the state of the converted reactor back to the original reactor, mapping number densities and block parameters.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.makeAssemWithUniformMesh">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">makeAssemWithUniformMesh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sourceAssem</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newMesh</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blockParamNames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapNumberDensities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.makeAssemWithUniformMesh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.makeAssemWithUniformMesh" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Build new assembly based on a source assembly but apply the uniform mesh.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This creates a new assembly based on the provided source assembly, applies
a new uniform mesh and then maps number densities and block-level parameters
to the new assembly from the source assembly.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sourceAssem</strong> (<cite>Assembly &lt;armi.reactor.assemblies.Assembly&gt;</cite> object) â Assembly that is used to map number densities and block-level parameters to
a new mesh structure.</p></li>
<li><p><strong>newMesh</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a><em>]</em>) â A list of the new axial mesh coordinates of the blocks. Note that these mesh
coordinates are in cm and should represent the top axial mesh coordinates of
the new blocks.</p></li>
<li><p><strong>blockParamNames</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em><em>, </em><em>optional</em>) â A list of block parameter names to map between the source assembly and the newly
created assembly with the provided <cite>newMesh</cite>.</p></li>
<li><p><strong>mapNumberDensities</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) â If True, number densities will be mapped from the source assembly to the new assembly.
This is True by default, but this can be set to False to only map block-level parameters if
the names are provided in <cite>blockParamNames</cite>. It can be useful to set this to False in circumstances
where the <code class="docutils literal notranslate"><span class="pre">setNumberDensitiesFromOverlaps</span></code> does not conserve mass and for some edge cases.
This can show up in specific instances with moving meshes (i.e., control rods) in some applications.
In those cases, the mapping of number densities can be treated independent of this more general
implementation.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.setAssemblyStateFromOverlaps" title="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.setAssemblyStateFromOverlaps"><code class="xref py py-obj docutils literal notranslate"><span class="pre">setAssemblyStateFromOverlaps</span></code></a></dt><dd><p>This can be used to reverse the number density and parameter mappings between two assemblies.</p>
</dd>
</dl>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.setAssemblyStateFromOverlaps">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setAssemblyStateFromOverlaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sourceAssembly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destinationAssembly</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blockParamNames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mapNumberDensities</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calcReactionRates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.setAssemblyStateFromOverlaps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.setAssemblyStateFromOverlaps" title="Permalink to this definition">Â¶</a></dt>
<dd><blockquote>
<div><p>Set state data (i.e., number densities and block-level parameters) on a assembly based on a source
assembly with a different axial mesh.</p>
<p>This solves an averaging equation from the source to the destination.</p>
<div class="math notranslate nohighlight">
\[&lt;P&gt; =\]</div>
</div></blockquote>
<p>rac{int_{z_1}^{z_2} P(z) dz}{int_{z_1}^{z_2} dz}</p>
<blockquote>
<div><p>which can be solved piecewise for z-coordinates along the source blocks.</p>
<dl class="simple">
<dt>sourceAssembly<span class="classifier">Assembly</span></dt><dd><p>assem that has the state</p>
</dd>
<dt>destinationAssembly<span class="classifier">Assembly</span></dt><dd><p>assem that has is getting the state from sourceAssembly</p>
</dd>
<dt>blockParamNames<span class="classifier">List[str], optional</span></dt><dd><p>A list of block parameter names to map between the source assembly and
the destination assembly.</p>
</dd>
<dt>mapNumberDensities<span class="classifier">bool, optional</span></dt><dd><p>If True, number densities will be mapped from the source assembly to the destination assembly.
This is True by default, but this can be set to False to only map block-level parameters if
the names are provided in <cite>blockParamNames</cite>. It can be useful to set this to False in circumstances
where the <code class="docutils literal notranslate"><span class="pre">setNumberDensitiesFromOverlaps</span></code> does not conserve mass and for some edge cases.
This can show up in specific instances with moving meshes (i.e., control rods) in some applications.
In those cases, the mapping of number densities can be treated independent of this more general
implementation.</p>
</dd>
<dt>calcReactionRates<span class="classifier">bool, optional</span></dt><dd><p>If True, the neutron reaction rates will be calculated on each block within the destination
assembly. Note that this will skip the reaction rate calculations for a block if it does
not contain a valid multi-group flux.</p>
</dd>
</dl>
<p>setNumberDensitiesFromOverlaps : does this but does smarter caching for number densities.</p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.clearStateOnAssemblies">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">clearStateOnAssemblies</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">assems</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blockParamNames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.clearStateOnAssemblies"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.clearStateOnAssemblies" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clears the parameter state of blocks for a list of assemblies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>assems</strong> (List[<cite>Assembly &lt;armi.reactor.assemblies.Assembly&gt;</cite>]) â List of assembly objects.</p></li>
<li><p><strong>blockParamNames</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>]</em><em>, </em><em>optional</em>) â A list of block parameter names to clear on the given assemblies.</p></li>
<li><p><strong>cache</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) â If True, the block parameters that were cleared are stored
and returned as a dictionary of <code class="docutils literal notranslate"><span class="pre">{b:</span> <span class="pre">{param1:</span> <span class="pre">val1,</span> <span class="pre">param2:</span> <span class="pre">val2},</span> <span class="pre">b2:</span> <span class="pre">{...},</span> <span class="pre">...}</span></code></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.plotConvertedReactor">
<span class="sig-name descname"><span class="pre">plotConvertedReactor</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.plotConvertedReactor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.plotConvertedReactor" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Generate a radial layout image of the converted reactor core.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#UniformMeshGeometryConverter.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter.reset" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Clear out stored attributes and reset the global assembly number.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.reactor.converters.uniformMesh.</span></span><span class="sig-name descname"><span class="pre">NeutronicsUniformMeshConverter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calcReactionRates</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#NeutronicsUniformMeshConverter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter" title="armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.reactor.converters.uniformMesh.UniformMeshGeometryConverter</span></code></a></p>
<p>A uniform mesh converter that specifically maps neutronics parameters.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>If a case runs where two mesh conversions happen one after the other
(e.g. a fixed source gamma transport step that needs appropriate
fission rates), it is essential that the neutronics params be
mapped onto the newly converted reactor as well as off of it
back to the source reactor.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cs</strong> (<em>obj</em><em>, </em><em>optional</em>) â Case settings object.</p></li>
<li><p><strong>calcReactionRates</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a><em>, </em><em>optional</em>) â Set to True by default, but if set to False the reaction
rate calculation after the neutron flux is remapped will
not be calculated.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter.REACTOR_PARAM_MAPPING_CATEGORIES">
<span class="sig-name descname"><span class="pre">REACTOR_PARAM_MAPPING_CATEGORIES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['neutronics']</span></em><a class="headerlink" href="#armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter.REACTOR_PARAM_MAPPING_CATEGORIES" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter.BLOCK_PARAM_MAPPING_CATEGORIES">
<span class="sig-name descname"><span class="pre">BLOCK_PARAM_MAPPING_CATEGORIES</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">['detailedAxialExpansion',</span> <span class="pre">'multi-group</span> <span class="pre">quantities']</span></em><a class="headerlink" href="#armi.reactor.converters.uniformMesh.NeutronicsUniformMeshConverter.BLOCK_PARAM_MAPPING_CATEGORIES" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.BlockParamMapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">armi.reactor.converters.uniformMesh.</span></span><span class="sig-name descname"><span class="pre">BlockParamMapper</span></span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#BlockParamMapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.BlockParamMapper" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Namespace for parameter setters/getters that can be used when
transferring data from one assembly to another during the mesh
conversion process.</p>
<dl class="py method">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.BlockParamMapper.paramSetter">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">paramSetter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">paramNames</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#BlockParamMapper.paramSetter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.BlockParamMapper.paramSetter" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Sets block parameter data.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.BlockParamMapper.paramGetter">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">paramGetter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">paramNames</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#BlockParamMapper.paramGetter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.BlockParamMapper.paramGetter" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Returns block parameter values as an array in the order of the parameter names given.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.reactor.converters.uniformMesh.setNumberDensitiesFromOverlaps">
<span class="sig-prename descclassname"><span class="pre">armi.reactor.converters.uniformMesh.</span></span><span class="sig-name descname"><span class="pre">setNumberDensitiesFromOverlaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overlappingBlockInfo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/reactor/converters/uniformMesh.html#setNumberDensitiesFromOverlaps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.reactor.converters.uniformMesh.setNumberDensitiesFromOverlaps" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set number densities on a block based on overlapping blocks</p>
<p>A conservation of number of atoms technique is used to map the non-uniform number densities onto the uniform
neutronics mesh. When the number density of a height <span class="math notranslate nohighlight">\(H\)</span> neutronics mesh block <span class="math notranslate nohighlight">\(N^{\prime}\)</span> is
being computed from one or more blocks in the ARMI mesh with number densities <span class="math notranslate nohighlight">\(N_i\)</span> and
heights <span class="math notranslate nohighlight">\(h_i\)</span>, the following formula is used:</p>
<div class="math notranslate nohighlight">
\[N^{\prime} =  \sum_i N_i \frac{h_i}{H}\]</div>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="armi.reactor.parameters.html" class="btn btn-neutral float-right" title="armi.reactor.parameters package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="armi.reactor.converters.pinTypeBlockConverters.html" class="btn btn-neutral float-left" title="armi.reactor.converters.pinTypeBlockConverters module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2022, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2022-10-31.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>