

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="armi.utils.outputCache module" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/.apidocs/armi.utils.outputCache.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="TerraPower Calculation Results Cache (CRC) This helps avoid duplicated time/energy in running cases. In test systems and analysis, it’s possible that the same calc will be done over and over, alway..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>armi.utils.outputCache module &mdash; ARMI 0.2.3 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../_static/assets/jsonview.bundle.js"></script>
        <script src="../_static/assets/jsonview_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables.min.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.utils.parsing module" href="armi.utils.parsing.html" />
    <link rel="prev" title="armi.utils.mathematics module" href="armi.utils.mathematics.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements/index.html">Requirements</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.tests.html">armi.tests package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.utils.html">armi.utils package</a> &raquo;</li>
        
      <li>armi.utils.outputCache module</li>
    
    
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.utils.outputCache">
<span id="armi-utils-outputcache-module"></span><h1>armi.utils.outputCache module<a class="headerlink" href="#module-armi.utils.outputCache" title="Permalink to this headline">¶</a></h1>
<p>TerraPower Calculation Results Cache (CRC)</p>
<p>This helps avoid duplicated time/energy in running cases.
In test systems and analysis, it’s possible that the same calc will be done
over and over, always giving the same result. This system allows the results
to be cached and returned instantly instead of re-running, for example, MC2.</p>
<div class="section" id="api-usage">
<h2>API usage<a class="headerlink" href="#api-usage" title="Permalink to this headline">¶</a></h2>
<p>Getting a cached file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">exe</span> <span class="o">=</span> <span class="s1">&#39;MC2-2018-blah.exe&#39;</span>
<span class="n">inpFiles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mccAA.inp&#39;</span><span class="p">,</span> <span class="s1">&#39;rmzflx&#39;</span><span class="p">]</span>
<span class="n">outputFound</span> <span class="o">=</span> <span class="n">crc</span><span class="o">.</span><span class="n">retrieveOutput</span><span class="p">(</span><span class="n">exe</span><span class="p">,</span> <span class="n">inp</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">outputFound</span><span class="p">:</span>
    <span class="n">mc2</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">exe</span><span class="p">,</span> <span class="n">inp</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
</pre></div>
</div>
<p>Storing a file to the cache:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">crc</span><span class="o">.</span><span class="n">store</span><span class="p">(</span><span class="n">exe</span><span class="p">,</span> <span class="n">inp</span><span class="p">,</span> <span class="n">outFiles</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Could probably be, like, a decorate on subprocess but we call subprocess a bunch of
different ways.</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.outputCache.retrieveOutput">
<span class="sig-prename descclassname"><span class="pre">armi.utils.outputCache.</span></span><span class="sig-name descname"><span class="pre">retrieveOutput</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exePath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputPaths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cacheDir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">locToRetrieveTo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/outputCache.html#retrieveOutput"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.outputCache.retrieveOutput" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the cache for a valid file and copy it if it exists.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Input paths need to be in the same order each time if the same cached folder is expected to be found.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.outputCache.store">
<span class="sig-prename descclassname"><span class="pre">armi.utils.outputCache.</span></span><span class="sig-name descname"><span class="pre">store</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exePath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputPaths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputFiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cacheDir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/outputCache.html#store"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.outputCache.store" title="Permalink to this definition">¶</a></dt>
<dd><p>Store an output file in the cache.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Input paths need to be in the same order each time if the same cached folder is expected to be found.
It is difficult to know what outputs will exist from a specific run, so only
outputs that do exist will attempt to be copied.
This function should be supplied with a greedy list of outputs.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.outputCache.deleteCache">
<span class="sig-prename descclassname"><span class="pre">armi.utils.outputCache.</span></span><span class="sig-name descname"><span class="pre">deleteCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cachedFolder</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/outputCache.html#deleteCache"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.outputCache.deleteCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove this folder.</p>
<p>Requires safeword because this is potentially extremely destructive.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.outputCache.cacheCall">
<span class="sig-prename descclassname"><span class="pre">armi.utils.outputCache.</span></span><span class="sig-name descname"><span class="pre">cacheCall</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cacheDir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">executablePath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inputPaths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputFileNames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tearDown</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/outputCache.html#cacheCall"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.outputCache.cacheCall" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the cache to see if there are outputs for the run and returns them, otherwise calls the execute command.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>It is non-trivial to determine the exact set of outputs an executable will produce
without running the executable. Therefore, <code class="docutils literal notranslate"><span class="pre">outputFileNames</span></code> is expected to be a
greedy list and cache will attempt to copy all the files, but not fail if the
file is not present. When copying outputs back, all files copied previously will
be targeted.</p>
</div>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="armi.utils.parsing.html" class="btn btn-neutral float-right" title="armi.utils.parsing module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="armi.utils.mathematics.html" class="btn btn-neutral float-left" title="armi.utils.mathematics module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2022, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2022-05-10.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>