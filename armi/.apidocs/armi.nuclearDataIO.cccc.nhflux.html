

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="armi.nuclearDataIO.cccc.nhflux module" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/.apidocs/armi.nuclearDataIO.cccc.nhflux.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="NHFLUX is a CCCC interface file that handles nodal hexagonal flux moments. Examples>>> nhfluxData = NfluxStream.readBinary("NHFLUX") >>> NhfluxStream.writeAscii(nhfluxData, "nhflux.ascii")" />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>armi.nuclearDataIO.cccc.nhflux module &mdash; ARMI 0.1.7 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.nuclearDataIO.cccc.pmatrx module" href="armi.nuclearDataIO.cccc.pmatrx.html" />
    <link rel="prev" title="armi.nuclearDataIO.cccc.labels module" href="armi.nuclearDataIO.cccc.labels.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blog/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a> &raquo;</li>
        
          <li><a href="armi.nuclearDataIO.cccc.html">armi.nuclearDataIO.cccc package</a> &raquo;</li>
        
      <li>armi.nuclearDataIO.cccc.nhflux module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/terrapower/armi/blob/master/doc/.apidocs/armi.nuclearDataIO.cccc.nhflux.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.nuclearDataIO.cccc.nhflux">
<span id="armi-nucleardataio-cccc-nhflux-module"></span><h1>armi.nuclearDataIO.cccc.nhflux module<a class="headerlink" href="#module-armi.nuclearDataIO.cccc.nhflux" title="Permalink to this headline">¶</a></h1>
<p>NHFLUX is a CCCC interface file that handles nodal hexagonal flux moments.</p>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nhfluxData</span> <span class="o">=</span> <span class="n">NfluxStream</span><span class="o">.</span><span class="n">readBinary</span><span class="p">(</span><span class="s2">&quot;NHFLUX&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">NhfluxStream</span><span class="o">.</span><span class="n">writeAscii</span><span class="p">(</span><span class="n">nhfluxData</span><span class="p">,</span> <span class="s2">&quot;nhflux.ascii&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="class">
<dt id="armi.nuclearDataIO.cccc.nhflux.NHFLUX">
<em class="property">class </em><code class="sig-prename descclassname">armi.nuclearDataIO.cccc.nhflux.</code><code class="sig-name descname">NHFLUX</code><span class="sig-paren">(</span><em class="sig-param">fName='NHFLUX'</em>, <em class="sig-param">variant=False</em>, <em class="sig-param">numDataSetsToRead=1</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NHFLUX"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NHFLUX" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="armi.nuclearDataIO.cccc.cccc.html#armi.nuclearDataIO.cccc.cccc.DataContainer" title="armi.nuclearDataIO.cccc.cccc.DataContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.nuclearDataIO.cccc.cccc.DataContainer</span></code></a></p>
<p>An abstraction of a NHFLUX file.</p>
<p>Important Note: DIF3D outputs NHFLUX at every time node,
but REBUS outputs NHFLUX only at every cycle.</p>
<p>This format is defined in DIF3D manual.</p>
<p>See also <a class="reference internal" href="#variant-95" id="id1"><span>[VARIANT-95]</span></a> and <a class="reference internal" href="#variant-2014" id="id2"><span>[VARIANT-2014]</span></a>.</p>
<dl class="citation">
<dt class="label" id="variant-95"><span class="brackets"><a class="fn-backref" href="#id1">VARIANT-95</a></span></dt>
<dd><p>G. Palmiotti, E. E. Lewis, and C. B. Carrico, VARIANT: VARIational Anisotropic Nodal Transport
for Multidimensional Cartesian and Hexagonal Geometry Calculation, ANL-95/40, Argonne National Laboratory, Argonne, IL (October 1995).</p>
</dd>
<dt class="label" id="variant-2014"><span class="brackets"><a class="fn-backref" href="#id2">VARIANT-2014</a></span></dt>
<dd><p>Smith, M. A., Lewis, E. E., and Shemon, E. R. DIF3D-VARIANT 11.0: A Decade of Updates.
United States: N. p., 2014. Web. doi:10.2172/1127298. https://publications.anl.gov/anlpubs/2014/04/78313.pdf</p>
</dd>
</dl>
<dl class="attribute">
<dt id="armi.nuclearDataIO.cccc.nhflux.NHFLUX.self._metadata">
<code class="sig-prename descclassname">self.</code><code class="sig-name descname">_metadata</code><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NHFLUX.self._metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>The NHFLUX file control info (sort of global for this library).</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>file control</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.geodstCoordMap">
<code class="sig-prename descclassname">self.</code><code class="sig-name descname">geodstCoordMap</code><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.geodstCoordMap" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an index map between DIF3D “four color” nodal and DIF3D GEODST. It is absolutely necessary for
interpreting that data read by nuclearDataIO.NHFLUX.readHexPartialCurrents4D.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.externalCurrentPointers">
<code class="sig-prename descclassname">self.</code><code class="sig-name descname">externalCurrentPointers</code><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.externalCurrentPointers" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an index map for the “external hex surfaces” between DIF3D “four color” nodal indexing
and DIF3D GEODST indexing. “External surfaces” are important, because they contain the
INCOMING partial currents from the outer reactor boundary.
This uses the same hex ordering as geodstCoordMap, except that each hex now has 6 subsequent indices.
If hex of index n (0 to N-1) has a surface of index k (0 to 5) that lies on the vacuum boundary,
then the index of that surface is N*6 + k + 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of int</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.fluxMoments">
<code class="sig-prename descclassname">self.</code><code class="sig-name descname">fluxMoments</code><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.fluxMoments" title="Permalink to this definition">¶</a></dt>
<dd><p>This contains all the flux moments for all core assemblies at ONE axial position.
The jth planar flux moment of assembly i is fluxMoments[i][j].
The hex assemblies are ordered according to self.geodstCoordMap.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>2-D list of float</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.partialCurrentsHex">
<code class="sig-prename descclassname">self.</code><code class="sig-name descname">partialCurrentsHex</code><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.partialCurrentsHex" title="Permalink to this definition">¶</a></dt>
<dd><p>This contains all the OUTGOING partial currents for each assembly in the given axial plane.
The OUTGOING partial current on surface j in assembly i is surfCurrents[i][j].
The hex assemblies are ordered according to self.geodstCoordMap.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>2-D list of float</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.partialCurrentsHex_ext">
<code class="sig-prename descclassname">self.</code><code class="sig-name descname">partialCurrentsHex_ext</code><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.partialCurrentsHex_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>This contains all the INCOMING partial currents on “external hex surfaces”, which are
adjacent to the reactor outer boundary (usually vacuum). Internal reflective surfaces
are NOT included in this!
These “external hex surfaces” are ordered according to self.externalCurrentPointers.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>1-D list of floats</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.partialCurrentsZ">
<code class="sig-prename descclassname">self.</code><code class="sig-name descname">partialCurrentsZ</code><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NHFLUX.self.partialCurrentsZ" title="Permalink to this definition">¶</a></dt>
<dd><p>This contains all the upward and downward partial currents in all assemblies on ONE whole-core axial slice.
The hex assemblies are ordered according to self.geodstCoordMap.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>2-D list of float</p>
</dd>
</dl>
</dd></dl>

<p>Initialize the NHFLUX or NAFLUX reader object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fName</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a><em>, </em><em>optional</em>) – The file name of the NHFLUX binary file to be read.</p></li>
<li><p><strong>variant</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – Whether or not this NHFLUX/NAFLUX file has the VARIANT output format, which is a bit different than
the DIF3D nodal format.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStream">
<em class="property">class </em><code class="sig-prename descclassname">armi.nuclearDataIO.cccc.nhflux.</code><code class="sig-name descname">NhfluxStream</code><span class="sig-paren">(</span><em class="sig-param">data: armi.nuclearDataIO.cccc.cccc.DataContainer</em>, <em class="sig-param">fileName: str</em>, <em class="sig-param">fileMode: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="armi.nuclearDataIO.cccc.cccc.html#armi.nuclearDataIO.cccc.cccc.StreamWithDataContainer" title="armi.nuclearDataIO.cccc.cccc.StreamWithDataContainer"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.nuclearDataIO.cccc.cccc.StreamWithDataContainer</span></code></a></p>
<p>Create an instance of a <code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – name of the file to be read</p></li>
<li><p><strong>fileMode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – the file mode, i.e. ‘w’ for writing ASCII, ‘r’ for reading ASCII, ‘wb’ for writing
binary, and ‘rb’ for reading binary.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStream._getDataContainer">
<em class="property">static </em><code class="sig-name descname">_getDataContainer</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; armi.nuclearDataIO.cccc.nhflux.NHFLUX<a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStream._getDataContainer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream._getDataContainer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStream.readWrite">
<code class="sig-name descname">readWrite</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStream.readWrite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream.readWrite" title="Permalink to this definition">¶</a></dt>
<dd><p>Read everything from the DIF3D binary file NHFLUX that is necessary for pin flux and power reconstruction.</p>
<p>Read all surface-averaged partial currents, all planar moments,
and the DIF3D “four color” nodal coordinate mapping system.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>This method should be private but conflicts with <code class="docutils literal notranslate"><span class="pre">_readWrite</span></code> so we need a better name.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>numDataSetsToRead</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a><em>, </em><em>optional</em>) – The number of whole-core flux data sets included in this NHFLUX/NAFLUX file that one wishes to be read.
Some NHFLUX/NAFLUX files, such as NAFLUX files written by SASSYS/DIF3D-K, contain more than one flux
data set. Each data set overwrites the previous one on the NHFLUX class object, which will contain
only the numDataSetsToRead-th data set. The first numDataSetsToRead-1 data sets are essentially
skipped over.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStream._getNumExtSurfaces">
<code class="sig-name descname">_getNumExtSurfaces</code><span class="sig-paren">(</span><em class="sig-param">nSurf=6</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStream._getNumExtSurfaces"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream._getNumExtSurfaces" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwFileID">
<code class="sig-name descname">_rwFileID</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStream._rwFileID"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwFileID" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/write file id record.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>The username, version, etc are embedded in this string but it’s
usually blank.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwBasicFileData1D">
<code class="sig-name descname">_rwBasicFileData1D</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStream._rwBasicFileData1D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwBasicFileData1D" title="Permalink to this definition">¶</a></dt>
<dd><p>Read basic data parameters (number of energy groups, assemblies, axial nodes, etc.)</p>
</dd></dl>

<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwGeodstCoordMap2D">
<code class="sig-name descname">_rwGeodstCoordMap2D</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStream._rwGeodstCoordMap2D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwGeodstCoordMap2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/write core geometry indexing from the NHFLUX 2D block (file control).</p>
<p>This reads the 2-D (x,y) indexing for hex assemblies.
geodstCoordMap maps DIF3D “four color” nodal hex indexing to DIF3D GEODST hex indexing.
This DIF3D GEODST indexing is different than (but similar to) the MCNP GEODST hex ordering.
See TP1-1.9.31-RPT-0010 for more details on hex ordering.</p>
<p>Let N be the number of assemblies. Let M be the number of “external hex surfaces” exposed to
the outer reactor boundary (usually vacuum). M does NOT include reflective surfaces!</p>
<p>N = self._metadata[‘nintxy’]
M = self._metadata[‘npcxy’] - self._metadata[‘nintxy’]*6
N*6 + M = self._metadata[‘npcxy’]</p>
<p class="rubric">Examples</p>
<p>geodstCoordMap[fourColorNodalIndex] = geodstIndex</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">nuclearDataIO.NHFLUX.__init__()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">nuclearDataIO.NHFLUX.readHexPartialCurrents4D()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">fluxRecon.computePinMGFluxAndPower()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">nuclearDataIO.ISOTXS.read2D()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">nuclearDataIO.SPECTR.read2D()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwFluxMoments3D">
<code class="sig-name descname">_rwFluxMoments3D</code><span class="sig-paren">(</span><em class="sig-param">contents</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStream._rwFluxMoments3D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwFluxMoments3D" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/write multigroup flux moments from the NHFLUX 3D block (file control).</p>
<p>This reads/writes all 5 planar moments for each DIF3D node on ONE x,y plane. The planar moments for
DIF3D nodes on different x,y planes (different axial slices) are in a different 3D record.</p>
<p>Format is <code class="docutils literal notranslate"><span class="pre">((FLUX(I,J),I=1,NMOM),J=1,NINTXY)</span></code> so we must pass in <code class="docutils literal notranslate"><span class="pre">NINTXY</span></code> as
the first item in the shape. However, the caller of this method wants the shape
to be (nintxy, nMom) so we actually have to transpose it on the way in/out.</p>
</dd></dl>

<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwHexPartialCurrents4D">
<code class="sig-name descname">_rwHexPartialCurrents4D</code><span class="sig-paren">(</span><em class="sig-param">surfCurrents</em>, <em class="sig-param">externalSurfCurrents</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStream._rwHexPartialCurrents4D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwHexPartialCurrents4D" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/write multigroup hexagonal/laterial partial currents from the NHFLUX 4D block (file control).</p>
<p>This reads all OUTGOING partial currents for all assembly block lateral surfaces at a fixed axial position.
There are 6 surfaces per assembly axial block. The 2 axial surfaces of each block are in the 5D records.</p>
<p>Each 4D record contains all the hex surface (6 per assembly) partial currents on ONE x,y plane.
The hex surface data on different x,y planes (different axial slices) are in a different 4D record.</p>
<p>NHFLUX contains only the 6 OUTGOING partial currents for each hex assembly. To obtain INCOMING partial
currents and to construct NET currents, one must find the OUTGOING partial currents on the hex nearest
neighbors (this is done in fluxRecon, not in nuclearDataIO.NHFLUX).</p>
<p>If the reactor contains N hex assemblies and M exterior hex surfaces (surfaces adjacent to vacuum boundary),
this record will contain N*6 + M partial currents. The N*6 assembly OUTGOING partial currents are listed first,
followed by the M INCOMING partial currents from the outer reactor edge.</p>
<p>N = self._metadata[‘nintxy’]
M = self._metadata[‘npcxy’] - self._metadata[‘nintxy’]*6
N*6 + M = self._metadata[‘npcxy’]</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>These data are harder to read with rwMatrix, though it could be done if we
discarded the unwanted data at another level if that is much faster.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwZPartialCurrents5D">
<code class="sig-name descname">_rwZPartialCurrents5D</code><span class="sig-paren">(</span><em class="sig-param">surfCurrents</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStream._rwZPartialCurrents5D"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream._rwZPartialCurrents5D" title="Permalink to this definition">¶</a></dt>
<dd><p>Read/write multigroup axial partial currents from the NHFLUX 5D block (file control).</p>
<p>All other NHFLUX data is indexed by DIF3D node (each axial core slice in its own record).
HOWEVER, “top” and “bottom” surfaces of each DIF3D node are indexed by axial surface.
If there are Z axial nodes, then there are Z+1 axial surfaces.
Thus, there are Z+1 5D records, while there are only Z 3D and Z 4D records.</p>
<p>Each 5D record (each axial surface) contains two partial currents for each assembly position.
The first is the UPWARD partial current, while the second is the DOWNWARD partial current.
These are assigned to specific ARMI blocks in fluxRecon.computePinMGFluxAndPower.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>surfCurrents</strong> – This contains all the upward and downward partial currents in all assemblies on ONE whole-core axial slice.
The hex assemblies are ordered according to self.geodstCoordMap.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>2-D list of float</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">nuclearDataIO.NHFLUX.readBasicFileData1D()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">nuclearDataIO.NHFLUX.readGeodstCoordMap2D()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">fluxRecon.computePinMGFluxAndPower()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">nuclearDataIO.ISOTXS.read5D()</span></code></p>
</div>
</dd></dl>

<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStream._getEnergyGroupIndex">
<code class="sig-name descname">_getEnergyGroupIndex</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStream._getEnergyGroupIndex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream._getEnergyGroupIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Real fluxes stored in NHFLUX have “normal” (or “forward”) energy groups.
Also see the subclass method NAFLUX.getEnergyGroupIndex().</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="armi.nuclearDataIO.cccc.nhflux.NafluxStream">
<em class="property">class </em><code class="sig-prename descclassname">armi.nuclearDataIO.cccc.nhflux.</code><code class="sig-name descname">NafluxStream</code><span class="sig-paren">(</span><em class="sig-param">data: armi.nuclearDataIO.cccc.cccc.DataContainer</em>, <em class="sig-param">fileName: str</em>, <em class="sig-param">fileMode: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NafluxStream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NafluxStream" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream" title="armi.nuclearDataIO.cccc.nhflux.NhfluxStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.nuclearDataIO.cccc.nhflux.NhfluxStream</span></code></a></p>
<p>NAFLUX is similar in format to the NHFLUX, but contains adjoint flux.</p>
<p>It has reversed energy group ordering.</p>
<p>Create an instance of a <code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – name of the file to be read</p></li>
<li><p><strong>fileMode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – the file mode, i.e. ‘w’ for writing ASCII, ‘r’ for reading ASCII, ‘wb’ for writing
binary, and ‘rb’ for reading binary.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NafluxStream._getEnergyGroupIndex">
<code class="sig-name descname">_getEnergyGroupIndex</code><span class="sig-paren">(</span><em class="sig-param">g</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NafluxStream._getEnergyGroupIndex"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NafluxStream._getEnergyGroupIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjoint fluxes stored in NAFLUX have “reversed” (or “backward”) energy groups.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStreamVariant">
<em class="property">class </em><code class="sig-prename descclassname">armi.nuclearDataIO.cccc.nhflux.</code><code class="sig-name descname">NhfluxStreamVariant</code><span class="sig-paren">(</span><em class="sig-param">data: armi.nuclearDataIO.cccc.cccc.DataContainer</em>, <em class="sig-param">fileName: str</em>, <em class="sig-param">fileMode: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStreamVariant"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStreamVariant" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStream" title="armi.nuclearDataIO.cccc.nhflux.NhfluxStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.nuclearDataIO.cccc.nhflux.NhfluxStream</span></code></a></p>
<p>Stream for VARIANT version of NHFLUX.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Can be deleted after have the NHFLUX data container be the public interface</p>
</div>
<p>Create an instance of a <code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – name of the file to be read</p></li>
<li><p><strong>fileMode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – the file mode, i.e. ‘w’ for writing ASCII, ‘r’ for reading ASCII, ‘wb’ for writing
binary, and ‘rb’ for reading binary.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NhfluxStreamVariant._getDataContainer">
<em class="property">static </em><code class="sig-name descname">_getDataContainer</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; armi.nuclearDataIO.cccc.nhflux.NHFLUX<a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NhfluxStreamVariant._getDataContainer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NhfluxStreamVariant._getDataContainer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="armi.nuclearDataIO.cccc.nhflux.NafluxStreamVariant">
<em class="property">class </em><code class="sig-prename descclassname">armi.nuclearDataIO.cccc.nhflux.</code><code class="sig-name descname">NafluxStreamVariant</code><span class="sig-paren">(</span><em class="sig-param">data: armi.nuclearDataIO.cccc.cccc.DataContainer</em>, <em class="sig-param">fileName: str</em>, <em class="sig-param">fileMode: str</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NafluxStreamVariant"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NafluxStreamVariant" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#armi.nuclearDataIO.cccc.nhflux.NafluxStream" title="armi.nuclearDataIO.cccc.nhflux.NafluxStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">armi.nuclearDataIO.cccc.nhflux.NafluxStream</span></code></a></p>
<p>Stream for VARIANT version of NAFLUX.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Can be deleted after have the NHFLUX data container be the public interface</p>
</div>
<p>Create an instance of a <code class="xref py py-class docutils literal notranslate"><span class="pre">Stream</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>fileName</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – name of the file to be read</p></li>
<li><p><strong>fileMode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><em>str</em></a>) – the file mode, i.e. ‘w’ for writing ASCII, ‘r’ for reading ASCII, ‘wb’ for writing
binary, and ‘rb’ for reading binary.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="armi.nuclearDataIO.cccc.nhflux.NafluxStreamVariant._getDataContainer">
<em class="property">static </em><code class="sig-name descname">_getDataContainer</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; armi.nuclearDataIO.cccc.nhflux.NHFLUX<a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#NafluxStreamVariant._getDataContainer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.NafluxStreamVariant._getDataContainer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="function">
<dt id="armi.nuclearDataIO.cccc.nhflux.getNhfluxReader">
<code class="sig-prename descclassname">armi.nuclearDataIO.cccc.nhflux.</code><code class="sig-name descname">getNhfluxReader</code><span class="sig-paren">(</span><em class="sig-param">adjointFlag</em>, <em class="sig-param">variantFlag</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/nuclearDataIO/cccc/nhflux.html#getNhfluxReader"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#armi.nuclearDataIO.cccc.nhflux.getNhfluxReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the appropriate DIF3D nodal flux binary file reader class,
either NHFLUX (real) or NAFLUX (adjoint).</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="armi.nuclearDataIO.cccc.pmatrx.html" class="btn btn-neutral float-right" title="armi.nuclearDataIO.cccc.pmatrx module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="armi.nuclearDataIO.cccc.labels.html" class="btn btn-neutral float-left" title="armi.nuclearDataIO.cccc.labels module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2021, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2021-10-11.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>