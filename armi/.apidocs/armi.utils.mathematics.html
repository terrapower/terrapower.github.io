

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="armi.utils.mathematics module" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/.apidocs/armi.utils.mathematics.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="Various math utilities" />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>armi.utils.mathematics module &mdash; ARMI 0.2.3 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../_static/assets/jsonview.bundle.js"></script>
        <script src="../_static/assets/jsonview_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables.min.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="armi.utils.outputCache module" href="armi.utils.outputCache.html" />
    <link rel="prev" title="armi.utils.iterables module" href="armi.utils.iterables.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements/index.html">Requirements</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">API Docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="armi.html">armi package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="armi.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="armi.bookkeeping.html">armi.bookkeeping package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cases.html">armi.cases package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.cli.html">armi.cli package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.materials.html">armi.materials package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nucDirectory.html">armi.nucDirectory package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.nuclearDataIO.html">armi.nuclearDataIO package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.operators.html">armi.operators package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.physics.html">armi.physics package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.reactor.html">armi.reactor package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.scripts.html">armi.scripts package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.settings.html">armi.settings package</a></li>
<li class="toctree-l4"><a class="reference internal" href="armi.tests.html">armi.tests package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="armi.utils.html">armi.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="armi.html#submodules">Submodules</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="modules.html">armi</a> &raquo;</li>
        
          <li><a href="armi.html">armi package</a> &raquo;</li>
        
          <li><a href="armi.utils.html">armi.utils package</a> &raquo;</li>
        
      <li>armi.utils.mathematics module</li>
    
    
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-armi.utils.mathematics">
<span id="armi-utils-mathematics-module"></span><h1>armi.utils.mathematics module<a class="headerlink" href="#module-armi.utils.mathematics" title="Permalink to this headline">¶</a></h1>
<p>Various math utilities</p>
<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.average1DWithinTolerance">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">average1DWithinTolerance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">vals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerance</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#average1DWithinTolerance"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.average1DWithinTolerance" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the average of a series of arrays with a tolerance.</p>
<p>Tuned for averaging assembly meshes or block heights.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>vals</strong> (<em>2D np.array</em>) – could be assembly x axial mesh tops or heights</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.convertToSlice">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">convertToSlice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">increment</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#convertToSlice"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.convertToSlice" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a int, float, list of ints or floats, None, or slice
to a slice. Also optionally increments that slice to make it easy to line
up lists that don’t start with 0.</p>
<p>Use this with np.array (np.ndarray) types to easily get selections of it’s elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>x</strong> (<em>multiple types allowed.</em>) – int: select one index.
list of int: select these index numbers.
None: select all indices.
slice: select this slice</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>slice</strong> – Returns a slice object that can be used in an array
like a[x] to select from its members.
Also, the slice has its index numbers decremented by 1.
It can also return a numpy array, which can be used
to slice other numpy arrays in the same way as a slice.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.10)">slice</a></p>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>a = np.array([10, 11, 12, 13])</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">convertToSlice</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">slice(2, 3, None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">convertToSlice</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span>
<span class="go">array([12])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">convertToSlice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">increment</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="go">slice(1, 2, None)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">convertToSlice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">increment</span><span class="o">=-</span><span class="mi">1</span><span class="p">)]</span>
<span class="go">array([11])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">convertToSlice</span><span class="p">(</span><span class="kc">None</span><span class="p">)]</span>
<span class="go">array([10, 11, 12, 13])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">convertToSlice</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">])]</span>
<span class="go">array([11, 13])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">convertToSlice</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">increment</span><span class="o">=-</span><span class="mi">1</span><span class="p">)]</span>
<span class="go">array([10, 12])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">[</span><span class="n">utils</span><span class="o">.</span><span class="n">convertToSlice</span><span class="p">(</span><span class="nb">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">increment</span><span class="o">=-</span><span class="mi">1</span><span class="p">)]</span>
<span class="go">array([11])</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.efmt">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">efmt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#efmt"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.efmt" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts string exponential number to another string with just 2 digits in the exponent.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.expandRepeatedFloats">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">expandRepeatedFloats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">repeatedList</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#expandRepeatedFloats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.expandRepeatedFloats" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an expanded repeat list.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>R char is valid for showing the number of repeats in MCNP. For examples the list:
[150,  200, ‘9R’]
indicates a 150 day cycle followed by 10 200 day cycles.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.findClosest">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">findClosest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">listToSearch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#findClosest"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.findClosest" title="Permalink to this definition">¶</a></dt>
<dd><p>find closest item in a list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>listToSearch</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – The list to search through</p></li>
<li><p><strong>val</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The target value that is being searched for in the list</p></li>
<li><p><strong>indx</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a><em>, </em><em>optional</em>) – If true, returns minVal and minIndex, otherwise, just the value</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>minVal</strong> (<em>float</em>) – The item in the listToSearch that is closest to val</p></li>
<li><p><strong>minI</strong> (<em>int</em>) – The index of the item in listToSearch that is closest to val. Returned if indx=True.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.findNearestValue">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">findNearestValue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">searchList</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">searchValue</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#findNearestValue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.findNearestValue" title="Permalink to this definition">¶</a></dt>
<dd><p>Search a given list for the value that is closest to the given search value.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.findNearestValueAndIndex">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">findNearestValueAndIndex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">searchList</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">searchValue</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#findNearestValueAndIndex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.findNearestValueAndIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Search a given list for the value that is closest to the given search value. Return a tuple
containing the value and its index in the list.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.fixThreeDigitExp">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">fixThreeDigitExp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strToFloat</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#fixThreeDigitExp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.fixThreeDigitExp" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert FORTRAN numbers that cannot be converted into floats.</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<p>Converts a number line  “9.03231714805651-101” (no e or E) to “9.03231714805651e-101”.
Some external depletion kernels currently need this fix. From contact with developer:
The notation like 1.0-101 is a FORTRAN thing, with history going back to the 60’s.
They will only put E before an exponent 99 and below.  Fortran will also read these guys
just fine, and they are valid floating point numbers.  It would not be a useful effort,
in terms of time, trying to get FORTRAN to behave differently.
The approach has been to write a routine in the reading code which will interpret these.</p>
<p>This helps when the scientific number exponent does not fit.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.getFloat">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">getFloat</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">val</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#getFloat"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.getFloat" title="Permalink to this definition">¶</a></dt>
<dd><p>returns float version of val, or None if it’s impossible. Useful for converting
user-input into floats when ‘’ might be possible.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.getStepsFromValues">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">getStepsFromValues</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prevValue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#getStepsFromValues"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.getStepsFromValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert list of floats to list of steps between each float.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.isMonotonic">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">isMonotonic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inputIter</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">relation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#isMonotonic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.isMonotonic" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if an iterable contains elements that are monotonically increasing or
decreasing, whatever that might mean for the specific types of the elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>inputIter</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – Some list to check. Values in the list should have a defined relation to
each other.</p></li>
<li><p><strong>relation</strong> (<em>{'&lt;='</em><em>, </em><em>'&lt;'</em><em>, </em><em>'&gt;='</em><em>, </em><em>'&gt;'}</em>) – The relation between the elements to check, from left to right through
the iterable.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)">bool</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.linearInterpolation">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">linearInterpolation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targetX</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targetY</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#linearInterpolation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.linearInterpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>does a linear interpolation (or extrapolation) for y=f(x)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x0</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Coordinates of two points to interpolate between</p></li>
<li><p><strong>y0</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Coordinates of two points to interpolate between</p></li>
<li><p><strong>x1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Coordinates of two points to interpolate between</p></li>
<li><p><strong>y1</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Coordinates of two points to interpolate between</p></li>
<li><p><strong>targetX</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – X value to evaluate the line at</p></li>
<li><p><strong>targetY</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a><em>, </em><em>optional</em>) – Y value we want to find the x value for (inverse interpolation)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>interpY</strong> (<em>float</em>) – The value of y(targetX), if targetX is not None</p></li>
<li><p><strong>interpX</strong> (<em>float</em>) – The value of x where y(x) = targetY (if targetY is not None)</p></li>
<li><p><em>y = m(x-x0) + b</em></p></li>
<li><p><em>x = (y-b)/m</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.minimizeScalarFunc">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">minimizeScalarFunc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">goal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guess</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxIterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positiveGuesses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#minimizeScalarFunc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.minimizeScalarFunc" title="Permalink to this definition">¶</a></dt>
<dd><p>Use scipy minimize with the given function, goal value, and first guess.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>function</em>) – The function that guess will be changed to try to make it return the goal value.</p></li>
<li><p><strong>goal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The function will be changed until it’s return equals this value.</p></li>
<li><p><strong>guess</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The first guess value to do Newton’s method on the func.</p></li>
<li><p><strong>maxIterations</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The maximum number of iterations that the Newton’s method will be allowed to perform.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ans</strong> – The guess that when input to the func returns the goal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.newtonsMethod">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">newtonsMethod</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">goal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">guess</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxIterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positiveGuesses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#newtonsMethod"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.newtonsMethod" title="Permalink to this definition">¶</a></dt>
<dd><p>Solves a Newton’s method with the given function, goal value, and first guess.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>function</em>) – The function that guess will be changed to try to make it return the goal value.</p></li>
<li><p><strong>goal</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The function will be changed until it’s return equals this value.</p></li>
<li><p><strong>guess</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The first guess value to do Newton’s method on the func.</p></li>
<li><p><strong>maxIterations</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><em>int</em></a>) – The maximum number of iterations that the Newton’s method will be allowed to perform.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ans</strong> – The guess that when input to the func returns the goal.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.parabolaFromPoints">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">parabolaFromPoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">p1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#parabolaFromPoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.parabolaFromPoints" title="Permalink to this definition">¶</a></dt>
<dd><p>find the parabola that passes through three points</p>
<p>We solve a simultaneous equation with three points.</p>
<dl class="simple">
<dt>A = x1**2 x1 1</dt><dd><p>x2**2 x2 1
x3**2 x3 1</p>
</dd>
<dt>b = y1</dt><dd><p>y2
y3</p>
</dd>
</dl>
<p>find coefficients Ax=b</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p1</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a>) – first point (x,y) coordinates</p></li>
<li><p><strong>p2</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a><em>, </em><em>second and third points.</em>) – </p></li>
<li><p><strong>p3</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.10)"><em>tuple</em></a><em>, </em><em>second and third points.</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>a,b,c coefficients of y=ax^2+bx+c</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.parabolicInterpolation">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">parabolicInterpolation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ap</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targetY</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#parabolicInterpolation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.parabolicInterpolation" title="Permalink to this definition">¶</a></dt>
<dd><p>Given parabola coefficients, this interpolates the time
that would give k=targetK.</p>
<p>keff = at^2+bt+c
We want to solve a*t^2+bt+c-targetK = 0.0 for time.
if there are real roots, we should probably take the smallest one
because the larger one might be at very high burnup.
If there are no real roots, just take the point where the deriv ==0, or
2at+b=0, so t = -b/2a
The slope of the curve is the solution to 2at+b at whatever t has been determined</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ap</strong> (<em>floats</em>) – coefficients of a parabola y = ap*x^2 + bp*x + cp</p></li>
<li><p><strong>bp</strong> (<em>floats</em>) – coefficients of a parabola y = ap*x^2 + bp*x + cp</p></li>
<li><p><strong>cp</strong> (<em>floats</em>) – coefficients of a parabola y = ap*x^2 + bp*x + cp</p></li>
<li><p><strong>targetK</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – The keff to find the cycle length of</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>realRoots</strong> – (root, slope)
The best guess of the cycle length that will give k=targetK
If no positive root was found, this is the maximum of the curve. In that case,
it will be a negative number. If there are two positive roots, there will be two entries.</p>
<dl class="simple">
<dt>slope<span class="classifier">float</span></dt><dd><p>The slope of the keff vs. time curve at t=newTime</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list of tuples</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.relErr">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">relErr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><span class="pre">float</span></a></span></span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#relErr"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.relErr" title="Permalink to this definition">¶</a></dt>
<dd><p>find the relative error between to numbers</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.resampleStepwise">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">resampleStepwise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">avg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#resampleStepwise"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.resampleStepwise" title="Permalink to this definition">¶</a></dt>
<dd><p>Resample a piecewise-defined step function from one set of mesh points
to another. This is useful for reallocating values along a given axial
mesh (or assembly of blocks).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xin</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – interval points / mesh points</p></li>
<li><p><strong>yin</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – interval values / inter-mesh values</p></li>
<li><p><strong>xout</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.10)"><em>list</em></a>) – new interval points / new mesh points</p></li>
<li><p><strong>avg</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><em>bool</em></a>) – By default, this is set to True, forcing the resampling to be done
by averaging. But if this is False, the resmampling will be done by
summation, to try and preserve the totals after resampling.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="armi.utils.mathematics.rotateXY">
<span class="sig-prename descclassname"><span class="pre">armi.utils.mathematics.</span></span><span class="sig-name descname"><span class="pre">rotateXY</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">degreesCounterclockwise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radiansCounterclockwise</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/armi/utils/mathematics.html#rotateXY"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#armi.utils.mathematics.rotateXY" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotates x, y coordinates</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>array_like</em>) – coordinates</p></li>
<li><p><strong>y</strong> (<em>array_like</em>) – coordinates</p></li>
<li><p><strong>degreesCounterclockwise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Degrees to rotate in the CCW direction</p></li>
<li><p><strong>radiansCounterclockwise</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.10)"><em>float</em></a>) – Radians to rotate in the CCW direction</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>xr, yr</strong> – the rotated coordinates.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array_like</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="armi.utils.outputCache.html" class="btn btn-neutral float-right" title="armi.utils.outputCache module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="armi.utils.iterables.html" class="btn btn-neutral float-left" title="armi.utils.iterables module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2022, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2022-05-27.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>