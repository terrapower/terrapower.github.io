

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="3. Building input files for a fast reactor" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/tutorials/walkthrough_inputs.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="The true power of ARMI comes when you have a reactor at your fingertips. To get this, you must describe the reactor via input files. This tutorial will walk you through building input files from sc..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>3. Building input files for a fast reactor &mdash; ARMI 0.2.5 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../_static/assets/jsonview.bundle.js"></script>
        <script src="../_static/assets/jsonview_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables.min.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Building input files for a thermal reactor" href="walkthrough_lwr_inputs.html" />
    <link rel="prev" title="2. The ARMI Material Library" href="materials_demo.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="nuclide_demo.html">1. The ARMI Nuclide and Element Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="materials_demo.html">2. The ARMI Material Library</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. Building input files for a fast reactor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-the-blueprints">3.1. Setting up the blueprints</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#defining-non-fuel-blocks">3.1.1. Defining non-fuel blocks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defining-how-the-blocks-are-arranged-into-assemblies">3.1.2. Defining how the blocks are arranged into assemblies</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#specifying-the-core-map">3.2. Specifying the core map</a></li>
<li class="toctree-l3"><a class="reference internal" href="#specifying-settings">3.3. Specifying settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#defining-fuel-management">3.4. Defining fuel management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="walkthrough_lwr_inputs.html">4. Building input files for a thermal reactor</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_model.html">5. Hands-on at the ARMI Terminal</a></li>
<li class="toctree-l2"><a class="reference internal" href="making_your_first_app.html">6. Making your first ARMI-based App</a></li>
<li class="toctree-l2"><a class="reference internal" href="param_sweep.html">7. Parameter sweeps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements/index.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../.apidocs/modules.html">API Docs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Tutorials</a> &raquo;</li>
        
      <li><span class="section-number">3. </span>Building input files for a fast reactor</li>
    
    
  <li class="wy-breadcrumbs-aside">
    
      
        <a href="https://github.com/terrapower/armi/blob/main/doc/tutorials/walkthrough_inputs.rst" class="fa fa-github"> Edit on GitHub</a>
      
    
  </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="building-input-files-for-a-fast-reactor">
<h1><span class="section-number">3. </span>Building input files for a fast reactor<a class="headerlink" href="#building-input-files-for-a-fast-reactor" title="Permalink to this headline">Â¶</a></h1>
<p>The true power of ARMI comes when you have a reactor at your fingertips. To get this,
you must describe the reactor via input files.
This tutorial will walk you through building input files from scratch for a reactor.
We will model the CR=1.0 sodium-cooled fast reactor documented in <a class="reference external" href="https://publications.anl.gov/anlpubs/2008/05/61507.pdf">ANL-AFCI-177</a>. The full <a class="reference internal" href="../user/inputs/index.html"><span class="doc">documentation
for input files is available here</span></a>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The full inputs created in this tutorial are available for download at the bottom of
this page.</p>
</div>
<div class="section" id="setting-up-the-blueprints">
<h2><span class="section-number">3.1. </span>Setting up the blueprints<a class="headerlink" href="#setting-up-the-blueprints" title="Permalink to this headline">Â¶</a></h2>
<p>First weâll set up the fuel assembly design in the blueprints input. Make a new
file called <code class="docutils literal notranslate"><span class="pre">anl-afci-177-blueprints.yaml</span></code>. Weâll be entering information
based on Table 4.4 of the reference. To define the pin cell we need dimensions
of the fuel pin, cladding, ducts, wire wrap, and so on.</p>
<p>The cladding dimensions are clear from the table. The outer diameter is given
as the pin diameter, and the inner diameter is simply that minus twice the
cladding thickness. We will use the <code class="docutils literal notranslate"><span class="pre">Circle</span></code> shape, and make the material
<code class="docutils literal notranslate"><span class="pre">HT9</span></code> steel. Since weâre inputting cold dimensions, weâll set <code class="docutils literal notranslate"><span class="pre">Tinput</span></code> to
room temperature and let ARMI thermally expand the clad up to an average
operating temperature of 450 Â°C. Lastly, since there are 271 pins in the
assembly, weâll set the <code class="docutils literal notranslate"><span class="pre">mult</span></code> (short for <em>multiplicity</em>) to 271:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">blocks</span><span class="p">:</span>
<span class="w">    </span><span class="nt">fuel</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;block_fuel</span>
<span class="w">        </span><span class="nt">clad</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Circle</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HT9</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6962</span>
<span class="w">            </span><span class="nt">od</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">0.808</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">271</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In fast reactors, neutrons arenât as affected by spatial details at a
pin level, and compositions are often quite spatially flat across an assembly.
Thus we can often just copy a component using the <code class="docutils literal notranslate"><span class="pre">mult</span></code> input equal to the
number of pins, and neutronic modeling is sufficient. For subchannel T/H, the
spatial details are of course much more important.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">&amp;block_fuel</span></code> is a YAML anchor which will be discussed more below.</p>
</div>
<p>Next, letâs enter the wire wrap. This is a helical wire used in fast reactors
to mix coolant and keep pins separate (used in lieu of a grid spacer). ARMI has
a special shape for this, called a <code class="docutils literal notranslate"><span class="pre">Helix</span></code>. Helices are defined by their
axial pitch (how much linear distance between two wrappings axially), the wire
diameter, and the diameter of the pin theyâre wrapping around (called
<code class="docutils literal notranslate"><span class="pre">helixDiameter</span></code>).  Thus, we input the wire wrap into the blueprints as
follows.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The wire axial pitch isnât specified in the table so we just use a typical value of 30 cm.</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="nt">wire</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Helix</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HT9</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">axialPitch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30.0</span>
<span class="w">            </span><span class="nt">helixDiameter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8888</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">            </span><span class="nt">od</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0808</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">271</span>
</pre></div>
</div>
<p>We set the wire inner diameter to 0 to make it a solid wire. If we set it to
something non-zero, the wire itself would be hollow on the inside, which would
be crazy.</p>
<p>Now, itâs time to do the fuel. This example reactor uses UZr metal fuel with a
liquid sodium thermal bond in the large gap between the fuel and the cladding.
The fraction of space inside the clad that is fuel is called the âsmeared
densityâ, so we can figure out the actual fuel slug dimensions from the
information in the table.</p>
<p>Specifically, the smeared density is 75%, which means that 75% of the area
inside the circle made by the inner diameter of the cladding (0.6962 cm) is
fuel. Thus, the fuel outer diameter is given by solving:</p>
<div class="math notranslate nohighlight">
\[0.75 = \frac{\pi d^2}{\pi 0.6962^2}\]</div>
<p>which gives <span class="math notranslate nohighlight">\(d = 0.6029\)</span>, our fuel outer diameter. Now we can enter our
fuel slug component into blueprints:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="nt">fuel</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Circle</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UZr</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500.0</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">271</span>
<span class="w">            </span><span class="nt">od</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6029</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We upped the hot temperature to 500 Â°C, indicative of the fact that fuel will be running a bit hotter than
cladding.</p>
</div>
<p>Letâs enter a description of the thermal bond next. This is an annulus of
sodium between the fuel and the cladding.  Since those dimensions are already
set, we will use <strong>linked dimensions</strong>. Thus, no numbers (beyond temperatures)
are needed!</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="nt">bond</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Circle</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sodium</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">447.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">447.0</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fuel.od</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">fuel.mult</span>
<span class="w">            </span><span class="nt">od</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">clad.id</span>
</pre></div>
</div>
<p>The next physical component we need to model is the hexagonal assembly duct.
This information is provided in Table 4.3 of ANL-AFCI-177. For the <code class="docutils literal notranslate"><span class="pre">Hexagon</span></code>
shape, we enter inner and outer flat-to-flat distances (âpitchâ) instead of
diameters. The outer pitch is given as <code class="docutils literal notranslate"><span class="pre">15.710</span></code>, and we can calculate the
inner pitch from that and the duct thickness. It ends up looking like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="nt">duct</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hexagon</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HT9</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14.922</span>
<span class="w">            </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15.710</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</pre></div>
</div>
<p>Itâs essential to capture the spacing between adjacent ducts too (the assembly
pitch, also defined in Table 4.3), and we define this by defining a special
<code class="docutils literal notranslate"><span class="pre">Hexagon</span></code> full of interstitial coolant outside the duct:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="nt">intercoolant</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hexagon</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sodium</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">duct.op</span>
<span class="w">            </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16.142</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
</pre></div>
</div>
<p>That defines everything in our assembly except for the coolant. The shape of
the coolant is geometrically complex, itâs a hexagon with holes punched
through it (one for each cladding tube/wire wrap). Rather than explicitly
defining this shape, ARMI allows you to input a <code class="docutils literal notranslate"><span class="pre">DerivedShape</span></code> in certain
conditions (e.g. when the rest of the assembly is filled and only one
<code class="docutils literal notranslate"><span class="pre">DerivedComponents</span></code> is defined. It can simply back-calculate the area of this
shape automatically. And thatâs just what weâll do with the coolant:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">        </span><span class="nt">coolant</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DerivedShape</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sodium</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
</pre></div>
</div>
<p>And that completes our generic fuel block description.</p>
<div class="section" id="defining-non-fuel-blocks">
<h3><span class="section-number">3.1.1. </span>Defining non-fuel blocks<a class="headerlink" href="#defining-non-fuel-blocks" title="Permalink to this headline">Â¶</a></h3>
<p>For this core model, we will need some reflectors, shields, and control blocks
as well. In detailed models, it can often be important to model these in
detail. For this example, weâll keep it simple. Control blocks will simply be
filled with sodium (representing an all-rods-out condition), reflectors will
just be full pins of HT9 steel with coolant around them, and shields will be
unclad B4C in sodium. Normally the pin sizes would be different, but again for
simplicity, weâre just duplicating the pin dimensions.</p>
<p>For brevity, we will simply provide the definitions as described.</p>
<div class="section" id="radial-shields">
<h4><span class="section-number">3.1.1.1. </span>Radial Shields<a class="headerlink" href="#radial-shields" title="Permalink to this headline">Â¶</a></h4>
<p>Here is a very simplified radial shield:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">radial shield</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;block_shield</span>
<span class="w">        </span><span class="nt">control</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Circle</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">B4C</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">597.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">597.0</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">            </span><span class="nt">od</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6962</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">271</span>
<span class="w">        </span><span class="nt">duct</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hexagon</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HT9</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14.922</span>
<span class="w">            </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15.710</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">        </span><span class="nt">intercoolant</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hexagon</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sodium</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">447.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">447.0</span>
<span class="w">            </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">duct.op</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">            </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16.142</span>
<span class="w">        </span><span class="nt">coolant</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DerivedShape</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sodium</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
</pre></div>
</div>
</div>
<div class="section" id="reflectors">
<h4><span class="section-number">3.1.1.2. </span>Reflectors<a class="headerlink" href="#reflectors" title="Permalink to this headline">Â¶</a></h4>
<p>Here is a reflector block definition. We can use this for radial reflectors and
axial reflectors. We include wire wrap so the axial reflector will work with
our basic thermal hydraulic solver:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">reflector</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;block_reflector</span>
<span class="w">        </span><span class="nt">reflector</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Circle</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HT9</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">            </span><span class="nt">od</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6962</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">271</span>
<span class="w">        </span><span class="nt">wire</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Helix</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HT9</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">axialPitch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30.0</span>
<span class="w">            </span><span class="nt">helixDiameter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.777</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">            </span><span class="nt">od</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0808</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">271</span>
<span class="w">        </span><span class="nt">duct</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hexagon</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HT9</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14.922</span>
<span class="w">            </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15.710</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">        </span><span class="nt">intercoolant</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hexagon</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sodium</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">447.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">447.0</span>
<span class="w">            </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">duct.op</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">            </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16.142</span>
<span class="w">        </span><span class="nt">coolant</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DerivedShape</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sodium</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
</pre></div>
</div>
</div>
<div class="section" id="control">
<h4><span class="section-number">3.1.1.3. </span>Control<a class="headerlink" href="#control" title="Permalink to this headline">Â¶</a></h4>
<p>Here is a big empty sodium duct (what youâd find below a control absorber bundle):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">control</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;block_control</span>
<span class="w">        </span><span class="nt">duct</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hexagon</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HT9</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14.922</span>
<span class="w">            </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15.710</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">        </span><span class="nt">intercoolant</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hexagon</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sodium</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">447.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">447.0</span>
<span class="w">            </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">duct.op</span>
<span class="w">            </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16.142</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">        </span><span class="nt">coolant</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DerivedShape</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sodium</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
</pre></div>
</div>
</div>
<div class="section" id="plenum">
<h4><span class="section-number">3.1.1.4. </span>Plenum<a class="headerlink" href="#plenum" title="Permalink to this headline">Â¶</a></h4>
<p>We also need to define empty cladding tubes above the fuel for the fission
gasses to accumulate in. This just has a <code class="docutils literal notranslate"><span class="pre">gap</span></code> component made of the <code class="docutils literal notranslate"><span class="pre">Void</span></code>
material, which is just empty space:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">plenum</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;block_plenum</span>
<span class="w">        </span><span class="nt">clad</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Circle</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HT9</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.6962</span>
<span class="w">            </span><span class="nt">od</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">0.808</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">271</span>
<span class="w">        </span><span class="nt">wire</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Helix</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HT9</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">axialPitch</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30.0</span>
<span class="w">            </span><span class="nt">helixDiameter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.88888</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">            </span><span class="nt">od</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0808</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">271</span>
<span class="w">        </span><span class="nt">gap</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Circle</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Void</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">            </span><span class="nt">od</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">clad.id</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">271</span>
<span class="w">        </span><span class="nt">duct</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hexagon</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">HT9</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">25.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">14.922</span>
<span class="w">            </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15.710</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">        </span><span class="nt">intercoolant</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Hexagon</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sodium</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">447.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">447.0</span>
<span class="w">            </span><span class="nt">ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">duct.op</span>
<span class="w">            </span><span class="nt">mult</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0</span>
<span class="w">            </span><span class="nt">op</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">16.142</span>
<span class="w">        </span><span class="nt">coolant</span><span class="p">:</span>
<span class="w">            </span><span class="nt">shape</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DerivedShape</span>
<span class="w">            </span><span class="nt">material</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sodium</span>
<span class="w">            </span><span class="nt">Tinput</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
<span class="w">            </span><span class="nt">Thot</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">450.0</span>
</pre></div>
</div>
<p>That should be enough to define the whole core.</p>
</div>
</div>
<div class="section" id="defining-how-the-blocks-are-arranged-into-assemblies">
<h3><span class="section-number">3.1.2. </span>Defining how the blocks are arranged into assemblies<a class="headerlink" href="#defining-how-the-blocks-are-arranged-into-assemblies" title="Permalink to this headline">Â¶</a></h3>
<p>With block cross-sections defined, we now set their heights and stack them up
into assemblies. While weâre at it, we can conveniently adjust some
frequently-modified material parameters, such as the uranium enrichment.</p>
<div class="section" id="defining-the-fuel-assemblies">
<h4><span class="section-number">3.1.2.1. </span>Defining the fuel assemblies<a class="headerlink" href="#defining-the-fuel-assemblies" title="Permalink to this headline">Â¶</a></h4>
<p>There are three fuel assemblies defined in ANL-AFCI-177, each with different
enrichments. We can specify some assembly data to be shared across all
assemblies and just overlay the differences. We define the <code class="docutils literal notranslate"><span class="pre">assemblies</span></code>
section of the blueprints input file. We get core and plenum height from table
4.4, and split the core into 5 equally-sized sections at 20.32 cm tall each.
This defines the depletion mesh. Each of these 5 blocks will deplete and
accumulate state independently. In the <code class="docutils literal notranslate"><span class="pre">axial</span> <span class="pre">mesh</span> <span class="pre">points</span></code> section, we
specify a roughly even neutronic/transport mesh, with slightly larger neutronic
mesh points in the very tall single-block plenum:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">assemblies</span><span class="p">:</span>
<span class="w">    </span><span class="nt">heights</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;heights</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15.0</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.32</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.32</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.32</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.32</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20.32</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">191.14</span>
<span class="w">    </span><span class="nt">axial mesh points</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;mesh</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
</pre></div>
</div>
<p>Now that the common heights and neutronic mesh are specified, we start applying
them to the various individual assemblies. We start with the inner core and
refer to the heights and mesh with YAML anchors. As described in Section 2.0 of
the reference, an enrichment splitting of 1.0, 1.25, and 1.5 was used for
inner, middle, and outer core in order to help minimize radial power peaking.
The specific enrichments of each zone are shown in Table 4.8. For simplicity,
letâs just use these as uranium enrichments rather than the detailed material
from the paper. Specifying more details is possible via the <strong>custom
isotopics</strong> input fields.:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">inner fuel</span><span class="p">:</span>
<span class="w">        </span><span class="nt">specifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IC</span>
<span class="w">        </span><span class="nt">blocks</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;fuel_blocks</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*block_reflector</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*block_fuel</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*block_fuel</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*block_fuel</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*block_fuel</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*block_fuel</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nv">*block_plenum</span>
<span class="w">        </span><span class="nt">height</span><span class="p">:</span><span class="w"> </span><span class="nv">*heights</span>
<span class="w">        </span><span class="nt">axial mesh points</span><span class="p">:</span><span class="w"> </span><span class="nv">*mesh</span>
<span class="w">        </span><span class="nt">material modifications</span><span class="p">:</span>
<span class="w">            </span><span class="nt">U235_wt_frac</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.127</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.127</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.127</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.127</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.127</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">        </span><span class="nt">xs types</span><span class="p">:</span><span class="w"> </span><span class="nl">&amp;IC_xs</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">A</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The weirdest thing about this input section is the use of YAML
anchors for the blocks. Under the hood, this copies the entire block definition
into each entry of that list. This is a bit strange, and we plan to switch this
to a string-based block name rather than a full YAML anchor in the <code class="docutils literal notranslate"><span class="pre">blocks</span></code>
list.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice the blank strings in the <code class="docutils literal notranslate"><span class="pre">U235_wt_frac</span></code> section? Those are
placeholders indicating that the material in those blocks does not have uranium
in it, and thus adjusting uranium enrichment doesnât make sense. These are the
axial reflectors, plena, grid plates, etc.</p>
</div>
<p>For the middle core, we can use the same stack of blocks (using an anchor), but
we need different enrichments. We can choose whether or not to use the same
<code class="docutils literal notranslate"><span class="pre">xs</span> <span class="pre">types</span></code>. When composition is different, one often uses independent cross
section types so you get cross sections specific to different enrichments. This
is a trade-off, since more cross section types means more lattice physics
calculations, which can require either more time or more processors:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">middle core fuel</span><span class="p">:</span>
<span class="w">        </span><span class="nt">specifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MC</span>
<span class="w">        </span><span class="nt">blocks</span><span class="p">:</span><span class="w"> </span><span class="nv">*fuel_blocks</span>
<span class="w">        </span><span class="nt">height</span><span class="p">:</span><span class="w"> </span><span class="nv">*heights</span>
<span class="w">        </span><span class="nt">axial mesh points</span><span class="p">:</span><span class="w"> </span><span class="nv">*mesh</span>
<span class="w">        </span><span class="nt">material modifications</span><span class="p">:</span>
<span class="w">            </span><span class="nt">U235_wt_frac</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.153</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.153</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.153</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.153</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.153</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">        </span><span class="nt">xs types</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">B</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">B</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">B</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">B</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">B</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">B</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">B</span>
</pre></div>
</div>
<p>Same deal for the outer core.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The columnar form of YAML lists is very convenient when using text editors with column-edit capabilities. It
is highly recommended to make sure you know how to column edit.</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">outer core fuel</span><span class="p">:</span>
<span class="w">        </span><span class="nt">specifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OC</span>
<span class="w">        </span><span class="nt">blocks</span><span class="p">:</span><span class="w"> </span><span class="nv">*fuel_blocks</span>
<span class="w">        </span><span class="nt">height</span><span class="p">:</span><span class="w"> </span><span class="nv">*heights</span>
<span class="w">        </span><span class="nt">axial mesh points</span><span class="p">:</span><span class="w"> </span><span class="nv">*mesh</span>
<span class="w">        </span><span class="nt">material modifications</span><span class="p">:</span>
<span class="w">            </span><span class="nt">U235_wt_frac</span><span class="p">:</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.180</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.180</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.180</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.180</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.180</span>
<span class="w">                </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;&#39;</span>
<span class="w">        </span><span class="nt">xs types</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">C</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">C</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">C</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">C</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">C</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">C</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">C</span>
</pre></div>
</div>
</div>
<div class="section" id="defining-the-non-fuel-assemblies">
<h4><span class="section-number">3.1.2.2. </span>Defining the non-fuel assemblies<a class="headerlink" href="#defining-the-non-fuel-assemblies" title="Permalink to this headline">Â¶</a></h4>
<p>Letâs make some shield, reflector, and control assemblies. Itâs fine for these
to have different numbers of blocks. Some physics kernels (like DIF3D) have
some requirements of axial mesh boundaries at least lining up between
assemblies, but there are some ARMI features that can automatically adjust the
mesh if you have very complicated assemblies:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">radial reflector</span><span class="p">:</span>
<span class="w">        </span><span class="nt">specifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RR</span>
<span class="w">        </span><span class="nt">blocks</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">*block_reflector</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">height</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">307.74</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">axial mesh points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">xs types</span><span class="p">:</span><span class="w">  </span><span class="p p-Indicator">[</span><span class="nv">A</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Here we just re-use the fuel block cross sections. In more precise models, a different approach
may be used.</p>
</div>
<p>Here is the radial shield:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">radial shield</span><span class="p">:</span>
<span class="w">        </span><span class="nt">specifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SH</span>
<span class="w">        </span><span class="nt">blocks</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">*block_shield</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">height</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">307.74</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">axial mesh points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">xs types</span><span class="p">:</span><span class="w">  </span><span class="p p-Indicator">[</span><span class="nv">A</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>Here are the control blocks:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">control</span><span class="p">:</span>
<span class="w">        </span><span class="nt">specifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PC</span>
<span class="w">        </span><span class="nt">blocks</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">*block_control</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">height</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">307.74</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">axial mesh points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">xs types</span><span class="p">:</span><span class="w">  </span><span class="p p-Indicator">[</span><span class="nv">A</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">ultimate shutdown</span><span class="p">:</span>
<span class="w">        </span><span class="nt">specifier</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">US</span>
<span class="w">        </span><span class="nt">blocks</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">*block_control</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">height</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">307.74</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">axial mesh points</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">1</span><span class="p p-Indicator">]</span>
<span class="w">        </span><span class="nt">xs types</span><span class="p">:</span><span class="w">  </span><span class="p p-Indicator">[</span><span class="nv">A</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
<p>And thatâs it! All blueprints are now defined.</p>
</div>
</div>
</div>
<div class="section" id="specifying-the-core-map">
<h2><span class="section-number">3.2. </span>Specifying the core map<a class="headerlink" href="#specifying-the-core-map" title="Permalink to this headline">Â¶</a></h2>
<p>With blueprints defined we can now arrange assemblies into the core. This is with the geometry input file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are GUI tools to help making the core map easy to set up.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>We plan to converge on consistent input between pin maps and core maps for the physics kernels
and analyses that require finer detail of how the pins are arranged within blocks.</p>
</div>
<p>Geometry can be input various ways. The most straightforward is to provide a
simple ASCII-based map of the core.  For this problem, a 1/3 hexagonal model
can be input as follows (see Figure 4.3 in the reference). First, we refer to a
geometry file from the <code class="docutils literal notranslate"><span class="pre">systems</span></code> section of the <code class="docutils literal notranslate"><span class="pre">blueprints</span></code> file:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">systems</span><span class="p">:</span>
<span class="w">    </span><span class="nt">core</span><span class="p">:</span>
<span class="w">      </span><span class="nt">grid name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">core</span>
<span class="w">      </span><span class="nt">origin</span><span class="p">:</span>
<span class="w">          </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">          </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">          </span><span class="nt">z</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="nt">grids</span><span class="p">:</span>
<span class="w">    </span><span class="nt">core</span><span class="p">:</span>
<span class="w">        </span><span class="kt">!include</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">anl-afci-177-coreMap.yaml</span>
</pre></div>
</div>
<p>And then, in the core map file (<code class="docutils literal notranslate"><span class="pre">anl-afci-177-coreMap.yaml</span></code>):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">geom</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hex</span>
<span class="nt">symmetry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">third periodic</span>
<span class="nt">lattice map</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">  </span><span class="no">-     SH   SH   SH</span>
<span class="w">  </span><span class="no">-  SH   SH   SH   SH</span>
<span class="w">   </span><span class="no">SH   RR   RR   RR   SH</span>
<span class="w">     </span><span class="no">RR   RR   RR   RR   SH</span>
<span class="w">   </span><span class="no">RR   RR   RR   RR   RR   SH</span>
<span class="w">     </span><span class="no">RR   OC   OC   RR   RR   SH</span>
<span class="w">       </span><span class="no">OC   OC   OC   RR   RR   SH</span>
<span class="w">     </span><span class="no">OC   OC   OC   OC   RR   RR</span>
<span class="w">       </span><span class="no">OC   MC   OC   OC   RR   SH</span>
<span class="w">         </span><span class="no">MC   MC   PC   OC   RR   SH</span>
<span class="w">       </span><span class="no">MC   MC   MC   OC   OC   RR</span>
<span class="w">         </span><span class="no">MC   MC   MC   OC   RR   SH</span>
<span class="w">           </span><span class="no">PC   MC   MC   OC   RR   SH</span>
<span class="w">         </span><span class="no">MC   MC   MC   MC   OC   RR</span>
<span class="w">           </span><span class="no">IC   MC   MC   OC   RR   SH</span>
<span class="w">             </span><span class="no">IC   US   MC   OC   RR</span>
<span class="w">           </span><span class="no">IC   IC   MC   OC   RR   SH</span>
<span class="w">             </span><span class="no">IC   MC   MC   OC   RR</span>
<span class="w">           </span><span class="no">IC   IC   MC   PC   RR   SH</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The two-letter values here can be any contiguous strings, and
correspond with the <code class="docutils literal notranslate"><span class="pre">specifier</span></code> field in the blueprints input.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>GUI utilities are also useful for building core maps like this.</p>
</div>
</div>
<div class="section" id="specifying-settings">
<h2><span class="section-number">3.3. </span>Specifying settings<a class="headerlink" href="#specifying-settings" title="Permalink to this headline">Â¶</a></h2>
<p>Now we need to specify some <strong>settings</strong> that define fundamental reactor
parameters, as well as modeling approximation options. For this, we make a
<strong>settings file</strong>, called <code class="docutils literal notranslate"><span class="pre">anl-afci-177.yaml</span></code>.</p>
<p>First we need to supply some metadata.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uncontrolled</span>
</pre></div>
</div>
<p>The thermal power in this reference is 1000 MWt. The thermal efficiency isnât
specified, so letâs assume 0.38. From Table 4.8, the cycle length is 370 EFPD.
Letâs also assume a 0.90 capacity factor which will gives full cycles of 411.1
days.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">settings</span><span class="p">:</span>
<span class="w">  </span><span class="nt">availabilityFactor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.9</span>
<span class="w">  </span><span class="nt">power</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1000000000.0</span>
<span class="w">  </span><span class="nt">cycleLength</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">411.11</span>
</pre></div>
</div>
<p>We need to tell the system which other input files to load by bringing in the
blueprints and geometry (the shuffling and fuel handler info will be described
momentarily):</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">loadingFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">anl-afci-177-blueprints.yaml</span>
<span class="w">  </span><span class="nt">shuffleLogic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">anl-afci-177-fuelManagement.py</span>
<span class="w">  </span><span class="nt">fuelHandlerName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SampleShuffler</span>
</pre></div>
</div>
<p>In terms of our simulation parameters, letâs run it for 10 cycles, with 2 depletion time steps per cycle:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">nCycles</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<span class="w">  </span><span class="nt">burnSteps</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</pre></div>
</div>
<p>Set some physics kernel and environment options:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="nt">buGroups</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">  </span><span class="nt">comment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ANL-AFCI-177 CR 1.0 metal core but with HALEU instead of TRU</span>
<span class="w">  </span><span class="nt">genXS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Neutron</span>
<span class="w">  </span><span class="nt">numProcessors</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="../user/inputs/settings.html#armi-gui"><span class="std std-ref">ARMI GUI</span></a> is simply an optional frontend to this settings file. Behind the scenes it just reads and writes
this. It is quite convenient for discovering important settings and describing what they do, however.</p>
</div>
</div>
<div class="section" id="defining-fuel-management">
<h2><span class="section-number">3.4. </span>Defining fuel management<a class="headerlink" href="#defining-fuel-management" title="Permalink to this headline">Â¶</a></h2>
<p>Finally, letâs specify the fuel management file that we referred to above by
creating the file <code class="docutils literal notranslate"><span class="pre">anl-afci-177-fuelManagement.py</span></code>. Fuel management is very
wide-open, so we use Python scripts to drive it. Itâs generally overly
constraining to require any higher-level input for such a general problem.</p>
<p>In ANL-AFCI-177, section 2 says no shuffling was modeled, and that the core is
in a batch shuffling mode, limited by a cladding fast fluence of 4.0e23 n/cm<sup>2</sup>. Often, SFR studies use the REBUS codeâs implicit equilibrium fuel
cycle mode. There is an ARMI equilibrium module at TerraPower that performs
this useful calculation (with different inputs), but for this sample problem,
we will simply model 10 cycles with explicit fuel management.</p>
<p>The shuffling algorithm weâll write will simply predict whether or not the
stated fluence limit will be violated in the next cycle. If it will be, the
fuel assembly will be replaced with a fresh one of the same kind.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Copyright 2019 TerraPower, LLC</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>

<span class="kn">from</span> <span class="nn">armi.utils</span> <span class="kn">import</span> <span class="n">units</span>

<span class="kn">from</span> <span class="nn">armi.physics.fuelCycle.fuelHandlers</span> <span class="kn">import</span> <span class="n">FuelHandler</span>


<span class="k">class</span> <span class="nc">SampleShuffler</span><span class="p">(</span><span class="n">FuelHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">chooseSwaps</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shuffleParameters</span><span class="p">):</span>
        <span class="n">cycleSeconds</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">cycleLength</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">availabilityFactor</span> <span class="o">*</span> <span class="n">units</span><span class="o">.</span><span class="n">SECONDS_PER_DAY</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">core</span><span class="p">:</span>
            <span class="n">peakFluence</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">getMaxParam</span><span class="p">(</span><span class="s2">&quot;fastFluence&quot;</span><span class="p">)</span>
            <span class="n">peakFlux</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">getMaxParam</span><span class="p">(</span><span class="s2">&quot;fastFlux&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">peakFluence</span> <span class="o">+</span> <span class="n">peakFlux</span> <span class="o">*</span> <span class="n">cycleSeconds</span> <span class="o">&gt;</span> <span class="mf">4.0e23</span><span class="p">:</span>
                <span class="n">newAssem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">createAssemblyOfType</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">getType</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dischargeSwap</span><span class="p">(</span><span class="n">newAssem</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getFactorList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cycle</span><span class="p">,</span> <span class="n">cs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Parameters here can be used to adjust shuffling philosophy vs. cycle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{},</span> <span class="p">[]</span>
</pre></div>
</div>
<p>There! You have now created all the ARMI inputs, from scratch, needed to
perform a simplified reactor analysis of one of the SFRs in the ANL-AFCI-177
document. The possibilities from here are only limited by your creativity, (and
a few code limitations ;).</p>
<p>As you load the inputs in ARMI it will provide some consistency checks and
errors to help identify common mistakes.</p>
<p>Here are the full files used in this example:</p>
<ul class="simple">
<li><p><a class="reference download internal" download="" href="../_downloads/f756dac506a8ab4be46ecb24317aedcc/anl-afci-177-blueprints.yaml"><code class="xref download docutils literal notranslate"><span class="pre">Blueprints</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/a04701189b51c2f8e63a923776d71186/anl-afci-177.yaml"><code class="xref download docutils literal notranslate"><span class="pre">Settings</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/53e49270a5c076f0232252c3ead56fca/anl-afci-177-coreMap.yaml"><code class="xref download docutils literal notranslate"><span class="pre">Core</span> <span class="pre">map</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/c0b84cbbd209bc8b567727545c0cd3af/anl-afci-177-fuelManagement.py"><code class="xref download docutils literal notranslate"><span class="pre">Fuel</span> <span class="pre">management</span></code></a></p></li>
</ul>
<p>The next tutorial will guide you through inputs for a classic LWR benchmark problem (C5G7).</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="walkthrough_lwr_inputs.html" class="btn btn-neutral float-right" title="4. Building input files for a thermal reactor" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="materials_demo.html" class="btn btn-neutral float-left" title="2. The ARMI Material Library" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2023, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2023-01-04.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>