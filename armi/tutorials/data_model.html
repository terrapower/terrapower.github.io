

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="3. Hands-on at the ARMI Terminal" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://terrapower.github.io/armi/tutorials/data_model.html" />
<meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
<meta property="og:description" content="This tutorial will walk you through some exploration with ARMI on the command line with the goal of exposing you to some of the capabilities and organization of information in the ARMI system. Init..." />
<meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
<meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
<meta name="description" content="This tutorial will walk you through some exploration with ARMI on the command line with the goal of exposing you to some of the capabilities and organization of information in the ARMI system. Init..." />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3. Hands-on at the ARMI Terminal &mdash; ARMI 0.6.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme_fixes.css?v=2b77b304" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=e5fbc548" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/need_style.css?v=678fb11e" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-needs/modern.css?v=803738c0" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-test-results/common.css?v=9ec2c1d5" />
      <link rel="stylesheet" type="text/css" href="../_static/nbsphinx-code-cells.css?v=2aa19091" />

  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=1c28bd9a"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
      <script src="../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
      <script src="../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
      <script src="../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
      <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Making your first ARMI-based App" href="making_your_first_app.html" />
    <link rel="prev" title="2. Building input files for a thermal reactor" href="walkthrough_lwr_inputs.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >

          
          
          <a href="../index.html" class="icon icon-home">
            ARMI
              <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="walkthrough_inputs.html">1. Building input files for a fast reactor</a></li>
<li class="toctree-l2"><a class="reference internal" href="walkthrough_lwr_inputs.html">2. Building input files for a thermal reactor</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. Hands-on at the ARMI Terminal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Initializing-and-Exploring-the-ARMI-Model">3.1. Initializing and Exploring the ARMI Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Exploring-the-state-of-the-reactor">3.2. Exploring the <em>state</em> of the reactor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Modifying-the-state-of-the-reactor">3.3. Modifying the state of the reactor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Modifying-number-densities">3.4. Modifying number densities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Saving-state-to-disk">3.5. Saving state to disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Fuel-management">3.6. Fuel management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Loading-from-the-database">3.7. Loading from the database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="making_your_first_app.html">4. Making your first ARMI-based App</a></li>
<li class="toctree-l2"><a class="reference internal" href="param_sweep.html">5. Parameter sweeps</a></li>
<li class="toctree-l2"><a class="reference internal" href="pin-rotations.html">6. Pin data, selection, and rotation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../qa_docs/index.html">QA Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../.apidocs/modules.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #233C5B" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Tutorials</a></li>
      <li class="breadcrumb-item active"><span class="section-number">3. </span>Hands-on at the ARMI Terminal</li>
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Hands-on-at-the-ARMI-Terminal">
<h1><span class="section-number">3. </span>Hands-on at the ARMI Terminal<a class="headerlink" href="#Hands-on-at-the-ARMI-Terminal" title="Link to this heading"></a></h1>
<p>This tutorial will walk you through some exploration with ARMI on the command line with the goal of exposing you to some of the capabilities and organization of information in the ARMI system.</p>
<section id="Initializing-and-Exploring-the-ARMI-Model">
<h2><span class="section-number">3.1. </span>Initializing and Exploring the ARMI Model<a class="headerlink" href="#Initializing-and-Exploring-the-ARMI-Model" title="Link to this heading"></a></h2>
<p>First we need to get some inputs. We built some from scratch in <a class="reference external" href="walkthrough_inputs.html">Building input files for a fast reactor</a> and we pick those up and use them <code class="docutils literal notranslate"><span class="pre">here</span> <span class="pre">&lt;https://github.com/terrapower/armi/tree/main/armi/tests/anl-afci-177&gt;</span></code>_ as well:</p>
<p>You can load these inputs using armi’s <code class="docutils literal notranslate"><span class="pre">init</span></code> function. This will build an <strong>Operator</strong>, a <strong>Reactor</strong>, and an <strong>Interface Stack</strong> full of various interfaces.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># you can only configure an app once</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">armi</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">armi</span><span class="o">.</span><span class="n">isConfigured</span><span class="p">():</span>
    <span class="n">armi</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">armi</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">App</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

       +===================================================+
       |            _      ____     __  __    ___          |
       |           / \    |  _ \   |  \/  |  |_ _|         |
       |          / _ \   | |_) |  | |\/| |   | |          |
       |         / ___ \  |  _ &lt;   | |  | |   | |          |
       |        /_/   \_\ |_| \_\  |_|  |_|  |___|         |
       |        Advanced  Reactor  Modeling Interface      |
       |                                                   |
       |                    version 0.6.2                  |
       |                                                   |
       +===================================================+
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="n">armi</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">fName</span><span class="o">=</span><span class="s2">&quot;../anl-afci-177/anl-afci-177.yaml&quot;</span><span class="p">)</span>
<span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">sortAssemsByRing</span><span class="p">()</span>  <span class="c1"># makes innermost assemblies appear first</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Settings Validation Checks ===========
=========== Case Information ===========
[info] ---------------------  ------------------------------------------------------------
       Case Title:            anl-afci-177
       Case Description:      ANL-AFCI-177 CR 1.0 metal core but with HALEU instead of TRU
       Run Type:              Standard - Operator
       Current User:          runner
       ARMI Location:         /home/runner/work/armi/armi/armi
       Working Directory:     /home/runner/work/armi/armi/doc/anl-afci-177
       Python Interpreter:    3.13.11 (main, Dec  8 2025, 02:53:33) [GCC 11.4.0]
       Python Executable:     /opt/hostedtoolcache/Python/3.13.11/x64/bin/python
       Master Machine:        runnervm68cqq
       Number of Processors:  1
       Date and Time:         Tue Dec 16 18:13:53 2025
       ---------------------  ------------------------------------------------------------
=========== Input File Information ===========
[info] --------------------------------------------------------------------  ------------------------------  ------------
       Input Type                                                            Path                            SHA-1 Hash
       --------------------------------------------------------------------  ------------------------------  ------------
       Case Settings                                                         anl-afci-177.yaml               d0a0f84ddd
       Blueprints                                                            anl-afci-177-blueprints.yaml    29f959e5a4
       Included blueprints                                                   anl-afci-177-coreMap.yaml       5904530cb2
       zonesFile                                                                                             MISSING
       &lt;Setting shuffleLogic value:anl-afci-177-fuelManagement.py default:&gt;  anl-afci-177-fuelManagement.py  336bb3d8ff
       --------------------------------------------------------------------  ------------------------------  ------------
=========== Machine Information ===========
[info] -------------  ----------------------  -------
       Machine          Number of Processors    Ranks
       -------------  ----------------------  -------
       runnervm68cqq                       1        0
       -------------  ----------------------  -------
=========== System Information ===========
[info] OS Info:  &#34;Ubuntu 22.04.5 LTS&#34;
       Processor(s):
           Architecture:                         x86_64
           CPU op-mode(s):                       32-bit, 64-bit
           Address sizes:                        48 bits physical, 48 bits virtual
           Byte Order:                           Little Endian
           CPU(s):                               4
           On-line CPU(s) list:                  0-3
           Vendor ID:                            AuthenticAMD
           Model name:                           AMD EPYC 7763 64-Core Processor
           CPU family:                           25
           Model:                                1
           Thread(s) per core:                   2
           Core(s) per socket:                   2
           Socket(s):                            1
           Stepping:                             1
           BogoMIPS:                             4890.85
           Flags:                                fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht syscall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good nopl tsc_reliable nonstop_tsc cpuid extd_apicid aperfmperf tsc_known_freq pni pclmulqdq ssse3 fma cx16 pcid sse4_1 sse4_2 movbe popcnt aes xsave avx f16c rdrand hypervisor lahf_lm cmp_legacy svm cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw topoext vmmcall fsgsbase bmi1 avx2 smep bmi2 erms invpcid rdseed adx smap clflushopt clwb sha_ni xsaveopt xsavec xgetbv1 xsaves user_shstk clzero xsaveerptr rdpru arat npt nrip_save tsc_scale vmcb_clean flushbyasid decodeassists pausefilter pfthreshold v_vmsave_vmload umip vaes vpclmulqdq rdpid fsrm
           Virtualization:                       AMD-V
           Hypervisor vendor:                    Microsoft
           Virtualization type:                  full
           L1d cache:                            64 KiB (2 instances)
           L1i cache:                            64 KiB (2 instances)
           L2 cache:                             1 MiB (2 instances)
           L3 cache:                             32 MiB (1 instance)
           NUMA node(s):                         1
           NUMA node0 CPU(s):                    0-3
           Vulnerability Gather data sampling:   Not affected
           Vulnerability Itlb multihit:          Not affected
           Vulnerability L1tf:                   Not affected
           Vulnerability Mds:                    Not affected
           Vulnerability Meltdown:               Not affected
           Vulnerability Mmio stale data:        Not affected
           Vulnerability Reg file data sampling: Not affected
           Vulnerability Retbleed:               Not affected
           Vulnerability Spec rstack overflow:   Vulnerable: Safe RET, no microcode
           Vulnerability Spec store bypass:      Vulnerable
           Vulnerability Spectre v1:             Mitigation; usercopy/swapgs barriers and __user pointer sanitization
           Vulnerability Spectre v2:             Mitigation; Retpolines; STIBP disabled; RSB filling; PBRSB-eIBRS Not affected; BHI Not affected
           Vulnerability Srbds:                  Not affected
           Vulnerability Tsx async abort:        Not affected
=========== Reactor Cycle Information ===========
[info] ---------------------------  -----------------------------------------------------------------
       Reactor Thermal Power (MW):  1000.0
       Number of Cycles:            10
       Cycle Lengths:               411.11, 411.11, 411.11, 411.11, 411.11, 411.11, 411.11, 411.11,
                                    411.11, 411.11
       Availability Factors:        0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9
       Power Fractions:             [1.0, 1.0], [1.0, 1.0], [1.0, 1.0], [1.0, 1.0], [1.0, 1.0], [1.0,
                                    1.0], [1.0, 1.0], [1.0, 1.0], [1.0, 1.0], [1.0, 1.0]
       Step Lengths (days):         [184.9995, 184.9995], [184.9995, 184.9995], [184.9995, 184.9995],
                                    [184.9995, 184.9995], [184.9995, 184.9995], [184.9995, 184.9995],
                                    [184.9995, 184.9995], [184.9995, 184.9995], [184.9995, 184.9995],
                                    [184.9995, 184.9995]
       ---------------------------  -----------------------------------------------------------------
=========== Constructing Reactor and Verifying Inputs ===========
[info] Constructing the `core`
=========== Adding Composites to &lt;Core: core id:140173465818448&gt; ===========
[info] Will expand HE, NA, AL, SI, V, CR, MN, FE, CO, NI, ZR, NB, MO, W elementals to have natural isotopics
[info] Constructing assembly `inner fuel`
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: A ENV GP: A&gt; so pin-to-duct gap not calculated
[warn] The gap between wire wrap and clad in block &lt;plenum block-bol-006 at ExCore XS: A ENV GP: A&gt; was 3.999999999998449e-05 cm. Expected 0.0.
[info] Constructing assembly `middle core fuel`
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: B ENV GP: A&gt; so pin-to-duct gap not calculated
[warn] The gap between wire wrap and clad in block &lt;plenum block-bol-006 at ExCore XS: B ENV GP: A&gt; was 3.999999999998449e-05 cm. Expected 0.0.
[info] Constructing assembly `outer core fuel`
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: C ENV GP: A&gt; so pin-to-duct gap not calculated
[warn] The gap between wire wrap and clad in block &lt;plenum block-bol-006 at ExCore XS: C ENV GP: A&gt; was 3.999999999998449e-05 cm. Expected 0.0.
[info] Constructing assembly `radial reflector`
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: A ENV GP: A&gt; so pin-to-duct gap not calculated
[info] Constructing assembly `radial shield`
[warn] Temperature 597.0 out of range (25 to 500) for B4C linear expansion percent
[info] Constructing assembly `control`
[info] Constructing assembly `ultimate shutdown`
=========== Verifying Assembly Configurations ===========
=========== Applying Geometry Modifications ===========
[info] Resetting the state of the converted reactor core model in &lt;EdgeAssemblyChanger&gt;
[info] Updating spatial grid pitch data for hex geometry
=========== Summarizing Source of Material Data for &lt;Core: core id:140173465818448&gt; ===========
[info] ---------------  -----------------
       Material Name    Source Location
       ---------------  -----------------
       B4C              ARMI
       HT9              ARMI
       Sodium           ARMI
       UZr              ARMI
       Void             ARMI
       ---------------  -----------------
=========== Initializing Mesh, Assembly Zones, and Nuclide Categories ===========
[info] Nuclide categorization for cross section temperature assignments:
       ------------------  ------------------------------------------------------
       Nuclide Category    Nuclides
       ------------------  ------------------------------------------------------
       Fuel                CM242, LFP39, ZR96, CM243, DUMP1, PU242, NP238, AM243,
                           ZR91, ZR94, PU241, CM247, LFP35, PU239, HE4, U238,
                           PU240, LFP40, AM242M, CO59, U236, NP237, AM241,
                           U235, PU236, CM246, LFP38, ZR92, DUMP2, AL27,
                           CM245, NB93, CM244, LFP41, ZR90, PU238, U234
       Coolant             NA23
       Structure           FE58, NI60, SI28, B11, MO98, NI64, MO100, CR53, MO94,
                           CR52, NI62, C, SI29, FE57, MO92, W182, W186,
                           MO96, FE54, MO95, CR50, MN55, CR54, W183, NI58,
                           B10, MO97, FE56, W184, SI30, V50, V51, NI61
       ------------------  ------------------------------------------------------
[info] Constructing the `Spent Fuel Pool`
[warn] Changing the name of the Spent Fuel Pool to &#39;sfp&#39;.
=========== Creating Interfaces ===========
=========== Interface Stack Summary  ===========
[info] -------  ------------------------  ---------------  ---------  ---------  -----------  ------------
         Index  Type                      Name             Purpose    Enabled    EOL order    BOL forced
       -------  ------------------------  ---------------  ---------  ---------  -----------  ------------
            01  Main                      main                        Yes        Reversed     No
            02  FissionProductModel       fissionProducts             Yes        Normal       No
            03  FuelHandler               fuelHandler                 Yes        Normal       No
            04  CrossSectionGroupManager  xsGroups                    Yes        Normal       No
            05  HistoryTracker            history                     Yes        Normal       No
            06  Report                    report                      Yes        Normal       No
            07  Database                  database                    Yes        Normal       No
            08  MemoryProfiler            memoryProfiler              Yes        Normal       No
            09  Snapshot                  snapshot                    Yes        Normal       No
       -------  ------------------------  ---------------  ---------  ---------  -----------  ------------
===========  Triggering Init Event ===========
=========== 01 - main                           Init            ===========
=========== 02 - fissionProducts                Init            ===========
=========== 03 - fuelHandler                    Init            ===========
=========== 04 - xsGroups                       Init            ===========
=========== 05 - history                        Init            ===========
=========== 06 - report                         Init            ===========
=========== 07 - database                       Init            ===========
=========== 08 - memoryProfiler                 Init            ===========
=========== 09 - snapshot                       Init            ===========
===========  Completed Init Event ===========
</pre></div></div>
</div>
<p>You have now created an <code class="docutils literal notranslate"><span class="pre">operator</span></code> object, which contains a <code class="docutils literal notranslate"><span class="pre">Reactor</span></code> object (called <code class="docutils literal notranslate"><span class="pre">o.r</span></code>) that
represents the beginning-of-life (BOL) state of the nuclear reactor defined in the inputs. The reactor looks
like this:</p>
<figure class="align-center" id="id1">
<img alt="../_images/armi_reactor_objects.png" src="../_images/armi_reactor_objects.png" />
<figcaption>
<p><span class="caption-text"><strong>Figure 1.</strong> The primary data containers in ARMI</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>The data hierarchy in an ARMI model often is made up of:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../.apidocs/armi.reactor.reactors.html#module-armi.reactor.reactors" title="armi.reactor.reactors"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Reactors</span></code></a>, often named <code class="docutils literal notranslate"><span class="pre">reactor</span></code> or <code class="docutils literal notranslate"><span class="pre">r</span></code> contain a Core and possibly other equipment. They represent collections of assemblies.</p></li>
<li><p><a class="reference internal" href="../.apidocs/armi.reactor.assemblies.html#module-armi.reactor.assemblies" title="armi.reactor.assemblies"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Assemblies</span></code></a>, often named <code class="docutils literal notranslate"><span class="pre">assembly</span></code> or <code class="docutils literal notranslate"><span class="pre">a</span></code>, are individual pieces that collect into a System.</p></li>
<li><p><a class="reference internal" href="../.apidocs/armi.reactor.blocks.html#module-armi.reactor.blocks" title="armi.reactor.blocks"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Blocks</span></code></a>, often called <code class="docutils literal notranslate"><span class="pre">block</span></code> or <code class="docutils literal notranslate"><span class="pre">b</span></code> are divisions of the assemblies into sections one on top of the other.</p></li>
<li><p><a class="reference internal" href="../.apidocs/armi.reactor.components.html#module-armi.reactor.components" title="armi.reactor.components"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Components</span></code></a> The geometrically defined objects (Circles, Hexagons, Helices, Dodecagons) and their dimensions.</p></li>
<li><p><a class="reference internal" href="../.apidocs/armi.materials.html#module-armi.materials" title="armi.materials"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Materials</span></code></a> are objects which have material properties like linear expansion coefficients, thermal conductivities, isotopic mass fractions, and densities.</p></li>
</ul>
<p>Each of these objects house more than the listed objects, they also are responsible for a variety of state information
like the reactor’s overall keff, flux, height, temperature, etc. In this section, we will explore these objects,
see how to access them, and how to view their contained information.</p>
<p>Exploring it a little, we can list all the assemblies in the reactor with:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">core</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">core</span>
<span class="n">core</span><span class="o">.</span><span class="n">getAssemblies</span><span class="p">()[:</span><span class="mi">25</span><span class="p">]</span>  <span class="c1"># only print the first 25</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&lt;radial shield Assembly A0005 at 011-056&gt;,
 &lt;radial reflector Assembly A0004 at 009-045&gt;,
 &lt;radial reflector Assembly A0010 at 010-051&gt;,
 &lt;radial shield Assembly A0016 at 011-057&gt;,
 &lt;control Assembly A0003 at 007-034&gt;,
 &lt;outer core fuel Assembly A0009 at 008-040&gt;,
 &lt;radial reflector Assembly A0015 at 009-046&gt;,
 &lt;radial reflector Assembly A0021 at 010-052&gt;,
 &lt;radial shield Assembly A0027 at 011-058&gt;,
 &lt;middle core fuel Assembly A0002 at 005-023&gt;,
 &lt;middle core fuel Assembly A0008 at 006-029&gt;,
 &lt;outer core fuel Assembly A0014 at 007-035&gt;,
 &lt;outer core fuel Assembly A0020 at 008-041&gt;,
 &lt;radial reflector Assembly A0026 at 009-047&gt;,
 &lt;radial reflector Assembly A0033 at 010-053&gt;,
 &lt;radial shield Assembly A0039 at 011-059&gt;,
 &lt;inner fuel Assembly A0001 at 003-012&gt;,
 &lt;middle core fuel Assembly A0007 at 004-018&gt;,
 &lt;middle core fuel Assembly A0013 at 005-024&gt;,
 &lt;middle core fuel Assembly A0019 at 006-030&gt;,
 &lt;outer core fuel Assembly A0025 at 007-036&gt;,
 &lt;outer core fuel Assembly A0032 at 008-042&gt;,
 &lt;radial reflector Assembly A0038 at 009-048&gt;,
 &lt;radial shield Assembly A0045 at 010-054&gt;,
 &lt;inner fuel Assembly A0000 at 001-001&gt;]
</pre></div></div>
</div>
<div class="admonition-quiz-question-1 admonition">
<p class="admonition-title">Quiz Question 1</p>
<p>How many assemblies does the model have? (see answers at bottom)</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A reactor is made up of assemblies, which are made up of blocks, and so on. Each composite ARMI
object has a <code class="docutils literal notranslate"><span class="pre">getChildren</span></code> method that will retrieve a list of its contents. For clarity,
reactors have a <code class="docutils literal notranslate"><span class="pre">getAssemblies()</span></code> method and assemblies have a <code class="docutils literal notranslate"><span class="pre">getBlocks()</span></code> method,
but these do exactly the same thing as <code class="docutils literal notranslate"><span class="pre">getChildren()</span></code> in both cases.</p>
<p>Reactor, assembly, blocks, etc. objects act like lists as well, so you can get the fifth
assembly out of a reactor just like you’d get the fifth item out of any other list
(don’t forget that Python uses <a class="reference external" href="http://en.wikipedia.org/wiki/Zero-based_numbering">zero-based numbering</a>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; fifthAssem = core[4]
</pre></div>
</div>
</div>
<p>You can drill down the hierarchy for a particular assembly:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">core</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">core</span><span class="p">)</span>
<span class="n">assem</span> <span class="o">=</span> <span class="n">core</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">assem</span><span class="p">)</span>
<span class="n">block</span> <span class="o">=</span> <span class="n">assem</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Block&#39;s parent is: </span><span class="si">{</span><span class="n">block</span><span class="o">.</span><span class="n">parent</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">components</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">getChildren</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">components</span><span class="p">)</span>
<span class="n">material</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">material</span>
<span class="nb">print</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;Core: core id:140173465818448&gt;
&lt;inner fuel Assembly A0006 at 002-001&gt;
&lt;fuel B0006-005 at 002-001-005 XS: A ENV GP: A&gt;
Block&#39;s parent is: &lt;inner fuel Assembly A0006 at 002-001&gt;
[&lt;Circle: fuel&gt;, &lt;Circle: bond&gt;, &lt;Circle: clad&gt;, &lt;Helix: wire&gt;, &lt;DerivedShape: coolant&gt;, &lt;Hexagon: duct&gt;, &lt;Hexagon: intercoolant&gt;]
&lt;Material: UZr&gt;
</pre></div></div>
</div>
</section>
<section id="Exploring-the-state-of-the-reactor">
<h2><span class="section-number">3.2. </span>Exploring the <em>state</em> of the reactor<a class="headerlink" href="#Exploring-the-state-of-the-reactor" title="Link to this heading"></a></h2>
<p>State can be explored using a variety of framework methods, as well as looking at state <em>parameters</em>. Let’s first try out some methods to find out how much U-235 is in the model and what the average uranium enrichment is:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u235</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">getMass</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">)</span>
<span class="n">u238</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">getMass</span><span class="p">(</span><span class="s2">&quot;U238&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The core contains </span><span class="si">{</span><span class="n">u235</span><span class="si">}</span><span class="s2"> grams of U-235&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The average fissile enrichment is </span><span class="si">{</span><span class="n">u235</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="p">(</span><span class="n">u235</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">u238</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
The core contains 913110.7780886302 grams of U-235
The average fissile enrichment is 0.1615298013245032
</pre></div></div>
</div>
<p>That’s how much U-235 is in the 1/3 core. If we want the total mass (including all nuclides), we can just leave the argument out:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">core</span><span class="o">.</span><span class="n">getMass</span><span class="p">()</span> <span class="o">/</span> <span class="mf">1.0e6</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
np.float64(27.630279585150355)
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>core.getMass<span class="o">?</span>
</pre></div>
</div>
</div>
<p>Furthermore, you can get a list of available methods by pressing the tab key. Try <code class="docutils literal notranslate"><span class="pre">core.</span></code> followed by <code class="docutils literal notranslate"><span class="pre">[Tab]</span></code>. Try out some options!</p>
<p>Use tab completion to explore other methods of ARMI reactors assemblies and blocks. You can
view a summary of the methods of any object in the <a class="reference internal" href="../py-modindex.html"><span class="std std-ref">API documentation</span></a>.
For a good example, see <a class="reference internal" href="../.apidocs/armi.reactor.blocks.html#armi.reactor.blocks.Block" title="armi.reactor.blocks.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">the</span> <span class="pre">API</span> <span class="pre">docs</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">block</span></code></a>.</p>
<p>Next, lets find out what the number density of U235 is in a particular fuel block. We’ll use the <em>FLAGS</em> system to select a particular type of block (in this case, a fuel block):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">armi.reactor.flags</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flags</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">getFirstBlock</span><span class="p">(</span><span class="n">Flags</span><span class="o">.</span><span class="n">FUEL</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;U-235 ndens: </span><span class="si">{</span><span class="n">b</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s1">&#39;U235&#39;</span><span class="p">)</span><span class="si">:</span><span class="s2">.4e</span><span class="si">}</span><span class="s2"> (atoms/bn-cm)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Block name: </span><span class="si">{</span><span class="n">b</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Block type: </span><span class="si">{</span><span class="n">b</span><span class="o">.</span><span class="n">getType</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
U-235 ndens: 1.5940e-03 (atoms/bn-cm)
Block name: B0000-001
Block type: fuel
</pre></div></div>
</div>
<p>You can find lots of other details about this block with:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span><span class="o">.</span><span class="n">printContents</span><span class="p">(</span><span class="n">includeNuclides</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] &lt;fuel B0000-001 at 001-001-001 XS: A ENV GP: A&gt;
[impt] &lt;Circle: fuel&gt;
[impt] ---------------------------------------------------------------------------------------------
       Fuel Dimensions -  Of First Fuel Block
                                      Tcold (25.0)                   Thot (500.0)
       ---------------------------------------------------------------------------------------------
       Inner Diameter (cm)            0.0                            0.0
       Material                       UZr
       Multiplicity                   271                            271
       Name                           fuel
       Outer Diameter (cm)            0.6029                         0.6086118601525807
[impt] &lt;Circle: bond&gt;
[impt] ---------------------------------------------------------------------------------------------
       Bond Dimensions -  Of First Fuel Block
                                      Tcold (447.0)                  Thot (447.0)
       ---------------------------------------------------------------------------------------------
       Inner Diameter (cm)            0.6029                         0.6086118601525807
       Material                       Sodium
       Multiplicity                   271                            271
       Name                           bond
       Outer Diameter (cm)            0.6962                         0.6996347645979837
       Thickness (cm)                 0.0466500                      0.0455115
[impt] &lt;Circle: clad&gt;
[impt] ---------------------------------------------------------------------------------------------
       Cladding Dimensions -  Of First Fuel Block
                                      Tcold (25.0)                   Thot (450.0)
       ---------------------------------------------------------------------------------------------
       Inner Diameter (cm)            0.6962                         0.6996347645979837
       Material                       HT9
       Multiplicity                   271                            271
       Name                           clad
       Outer Diameter (cm)            0.808                          0.8119863398379357
       Thickness (cm)                 0.0559000                      0.0561758
[impt] &lt;Helix: wire&gt;
[impt] ---------------------------------------------------------------------------------------------
       Wire Dimensions -  Of First Fuel Block
                                      Tcold (25.0)                   Thot (450.0)
       ---------------------------------------------------------------------------------------------
       Axial Pitch (cm)               30.0                           30.148007667250084
       Helix Diameter (cm)            0.8888                         0.8931849738217292
       Inner Diameter (cm)            0.0                            0.0
       Material                       HT9
       Multiplicity                   271                            271
       Name                           wire
       Outer Diameter (cm)            0.0808                         0.08119863398379355
[impt] &lt;DerivedShape: coolant&gt;
[impt] ---------------------------------------------------------------------------------------------
       Coolant Dimensions -  Of First Fuel Block
                                      Tcold (450.0)                  Thot (450.0)
       ---------------------------------------------------------------------------------------------
       Material                       Sodium
       Name                           coolant
[impt] &lt;Hexagon: duct&gt;
[impt] ---------------------------------------------------------------------------------------------
       Duct Dimensions -  Of First Fuel Block
                                      Tcold (25.0)                   Thot (450.0)
       ---------------------------------------------------------------------------------------------
       Inner Pitch (cm)               14.922                         14.995619013690193
       Material                       HT9
       Multiplicity                   1.0                            1.0
       Name                           duct
       Outer Pitch (cm)               15.71                          15.787506681749962
       Thickness (cm)                 0.3940000                      0.3959438
[impt] &lt;Hexagon: intercoolant&gt;
[impt] ---------------------------------------------------------------------------------------------
       Intercoolant Dimensions -  Of First Fuel Block
                                      Tcold (450.0)                  Thot (450.0)
       ---------------------------------------------------------------------------------------------
       Inner Pitch (cm)               15.71                          15.787506681749962
       Material                       Sodium
       Multiplicity                   1.0                            1.0
       Name                           intercoolant
       Outer Pitch (cm)               16.142                         16.142
       Thickness (cm)                 0.2160000                      0.1772467
</pre></div></div>
</div>
</section>
<section id="Modifying-the-state-of-the-reactor">
<h2><span class="section-number">3.3. </span>Modifying the state of the reactor<a class="headerlink" href="#Modifying-the-state-of-the-reactor" title="Link to this heading"></a></h2>
<p>Each object in the Reactor model has a bunch of <em>state parameters</em> contained in its special <code class="docutils literal notranslate"><span class="pre">.p</span></code> attribute, called its <em>Parameter Collection</em>. The state parameters are defined both by the ARMI framework and the collection of plugins. For instance, you can look at the core’s keff parameters or each individual block’s power and multi-group flux parameters like this:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">power</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">core</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">keff</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">mgFlux</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.0
0.0
None
</pre></div></div>
</div>
<p>As you might expect, the values are zero because we have not performed any physics calculations yet. We could run a physics plugin at this point to add physics state, but for this tutorial, we’ll just apply dummy data. Here’s a fake physics kernel that just sets a power distribution based on spatial location of each block (e.g. a spherical distribution):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="n">midplane</span> <span class="o">=</span> <span class="n">core</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getHeight</span><span class="p">()</span> <span class="o">/</span> <span class="mf">2.0</span>
<span class="n">center</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">midplane</span><span class="p">])</span>
<span class="n">peakPower</span> <span class="o">=</span> <span class="mf">1e6</span>
<span class="n">mgFluxBase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">setFakePower</span><span class="p">(</span><span class="n">core</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">core</span><span class="p">:</span>
        <span class="n">sf</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">getSymmetryFactor</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
            <span class="n">vol</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">getVolume</span><span class="p">()</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">spatialLocator</span><span class="o">.</span><span class="n">getGlobalCoordinates</span><span class="p">()</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">coords</span> <span class="o">-</span> <span class="n">center</span><span class="p">))</span>
            <span class="n">fuelFlag</span> <span class="o">=</span> <span class="mi">10</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">isFuel</span><span class="p">()</span> <span class="k">else</span> <span class="mf">1.0</span>
            <span class="c1"># Use the symmetry factor to account for the central assembly being split</span>
            <span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">power</span> <span class="o">=</span> <span class="n">peakPower</span> <span class="o">/</span> <span class="n">r</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> <span class="n">fuelFlag</span> <span class="o">/</span> <span class="n">sf</span>
            <span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">pdens</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">power</span> <span class="o">/</span> <span class="n">vol</span>
            <span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">mgFlux</span> <span class="o">=</span> <span class="n">mgFluxBase</span> <span class="o">*</span> <span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">pdens</span>
            <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">isFuel</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">power</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">getLocation</span><span class="p">())</span>


<span class="n">setFakePower</span><span class="p">(</span><span class="n">core</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
201.2121328751081 001-001-001
283.72676915791163 001-001-002
429.75679542940935 001-001-003
726.2065240578604 001-001-004
1481.7416753196674 001-001-005
594.2890628648304 002-001-001
832.7118344145881 002-001-002
1247.3666431166173 002-001-003
2061.589294063221 002-001-004
3983.795411797809 002-001-005
594.2890628648304 002-002-001
832.7118344145881 002-002-002
1247.3666431166173 002-002-003
2061.589294063221 002-002-004
3983.795411797809 002-002-005
567.9068752321263 003-001-001
781.8211719174191 003-001-002
1136.546832731319 003-001-003
1775.4675690469703 003-001-004
3037.7948251721677 003-001-005
576.436766311226 003-002-001
798.0792090090622 003-002-002
1171.232095330452 003-002-003
1861.5889992921707 003-002-004
3298.9174953243905 003-002-005
567.9068752321263 003-003-001
781.8211719174191 003-003-002
1136.546832731319 003-003-003
1775.4675690469703 003-003-004
3037.7948251721677 003-003-005
576.4367663112263 003-012-001
798.0792090090622 003-012-002
1171.232095330452 003-012-003
1861.5889992921707 003-012-004
3298.9174953243905 003-012-005
543.7674846477125 004-002-001
736.7925560723418 004-002-002
1043.811476571239 004-002-003
1559.086660392669 004-002-004
2454.8587995069606 004-002-005
543.7674846477125 004-003-001
736.7925560723418 004-003-002
1043.811476571239 004-003-003
1559.086660392669 004-003-004
2454.8587995069606 004-003-005
543.7674846477125 004-005-001
736.7925560723418 004-005-002
1043.811476571239 004-005-003
1559.086660392669 004-005-004
2454.8587995069606 004-005-005
543.7674846477125 004-018-001
736.7925560723418 004-018-002
1043.811476571239 004-018-003
1559.086660392669 004-018-004
2454.8587995069606 004-018-005
482.26958247687014 005-001-001
628.2425670515395 005-001-002
838.5497047927524 005-001-003
1141.6712238490518 005-001-004
1557.9644917470105 005-001-005
501.16274186391075 005-002-001
660.6884827804276 005-002-002
897.3713186381708 005-002-003
1253.5417832788535 005-002-004
1774.0124459802742 005-002-005
507.7937693841397 005-003-001
672.2615830527569 005-003-002
918.8562740000916 005-003-003
1295.8684850899372 005-003-004
1859.989350727691 005-003-005
501.16274186391075 005-004-001
660.6884827804276 005-004-002
897.3713186381708 005-004-003
1253.5417832788535 005-004-004
1774.0124459802742 005-004-005
482.26958247687014 005-005-001
628.2425670515395 005-005-002
838.5497047927524 005-005-003
1141.6712238490518 005-005-004
1557.9644917470105 005-005-005
501.16274186391075 005-006-001
660.6884827804276 005-006-002
897.3713186381708 005-006-003
1253.5417832788535 005-006-004
1774.0124459802742 005-006-005
507.7937693841397 005-023-001
672.2615830527569 005-023-002
918.8562740000918 005-023-003
1295.8684850899372 005-023-004
1859.989350727691 005-023-005
501.16274186391075 005-024-001
660.6884827804276 005-024-002
897.3713186381708 005-024-003
1253.5417832788535 005-024-004
1774.0124459802742 005-024-005
433.2686512340821 006-001-001
547.5702713630133 006-001-002
700.749781243437 006-001-003
900.5628571891203 006-001-004
1141.0693805556527 006-001-005
453.75938768776024 006-002-001
580.7120147457107 006-002-002
755.9623309969782 006-002-003
993.8470981807069 006-002-004
1295.093144979462 006-002-005
464.7491657921643 006-003-001
598.8342655277754 006-003-002
786.9650870342906 006-003-003
1048.1321554651122 006-003-004
1388.8263886151203 006-003-005
464.7491657921643 006-004-001
598.8342655277754 006-004-002
786.9650870342906 006-004-003
1048.1321554651122 006-004-004
1388.8263886151203 006-004-005
453.75938768776024 006-005-001
580.7120147457109 006-005-002
755.9623309969782 006-005-003
993.8470981807073 006-005-004
1295.093144979462 006-005-005
433.2686512340821 006-006-001
547.5702713630133 006-006-002
700.7497812434373 006-006-003
900.5628571891203 006-006-004
1141.069380555653 006-006-005
453.75938768776024 006-007-001
580.7120147457109 006-007-002
755.9623309969782 006-007-003
993.8470981807073 006-007-004
1295.093144979462 006-007-005
464.7491657921643 006-008-001
598.8342655277754 006-008-002
786.9650870342906 006-008-003
1048.1321554651122 006-008-004
1388.8263886151203 006-008-005
464.7491657921643 006-029-001
598.8342655277754 006-029-002
786.9650870342906 006-029-003
1048.1321554651122 006-029-004
1388.8263886151203 006-029-005
453.75938768776024 006-030-001
580.7120147457107 006-030-002
755.9623309969782 006-030-003
993.8470981807069 006-030-004
1295.093144979462 006-030-005
385.40733734089025 007-001-001
473.28984043160057 007-001-002
583.5451425775741 007-001-003
715.8005320700539 007-001-004
859.8515267335054 007-001-005
405.7823467609031 007-002-001
504.39119992660204 007-002-002
631.5597751814538 007-002-003
789.4185339360051 007-002-004
968.3266188429413 007-002-005
419.07528981152086 007-003-001
525.0945662075254 007-003-002
664.3581773715332 007-003-003
841.335903664775 007-003-004
1047.624870298122 007-003-005
419.07528981152086 007-005-001
525.0945662075254 007-005-002
664.3581773715332 007-005-003
841.335903664775 007-005-004
1047.624870298122 007-005-005
405.78234676090335 007-006-001
504.39119992660204 007-006-002
631.5597751814539 007-006-003
789.4185339360054 007-006-004
968.3266188429413 007-006-005
385.40733734089025 007-007-001
473.28984043160057 007-007-002
583.5451425775741 007-007-003
715.8005320700539 007-007-004
859.8515267335054 007-007-005
405.7823467609031 007-008-001
504.39119992660204 007-008-002
631.5597751814538 007-008-003
789.4185339360051 007-008-004
968.3266188429413 007-008-005
419.07528981152086 007-009-001
525.0945662075254 007-009-002
664.3581773715332 007-009-003
841.3359036647746 007-009-004
1047.6248702981216 007-009-005
419.07528981152086 007-035-001
525.0945662075254 007-035-002
664.3581773715332 007-035-003
841.335903664775 007-035-004
1047.624870298122 007-035-005
405.7823467609031 007-036-001
504.39119992660204 007-036-002
631.5597751814538 007-036-003
789.4185339360051 007-036-004
968.3266188429413 007-036-005
360.0940445113585 008-002-001
435.6795184040706 008-002-002
527.4099165571945 008-002-003
633.1389396547851 008-002-004
743.2808920676976 008-002-005
374.1357488147068 008-003-001
456.40437929246855 008-003-002
558.0878077962307 008-003-003
677.871204505851 008-003-004
805.6974218981927 008-003-005
381.5754294076418 008-004-001
467.5242208618066 008-004-002
574.8051751545618 008-004-003
702.6944398365334 008-004-004
841.0090146000248 008-004-005
381.5754294076418 008-005-001
467.5242208618066 008-005-002
574.8051751545618 008-005-003
702.6944398365334 008-005-004
841.0090146000249 008-005-005
374.135748814707 008-006-001
456.40437929246855 008-006-002
558.0878077962307 008-006-003
677.871204505851 008-006-004
805.6974218981929 008-006-005
360.0940445113585 008-007-001
435.6795184040706 008-007-002
527.4099165571945 008-007-003
633.1389396547851 008-007-004
743.2808920676976 008-007-005
360.0940445113585 008-009-001
435.6795184040706 008-009-002
527.4099165571945 008-009-003
633.1389396547851 008-009-004
743.2808920676976 008-009-005
374.1357488147068 008-010-001
456.40437929246855 008-010-002
558.0878077962307 008-010-003
677.8712045058508 008-010-004
805.6974218981927 008-010-005
381.5754294076418 008-011-001
467.5242208618066 008-011-002
574.8051751545618 008-011-003
702.6944398365334 008-011-004
841.0090146000248 008-011-005
381.5754294076418 008-040-001
467.5242208618066 008-040-002
574.8051751545618 008-040-003
702.6944398365334 008-040-004
841.0090146000248 008-040-005
374.1357488147068 008-041-001
456.40437929246855 008-041-002
558.0878077962307 008-041-003
677.871204505851 008-041-004
805.6974218981927 008-041-005
360.0940445113585 008-042-001
435.6795184040708 008-042-002
527.4099165571945 008-042-003
633.1389396547851 008-042-004
743.2808920676978 008-042-005
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">power</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">pdens</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
201.2121328751081
0.1316456151257493
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">parent</span>
<span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">spatialLocator</span><span class="o">.</span><span class="n">getGlobalCoordinates</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">a</span><span class="p">]</span>
<span class="n">power</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">getChildParamValues</span><span class="p">(</span><span class="s2">&quot;power&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">power</span><span class="p">,</span> <span class="s2">&quot;.-&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Fake power distribution on reactor&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0.5, 1.0, &#39;Fake power distribution on reactor&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_data_model_26_1.png" src="../_images/tutorials_data_model_26_1.png" />
</div>
</div>
<p>We can take a look at the spatial distribution as well:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">armi.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">plotting</span>

<span class="c1"># Note, if you were plotting outside jupyter, you could click</span>
<span class="c1"># on different depths at the bottom to view different axial planes.</span>
<span class="n">plotting</span><span class="o">.</span><span class="n">plotBlockDepthMap</span><span class="p">(</span><span class="n">core</span><span class="p">,</span> <span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">depthIndex</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_data_model_28_0.png" src="../_images/tutorials_data_model_28_0.png" />
</div>
</div>
</section>
<section id="Modifying-number-densities">
<h2><span class="section-number">3.4. </span>Modifying number densities<a class="headerlink" href="#Modifying-number-densities" title="Link to this heading"></a></h2>
<p>Analysts frequently want to modify number densities. For example, if you needed to compute a coolant density coefficient, you could simply reduce the amount of coolant in the core.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sodiumBefore</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">getMass</span><span class="p">(</span><span class="s2">&quot;NA&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Before: </span><span class="si">{</span><span class="n">sodiumBefore</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1e6</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MT Sodium&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">core</span><span class="o">.</span><span class="n">getBlocks</span><span class="p">():</span>  <span class="c1"># loop through all blocks</span>
    <span class="n">refDens</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s2">&quot;NA23&quot;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">setNumberDensity</span><span class="p">(</span><span class="s2">&quot;NA23&quot;</span><span class="p">,</span> <span class="n">refDens</span> <span class="o">*</span> <span class="mf">0.98</span><span class="p">)</span>  <span class="c1"># reduce Na density by 2%</span>
<span class="n">sodiumAfter</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">getMass</span><span class="p">(</span><span class="s2">&quot;NA&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;After:  </span><span class="si">{</span><span class="n">sodiumAfter</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1e6</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MT Sodium&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Before: 2.48 MT Sodium
After:  2.43 MT Sodium
</pre></div></div>
</div>
<p>If you analyze the keff with a physics plugin before and after, the change in the <code class="docutils literal notranslate"><span class="pre">core.p.keff</span></code> param would determine your density coefficient of reactivity.</p>
</section>
<section id="Saving-state-to-disk">
<h2><span class="section-number">3.5. </span>Saving state to disk<a class="headerlink" href="#Saving-state-to-disk" title="Link to this heading"></a></h2>
<p>During analysis, it’s often useful to save the reactor state to disk in a database. The ARMI database package handles this, and writes it out to an <a class="reference external" href="https://en.wikipedia.org/wiki/Hierarchical_Data_Format">HDF-formatted</a> file. This is typically done automatically at each point in time in a normal simulation, and can also be done manually, like this:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dbi</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">getInterface</span><span class="p">(</span><span class="s2">&quot;database&quot;</span><span class="p">)</span>
<span class="n">dbi</span><span class="o">.</span><span class="n">initDB</span><span class="p">()</span>
<span class="n">dbi</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">writeToDB</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Opening database file at /tmp/.armi/0-20251216181356016459/anl-afci-177.h5
[info] Writing to database for statepoint: /c00n00
</pre></div></div>
</div>
</section>
<section id="Fuel-management">
<h2><span class="section-number">3.6. </span>Fuel management<a class="headerlink" href="#Fuel-management" title="Link to this heading"></a></h2>
<p>One plugin that comes with the framework is the Fuel Handler. It attaches the Fuel Handler interface, which we can grab now to move fuel around. In a typical ARMI run, the detailed fuel management choices are specified by the user-input custom shuffle logic file. In this particular example, we will simply swap the 10 highest-power fuel assemblies with the 10 lowest-power ones.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">armi.physics.fuelCycle</span><span class="w"> </span><span class="kn">import</span> <span class="n">fuelHandlers</span>

<span class="n">fh</span> <span class="o">=</span> <span class="n">fuelHandlers</span><span class="o">.</span><span class="n">fuelHandlerFactory</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">moved</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">high</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">findAssembly</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">compareTo</span><span class="o">=</span><span class="mf">1.0e6</span><span class="p">,</span> <span class="n">blockLevelMax</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclusions</span><span class="o">=</span><span class="n">moved</span><span class="p">)</span>
    <span class="n">low</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">findAssembly</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">compareTo</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">blockLevelMax</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclusions</span><span class="o">=</span><span class="n">moved</span><span class="p">)</span>
    <span class="n">fh</span><span class="o">.</span><span class="n">swapAssemblies</span><span class="p">(</span><span class="n">high</span><span class="p">,</span> <span class="n">low</span><span class="p">)</span>
    <span class="n">moved</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">high</span><span class="p">,</span> <span class="n">low</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plotting</span><span class="o">.</span><span class="n">plotBlockDepthMap</span><span class="p">(</span><span class="n">core</span><span class="p">,</span> <span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">depthIndex</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># You can also plot total assembly params, which are the sum of block params</span>
<span class="n">plotting</span><span class="o">.</span><span class="n">plotFaceMap</span><span class="p">(</span><span class="n">core</span><span class="p">,</span> <span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">vals</span><span class="o">=</span><span class="s2">&quot;sum&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_data_model_36_0.png" src="../_images/tutorials_data_model_36_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_data_model_36_1.png" src="../_images/tutorials_data_model_36_1.png" />
</div>
</div>
<p>We can write this new state to DB as well, since we’ve shuffled the fuel</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">timeNode</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="n">dbi</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">writeToDB</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
<span class="n">dbi</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Writing to database for statepoint: /c00n01
</pre></div></div>
</div>
</section>
<section id="Loading-from-the-database">
<h2><span class="section-number">3.7. </span>Loading from the database<a class="headerlink" href="#Loading-from-the-database" title="Link to this heading"></a></h2>
<p>Once you have a database, you can use it to load a Reactor object from any of the states that were written to it. First, create a Database object, then open it and call its <code class="docutils literal notranslate"><span class="pre">load()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">armi.bookkeeping</span><span class="w"> </span><span class="kn">import</span> <span class="n">db</span>

<span class="n">databaseLocation</span> <span class="o">=</span> <span class="s2">&quot;../tutorials/anl-afci-177.h5&quot;</span>
<span class="n">cycle</span><span class="p">,</span> <span class="n">timeNode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
<span class="n">dbo</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">databaseFactory</span><span class="p">(</span><span class="n">databaseLocation</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">dbo</span><span class="p">:</span>
    <span class="c1"># Load a new reactor object from the requested cycle and time node</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">dbo</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">cycle</span><span class="p">,</span> <span class="n">timeNode</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Loading reactor state for time node (0, 1)
[info] Applying &lt;Migration from 0.1.2: Removes now-invalid `centers:` lines fro...
[info] Removing `centers:` sections.
[info] Applying &lt;Migration from 0.1.2: Update elemental nuclide flags....
=========== Initializing Mesh, Assembly Zones, and Nuclide Categories ===========
[info] Will expand HE, NA, AL, SI, V, CR, MN, FE, CO, NI, ZR, NB, MO, W elementals to have natural isotopics
[info] Constructing assembly `inner fuel`
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: A ENV GP: A&gt; so pin-to-duct gap not calculated
[info] Constructing assembly `middle core fuel`
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: B ENV GP: A&gt; so pin-to-duct gap not calculated
[info] Constructing assembly `outer core fuel`
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: C ENV GP: A&gt; so pin-to-duct gap not calculated
[info] Constructing assembly `radial reflector`
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: A ENV GP: A&gt; so pin-to-duct gap not calculated
[info] Constructing assembly `radial shield`
[info] Constructing assembly `control`
[info] Constructing assembly `ultimate shutdown`
=========== Verifying Assembly Configurations ===========
[info] Nuclide categorization for cross section temperature assignments:
       ------------------  ------------------------------------------------------
       Nuclide Category    Nuclides
       ------------------  ------------------------------------------------------
       Fuel                CM242, LFP39, ZR96, CM243, DUMP1, PU242, NP238, AM243,
                           ZR91, ZR94, PU241, CM247, LFP35, PU239, HE4, U238,
                           PU240, LFP40, AM242M, CO59, U236, NP237, AM241,
                           U235, PU236, CM246, LFP38, ZR92, DUMP2, AL27,
                           CM245, NB93, CM244, LFP41, ZR90, PU238, U234
       Coolant             NA23
       Structure           FE58, NI60, SI28, B11, MO98, NI64, MO100, CR53, MO94,
                           CR52, NI62, C, SI29, FE57, MO92, W182, W186,
                           MO96, FE54, MO95, CR50, MN55, CR54, W183, NI58,
                           B10, MO97, FE56, W184, SI30, V50, V51, NI61
       ------------------  ------------------------------------------------------
[warn] Changing the name of the Spent Fuel Pool to &#39;sfp&#39;.
</pre></div></div>
</div>
<p>We can see that the time node is what we expect (node 1), and there is some fission product mass since we loaded from a cycle after a depletion step.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">timeNode</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">getFissileMass</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1
909142.5216630063
</pre></div></div>
</div>
<p>Having a Reactor object by itself can be very useful for all sorts of post-processing tasks. However, sometimes we may wish initialize more ARMI components to do more advanced tasks and interactive follow-on analysis. Lucky for us, the database stores the settings that were used to run the case in the first place. We can get them like this:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">dbo</span><span class="p">:</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">dbo</span><span class="o">.</span><span class="n">loadCS</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cs</span><span class="p">[</span><span class="s2">&quot;neutronicsKernel&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

</pre></div></div>
</div>
<p>With this <code class="docutils literal notranslate"><span class="pre">Settings</span></code> object, we could create a brand new <code class="docutils literal notranslate"><span class="pre">Case</span></code> and <code class="docutils literal notranslate"><span class="pre">Operator</span></code> and do all sorts of magic. This way of interacting with ARMI is rather advanced, and beyond the scope of this tutorial.</p>
<p>That’s just a brief exploration of the data model. Hopefully it helped orient you to the underlying ARMI structure.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="walkthrough_lwr_inputs.html" class="btn btn-neutral float-left" title="2. Building input files for a thermal reactor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="making_your_first_app.html" class="btn btn-neutral float-right" title="4. Making your first ARMI-based App" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2025, TerraPower, LLC.
      <span class="lastupdated">Last updated on 2025-12-16.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>