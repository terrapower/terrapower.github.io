<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="5. Hands-on at the ARMI Terminal" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://terrapower.github.io/armi/tutorials/data_model.html" />
<meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
<meta property="og:description" content="This tutorial will walk you through some exploration with ARMI on the command line with the goal of exposing you to some of the capabilities and organization of information in the ARMI system. Init..." />
<meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
<meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
<meta name="description" content="This tutorial will walk you through some exploration with ARMI on the command line with the goal of exposing you to some of the capabilities and organization of information in the ARMI system. Init..." />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>5. Hands-on at the ARMI Terminal &mdash; ARMI 0.3.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme_fixes.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../_static/nbsphinx-code-cells.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6. Making your first ARMI-based App" href="making_your_first_app.html" />
    <link rel="prev" title="4. Building input files for a thermal reactor" href="walkthrough_lwr_inputs.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >

          
          
          <a href="../index.html" class="icon icon-home">
            ARMI
              <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="nuclide_demo.html">1. The ARMI Nuclide and Element Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="materials_demo.html">2. The ARMI Material Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="walkthrough_inputs.html">3. Building input files for a fast reactor</a></li>
<li class="toctree-l2"><a class="reference internal" href="walkthrough_lwr_inputs.html">4. Building input files for a thermal reactor</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5. Hands-on at the ARMI Terminal</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Initializing-and-Exploring-the-ARMI-Model">5.1. Initializing and Exploring the ARMI Model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Exploring-the-state-of-the-reactor">5.2. Exploring the <em>state</em> of the reactor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Modifying-the-state-of-the-reactor">5.3. Modifying the state of the reactor</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Modifying-number-densities">5.4. Modifying number densities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Saving-state-to-disk">5.5. Saving state to disk</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Fuel-management">5.6. Fuel management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Loading-from-the-database">5.7. Loading from the database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="making_your_first_app.html">6. Making your first ARMI-based App</a></li>
<li class="toctree-l2"><a class="reference internal" href="param_sweep.html">7. Parameter sweeps</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../.apidocs/modules.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #233C5B" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Tutorials</a></li>
      <li class="breadcrumb-item active"><span class="section-number">5. </span>Hands-on at the ARMI Terminal</li>
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Hands-on-at-the-ARMI-Terminal">
<h1><span class="section-number">5. </span>Hands-on at the ARMI Terminal<a class="headerlink" href="#Hands-on-at-the-ARMI-Terminal" title="Permalink to this heading"></a></h1>
<p>This tutorial will walk you through some exploration with ARMI on the command line with the goal of exposing you to some of the capabilities and organization of information in the ARMI system.</p>
<section id="Initializing-and-Exploring-the-ARMI-Model">
<h2><span class="section-number">5.1. </span>Initializing and Exploring the ARMI Model<a class="headerlink" href="#Initializing-and-Exploring-the-ARMI-Model" title="Permalink to this heading"></a></h2>
<p>First we need to get some inputs. We built some from scratch in <a class="reference external" href="walkthrough_inputs.html">Building input files for a fast reactor</a> and we pick those up and use them here as well:</p>
<ul class="simple">
<li><p><a class="reference download internal" download="" href="../_downloads/d8fa61001ab140ffa761c8f7d29f1884/anl-afci-177-blueprints.yaml"><code class="xref download docutils literal notranslate"><span class="pre">Blueprints</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/112f8b8914837219e97641ef68a02a73/anl-afci-177.yaml"><code class="xref download docutils literal notranslate"><span class="pre">Settings</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/735a3ff7c198d960411ed4194fc12c03/anl-afci-177-coreMap.yaml"><code class="xref download docutils literal notranslate"><span class="pre">Core</span> <span class="pre">map</span></code></a></p></li>
<li><p><a class="reference download internal" download="" href="../_downloads/d661bbdfd419763f7462f13a6a452f7c/anl-afci-177-fuelManagement.py"><code class="xref download docutils literal notranslate"><span class="pre">Fuel</span> <span class="pre">management</span></code></a></p></li>
</ul>
<p>You can load these inputs using armi’s <code class="docutils literal notranslate"><span class="pre">init</span></code> function. This will build an <strong>Operator</strong>, a <strong>Reactor</strong>, and an <strong>Interface Stack</strong> full of various interfaces.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># you can only configure an app once</span>
<span class="kn">import</span> <span class="nn">armi</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">armi</span><span class="o">.</span><span class="n">isConfigured</span><span class="p">():</span>
    <span class="n">armi</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">armi</span><span class="o">.</span><span class="n">apps</span><span class="o">.</span><span class="n">App</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

       +===================================================+
       |            _      ____     __  __    ___          |
       |           / \    |  _ \   |  \/  |  |_ _|         |
       |          / _ \   | |_) |  | |\/| |   | |          |
       |         / ___ \  |  _ &lt;   | |  | |   | |          |
       |        /_/   \_\ |_| \_\  |_|  |_|  |___|         |
       |        Advanced  Reactor  Modeling Interface      |
       |                                                   |
       |                    version 0.3.0                  |
       |                                                   |
       +===================================================+
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">o</span><span class="o">=</span><span class="n">armi</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">fName</span><span class="o">=</span><span class="s2">&quot;anl-afci-177.yaml&quot;</span><span class="p">);</span>
<span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">sortAssemsByRing</span><span class="p">()</span> <span class="c1"># makes innermost assemblies appear first</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Settings Validation Checks ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Case Information ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] ---------------------  ------------------------------------------------------------
       Case Title:            anl-afci-177
       Case Description:      ANL-AFCI-177 CR 1.0 metal core but with HALEU instead of TRU
       Run Type:              Standard - Operator
       Current User:          armi
       ARMI Location:         /home/runner/work/armi/armi/armi
       Working Directory:     /home/runner/work/armi/armi/doc/tutorials
       Python Interpreter:    3.9.18 (main, Aug 28 2023, 08:38:32)
                              [GCC 11.4.0]
       Master Machine:        ?
       Number of Processors:  1
       Date and Time:         Wed Jan 24 20:57:50 2024
       ---------------------  ------------------------------------------------------------
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Input File Information ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] --------------------------------------------------------------------  ------------------------------  ------------
       Input Type                                                            Path                            SHA-1 Hash
       --------------------------------------------------------------------  ------------------------------  ------------
       Case Settings                                                         anl-afci-177.yaml               f7dbd06fb4
       Blueprints                                                            anl-afci-177-blueprints.yaml    04761fb2b3
       Included blueprints                                                   anl-afci-177-coreMap.yaml       5904530cb2
       Geometry                                                                                              MISSING
       &lt;Setting shuffleLogic value:anl-afci-177-fuelManagement.py default:&gt;  anl-afci-177-fuelManagement.py  622957b035
       --------------------------------------------------------------------  ------------------------------  ------------
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Reactor Cycle Information ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] ---------------------------  -----------------------------------------------------------------
       Reactor Thermal Power (MW):  1000.0
       Number of Cycles:            10
       Cycle Lengths:               411.11, 411.11, 411.11, 411.11, 411.11, 411.11, 411.11, 411.11,
                                    411.11, 411.11
       Availability Factors:        0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9, 0.9
       Power Fractions:             [1.0, 1.0], [1.0, 1.0], [1.0, 1.0], [1.0, 1.0], [1.0, 1.0], [1.0,
                                    1.0], [1.0, 1.0], [1.0, 1.0], [1.0, 1.0], [1.0, 1.0]
       Step Lengths (days):         [184.9995, 184.9995], [184.9995, 184.9995], [184.9995, 184.9995],
                                    [184.9995, 184.9995], [184.9995, 184.9995], [184.9995, 184.9995],
                                    [184.9995, 184.9995], [184.9995, 184.9995], [184.9995, 184.9995],
                                    [184.9995, 184.9995]
       ---------------------------  -----------------------------------------------------------------
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Constructing Reactor and Verifying Inputs ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing the `core`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Adding Assemblies to &lt;Core: core id:140697477729680&gt; ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Will expand HE, NA, SI, CR, MN, FE, NI, ZR, MO, W elementals to have natural isotopics
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `inner fuel`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] No component matched Flags.CLAD in &lt;reflector block-bol-000 at ExCore XS: A BU GP: A&gt;. Returning None
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: A BU GP: A&gt; so pin-to-duct gap not calculated
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Cannot get pin pitch in &lt;reflector block-bol-000 at ExCore XS: A BU GP: A&gt; because it does not have a wire and a clad
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] The gap between wire wrap and clad in block &lt;plenum block-bol-006 at ExCore XS: A BU GP: A&gt; was 3.999999999998449e-05 cm. Expected 0.0.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `middle core fuel`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: B BU GP: A&gt; so pin-to-duct gap not calculated
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Cannot get pin pitch in &lt;reflector block-bol-000 at ExCore XS: B BU GP: A&gt; because it does not have a wire and a clad
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] The gap between wire wrap and clad in block &lt;plenum block-bol-006 at ExCore XS: B BU GP: A&gt; was 3.999999999998449e-05 cm. Expected 0.0.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `outer core fuel`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: C BU GP: A&gt; so pin-to-duct gap not calculated
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Cannot get pin pitch in &lt;reflector block-bol-000 at ExCore XS: C BU GP: A&gt; because it does not have a wire and a clad
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] The gap between wire wrap and clad in block &lt;plenum block-bol-006 at ExCore XS: C BU GP: A&gt; was 3.999999999998449e-05 cm. Expected 0.0.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `radial reflector`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: A BU GP: A&gt; so pin-to-duct gap not calculated
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `radial shield`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Temperature 597.0 out of range (25 to 500) for B4C linear expansion percent
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] No component matched Flags.WIRE in &lt;radial shield block-bol-000 at ExCore XS: A BU GP: A&gt;. Returning None
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Cannot get pin pitch in &lt;radial shield block-bol-000 at ExCore XS: A BU GP: A&gt; because it does not have a wire and a clad
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `control`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Could not create a spatialGrid for block control, multiplicities are not 1 or N they are {1.0}
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `ultimate shutdown`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Verifying Assembly Configurations ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Summarizing Source of Material Data for &lt;Core: core id:140697477729680&gt; ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] ---------------  -----------------  ----------------------------
       Material Name    Source Location    Property Data was Modified
                                           from the Source?
       ---------------  -----------------  ----------------------------
       B4C              ARMI               False
       HT9              ARMI               False
       Sodium           ARMI               False
       UZr              ARMI               False
       Void             ARMI               False
       ---------------  -----------------  ----------------------------
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Applying Geometry Modifications ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Resetting the state of the converted reactor core model in &lt;EdgeAssemblyChanger&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Updating spatial grid pitch data for hex geometry
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Initializing Mesh, Assembly Zones, and Nuclide Categories ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Nuclide categorization for cross section temperature assignments:
       ------------------  --------------------------------------------------------------
       Nuclide Category    Nuclides
       ------------------  --------------------------------------------------------------
       Fuel                LFP38, LFP41, DUMP1, AM242M, U235, NP238, DUMP2, PU236, CM244,
                           PU240, ZR96, PU241, ZR90, PU239, HE4, CM245, LFP40, U234,
                           AM241, ZR92, ZR94, ZR91, AM243, U238, CM246, U236,
                           LFP39, CM247, NP237, CM243, LFP35, PU238, PU242, CM242
       Coolant             NA23
       Structure           MO97, CR53, C, V, NI58, W183, FE58, CR54,
                           MO96, SI28, FE56, MN55, NI64, B10, NI62, FE54,
                           W182, NI61, SI30, CR52, B11, W186, NI60, W184,
                           MO92, MO94, MO100, MO98, FE57, MO95, CR50, SI29
       ------------------  --------------------------------------------------------------
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing the `Spent Fuel Pool`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Creating Interfaces ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Interface Stack Summary  ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] -------  ------------------------  ---------------  ----------  ---------  -----------  ------------
         Index  Type                      Name             Function    Enabled    EOL order    BOL forced
       -------  ------------------------  ---------------  ----------  ---------  -----------  ------------
            01  Main                      main                         Yes        Reversed     No
            02  FissionProductModel       fissionProducts              Yes        Normal       No
            03  FuelHandler               fuelHandler                  Yes        Normal       No
            04  CrossSectionGroupManager  xsGroups                     Yes        Normal       No
            05  HistoryTracker            history                      Yes        Normal       No
            06  Report                    report                       Yes        Normal       No
            07  Database                  database                     Yes        Normal       No
            08  MemoryProfiler            memoryProfiler               Yes        Normal       No
            09  Snapshot                  snapshot                     Yes        Normal       No
       -------  ------------------------  ---------------  ----------  ---------  -----------  ------------
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
===========  Triggering Init Event ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== 01 - main                           Init            ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== 02 - fissionProducts                Init            ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== 03 - fuelHandler                    Init            ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== 04 - xsGroups                       Init            ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== 05 - history                        Init            ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== 06 - report                         Init            ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== 07 - database                       Init            ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== 08 - memoryProfiler                 Init            ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== 09 - snapshot                       Init            ===========
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
===========  Completed Init Event ===========
</pre></div></div>
</div>
<p>You have now created an <code class="docutils literal notranslate"><span class="pre">operator</span></code> object, which contains a <code class="docutils literal notranslate"><span class="pre">Reactor</span></code> object (called <code class="docutils literal notranslate"><span class="pre">o.r</span></code>) that
represents the beginning-of-life (BOL) state of the nuclear reactor defined in the inputs. The reactor looks
like this:</p>
<figure class="align-center" id="id1">
<img alt="../_images/armi_reactor_objects.png" src="../_images/armi_reactor_objects.png" />
<figcaption>
<p><span class="caption-text"><strong>Figure 1.</strong> The primary data containers in ARMI</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The data hierarchy in an ARMI model often is made up of:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../.apidocs/armi.reactor.reactors.html#module-armi.reactor.reactors" title="armi.reactor.reactors"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Reactors</span></code></a>, often named <code class="docutils literal notranslate"><span class="pre">reactor</span></code> or <code class="docutils literal notranslate"><span class="pre">r</span></code> contain a Core and possibly other equipment. They represent collections of assemblies.</p></li>
<li><p><a class="reference internal" href="../.apidocs/armi.reactor.assemblies.html#module-armi.reactor.assemblies" title="armi.reactor.assemblies"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Assemblies</span></code></a>, often named <code class="docutils literal notranslate"><span class="pre">assembly</span></code> or <code class="docutils literal notranslate"><span class="pre">a</span></code>, are individual pieces that collect into a System.</p></li>
<li><p><a class="reference internal" href="../.apidocs/armi.reactor.blocks.html#module-armi.reactor.blocks" title="armi.reactor.blocks"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Blocks</span></code></a>, often called <code class="docutils literal notranslate"><span class="pre">block</span></code> or <code class="docutils literal notranslate"><span class="pre">b</span></code> are divisions of the assemblies into sections one on top of the other.</p></li>
<li><p><a class="reference internal" href="../.apidocs/armi.reactor.components.html#module-armi.reactor.components" title="armi.reactor.components"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Components</span></code></a> The geometrically defined objects (Circles, Hexagons, Helices, Dodecagons) and their dimensions.</p></li>
<li><p><a class="reference internal" href="../.apidocs/armi.materials.html#module-armi.materials" title="armi.materials"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Materials</span></code></a> are objects which have material properties like linear expansion coefficients, thermal conductivities, isotopic mass fractions, and densities.</p></li>
</ul>
<p>Each of these objects house more than the listed objects, they also are responsible for a variety of state information
like the reactor’s overall keff, flux, height, temperature, etc. In this section, we will explore these objects,
see how to access them, and how to view their contained information.</p>
<p>Exploring it a little, we can list all the assemblies in the reactor with:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">core</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">core</span>
<span class="n">core</span><span class="o">.</span><span class="n">getAssemblies</span><span class="p">()[:</span><span class="mi">25</span><span class="p">]</span> <span class="c1"># only print the first 25</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&lt;radial shield Assembly A0005 at 011-056&gt;,
 &lt;radial reflector Assembly A0004 at 009-045&gt;,
 &lt;radial reflector Assembly A0010 at 010-051&gt;,
 &lt;radial shield Assembly A0016 at 011-057&gt;,
 &lt;control Assembly A0003 at 007-034&gt;,
 &lt;outer core fuel Assembly A0009 at 008-040&gt;,
 &lt;radial reflector Assembly A0015 at 009-046&gt;,
 &lt;radial reflector Assembly A0021 at 010-052&gt;,
 &lt;radial shield Assembly A0027 at 011-058&gt;,
 &lt;middle core fuel Assembly A0002 at 005-023&gt;,
 &lt;middle core fuel Assembly A0008 at 006-029&gt;,
 &lt;outer core fuel Assembly A0014 at 007-035&gt;,
 &lt;outer core fuel Assembly A0020 at 008-041&gt;,
 &lt;radial reflector Assembly A0026 at 009-047&gt;,
 &lt;radial reflector Assembly A0033 at 010-053&gt;,
 &lt;radial shield Assembly A0039 at 011-059&gt;,
 &lt;inner fuel Assembly A0001 at 003-012&gt;,
 &lt;middle core fuel Assembly A0007 at 004-018&gt;,
 &lt;middle core fuel Assembly A0013 at 005-024&gt;,
 &lt;middle core fuel Assembly A0019 at 006-030&gt;,
 &lt;outer core fuel Assembly A0025 at 007-036&gt;,
 &lt;outer core fuel Assembly A0032 at 008-042&gt;,
 &lt;radial reflector Assembly A0038 at 009-048&gt;,
 &lt;radial shield Assembly A0045 at 010-054&gt;,
 &lt;inner fuel Assembly A0000 at 001-001&gt;]
</pre></div></div>
</div>
<div class="admonition-quiz-question-1 admonition">
<p class="admonition-title">Quiz Question 1</p>
<p>How many assemblies does the model have? (see answers at bottom)</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A reactor is made up of assemblies, which are made up of blocks, and so on. Each composite ARMI
object has a <code class="docutils literal notranslate"><span class="pre">getChildren</span></code> method that will retrieve a list of its contents. For clarity,
reactors have a <code class="docutils literal notranslate"><span class="pre">getAssemblies()</span></code> method and assemblies have a <code class="docutils literal notranslate"><span class="pre">getBlocks()</span></code> method,
but these do exactly the same thing as <code class="docutils literal notranslate"><span class="pre">getChildren()</span></code> in both cases.</p>
<p>Reactor, assembly, blocks, etc. objects act like lists as well, so you can get the fifth
assembly out of a reactor just like you’d get the fifth item out of any other list
(don’t forget that Python uses <a class="reference external" href="http://en.wikipedia.org/wiki/Zero-based_numbering">zero-based numbering</a>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; fifthAssem = core[4]
</pre></div>
</div>
</div>
<p>You can drill down the hierarchy for a particular assembly:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">core</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">core</span><span class="p">)</span>
<span class="n">assem</span> <span class="o">=</span> <span class="n">core</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">assem</span><span class="p">)</span>
<span class="n">block</span> <span class="o">=</span> <span class="n">assem</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Block&#39;s parent is: </span><span class="si">{</span><span class="n">block</span><span class="o">.</span><span class="n">parent</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">components</span> <span class="o">=</span> <span class="n">block</span><span class="o">.</span><span class="n">getChildren</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">components</span><span class="p">)</span>
<span class="n">material</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">material</span>
<span class="nb">print</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;Core: core id:140697477729680&gt;
&lt;inner fuel Assembly A0006 at 002-001&gt;
&lt;fuel B0006-005 at 002-001-005 XS: A BU GP: A&gt;
Block&#39;s parent is: &lt;inner fuel Assembly A0006 at 002-001&gt;
[&lt;Circle: fuel&gt;, &lt;Circle: bond&gt;, &lt;Circle: clad&gt;, &lt;Helix: wire&gt;, &lt;DerivedShape: coolant&gt;, &lt;Hexagon: duct&gt;, &lt;Hexagon: intercoolant&gt;]
&lt;Material: UZr&gt;
</pre></div></div>
</div>
</section>
<section id="Exploring-the-state-of-the-reactor">
<h2><span class="section-number">5.2. </span>Exploring the <em>state</em> of the reactor<a class="headerlink" href="#Exploring-the-state-of-the-reactor" title="Permalink to this heading"></a></h2>
<p>State can be explored using a variety of framework methods, as well as looking at state <em>parameters</em>. Let’s first try out some methods to find out how much U-235 is in the model and what the average uranium enrichment is:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">u235</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">getMass</span><span class="p">(</span><span class="s1">&#39;U235&#39;</span><span class="p">)</span>
<span class="n">u238</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">getMass</span><span class="p">(</span><span class="s1">&#39;U238&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The core contains </span><span class="si">{</span><span class="n">u235</span><span class="si">}</span><span class="s2"> grams of U-235&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The average fissile enrichment is </span><span class="si">{</span><span class="n">u235</span><span class="o">/</span><span class="p">(</span><span class="n">u235</span><span class="o">+</span><span class="n">u238</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
The core contains 913110.7780886302 grams of U-235
The average fissile enrichment is 0.1615298013245032
</pre></div></div>
</div>
<p>That’s how much U-235 is in the 1/3 core. If we want the total mass (including all nuclides), we can just leave the argument out:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">core</span><span class="o">.</span><span class="n">getMass</span><span class="p">()</span><span class="o">/</span><span class="mf">1.e6</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
27.630279585150355
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>core.getMass<span class="o">?</span>
</pre></div>
</div>
</div>
<p>Furthermore, you can get a list of available methods by pressing the tab key. Try <code class="docutils literal notranslate"><span class="pre">core.</span></code> followed by <code class="docutils literal notranslate"><span class="pre">[Tab]</span></code>. Try out some options!</p>
<p>Use tab completion to explore other methods of ARMI reactors assemblies and blocks. You can
view a summary of the methods of any object in the <a class="reference internal" href="../py-modindex.html"><span class="std std-ref">API documentation</span></a>.
For a good example, see <a class="reference internal" href="../.apidocs/armi.reactor.blocks.html#armi.reactor.blocks.Block" title="armi.reactor.blocks.Block"><code class="xref py py-class docutils literal notranslate"><span class="pre">the</span> <span class="pre">API</span> <span class="pre">docs</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">block</span></code></a>.</p>
<p>Next, lets find out what the number density of U235 is in a particular fuel block. We’ll use the <em>FLAGS</em> system to select a particular type of block (in this case, a fuel block):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">armi.reactor.flags</span> <span class="kn">import</span> <span class="n">Flags</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">getFirstBlock</span><span class="p">(</span><span class="n">Flags</span><span class="o">.</span><span class="n">FUEL</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;U-235 ndens: </span><span class="si">{</span><span class="n">b</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s1">&#39;U235&#39;</span><span class="p">)</span><span class="si">:</span><span class="s2">.4e</span><span class="si">}</span><span class="s2"> (atoms/bn-cm)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Block name: </span><span class="si">{</span><span class="n">b</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Block type: </span><span class="si">{</span><span class="n">b</span><span class="o">.</span><span class="n">getType</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
U-235 ndens: 1.5940e-03 (atoms/bn-cm)
Block name: B0000-001
Block type: fuel
</pre></div></div>
</div>
<p>You can find lots of other details about this block with:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">b</span><span class="o">.</span><span class="n">printContents</span><span class="p">(</span><span class="n">includeNuclides</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] &lt;fuel B0000-001 at 001-001-001 XS: A BU GP: A&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] &lt;Circle: fuel&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] ---------------------------------------------------------------------------------------------
       Fuel Dimensions -  Of First Fuel Block
                                      Tcold (25.0)                   Thot (500.0)
       ---------------------------------------------------------------------------------------------
       Inner Diameter (cm)            0.0                            0.0
       Material                       UZr
       Multiplicity                   271                            271
       Name                           fuel
       Outer Diameter (cm)            0.6029                         0.6086118601525807
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] &lt;Circle: bond&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] ---------------------------------------------------------------------------------------------
       Bond Dimensions -  Of First Fuel Block
                                      Tcold (447.0)                  Thot (447.0)
       ---------------------------------------------------------------------------------------------
       Inner Diameter (cm)            0.6029                         0.6086118601525807
       Material                       Sodium
       Multiplicity                   271                            271
       Name                           bond
       Outer Diameter (cm)            0.6962                         0.6996347645979837
       Thickness (cm)                 0.0466500                      0.0455115
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] &lt;Circle: clad&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] ---------------------------------------------------------------------------------------------
       Cladding Dimensions -  Of First Fuel Block
                                      Tcold (25.0)                   Thot (450.0)
       ---------------------------------------------------------------------------------------------
       Inner Diameter (cm)            0.6962                         0.6996347645979837
       Material                       HT9
       Multiplicity                   271                            271
       Name                           clad
       Outer Diameter (cm)            0.808                          0.8119863398379357
       Thickness (cm)                 0.0559000                      0.0561758
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] &lt;Helix: wire&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] ---------------------------------------------------------------------------------------------
       Wire Dimensions -  Of First Fuel Block
                                      Tcold (25.0)                   Thot (450.0)
       ---------------------------------------------------------------------------------------------
       Axial Pitch (cm)               30.0                           30.148007667250084
       Helix Diameter (cm)            0.8888                         0.8931849738217292
       Inner Diameter (cm)            0.0                            0.0
       Material                       HT9
       Multiplicity                   271                            271
       Name                           wire
       Outer Diameter (cm)            0.0808                         0.08119863398379355
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] &lt;DerivedShape: coolant&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] ---------------------------------------------------------------------------------------------
       Coolant Dimensions -  Of First Fuel Block
                                      Tcold (450.0)                  Thot (450.0)
       ---------------------------------------------------------------------------------------------
       Material                       Sodium
       Name                           coolant
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] &lt;Hexagon: duct&gt;
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] ---------------------------------------------------------------------------------------------
       Duct Dimensions -  Of First Fuel Block
                                      Tcold (25.0)                   Thot (450.0)
       ---------------------------------------------------------------------------------------------
       Inner Pitch (cm)               14.922                         14.995619013690193
       Material                       HT9
       Multiplicity                   1.0                            1.0
       Name                           duct
       Outer Pitch (cm)               15.71                          15.787506681749962
       Thickness (cm)                 0.3940000                      0.3959438
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] &lt;Hexagon: intercoolant&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[impt] ---------------------------------------------------------------------------------------------
       Intercoolant Dimensions -  Of First Fuel Block
                                      Tcold (450.0)                  Thot (450.0)
       ---------------------------------------------------------------------------------------------
       Inner Pitch (cm)               15.71                          15.787506681749962
       Material                       Sodium
       Multiplicity                   1.0                            1.0
       Name                           intercoolant
       Outer Pitch (cm)               16.142                         16.142
       Thickness (cm)                 0.2160000                      0.1772467
</pre></div></div>
</div>
</section>
<section id="Modifying-the-state-of-the-reactor">
<h2><span class="section-number">5.3. </span>Modifying the state of the reactor<a class="headerlink" href="#Modifying-the-state-of-the-reactor" title="Permalink to this heading"></a></h2>
<p>Each object in the Reactor model has a bunch of <em>state parameters</em> contained in its special <code class="docutils literal notranslate"><span class="pre">.p</span></code> attribute, called its <em>Parameter Collection</em>. The state parameters are defined both by the ARMI framework and the collection of plugins. For instance, you can look at the core’s keff parameters or each individual block’s power and multi-group flux parameters like this:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">power</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">core</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">keff</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">mgFlux</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.0
0.0
None
</pre></div></div>
</div>
<p>As you might expect, the values are zero because we have not performed any physics calculations yet. We could run a physics plugin at this point to add physics state, but for this tutorial, we’ll just apply dummy data. Here’s a fake physics kernel that just sets a power distribution based on spatial location of each block (e.g. a spherical distribution):</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">midplane</span> <span class="o">=</span> <span class="n">core</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getHeight</span><span class="p">()</span><span class="o">/</span><span class="mf">2.0</span>
<span class="n">center</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">midplane</span><span class="p">])</span>
<span class="n">peakPower</span> <span class="o">=</span> <span class="mf">1e6</span>
<span class="n">mgFluxBase</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">setFakePower</span><span class="p">(</span><span class="n">core</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">core</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
            <span class="n">vol</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">getVolume</span><span class="p">()</span>
            <span class="n">coords</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">spatialLocator</span><span class="o">.</span><span class="n">getGlobalCoordinates</span><span class="p">()</span>
            <span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">coords</span><span class="o">-</span><span class="n">center</span><span class="p">))</span>
            <span class="n">fuelFlag</span> <span class="o">=</span> <span class="mi">10</span> <span class="k">if</span> <span class="n">b</span><span class="o">.</span><span class="n">isFuel</span><span class="p">()</span> <span class="k">else</span> <span class="mf">1.0</span>
            <span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">power</span> <span class="o">=</span> <span class="n">peakPower</span> <span class="o">/</span> <span class="n">r</span><span class="o">**</span><span class="mi">2</span> <span class="o">*</span> <span class="n">fuelFlag</span>
            <span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">pdens</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">power</span><span class="o">/</span><span class="n">vol</span>
            <span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">mgFlux</span> <span class="o">=</span> <span class="n">mgFluxBase</span><span class="o">*</span><span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">pdens</span>
<span class="n">setFakePower</span><span class="p">(</span><span class="n">core</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">power</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">pdens</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
603.6363986253243
0.3949368453772478
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">parent</span>
<span class="n">z</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="n">spatialLocator</span><span class="o">.</span><span class="n">getGlobalCoordinates</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">a</span><span class="p">]</span>
<span class="n">power</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">getChildParamValues</span><span class="p">(</span><span class="s1">&#39;power&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">z</span><span class="p">,</span><span class="n">power</span><span class="p">,</span><span class="s1">&#39;.-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Fake power distribution on reactor&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0.5, 1.0, &#39;Fake power distribution on reactor&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_data_model_27_1.png" src="../_images/tutorials_data_model_27_1.png" />
</div>
</div>
<p>We can take a look at the spatial distribution as well:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">armi.utils</span> <span class="kn">import</span> <span class="n">plotting</span>
<span class="c1"># Note, if you were plotting outside jupyter, you could click</span>
<span class="c1"># on different depths at the bottom to view different axial planes.</span>
<span class="n">plotting</span><span class="o">.</span><span class="n">plotBlockDepthMap</span><span class="p">(</span><span class="n">core</span><span class="p">,</span> <span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">depthIndex</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_data_model_29_0.png" src="../_images/tutorials_data_model_29_0.png" />
</div>
</div>
</section>
<section id="Modifying-number-densities">
<h2><span class="section-number">5.4. </span>Modifying number densities<a class="headerlink" href="#Modifying-number-densities" title="Permalink to this heading"></a></h2>
<p>Analysts frequently want to modify number densities. For example, if you needed to compute a coolant density coefficient, you could simply reduce the amount of coolant in the core.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sodiumBefore</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">getMass</span><span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Before: </span><span class="si">{</span><span class="n">sodiumBefore</span><span class="o">/</span><span class="mf">1e6</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MT Sodium&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">core</span><span class="o">.</span><span class="n">getBlocks</span><span class="p">():</span>      <span class="c1"># loop through all blocks</span>
    <span class="n">refDens</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s1">&#39;NA23&#39;</span><span class="p">)</span>
    <span class="n">b</span><span class="o">.</span><span class="n">setNumberDensity</span><span class="p">(</span><span class="s1">&#39;NA23&#39;</span><span class="p">,</span><span class="n">refDens</span><span class="o">*</span><span class="mf">0.98</span><span class="p">)</span> <span class="c1"># reduce Na density by 2%</span>
<span class="n">sodiumAfter</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">getMass</span><span class="p">(</span><span class="s1">&#39;NA&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;After:  </span><span class="si">{</span><span class="n">sodiumAfter</span><span class="o">/</span><span class="mf">1e6</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> MT Sodium&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Before: 2.48 MT Sodium
After:  2.43 MT Sodium
</pre></div></div>
</div>
<p>If you analyze the keff with a physics plugin before and after, the change in the <code class="docutils literal notranslate"><span class="pre">core.p.keff</span></code> param would determine your density coefficient of reactivity.</p>
</section>
<section id="Saving-state-to-disk">
<h2><span class="section-number">5.5. </span>Saving state to disk<a class="headerlink" href="#Saving-state-to-disk" title="Permalink to this heading"></a></h2>
<p>During analysis, it’s often useful to save the reactor state to disk in a database. The ARMI database package handles this, and writes it out to an <a class="reference external" href="https://en.wikipedia.org/wiki/Hierarchical_Data_Format">HDF-formatted</a> file. This is typically done automatically at each point in time in a normal simulation, and can also be done manually, like this:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dbi</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">getInterface</span><span class="p">(</span><span class="s2">&quot;database&quot;</span><span class="p">)</span>
<span class="n">dbi</span><span class="o">.</span><span class="n">initDB</span><span class="p">()</span>
<span class="n">dbi</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">writeToDB</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Opening database file at /home/runner/.armi/0-20240124205752578674/anl-afci-177.h5
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Writing to database for statepoint: /c00n00
</pre></div></div>
</div>
</section>
<section id="Fuel-management">
<h2><span class="section-number">5.6. </span>Fuel management<a class="headerlink" href="#Fuel-management" title="Permalink to this heading"></a></h2>
<p>One plugin that comes with the framework is the Fuel Handler. It attaches the Fuel Handler interface, which we can grab now to move fuel around. In a typical ARMI run, the detailed fuel management choices are specified by the user-input custom shuffle logic file. In this particular example, we will simply swap the 10 highest-power fuel assemblies with the 10 lowest-power ones.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">armi.physics.fuelCycle</span> <span class="kn">import</span> <span class="n">fuelHandlers</span>
<span class="n">fh</span> <span class="o">=</span> <span class="n">fuelHandlers</span><span class="o">.</span><span class="n">fuelHandlerFactory</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">moved</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">high</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">findAssembly</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">compareTo</span><span class="o">=</span><span class="mf">1.0e6</span><span class="p">,</span> <span class="n">blockLevelMax</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclusions</span><span class="o">=</span><span class="n">moved</span><span class="p">)</span>
    <span class="n">low</span> <span class="o">=</span> <span class="n">fh</span><span class="o">.</span><span class="n">findAssembly</span><span class="p">(</span><span class="n">param</span><span class="o">=</span><span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">compareTo</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">blockLevelMax</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exclusions</span><span class="o">=</span><span class="n">moved</span><span class="p">)</span>
    <span class="n">fh</span><span class="o">.</span><span class="n">swapAssemblies</span><span class="p">(</span><span class="n">high</span><span class="p">,</span> <span class="n">low</span><span class="p">)</span>
    <span class="n">moved</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">high</span><span class="p">,</span> <span class="n">low</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plotting</span><span class="o">.</span><span class="n">plotBlockDepthMap</span><span class="p">(</span><span class="n">core</span><span class="p">,</span> <span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">depthIndex</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="c1"># You can also plot total assembly params, which are the sum of block params</span>
<span class="n">plotting</span><span class="o">.</span><span class="n">plotFaceMap</span><span class="p">(</span><span class="n">core</span><span class="p">,</span> <span class="s2">&quot;power&quot;</span><span class="p">,</span> <span class="n">vals</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_data_model_37_0.png" src="../_images/tutorials_data_model_37_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/tutorials_data_model_37_1.png" src="../_images/tutorials_data_model_37_1.png" />
</div>
</div>
<p>We can write this new state to DB as well, since we’ve shuffled the fuel</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">timeNode</span> <span class="o">+=</span><span class="mi">1</span>
<span class="n">dbi</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">writeToDB</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
<span class="n">dbi</span><span class="o">.</span><span class="n">database</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Writing to database for statepoint: /c00n01
</pre></div></div>
</div>
</section>
<section id="Loading-from-the-database">
<h2><span class="section-number">5.7. </span>Loading from the database<a class="headerlink" href="#Loading-from-the-database" title="Permalink to this heading"></a></h2>
<p>Once you have a database, you can use it to load a Reactor object from any of the states that were written to it. First, create a Database3 object, then open it and call its <code class="docutils literal notranslate"><span class="pre">load()</span></code> method.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">armi.bookkeeping</span> <span class="kn">import</span> <span class="n">db</span>
<span class="n">databaseLocation</span> <span class="o">=</span> <span class="s2">&quot;anl-afci-177.h5&quot;</span>
<span class="n">cycle</span><span class="p">,</span> <span class="n">timeNode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span>
<span class="n">dbo</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">databaseFactory</span><span class="p">(</span><span class="n">databaseLocation</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">dbo</span><span class="p">:</span>
    <span class="c1"># Load a new reactor object from the requested cycle and time node</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">dbo</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">cycle</span><span class="p">,</span> <span class="n">timeNode</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Loading reactor state for time node (0, 1)
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Applying &lt;Migration from 0.1.2: Removes now-invalid `centers:` lines fro...
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Removing `centers:` sections.
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Applying &lt;Migration from 0.1.2: Update elemental nuclide flags....
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Initializing Mesh, Assembly Zones, and Nuclide Categories ===========
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Will expand HE, NA, SI, CR, MN, FE, NI, ZR, MO, W elementals to have natural isotopics
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `inner fuel`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: A BU GP: A&gt; so pin-to-duct gap not calculated
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `middle core fuel`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: B BU GP: A&gt; so pin-to-duct gap not calculated
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `outer core fuel`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: C BU GP: A&gt; so pin-to-duct gap not calculated
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `radial reflector`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[warn] Some component was missing in &lt;reflector block-bol-000 at ExCore XS: A BU GP: A&gt; so pin-to-duct gap not calculated
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `radial shield`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `control`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Constructing assembly `ultimate shutdown`
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
=========== Verifying Assembly Configurations ===========
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[info] Nuclide categorization for cross section temperature assignments:
       ------------------  --------------------------------------------------------------
       Nuclide Category    Nuclides
       ------------------  --------------------------------------------------------------
       Fuel                LFP38, LFP41, DUMP1, AM242M, U235, NP238, DUMP2, PU236, CM244,
                           PU240, ZR96, PU241, ZR90, PU239, HE4, CM245, LFP40, U234,
                           AM241, ZR92, ZR94, ZR91, AM243, U238, CM246, U236,
                           LFP39, CM247, NP237, CM243, LFP35, PU238, PU242, CM242
       Coolant             NA23
       Structure           MO97, CR53, C, NI58, V, W183, FE58, CR54,
                           MO96, SI28, FE56, MN55, NI64, B10, NI62, FE54,
                           W182, NI61, SI30, CR52, B11, W186, NI60, W184,
                           MO92, MO94, MO100, MO98, FE57, MO95, CR50, SI29
       ------------------  --------------------------------------------------------------
</pre></div></div>
</div>
<p>We can see that the time node is what we expect (node 1), and there is some fission product mass since we loaded from a cycle after a depletion step.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">timeNode</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">o</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">getFissileMass</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1
909142.5216630063
</pre></div></div>
</div>
<p>Having a Reactor object by itself can be very useful for all sorts of post-processing tasks. However, sometimes we may wish initialize more ARMI components to do more advanced tasks and interactive follow-on analysis. Lucky for us, the database stores the settings that were used to run the case in the first place. We can get them like this:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">dbo</span><span class="p">:</span>
    <span class="n">cs</span> <span class="o">=</span> <span class="n">dbo</span><span class="o">.</span><span class="n">loadCS</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cs</span><span class="p">[</span><span class="s2">&quot;neutronicsKernel&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

</pre></div></div>
</div>
<p>With this <code class="docutils literal notranslate"><span class="pre">Settings</span></code> object, we could create a brand new <code class="docutils literal notranslate"><span class="pre">Case</span></code> and <code class="docutils literal notranslate"><span class="pre">Operator</span></code> and do all sorts of magic. This way of interacting with ARMI is rather advanced, and beyond the scope of this tutorial.</p>
<p>That’s just a brief exploration of the data model. Hopefully it helped orient you to the underlying ARMI structure.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="walkthrough_lwr_inputs.html" class="btn btn-neutral float-left" title="4. Building input files for a thermal reactor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="making_your_first_app.html" class="btn btn-neutral float-right" title="6. Making your first ARMI-based App" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2024, TerraPower, LLC.
      <span class="lastupdated">Last updated on 2024-01-24.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>