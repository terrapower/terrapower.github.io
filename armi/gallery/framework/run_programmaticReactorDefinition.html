<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="Build Reactor Inputs Programmatically." />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://terrapower.github.io/armi/gallery/framework/run_programmaticReactorDefinition.html" />
<meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
<meta property="og:description" content="Sometimes it’s desirable to build input definitions for ARMI using code rather than by writing the textual input files directly. In ARMI you can either make the ARMI reactor objects directly, or yo..." />
<meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
<meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
<meta name="description" content="Sometimes it’s desirable to build input definitions for ARMI using code rather than by writing the textual input files directly. In ARMI you can either make the ARMI reactor objects directly, or yo..." />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Build Reactor Inputs Programmatically. &mdash; ARMI 0.3.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme_fixes.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-rendered-html.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/armiicon_16x16.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Plot a reactor facemap." href="run_reactorFacemap.html" />
    <link rel="prev" title="Listing of Material Library." href="run_materials.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ARMI
              <img src="../../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../.apidocs/modules.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #233C5B" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ARMI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Gallery</a></li>
          <li class="breadcrumb-item"><a href="index.html">Framework</a></li>
      <li class="breadcrumb-item active">Build Reactor Inputs Programmatically.</li>
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-gallery-framework-run-programmaticreactordefinition-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="build-reactor-inputs-programmatically">
<span id="sphx-glr-gallery-framework-run-programmaticreactordefinition-py"></span><h1>Build Reactor Inputs Programmatically.<a class="headerlink" href="#build-reactor-inputs-programmatically" title="Permalink to this heading"></a></h1>
<p>Sometimes it’s desirable to build input definitions for ARMI using
code rather than by writing the textual input files directly.
In ARMI you can either make the ARMI reactor objects directly,
or you can define Blueprints objects. The benefit of making Blueprints
objects is that they can in turn be used to create both ARMI reactor
objects as well as textual input itself. This is nice when you want to
have traceable input files associated with a run that was developed
programmatically (e.g. for parameter sweeps).</p>
<p>This example shows how to make Blueprints objects programmatically completely
from scratch.</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>=========== Case Information ===========
=========== Input File Information ===========
=========== Reactor Cycle Information ===========
=========== Constructing Reactor and Verifying Inputs ===========
=========== Adding Assemblies to &lt;Core: core id:139642343783008&gt; ===========
=========== Verifying Assembly Configurations ===========
=========== Summarizing Source of Material Data for &lt;Core: core id:139642343783008&gt; ===========
=========== Applying Geometry Modifications ===========
=========== Initializing Mesh, Assembly Zones, and Nuclide Categories ===========
=========== Creating Interfaces ===========
=========== Interface Stack Summary  ===========
===========  Triggering Init Event ===========
=========== 01 - main                           Init            ===========
=========== 02 - fissionProducts                Init            ===========
=========== 03 - xsGroups                       Init            ===========
=========== 04 - history                        Init            ===========
=========== 05 - report                         Init            ===========
=========== 06 - database                       Init            ===========
=========== 07 - memoryProfiler                 Init            ===========
=========== 08 - snapshot                       Init            ===========
===========  Completed Init Event ===========
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># ruff: noqa: E402</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">armi</span> <span class="kn">import</span> <span class="n">configure</span>

<span class="c1"># configure ARMI</span>
<span class="n">configure</span><span class="p">(</span><span class="n">permissive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">armi</span> <span class="kn">import</span> <span class="n">cases</span>
<span class="kn">from</span> <span class="nn">armi.reactor</span> <span class="kn">import</span> <span class="n">blueprints</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">assemblyBlueprint</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">blockBlueprint</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">componentBlueprint</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">gridBlueprint</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">isotopicOptions</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blueprints</span> <span class="kn">import</span> <span class="n">reactorBlueprint</span>
<span class="kn">from</span> <span class="nn">armi.settings</span> <span class="kn">import</span> <span class="n">caseSettings</span>
<span class="kn">from</span> <span class="nn">armi.utils</span> <span class="kn">import</span> <span class="n">plotting</span>


<span class="k">def</span> <span class="nf">buildCase</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build input components and a case.&quot;&quot;&quot;</span>
    <span class="n">bp</span> <span class="o">=</span> <span class="n">blueprints</span><span class="o">.</span><span class="n">Blueprints</span><span class="p">()</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">customIsotopics</span> <span class="o">=</span> <span class="n">isotopicOptions</span><span class="o">.</span><span class="n">CustomIsotopics</span><span class="p">()</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">nuclideFlags</span> <span class="o">=</span> <span class="n">isotopicOptions</span><span class="o">.</span><span class="n">genDefaultNucFlags</span><span class="p">()</span>

    <span class="n">components</span> <span class="o">=</span> <span class="n">buildComponents</span><span class="p">()</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">blockDesigns</span> <span class="o">=</span> <span class="n">buildBlocks</span><span class="p">(</span><span class="n">components</span><span class="p">)</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">assemDesigns</span> <span class="o">=</span> <span class="n">buildAssemblies</span><span class="p">(</span><span class="n">bp</span><span class="o">.</span><span class="n">blockDesigns</span><span class="p">)</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">gridDesigns</span> <span class="o">=</span> <span class="n">buildGrids</span><span class="p">()</span>
    <span class="n">bp</span><span class="o">.</span><span class="n">systemDesigns</span> <span class="o">=</span> <span class="n">buildSystems</span><span class="p">()</span>

    <span class="n">cs</span> <span class="o">=</span> <span class="n">caseSettings</span><span class="o">.</span><span class="n">Settings</span><span class="p">()</span>
    <span class="n">cs</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">cs</span><span class="o">.</span><span class="n">caseTitle</span> <span class="o">=</span> <span class="s2">&quot;scripted-case&quot;</span>
    <span class="n">case</span> <span class="o">=</span> <span class="n">cases</span><span class="o">.</span><span class="n">Case</span><span class="p">(</span><span class="n">cs</span><span class="o">=</span><span class="n">cs</span><span class="p">,</span> <span class="n">bp</span><span class="o">=</span><span class="n">bp</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">case</span>


<span class="k">def</span> <span class="nf">buildComponents</span><span class="p">():</span>
    <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span> <span class="o">=</span> <span class="mf">450.0</span>
    <span class="n">fuel</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;fuel&quot;</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Circle&quot;</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">217</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;Custom&quot;</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">od</span> <span class="o">=</span> <span class="mf">0.4</span>

    <span class="n">clad</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;clad&quot;</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="s2">&quot;fuel.mult&quot;</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Circle&quot;</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;HT9&quot;</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mf">0.508</span>
    <span class="n">clad</span><span class="o">.</span><span class="n">od</span> <span class="o">=</span> <span class="mf">0.5842</span>

    <span class="n">gap</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;gap&quot;</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Circle&quot;</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="s2">&quot;fuel.mult&quot;</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;Void&quot;</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="s2">&quot;fuel.od&quot;</span>
    <span class="n">gap</span><span class="o">.</span><span class="n">od</span> <span class="o">=</span> <span class="s2">&quot;clad.id&quot;</span>

    <span class="n">wire</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;wire&quot;</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="s2">&quot;fuel.mult&quot;</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Helix&quot;</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;HT9&quot;</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">od</span> <span class="o">=</span> <span class="mf">0.14224</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">axialPitch</span> <span class="o">=</span> <span class="mf">30.48</span>
    <span class="n">wire</span><span class="o">.</span><span class="n">helixDiameter</span> <span class="o">=</span> <span class="mf">0.72644</span>

    <span class="n">duct</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;duct&quot;</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Hexagon&quot;</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;HT9&quot;</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">ip</span> <span class="o">=</span> <span class="mf">11.0109</span>
    <span class="n">duct</span><span class="o">.</span><span class="n">op</span> <span class="o">=</span> <span class="mf">11.6205</span>

    <span class="n">intercoolant</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;intercoolant&quot;</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">mult</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;Hexagon&quot;</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;Sodium&quot;</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">ip</span> <span class="o">=</span> <span class="s2">&quot;duct.op&quot;</span>
    <span class="n">intercoolant</span><span class="o">.</span><span class="n">op</span> <span class="o">=</span> <span class="mf">12.01420</span>

    <span class="n">coolant</span> <span class="o">=</span> <span class="n">componentBlueprint</span><span class="o">.</span><span class="n">ComponentBlueprint</span><span class="p">()</span>
    <span class="n">coolant</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;coolant&quot;</span>
    <span class="n">coolant</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="s2">&quot;DerivedShape&quot;</span>
    <span class="n">coolant</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="s2">&quot;Sodium&quot;</span>
    <span class="n">coolant</span><span class="o">.</span><span class="n">Tinput</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>
    <span class="n">coolant</span><span class="o">.</span><span class="n">Thot</span> <span class="o">=</span> <span class="n">ISOTHERMAL_TEMPERATURE_IN_C</span>

    <span class="n">componentBlueprints</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="n">fuel</span><span class="p">,</span> <span class="n">gap</span><span class="p">,</span> <span class="n">clad</span><span class="p">,</span> <span class="n">wire</span><span class="p">,</span> <span class="n">duct</span><span class="p">,</span> <span class="n">intercoolant</span><span class="p">,</span> <span class="n">coolant</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">componentBlueprints</span>


<span class="k">def</span> <span class="nf">buildBlocks</span><span class="p">(</span><span class="n">components</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build block blueprints.&quot;&quot;&quot;</span>
    <span class="n">blocks</span> <span class="o">=</span> <span class="n">blockBlueprint</span><span class="o">.</span><span class="n">BlockKeyedList</span><span class="p">()</span>
    <span class="n">fuel</span> <span class="o">=</span> <span class="n">blockBlueprint</span><span class="o">.</span><span class="n">BlockBlueprint</span><span class="p">()</span>
    <span class="n">fuel</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;fuel&quot;</span>
    <span class="k">for</span> <span class="n">cname</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">components</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">fuel</span><span class="p">[</span><span class="n">cname</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
    <span class="n">blocks</span><span class="p">[</span><span class="n">fuel</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fuel</span>

    <span class="n">reflector</span> <span class="o">=</span> <span class="n">blockBlueprint</span><span class="o">.</span><span class="n">BlockBlueprint</span><span class="p">()</span>
    <span class="n">reflector</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;reflector&quot;</span>
    <span class="n">reflector</span><span class="p">[</span><span class="s2">&quot;coolant&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="s2">&quot;coolant&quot;</span><span class="p">]</span>
    <span class="n">reflector</span><span class="p">[</span><span class="s2">&quot;duct&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">components</span><span class="p">[</span><span class="s2">&quot;duct&quot;</span><span class="p">]</span>
    <span class="n">blocks</span><span class="p">[</span><span class="n">reflector</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">reflector</span>

    <span class="k">return</span> <span class="n">blocks</span>


<span class="k">def</span> <span class="nf">buildAssemblies</span><span class="p">(</span><span class="n">blockDesigns</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build assembly blueprints.&quot;&quot;&quot;</span>
    <span class="n">fuelBock</span><span class="p">,</span> <span class="n">reflectorBlock</span> <span class="o">=</span> <span class="n">blockDesigns</span><span class="p">[</span><span class="s2">&quot;fuel&quot;</span><span class="p">],</span> <span class="n">blockDesigns</span><span class="p">[</span><span class="s2">&quot;reflector&quot;</span><span class="p">]</span>

    <span class="n">assemblies</span> <span class="o">=</span> <span class="n">assemblyBlueprint</span><span class="o">.</span><span class="n">AssemblyKeyedList</span><span class="p">()</span>

    <span class="n">fuelAssem</span> <span class="o">=</span> <span class="n">assemblyBlueprint</span><span class="o">.</span><span class="n">AssemblyBlueprint</span><span class="p">()</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Fuel&quot;</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">specifier</span> <span class="o">=</span> <span class="s2">&quot;IC&quot;</span>

    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="n">blockBlueprint</span><span class="o">.</span><span class="n">BlockList</span><span class="p">()</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">blocks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
        <span class="p">[</span><span class="n">reflectorBlock</span><span class="p">,</span> <span class="n">fuelBock</span><span class="p">,</span> <span class="n">fuelBock</span><span class="p">,</span> <span class="n">fuelBock</span><span class="p">,</span> <span class="n">reflectorBlock</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">xsTypes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
    <span class="n">fuelAssem</span><span class="o">.</span><span class="n">axialMeshPoints</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>

    <span class="n">assemblies</span><span class="p">[</span><span class="n">fuelAssem</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">fuelAssem</span>

    <span class="n">reflectorAssem</span> <span class="o">=</span> <span class="n">assemblyBlueprint</span><span class="o">.</span><span class="n">AssemblyBlueprint</span><span class="p">()</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Reflector&quot;</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">specifier</span> <span class="o">=</span> <span class="s2">&quot;RR&quot;</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="n">blockBlueprint</span><span class="o">.</span><span class="n">BlockList</span><span class="p">()</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">blocks</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">reflectorBlock</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">xsTypes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
    <span class="n">reflectorAssem</span><span class="o">.</span><span class="n">axialMeshPoints</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">5</span>
    <span class="n">assemblies</span><span class="p">[</span><span class="n">reflectorAssem</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">reflectorAssem</span>

    <span class="k">return</span> <span class="n">assemblies</span>


<span class="k">def</span> <span class="nf">buildGrids</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build the core map grid.&quot;&quot;&quot;</span>
    <span class="n">coreGrid</span> <span class="o">=</span> <span class="n">gridBlueprint</span><span class="o">.</span><span class="n">GridBlueprint</span><span class="p">(</span><span class="s2">&quot;core&quot;</span><span class="p">)</span>
    <span class="n">coreGrid</span><span class="o">.</span><span class="n">geom</span> <span class="o">=</span> <span class="s2">&quot;hex&quot;</span>
    <span class="n">coreGrid</span><span class="o">.</span><span class="n">symmetry</span> <span class="o">=</span> <span class="s2">&quot;third periodic&quot;</span>
    <span class="n">coreGrid</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">gridBlueprint</span><span class="o">.</span><span class="n">Triplet</span><span class="p">()</span>

    <span class="n">coreGrid</span><span class="o">.</span><span class="n">latticeMap</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">         RR   RR</span>
<span class="s2">           IC   RR</span>
<span class="s2">         IC   IC   RR&quot;&quot;&quot;</span>

    <span class="n">grids</span> <span class="o">=</span> <span class="n">gridBlueprint</span><span class="o">.</span><span class="n">Grids</span><span class="p">()</span>
    <span class="n">grids</span><span class="p">[</span><span class="s2">&quot;core&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">coreGrid</span>
    <span class="k">return</span> <span class="n">grids</span>


<span class="k">def</span> <span class="nf">buildSystems</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build the core system.&quot;&quot;&quot;</span>
    <span class="n">systems</span> <span class="o">=</span> <span class="n">reactorBlueprint</span><span class="o">.</span><span class="n">Systems</span><span class="p">()</span>
    <span class="n">core</span> <span class="o">=</span> <span class="n">reactorBlueprint</span><span class="o">.</span><span class="n">SystemBlueprint</span><span class="p">(</span><span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="n">gridBlueprint</span><span class="o">.</span><span class="n">Triplet</span><span class="p">())</span>
    <span class="n">systems</span><span class="p">[</span><span class="s2">&quot;core&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">core</span>
    <span class="k">return</span> <span class="n">systems</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">case</span> <span class="o">=</span> <span class="n">buildCase</span><span class="p">()</span>
    <span class="c1"># build ARMI objects</span>
    <span class="n">o</span> <span class="o">=</span> <span class="n">case</span><span class="o">.</span><span class="n">initializeOperator</span><span class="p">()</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">plotting</span><span class="o">.</span><span class="n">plotAssemblyTypes</span><span class="p">(</span>
        <span class="k">case</span><span class="o">.</span><span class="n">bp</span><span class="p">,</span>
        <span class="kc">None</span><span class="p">,</span>
        <span class="n">showBlockAxMesh</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

    <span class="c1"># also write input files</span>
    <span class="k">case</span><span class="o">.</span><span class="n">writeInputs</span><span class="p">()</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  0.796 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-gallery-framework-run-programmaticreactordefinition-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/dee0365a387926bb08b5456d829905d8/run_programmaticReactorDefinition.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">run_programmaticReactorDefinition.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/7a2ed149c000629173db86e07302d937/run_programmaticReactorDefinition.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">run_programmaticReactorDefinition.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="run_materials.html" class="btn btn-neutral float-left" title="Listing of Material Library." accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="run_reactorFacemap.html" class="btn btn-neutral float-right" title="Plot a reactor facemap." accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2024, TerraPower, LLC.
      <span class="lastupdated">Last updated on 2024-05-20.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>