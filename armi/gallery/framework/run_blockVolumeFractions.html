

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="Computing Component Volume Fractions on a Block with Automatic Thermal Expansion" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/gallery/framework/run_blockVolumeFractions.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="Given an Block, compute the component volume fractions. Assess the change in volume of these components within the block as the temperatures of the fuel and structure components are uniformly incre..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Computing Component Volume Fractions on a Block with Automatic Thermal Expansion &mdash; ARMI 0.2.3 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../../_static/assets/jsonview.bundle.js"></script>
        <script src="../../_static/assets/jsonview_loader.js"></script>
        <script src="../../_static/sphinx-needs/libs/html/datatables.min.js"></script>
        <script src="../../_static/sphinx-needs/libs/html/datatables_loader.js"></script>
        <script src="../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Plot a chart of the nuclides" href="run_chartOfNuclides.html" />
    <link rel="prev" title="Gallery" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../requirements/index.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../.apidocs/modules.html">API Docs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Gallery</a> &raquo;</li>
        
      <li>Computing Component Volume Fractions on a Block with Automatic Thermal Expansion</li>
    
    
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-gallery-framework-run-blockvolumefractions-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="computing-component-volume-fractions-on-a-block-with-automatic-thermal-expansion">
<span id="sphx-glr-gallery-framework-run-blockvolumefractions-py"></span><h1>Computing Component Volume Fractions on a Block with Automatic Thermal Expansion<a class="headerlink" href="#computing-component-volume-fractions-on-a-block-with-automatic-thermal-expansion" title="Permalink to this headline">¶</a></h1>
<p>Given an <a class="reference internal" href="../../.apidocs/armi.reactor.blocks.html#armi.reactor.blocks.Block" title="armi.reactor.blocks.Block"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Block</span></code></a>, compute
the component volume fractions. Assess the change in volume
of these components within the block as the temperatures of
the fuel and structure components are uniformly increased.</p>
<p>Note: Thermal expansion is automatically considered with
material data defined within <a class="reference internal" href="../../.apidocs/armi.materials.html#module-armi.materials" title="armi.materials"><code class="xref py py-mod docutils literal notranslate"><span class="pre">materials</span></code></a>.</p>
<img alt="Component Volume Fractions with Automatic Thermal Expansion" class="sphx-glr-single-img" src="../../_images/sphx_glr_run_blockVolumeFractions_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Component                  Temperature, °C    Volume Fraction
-----------------------  -----------------  -----------------
&lt;Circle: fuel&gt;                         600          0.23641
&lt;Circle: clad&gt;                         450          0.0189566
&lt;Hexagon: duct&gt;                        400          0.0764606
&lt;DerivedShape: coolant&gt;                400          0.553986
&lt;Hexagon: intercoolant&gt;                400          0.114187

Updating fuel/structure components to 400.0 °C
Component                  Temperature, °C    Volume Fraction
-----------------------  -----------------  -----------------
&lt;Circle: fuel&gt;                         400          0.233214
&lt;Circle: clad&gt;                         400          0.0189313
&lt;Hexagon: duct&gt;                        400          0.0764606
&lt;DerivedShape: coolant&gt;                400          0.557207
&lt;Hexagon: intercoolant&gt;                400          0.114187

Updating fuel/structure components to 500.0 °C
Component                  Temperature, °C    Volume Fraction
-----------------------  -----------------  -----------------
&lt;Circle: fuel&gt;                         500          0.234575
&lt;Circle: clad&gt;                         500          0.0189824
&lt;Hexagon: duct&gt;                        500          0.0766673
&lt;DerivedShape: coolant&gt;                400          0.555588
&lt;Hexagon: intercoolant&gt;                400          0.114187

Updating fuel/structure components to 600.0 °C
Component                  Temperature, °C    Volume Fraction
-----------------------  -----------------  -----------------
&lt;Circle: fuel&gt;                         600          0.23641
&lt;Circle: clad&gt;                         600          0.0190348
&lt;Hexagon: duct&gt;                        600          0.0768788
&lt;DerivedShape: coolant&gt;                400          0.55349
&lt;Hexagon: intercoolant&gt;                400          0.114187

Updating fuel/structure components to 700.0 °C
Component                  Temperature, °C    Volume Fraction
-----------------------  -----------------  -----------------
&lt;Circle: fuel&gt;                         700          0.238847
&lt;Circle: clad&gt;                         700          0.0190871
&lt;Hexagon: duct&gt;                        700          0.07709
&lt;DerivedShape: coolant&gt;                400          0.550789
&lt;Hexagon: intercoolant&gt;                400          0.114187

Updating fuel/structure components to 800.0 °C
Component                  Temperature, °C    Volume Fraction
-----------------------  -----------------  -----------------
&lt;Circle: fuel&gt;                         800          0.242019
&lt;Circle: clad&gt;                         800          0.0191381
&lt;Hexagon: duct&gt;                        800          0.0772959
&lt;DerivedShape: coolant&gt;                400          0.54736
&lt;Hexagon: intercoolant&gt;                400          0.114187

Updating fuel/structure components to 900.0 °C
Component                  Temperature, °C    Volume Fraction
-----------------------  -----------------  -----------------
&lt;Circle: fuel&gt;                         900          0.246067
&lt;Circle: clad&gt;                         900          0.0191865
&lt;Hexagon: duct&gt;                        900          0.0774913
&lt;DerivedShape: coolant&gt;                400          0.543069
&lt;Hexagon: intercoolant&gt;                400          0.114187

Updating fuel/structure components to 1200.0 °C
Component                  Temperature, °C    Volume Fraction
-----------------------  -----------------  -----------------
&lt;Circle: fuel&gt;                        1200          0.264995
&lt;Circle: clad&gt;                        1200          0.0193035
&lt;Hexagon: duct&gt;                       1200          0.0779642
&lt;DerivedShape: coolant&gt;                400          0.52355
&lt;Hexagon: intercoolant&gt;                400          0.114187
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">collections</span>

<span class="kn">import</span> <span class="nn">tabulate</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">armi</span> <span class="kn">import</span> <span class="n">configure</span>

<span class="n">configure</span><span class="p">(</span><span class="n">permissive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">armi.reactor.flags</span> <span class="kn">import</span> <span class="n">Flags</span>
<span class="kn">from</span> <span class="nn">armi.reactor.tests.test_blocks</span> <span class="kn">import</span> <span class="n">buildSimpleFuelBlock</span>


<span class="k">def</span> <span class="nf">writeInitialVolumeFractions</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Write out the initial temperatures and component volume fractions.&quot;&quot;&quot;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;Component&quot;</span><span class="p">,</span> <span class="s2">&quot;Temperature, °C&quot;</span><span class="p">,</span> <span class="s2">&quot;Volume Fraction&quot;</span><span class="p">]</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="n">c</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">temperatureInC</span><span class="p">,</span> <span class="n">volFrac</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span><span class="p">,</span> <span class="n">volFrac</span> <span class="ow">in</span> <span class="n">b</span><span class="o">.</span><span class="n">getVolumeFractions</span><span class="p">()]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">tabulate</span><span class="o">.</span><span class="n">tabulate</span><span class="p">(</span><span class="n">tabular_data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">plotVolFracsWithComponentTemps</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">uniformTemps</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Plot the percent change in vol. fractions as fuel/structure temperatures are uniformly increased.&quot;&quot;&quot;</span>
    <span class="c1"># Perform uniform temperature modifications of the fuel and structural</span>
    <span class="c1"># components.</span>
    <span class="n">componentsToModify</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">getComponents</span><span class="p">([</span><span class="n">Flags</span><span class="o">.</span><span class="n">FUEL</span><span class="p">,</span> <span class="n">Flags</span><span class="o">.</span><span class="n">CLAD</span><span class="p">,</span> <span class="n">Flags</span><span class="o">.</span><span class="n">DUCT</span><span class="p">])</span>

    <span class="n">initialVols</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">relativeVols</span> <span class="o">=</span> <a href="https://docs.python.org/3/library/collections.html#collections.defaultdict" title="collections.defaultdict" class="sphx-glr-backref-module-collections sphx-glr-backref-type-py-class"><span class="n">collections</span><span class="o">.</span><span class="n">defaultdict</span></a><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">tempInC</span> <span class="ow">in</span> <span class="n">uniformTemps</span><span class="p">:</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Updating fuel/structure components to </span><span class="si">{</span><span class="n">tempInC</span><span class="si">}</span><span class="s2"> °C&quot;</span><span class="p">)</span>
        <span class="c1"># Modify the fuel/structure components to the</span>
        <span class="c1"># same uniform temperature</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">componentsToModify</span><span class="p">:</span>
            <span class="n">c</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span><span class="n">tempInC</span><span class="p">)</span>

        <span class="n">writeInitialVolumeFractions</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>

        <span class="c1"># Iterate over all components and calculate the mass</span>
        <span class="c1"># and volume fractions</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">b</span><span class="p">:</span>
            <span class="c1"># Set the initial volume fractions at the first uniform temperature</span>
            <span class="k">if</span> <span class="n">tempInC</span> <span class="o">==</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">uniformTempsInC</span></a><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">initialVols</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">getVolume</span><span class="p">()</span>

            <span class="n">relativeVols</span><span class="p">[</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">getVolume</span><span class="p">()</span> <span class="o">-</span> <span class="n">initialVols</span><span class="p">[</span><span class="n">c</span><span class="p">])</span> <span class="o">/</span> <span class="n">initialVols</span><span class="p">[</span><span class="n">c</span><span class="p">]</span> <span class="o">*</span> <span class="mf">100.0</span>
            <span class="p">)</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">b</span><span class="o">.</span><span class="n">getComponents</span><span class="p">():</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">uniformTempsInC</span></a><span class="p">,</span> <span class="n">relativeVols</span><span class="p">[</span><span class="n">c</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Component Volume Fractions with Automatic Thermal Expansion&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;% Change in Volume from </span><span class="si">{</span><a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">uniformTempsInC</span></a><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> °C&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Uniform Fuel/Structure Temperature, °C&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


<a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">uniformTempsInC</span></a> <span class="o">=</span> <span class="p">[</span><span class="mf">400.0</span><span class="p">,</span> <span class="mf">500.0</span><span class="p">,</span> <span class="mf">600.0</span><span class="p">,</span> <span class="mf">700.0</span><span class="p">,</span> <span class="mf">800.0</span><span class="p">,</span> <span class="mf">900.0</span><span class="p">,</span> <span class="mf">1200.0</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="n">buildSimpleFuelBlock</span><span class="p">()</span>

<span class="n">writeInitialVolumeFractions</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="n">plotVolFracsWithComponentTemps</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <a href="https://docs.python.org/3/library/stdtypes.html#list" title="builtins.list" class="sphx-glr-backref-module-builtins sphx-glr-backref-type-py-class sphx-glr-backref-instance"><span class="n">uniformTempsInC</span></a><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  0.201 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-gallery-framework-run-blockvolumefractions-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/09088372a105bb2c79a78edf4f7c41f5/run_blockVolumeFractions.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">run_blockVolumeFractions.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/c0ad5e593f549e6c41bf4033117ae50d/run_blockVolumeFractions.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">run_blockVolumeFractions.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="run_chartOfNuclides.html" class="btn btn-neutral float-right" title="Plot a chart of the nuclides" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../index.html" class="btn btn-neutral float-left" title="Gallery" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2022, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2022-07-19.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>