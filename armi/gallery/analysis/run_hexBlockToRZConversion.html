

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Hex block to RZ geometry conversion" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://terrapower.github.io/armi/gallery/analysis/run_hexBlockToRZConversion.html" />
<meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
<meta property="og:description" content="Often, parts of a reactor model must be transformed to a different geometry in order to perform a certain type of physics calculation. For example, in some fast reactor lattice physics calculations..." />
<meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
<meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
<meta name="description" content="Often, parts of a reactor model must be transformed to a different geometry in order to perform a certain type of physics calculation. For example, in some fast reactor lattice physics calculations..." />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hex block to RZ geometry conversion &mdash; ARMI 0.6.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme_fixes.css?v=2b77b304" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=61a4c737" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=e5fbc548" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_style.css?v=678fb11e" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/modern.css?v=803738c0" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-test-results/common.css?v=9ec2c1d5" />

  
    <link rel="shortcut icon" href="../../_static/armiicon_16x16.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=2bd037f0"></script>
      <script src="../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
      <script src="../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
      <script src="../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
      <script src="../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
      <script src="../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Hex reactor to RZ geometry conversion" href="run_hexReactorToRZ.html" />
    <link rel="prev" title="Write MCNP Material Cards" href="run_blockMcnpMaterialCard.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >

          
          
          <a href="../../index.html" class="icon icon-home">
            ARMI
              <img src="../../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qa_docs/index.html">QA Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../.apidocs/modules.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #233C5B" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">ARMI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Gallery</a></li>
          <li class="breadcrumb-item"><a href="index.html">Analysis</a></li>
      <li class="breadcrumb-item active">Hex block to RZ geometry conversion</li>
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#sphx-glr-download-gallery-analysis-run-hexblocktorzconversion-py"><span class="std std-ref">Go to the end</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="hex-block-to-rz-geometry-conversion">
<span id="sphx-glr-gallery-analysis-run-hexblocktorzconversion-py"></span><h1>Hex block to RZ geometry conversion<a class="headerlink" href="#hex-block-to-rz-geometry-conversion" title="Link to this heading">ÔÉÅ</a></h1>
<p>Often, parts of a reactor model must be transformed to a different geometry in order to
perform a certain type of physics calculation. For example, in some fast reactor lattice
physics calculations, detailed descriptions of control assemblies must be mapped to
equivalent 1-D cylindrical models.</p>
<p>This example shows how a control assembly defined in full hex-pin detail can be
automatically converted to an equivalent 1-D RZ case, including an outer ring of fuel to
drive the case.</p>
<p>This conversion includes rings for control material, gap, cladding (on both sides of each
ring of control material), coolant, duct, and fuel. The color of the plot is proportional
to the mass density.</p>
<p>Given this transformation, a 1-D lattice physics solver can be executed to compute
accurate cross sections.</p>
<p>By automating these kinds of geometry conversions, ARMI allows core designers to maintain
the design in real geometry while still performing appropriate approximations for
efficient analysis.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This uses <a class="reference internal" href="../../.apidocs/armi.reactor.converters.blockConverters.html#module-armi.reactor.converters.blockConverters" title="armi.reactor.converters.blockConverters"><code class="xref py py-mod docutils literal notranslate"><span class="pre">armi.reactor.converters.blockConverters</span></code></a>, which
currently only works on a constrained set of hex-based geometries. For your systems,
consider these an example and starting point and build your own converters as
appropriate.</p>
</div>
<ul class="sphx-glr-horizontal">
<li><img src="../../_images/sphx_glr_run_hexBlockToRZConversion_001.png" srcset="../../_images/sphx_glr_run_hexBlockToRZConversion_001.png" alt="run hexBlockToRZConversion" class = "sphx-glr-multi-img"/></li>
<li><img src="../../_images/sphx_glr_run_hexBlockToRZConversion_002.png" srcset="../../_images/sphx_glr_run_hexBlockToRZConversion_002.png" alt="run hexBlockToRZConversion" class = "sphx-glr-multi-img"/></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">armi</span><span class="w"> </span><span class="kn">import</span> <span class="n">configure</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">armi.reactor.converters</span><span class="w"> </span><span class="kn">import</span> <span class="n">blockConverters</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">armi.reactor.flags</span><span class="w"> </span><span class="kn">import</span> <span class="n">Flags</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">armi.reactor.tests</span><span class="w"> </span><span class="kn">import</span> <span class="n">test_reactors</span>

<span class="c1"># configure ARMI</span>
<span class="n">configure</span><span class="p">(</span><span class="n">permissive</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">_o</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">test_reactors</span><span class="o">.</span><span class="n">loadTestReactor</span><span class="p">()</span>

<span class="c1"># fully heterogeneous</span>
<span class="n">bFuel</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">getBlocks</span><span class="p">(</span><span class="n">Flags</span><span class="o">.</span><span class="n">FUEL</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">bControl</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">getBlocks</span><span class="p">(</span><span class="n">Flags</span><span class="o">.</span><span class="n">CONTROL</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">converter</span> <span class="o">=</span> <span class="n">blockConverters</span><span class="o">.</span><span class="n">HexComponentsToCylConverter</span><span class="p">(</span><span class="n">sourceBlock</span><span class="o">=</span><span class="n">bControl</span><span class="p">,</span> <span class="n">driverFuelBlock</span><span class="o">=</span><span class="n">bFuel</span><span class="p">,</span> <span class="n">numExternalRings</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">converter</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
<span class="n">converter</span><span class="o">.</span><span class="n">plotConvertedBlock</span><span class="p">()</span>

<span class="c1"># partially heterogeneous</span>
<span class="n">converter</span> <span class="o">=</span> <span class="n">blockConverters</span><span class="o">.</span><span class="n">HexComponentsToCylConverter</span><span class="p">(</span><span class="n">sourceBlock</span><span class="o">=</span><span class="n">bFuel</span><span class="p">,</span> <span class="n">ductHeterogeneous</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">converter</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
<span class="n">converter</span><span class="o">.</span><span class="n">plotConvertedBlock</span><span class="p">()</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  0.582 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-gallery-analysis-run-hexblocktorzconversion-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/214ec2da63951bd9a91721957c64b015/run_hexBlockToRZConversion.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">run_hexBlockToRZConversion.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/59f7eb673c7f8ecf2fb7bd3a2712f6ea/run_hexBlockToRZConversion.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">run_hexBlockToRZConversion.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="run_blockMcnpMaterialCard.html" class="btn btn-neutral float-left" title="Write MCNP Material Cards" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="run_hexReactorToRZ.html" class="btn btn-neutral float-right" title="Hex reactor to RZ geometry conversion" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2025, TerraPower, LLC.
      <span class="lastupdated">Last updated on 2025-10-03.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>