

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="4. Documenting ARMI" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/developer/documenting.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="ARMI uses the Sphinx documentation system to compile the web-based documentation from in-code docstrings and hand-created ReStructedText files. This provides several benefits: We can revise and tra..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>4. Documenting ARMI &mdash; ARMI 0.2.3 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../_static/assets/jsonview.bundle.js"></script>
        <script src="../_static/assets/jsonview_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables.min.js"></script>
        <script src="../_static/sphinx-needs/libs/html/datatables_loader.js"></script>
        <script src="../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. Parallel Code in ARMI" href="parallel_coding.html" />
    <link rel="prev" title="3. Entry Points" href="entrypoints.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="guide.html">1. Framework Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="making_armi_based_apps.html">2. Making ARMI-based Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrypoints.html">3. Entry Points</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">4. Documenting ARMI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#building-the-documentation">4.1. Building the documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-for-armi-plugins">4.2. Documentation for ARMI plugins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#linking-to-armi-documentation-from-plugins">4.2.1. Linking to ARMI documentation from plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="#automatically-building-apidocs-of-namespace-packages">4.2.2. Automatically building apidocs of namespace packages</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#updating-the-gallery">4.3. Updating the Gallery</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-jupyter-notebooks">4.4. Using Jupyter notebooks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parallel_coding.html">5. Parallel Code in ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="profiling.html">6. Profiling ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="reports.html">7. Reports in ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="standards_and_practices.html">8. Standards and Practices for Coding</a></li>
<li class="toctree-l2"><a class="reference internal" href="tooling.html">9. Tooling and Infrastructure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements/index.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../.apidocs/modules.html">API Docs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Developer Docs</a> &raquo;</li>
        
      <li><span class="section-number">4. </span>Documenting ARMI</li>
    
    
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="documenting-armi">
<h1><span class="section-number">4. </span>Documenting ARMI<a class="headerlink" href="#documenting-armi" title="Permalink to this headline">¶</a></h1>
<p>ARMI uses the <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a> documentation system to compile the
web-based documentation from in-code docstrings and hand-created
<a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html">ReStructedText files</a>.
This provides several benefits:</p>
<ul class="simple">
<li><p>We can revise and track the documentation in lock-step with the code itself, in the same
source code repository</p></li>
<li><p>We can make use of hyperlinked cross-references that stay up to date as the code is expanded
or refactored.</p></li>
<li><p>We can run specific code tests during documentation building to ensure the documentation
examples remain valid</p></li>
<li><p>We can auto-generate class diagrams based on the latest status of the code</p></li>
</ul>
<p>We use some special Sphinx plugins that run the tutorial jupyter notebooks during documentation
build with the most up-to-date code.</p>
<div class="section" id="building-the-documentation">
<h2><span class="section-number">4.1. </span>Building the documentation<a class="headerlink" href="#building-the-documentation" title="Permalink to this headline">¶</a></h2>
<p>Before building documentation, ensure that you have installed the test requirements into
your ARMI virtual environment with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip3</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">-</span><span class="n">testing</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>You also need to have the following utilities available in your PATH:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://graphviz.org/">Graphviz</a></p></li>
<li><p><a class="reference external" href="https://pandoc.org/">Pandoc</a></p></li>
</ul>
<p>If you want to build the documentation into a PDF using the Sphinx LaTeX
builder, you also need:</p>
<ul class="simple">
<li><p>LaTeX (<a class="reference external" href="https://miktex.org/">MikTeX</a> on Windows)</p></li>
<li><p><a class="reference external" href="https://imagemagick.org/">ImageMagick</a></p></li>
</ul>
<p>The documentation depends on at least one submodule as well, so you must be sure
it is available in your source tree with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">submodule</span> <span class="n">update</span> <span class="o">--</span><span class="n">init</span>
</pre></div>
</div>
<p>To build the ARMI documentation as html, go to the <code class="docutils literal notranslate"><span class="pre">doc</span></code> folder and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>This will invoke Sphinx and generate a series of html files in the
<code class="docutils literal notranslate"><span class="pre">_build/html</span></code> folder. Open up <code class="docutils literal notranslate"><span class="pre">index.html</span></code> to see the documentation from
there. A copy of the documentation is hosted online at
<a class="reference external" href="https://terrapower.github.io/armi/">https://terrapower.github.io/armi/</a>.</p>
<p>You can suggest a change to the built documentation by copying the <code class="docutils literal notranslate"><span class="pre">_build</span></code>
files to a clone of the <a class="reference external" href="https://github.com/terrapower/terrapower.github.io">documentation repository</a> with a command like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rsync</span> <span class="o">-</span><span class="n">ahv</span> <span class="o">--</span><span class="n">delete</span> <span class="n">_build</span><span class="o">/</span><span class="n">html</span><span class="o">/</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">terrapower</span><span class="o">.</span><span class="n">github</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">armi</span>
</pre></div>
</div>
</div>
<div class="section" id="documentation-for-armi-plugins">
<h2><span class="section-number">4.2. </span>Documentation for ARMI plugins<a class="headerlink" href="#documentation-for-armi-plugins" title="Permalink to this headline">¶</a></h2>
<p>The following subsections apply to documentation for ARMI plugins.</p>
<div class="section" id="linking-to-armi-documentation-from-plugins">
<h3><span class="section-number">4.2.1. </span>Linking to ARMI documentation from plugins<a class="headerlink" href="#linking-to-armi-documentation-from-plugins" title="Permalink to this headline">¶</a></h3>
<p>ARMI plugin documentation can feature rich hyperlinks to the ARMI API
documentation with the help of the <a class="reference external" href="http://www.sphinx-doc.org/en/master/usage/extensions/intersphinx.html">intersphinx Sphinx plugin</a>.  The
ARMI plugin documentation config file should add <code class="docutils literal notranslate"><span class="pre">&quot;sphinx.ext.intersphinx&quot;,</span></code>
to its active Sphinx plugin list, and change the default config to read:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">intersphinx_mapping</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;python&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;https://docs.python.org/3&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
    <span class="s2">&quot;armi&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s2">&quot;https://terrapower.github.io/armi/&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now you can link to the ARMI documentation with links like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>:doc:`armi:developer/documenting`
:py:mod:`armi.physics.executers`
</pre></div>
</div>
</div>
<div class="section" id="automatically-building-apidocs-of-namespace-packages">
<h3><span class="section-number">4.2.2. </span>Automatically building apidocs of namespace packages<a class="headerlink" href="#automatically-building-apidocs-of-namespace-packages" title="Permalink to this headline">¶</a></h3>
<p>Activating the <code class="docutils literal notranslate"><span class="pre">&quot;sphinxcontrib.apidoc&quot;,</span></code>
<a class="reference external" href="https://github.com/sphinx-contrib/apidoc">Sphinx plugin</a>
enables plugin API documentation to be built with the standard <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> Sphinx workflow. If
your ARMI plugin is a namespace package, the following extra config is required:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apidoc_extra_args</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;--implicit-namespaces&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="updating-the-gallery">
<h2><span class="section-number">4.3. </span>Updating the Gallery<a class="headerlink" href="#updating-the-gallery" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference internal" href="../gallery/index.html"><span class="doc">ARMI example gallery</span></a> is a great way to quickly
highlight neat features and uses of ARMI. To add a new item to the gallery, add
your example code (including the required docstring) to the <code class="docutils literal notranslate"><span class="pre">doc/gallery-src</span></code>
folder in the ARMI source tree. The example will be added to the gallery during
the next documentation build.</p>
</div>
<div class="section" id="using-jupyter-notebooks">
<h2><span class="section-number">4.4. </span>Using Jupyter notebooks<a class="headerlink" href="#using-jupyter-notebooks" title="Permalink to this headline">¶</a></h2>
<p>For interactive tutorials, it’s convenient to build actual Jupyter notebooks and
commit them to the documentation to be rendered by Sphinx using the nbsphinx plugin.
When this is done, notebooks without any output should be committed to the repository
so that Sphinx actually executes the notebooks with the up-to-date code when the
documentation is built. To do this, you can clean the output with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jupyter</span> <span class="n">nbconvert</span> <span class="o">--</span><span class="n">ClearOutputPreprocessor</span><span class="o">.</span><span class="n">enabled</span><span class="o">=</span><span class="kc">True</span> <span class="o">--</span><span class="n">inplace</span> <span class="n">mynotebook</span><span class="o">.</span><span class="n">ipynb</span>
</pre></div>
</div>
<p>This should clear the output and overwrite the file. If this doesn’t work, you can clear
all output cells in the notebook web interface itself before committing the file.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="parallel_coding.html" class="btn btn-neutral float-right" title="5. Parallel Code in ARMI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="entrypoints.html" class="btn btn-neutral float-left" title="3. Entry Points" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2022, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2022-03-11.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>