<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta property="og:title" content="9. Standards and Practices for Coding" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://terrapower.github.io/armi/developer/standards_and_practices.html" />
<meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
<meta property="og:description" content="The ARMI coding standards are a set of guidelines for helping to create a more consistent and clear code base. Subpart 2.7 402 of NQA-1 states, “Software design verification shall evaluate… the des..." />
<meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
<meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
<meta name="description" content="The ARMI coding standards are a set of guidelines for helping to create a more consistent and clear code base. Subpart 2.7 402 of NQA-1 states, “Software design verification shall evaluate… the des..." />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>9. Standards and Practices for Coding &mdash; ARMI 0.3.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme_fixes.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sg_gallery-rendered-html.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="10. Tooling and Infrastructure" href="tooling.html" />
    <link rel="prev" title="8. First Time Contributors Guide" href="first_time_contributors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >

          
          
          <a href="../index.html" class="icon icon-home">
            ARMI
              <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="guide.html">1. Framework Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="making_armi_based_apps.html">2. Making ARMI-based Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrypoints.html">3. Entry Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="documenting.html">4. Documenting ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel_coding.html">5. Parallel Code in ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="profiling.html">6. Profiling ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="reports.html">7. Reports in ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="first_time_contributors.html">8. First Time Contributors Guide</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">9. Standards and Practices for Coding</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code-formatting-with-black">9.1. Code formatting with Black</a></li>
<li class="toctree-l3"><a class="reference internal" href="#remove-commented-out-code">9.2. Remove commented-out code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#avoid-hard-coding-run-parameters">9.3. Avoid hard-coding run parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#avoid-the-global-keyword">9.4. Avoid the global keyword</a></li>
<li class="toctree-l3"><a class="reference internal" href="#naming-conventions">9.5. Naming conventions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#use-meaningful-names">9.5.1. Use meaningful names</a></li>
<li class="toctree-l4"><a class="reference internal" href="#general-conventions">9.5.2. General conventions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#naming-quick-reference">9.5.3. Naming quick-reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="#common-naming-conventions-within-armi">9.5.4. Common naming conventions within ARMI</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#prefer-shorter-methods">9.6. Prefer shorter methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#avoid-repeating-code">9.7. Avoid repeating code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#public-methods-should-have-docstrings">9.8. Public methods should have docstrings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unit-tests">9.9. Unit tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#import-statements">9.10. Import statements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#import-ordering">9.10.1. Import ordering</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#don-t-create-naked-exceptions">9.11. Don’t create naked exceptions.</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-model">9.12. Data model</a></li>
<li class="toctree-l3"><a class="reference internal" href="#input-files">9.13. Input files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#address-the-ruff-warnings">9.14. Address the ruff warnings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#general-do-s-and-don-ts">9.15. General do’s and don’ts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tooling.html">10. Tooling and Infrastructure</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../.apidocs/modules.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #233C5B" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Developer Docs</a></li>
      <li class="breadcrumb-item active"><span class="section-number">9. </span>Standards and Practices for Coding</li>
  <li class="wy-breadcrumbs-aside">
    
      
    
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="standards-and-practices-for-coding">
<span id="armi-stds"></span><h1><span class="section-number">9. </span>Standards and Practices for Coding<a class="headerlink" href="#standards-and-practices-for-coding" title="Permalink to this heading"></a></h1>
<p>The ARMI coding standards are a set of guidelines for helping to create a more consistent and clear code base.
Subpart 2.7 402 of <a class="reference external" href="http://nqa-1.com/files/NQA-1%20Nuclear%20Quality%20Manual.pdf">NQA-1</a> states, “Software
design verification shall evaluate… the design approach and ensure internal completeness, consistency, clarity
and correctness.” While these are required by NQA-1, the idea is that an ARMI developer, who is familiar with
these coding standards, should be able to jump from one module to another without changing their coding style.</p>
<div class="warning admonition tip">
<p class="admonition-title">Tip</p>
<p>The overall theme is: <strong>Balance clarity with conciseness.</strong></p>
</div>
<p>Just try to be as clear as possible, while using as few words as possible.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Most of the guidelines can be broken, but all deviations need to be justified. It is up to the code reviewers
to determine whether the justification was adequate.</p>
<p>Developers and reviewers should consult the standards/guidelines while writing and reviewing code to ensure
consistency. Code reviewers should make sure to be familiar with the standards, so that their comments are
consistent with other reviewers.</p>
</div>
<section id="code-formatting-with-black">
<h2><span class="section-number">9.1. </span>Code formatting with Black<a class="headerlink" href="#code-formatting-with-black" title="Permalink to this heading"></a></h2>
<p>ARMI uses the Python code formatter <a class="reference external" href="https://pypi.org/project/black/">black</a>. So while developing code in ARMI
it is important to remember to us the <code class="docutils literal notranslate"><span class="pre">black</span></code> formatter before pushing any code to the repo. All changes pushed
to ARMI on github.com will be automatically checked to see if they conform to the <code class="docutils literal notranslate"><span class="pre">black</span></code> code formatter standards.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">black</span></code> formatter provides 100% consistency in ARMI for: whitespace, line length, trailing commas, and string
formatting.</p>
</section>
<section id="remove-commented-out-code">
<h2><span class="section-number">9.2. </span>Remove commented-out code<a class="headerlink" href="#remove-commented-out-code" title="Permalink to this heading"></a></h2>
<p>If you were testing code and you commented out a block, delete it before sending it in for code review/production.
If you want to see the old code later, it will still be in the Git history.</p>
</section>
<section id="avoid-hard-coding-run-parameters">
<h2><span class="section-number">9.3. </span>Avoid hard-coding run parameters<a class="headerlink" href="#avoid-hard-coding-run-parameters" title="Permalink to this heading"></a></h2>
<p>Use the global settings object <code class="docutils literal notranslate"><span class="pre">self.cs</span></code> for most user-setable parameters that determine the run environment, etc. This
will help keep the amount of repeated code down.</p>
<p>Also, do not <strong>ever</strong> code the following things into the code: user names, passwords, or file paths on your computer. Use
environmental variables where possible and user-configurable settings elsewhere. You can also use the <code class="docutils literal notranslate"><span class="pre">armi.ROOT</span></code>
variable (for the active code directory) or <code class="docutils literal notranslate"><span class="pre">armi.RES</span></code>, and some other useful root-level variables.</p>
</section>
<section id="avoid-the-global-keyword">
<h2><span class="section-number">9.4. </span>Avoid the global keyword<a class="headerlink" href="#avoid-the-global-keyword" title="Permalink to this heading"></a></h2>
<p>At all costs, avoid use of the <code class="docutils literal notranslate"><span class="pre">global</span></code> keyword in your code. Using this keyword can, and usually does, create
extremely fragile code that is nigh-impossible to use a debugger on. Especially as part of object-oriented programming,
this is extremely lazy design. A careful reader might notice that there are several files in ARMI that are currently
using the <code class="docutils literal notranslate"><span class="pre">global</span></code> keyword. These are all schedule for a refactor to remove the use of <code class="docutils literal notranslate"><span class="pre">global</span></code>. But, for now,
changing the code would cause more annoyance for the ARMI ecosystem userbase than fixing it would. Still, all of those
instance in ARMI will be fixed soon.</p>
<p>No new uses of <code class="docutils literal notranslate"><span class="pre">global</span></code> will make it through the ARMI pull request process.</p>
</section>
<section id="naming-conventions">
<h2><span class="section-number">9.5. </span>Naming conventions<a class="headerlink" href="#naming-conventions" title="Permalink to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is a good argument to make that ARMI’s use of <code class="docutils literal notranslate"><span class="pre">camelCase</span></code> makes the code less readable than if ARMI
used <code class="docutils literal notranslate"><span class="pre">snake_case</span></code>. Unfortunately, making the switch now would affect such a large percentage of the API that
it would be more hassle for our user base than it is worth to change.</p>
</div>
<section id="use-meaningful-names">
<h3><span class="section-number">9.5.1. </span>Use meaningful names<a class="headerlink" href="#use-meaningful-names" title="Permalink to this heading"></a></h3>
<p>Use descriptive names for variables, functions, methods, classes, and files. This might mean using a longer name like
<code class="docutils literal notranslate"><span class="pre">correlationMatrix</span></code> instead of a shorter one like <code class="docutils literal notranslate"><span class="pre">cm</span></code>.</p>
</section>
<section id="general-conventions">
<h3><span class="section-number">9.5.2. </span>General conventions<a class="headerlink" href="#general-conventions" title="Permalink to this heading"></a></h3>
<p>Here are some general naming guidelines that are always applicable, but particularly applicable to public classes,
functions, and methods and their signatures (the signature includes the parameters):</p>
<ul class="simple">
<li><p>Variables that you designate as unused should be prefaced with an underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>).</p></li>
<li><p>Do not use Python <a class="reference external" href="https://realpython.com/lessons/reserved-keywords/">reserved keywords</a> as variable names.</p></li>
<li><p>Try to use names that are pronounceable. (Well-established variable names from equations are exceptable.)</p></li>
<li><p>Keep names concise and expressive. (An exception is test method names, which may be longer and more
descriptive.)</p></li>
<li><p>Avoid abbreviations and acronyms, unless they are well understood by subject-matter experts (e.g. DB for database,
XS for cross-sections, BU for burn up). When using acronyms or abbreviations with <code class="docutils literal notranslate"><span class="pre">camelCase</span></code> or <code class="docutils literal notranslate"><span class="pre">PascalCase</span></code>:</p>
<ul>
<li><p>Use the same case for two-letter acronyms/abbreviations (e.g. <code class="docutils literal notranslate"><span class="pre">diskIO</span></code>, <code class="docutils literal notranslate"><span class="pre">ioOperation</span></code>)</p></li>
<li><p>Use different case for acronyms/abbreviations with more than two characters (e.g. <code class="docutils literal notranslate"><span class="pre">renderHtml()</span></code>, <code class="docutils literal notranslate"><span class="pre">path</span></code>)</p></li>
</ul>
</li>
</ul>
<p>For consistency, use the following naming conventions:</p>
<dl>
<dt>package names</dt><dd><p>Python packages, i.e. folders with an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>, <strong>shall</strong> use <code class="docutils literal notranslate"><span class="pre">camelCase</span></code>.</p>
</dd>
<dt>module names</dt><dd><p>Python modules, i.e. python files, <strong>shall</strong> use <code class="docutils literal notranslate"><span class="pre">camelCase</span></code>.</p>
<p><strong>Caveat:</strong> Test modules are prefixed with <code class="docutils literal notranslate"><span class="pre">test_</span></code>.</p>
</dd>
<dt>module constants</dt><dd><p>Module-level “constants” <strong>shall</strong> be all capitals with an underscore separating words.</p>
</dd>
<dt>function names</dt><dd><p>Functions <strong>shall</strong> use <code class="docutils literal notranslate"><span class="pre">camelCase</span></code>. If the function is only intended to be used within that module, prefix
it with a single leading underscore to indicate it is “module protected.”</p>
</dd>
<dt>variable names</dt><dd><p>Use <code class="docutils literal notranslate"><span class="pre">camelCase</span></code>. In the odd scenario that the variable is not used (e.g. a method returns a
tuple and you only want the first item), prefix it with a single leading underscore to indicate it is
“module protected.”</p>
</dd>
<dt>class names</dt><dd><p>Classes <strong>shall</strong> use <code class="docutils literal notranslate"><span class="pre">PascalCase</span></code>. If the class is only intended to be inherited by other classes within
the module, prefix the class name with an underscore to indicate it is “module protected.”</p>
</dd>
<dt>class attribute, instance attribute and method names</dt><dd><p>Use <code class="docutils literal notranslate"><span class="pre">camelCase</span></code>. If the method is only intended to be used within that module, prefix it with a single
leading underscore to indicate it is “class protected.”</p>
</dd>
</dl>
</section>
<section id="naming-quick-reference">
<h3><span class="section-number">9.5.3. </span>Naming quick-reference<a class="headerlink" href="#naming-quick-reference" title="Permalink to this heading"></a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 30%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item to be named</p></th>
<th class="head"><p>Public</p></th>
<th class="head"><p>Private</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>package</p>
<p>(folder with an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code>)</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">packageName</span></code></p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-odd"><td><p>module</p>
<p>(a <code class="docutils literal notranslate"><span class="pre">.py</span></code> file)</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">moduleName</span></code></p></td>
<td><p>N/A</p></td>
</tr>
<tr class="row-even"><td><p>module constant</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">SPEED_OF_LIGHT_IN_METERS_PER_SECOND</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_ONE_OVER_PI</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>method or function</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">doSomeAction()</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_doSomeAction()</span></code></p></td>
</tr>
<tr class="row-even"><td><p>class or instance attribute</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">assemblies</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_assemblies</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>variable names</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">linearHeatGenerationRate</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">_unusedDescription</span></code></p>
<p>There are not “private” variables, use this for an unused variable.</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="common-naming-conventions-within-armi">
<h3><span class="section-number">9.5.4. </span>Common naming conventions within ARMI<a class="headerlink" href="#common-naming-conventions-within-armi" title="Permalink to this heading"></a></h3>
<p>Single character variable names are not usually “clear” or “concise”; however, the following variables are a
well-established convention within ARMI and should be used by developers:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">r</span></code> when referring to a reactor, and</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">o</span></code> when referring to a operator</p></li>
</ul>
</div></blockquote>
<p>Other names are also consistently used throughout ARMI for specific objects:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cs</span></code> when referring to a :py:class:<code class="docutils literal notranslate"><span class="pre">armi.settings.Settings</span></code> class; this should not be confused with
the <code class="docutils literal notranslate"><span class="pre">.settings</span></code> attribute of <code class="docutils literal notranslate"><span class="pre">ArmiObject</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lib</span></code> when referring to a cross section library (would have been better as <code class="docutils literal notranslate"><span class="pre">xsLib</span></code>)</p></li>
</ul>
</section>
</section>
<section id="prefer-shorter-methods">
<h2><span class="section-number">9.6. </span>Prefer shorter methods<a class="headerlink" href="#prefer-shorter-methods" title="Permalink to this heading"></a></h2>
<p>A method should have one clear purpose. If you are writing a method that does one thing after the other,
break it up into multiple methods and have a primary method call them in order. If your method is longer
than 100 lines, see if you can’t break it up. This does a few things:</p>
<ol class="arabic simple">
<li><p>It makes the code easier to read.</p></li>
<li><p>It makes the code chunks more reusable.</p></li>
<li><p>It makes the code easier to test.</p></li>
<li><p>It makes the code easier to profile, for performance.</p></li>
</ol>
</section>
<section id="avoid-repeating-code">
<h2><span class="section-number">9.7. </span>Avoid repeating code<a class="headerlink" href="#avoid-repeating-code" title="Permalink to this heading"></a></h2>
<p>In other words, don’t repeat yourself. (<a class="reference external" href="https://en.wikipedia.org/wiki/Don't_repeat_yourself">D. R. Y.</a>).
Repetitious code is harder to read, and harderd for others to update. If you ever find yourself copying and pasting
code, consider pulling the repeated code out into it’s own function, or using a loop.</p>
</section>
<section id="public-methods-should-have-docstrings">
<h2><span class="section-number">9.8. </span>Public methods should have docstrings<a class="headerlink" href="#public-methods-should-have-docstrings" title="Permalink to this heading"></a></h2>
<p>Always create the <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/example.html">proper docstrings</a> for all public
functions and public classes.</p>
</section>
<section id="unit-tests">
<h2><span class="section-number">9.9. </span>Unit tests<a class="headerlink" href="#unit-tests" title="Permalink to this heading"></a></h2>
<p>All ARMI developers are required to write unit tests.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If you add a new function to the code base, you are required to add unit tests to cover that function.</p>
</div>
<p>ARMI uses the <code class="docutils literal notranslate"><span class="pre">pytest</span></code> library to drive tests, therefore tests need to be runnable from the commandline by
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pytest</span> <span class="pre">armi</span></code>. Furthermore, for consistency:</p>
<ul class="simple">
<li><p>Each individual unit test should take under 10 seconds, on a modern laptop.</p></li>
<li><p>All unit tests should be placed into a separate module from production code that is prefixed with <code class="docutils literal notranslate"><span class="pre">test_</span></code>.</p></li>
<li><p>All unit tests should be written in object-oriented fashion, inheriting from <code class="docutils literal notranslate"><span class="pre">unittest.TestCase</span></code>.</p></li>
<li><p>All test method names should start with <code class="docutils literal notranslate"><span class="pre">test_</span></code>.</p></li>
<li><p>All test method names should be descriptive. If the test method is not descriptive enough, add a docstring.</p></li>
<li><p>Unit tests should have at least one assertion.</p></li>
</ul>
</section>
<section id="import-statements">
<h2><span class="section-number">9.10. </span>Import statements<a class="headerlink" href="#import-statements" title="Permalink to this heading"></a></h2>
<p>Python allows many variations on the import statement, including relative imports, renaming and others. We prefer:</p>
<ol class="arabic simple">
<li><p>one import per line,</p></li>
<li><p>no relative imports</p></li>
<li><p>no periods</p></li>
<li><p>explicit module/namespace usage</p></li>
</ol>
<section id="import-ordering">
<h3><span class="section-number">9.10.1. </span>Import ordering<a class="headerlink" href="#import-ordering" title="Permalink to this heading"></a></h3>
<p>For consistency, import packages in this order:</p>
<ol class="arabic simple">
<li><p>Python built-in packages</p></li>
<li><p>External third-party packages</p></li>
<li><p>ARMI modules</p></li>
</ol>
<p>Place a single line between each of these groups, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="kn">import</span> <span class="nn">os</span>
<span class="linenos">2</span><span class="kn">import</span> <span class="nn">math</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="linenos">5</span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span>
<span class="linenos">6</span>
<span class="linenos">7</span><span class="kn">from</span> <span class="nn">armi</span> <span class="kn">import</span> <span class="n">runLog</span>
</pre></div>
</div>
</section>
</section>
<section id="don-t-create-naked-exceptions">
<h2><span class="section-number">9.11. </span>Don’t create naked exceptions.<a class="headerlink" href="#don-t-create-naked-exceptions" title="Permalink to this heading"></a></h2>
<p>When creating <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">except</span></code> blocks, a naked exception is when the <code class="docutils literal notranslate"><span class="pre">except</span></code> command is not
followed by a specific exception type. Naked exceptions hide a lot of sins, particularly unexpected
bugs. <a class="reference external" href="http://www.wilfred.me.uk/blog/2013/11/03/no-naked-excepts/">This article</a> explains the concept well,
as well as a few exceptions to this general rule.</p>
<p>Examples:</p>
<p>Bad</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">stuff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">except</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">runLog</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Some error occurred in stuff().&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Good (for one exception type)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">stuff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">runLog</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Some error occurred in stuff().&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Good (for multiple exception types)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">stuff</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">except</span> <span class="p">(</span><span class="ne">ZeroDivisionError</span><span class="p">,</span> <span class="ne">FloatingPointError</span><span class="p">):</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">runLog</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Some error occurred in stuff().&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="data-model">
<h2><span class="section-number">9.12. </span>Data model<a class="headerlink" href="#data-model" title="Permalink to this heading"></a></h2>
<p>Any reactor state information that is created by an <code class="docutils literal notranslate"><span class="pre">Interface</span></code> should be stored in the ARMI data model. The goal
is that given minimal information (i.e. case settings and blueprints) ARMI should be able to load an entire reactor
simulation from a given database. If you add state data to your modeling that isn’t stored in the reactor, or add
new input files, you will break this paradigm and make everyone’s life just a little bit harder.</p>
</section>
<section id="input-files">
<h2><span class="section-number">9.13. </span>Input files<a class="headerlink" href="#input-files" title="Permalink to this heading"></a></h2>
<p>ARMI developers <strong>shall</strong> use one of the following well-defined, Python-supported, input file formats.</p>
<dl class="simple">
<dt>.json</dt><dd><p>JSON files are used for a variety of data-object representations. There are some limitations of JSON, in that it
does not easily support comments. JSON is also very strict.</p>
</dd>
<dt>.yaml</dt><dd><p>YAML files are like JSON files but can have comments in them.</p>
</dd>
</dl>
</section>
<section id="address-the-ruff-warnings">
<h2><span class="section-number">9.14. </span>Address the ruff warnings<a class="headerlink" href="#address-the-ruff-warnings" title="Permalink to this heading"></a></h2>
<p>Our pull request system integrates with the automatic code checker, ruff. Any new code you add must have
zero ruff warnings or errors.</p>
</section>
<section id="general-do-s-and-don-ts">
<h2><span class="section-number">9.15. </span>General do’s and don’ts<a class="headerlink" href="#general-do-s-and-don-ts" title="Permalink to this heading"></a></h2>
<dl class="simple">
<dt>do not use <code class="docutils literal notranslate"><span class="pre">print</span></code></dt><dd><p>ARMI code should not use the <code class="docutils literal notranslate"><span class="pre">print</span></code> function; use one of the methods within <code class="docutils literal notranslate"><span class="pre">armi.runLog</span></code>.</p>
</dd>
<dt>Do not add new <code class="docutils literal notranslate"><span class="pre">TODO</span></code> statements in your commits and PRs.</dt><dd><p>If your new <code class="docutils literal notranslate"><span class="pre">TODO</span></code> statement is important, it should be a GitHub Issue. Yes, we have existing <code class="docutils literal notranslate"><span class="pre">TODO</span></code> statements in the code, those are relic and need to be removed. Also, never mark the code with <code class="docutils literal notranslate"><span class="pre">FIXME</span></code> or <code class="docutils literal notranslate"><span class="pre">XXX`</span></code>; open a ticket.</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="first_time_contributors.html" class="btn btn-neutral float-left" title="8. First Time Contributors Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tooling.html" class="btn btn-neutral float-right" title="10. Tooling and Infrastructure" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2024, TerraPower, LLC.
      <span class="lastupdated">Last updated on 2024-04-05.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>