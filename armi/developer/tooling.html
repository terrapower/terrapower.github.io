

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta property="og:title" content="7. Tooling and infrastructure" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://terrapower.github.io/armi/developer/tooling.html" />
  <meta property="og:site_name" content="Advanced Reactor Modeling Interface" />
  <meta property="og:description" content="Tooling and infrastructure: Packaging and dependency management: The process of packaging and Python projects and managing their dependencies is somewhat challenging, nuanced, and in the opinion of..." />
  <meta property="og:image" content="https://terrapower.github.io/armi/_static/armiSchematicView.png" />
  <meta property="og:image:alt" content="Advanced Reactor Modeling Interface" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>7. Tooling and infrastructure &mdash; ARMI 0.1.7 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="News" href="../blog/index.html" />
    <link rel="prev" title="6. Reports in ARMI" href="reports.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.1.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Docs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Docs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="guide.html">1. Framework Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="making_armi_based_apps.html">2. Making ARMI-based Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="entrypoints.html">3. Entry Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="documenting.html">4. Documenting ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="profiling.html">5. Profiling ARMI</a></li>
<li class="toctree-l2"><a class="reference internal" href="reports.html">6. Reports in ARMI</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">7. Tooling and infrastructure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#packaging-and-dependency-management">7.1. Packaging and dependency management</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-level-logging">7.2. Module-Level Logging</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../blog/index.html">News</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../.apidocs/modules.html">API Docs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Developer Docs</a> &raquo;</li>
        
      <li>7. Tooling and infrastructure</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            
              <a href="https://github.com/terrapower/armi/blob/master/doc/developer/tooling.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="tooling-and-infrastructure">
<h1>7. Tooling and infrastructure<a class="headerlink" href="#tooling-and-infrastructure" title="Permalink to this headline">¶</a></h1>
<div class="section" id="packaging-and-dependency-management">
<h2>7.1. Packaging and dependency management<a class="headerlink" href="#packaging-and-dependency-management" title="Permalink to this headline">¶</a></h2>
<p>The process of packaging and Python projects and managing their dependencies is
somewhat challenging, nuanced, and in the opinion of the author, poorly-documented.
We attempt to follow existing conventions, where they exist, and the contents of our
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code> follow existing conventions as possible. Of particular note is the way that
we express our dependencies. In this, we take inspiration from <a class="reference external" href="https://caremad.io/posts/2013/07/setup-vs-requirement/">this fantastic article</a>
about dependecy management in Python projects.</p>
<p>The main points here are that the packages listed in the <code class="docutils literal notranslate"><span class="pre">install_requires</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">setup()</span></code> are meant to express, as abstractly as possible, the packages that need to
be installed <strong>somehow</strong> for the package to work. In addition, <code class="docutils literal notranslate"><span class="pre">extras_require</span></code> can be
used to specify other packages that are not strictly required, but if installed enable
extra functionality. On the other hand, <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> exists to describe a
complete environment more specifically, potentially including extra arguments to <code class="docutils literal notranslate"><span class="pre">pip</span></code>
to control its behavior. Dependencies specified in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> should include version
bounds sparingly, only when needed to ensure compatibility, whereas <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>
may sometimes point to an alternative package index, and include strict version bounds
for all dependencies.</p>
<p>A common source of concern is that the list of dependencies would be duplicated between
<code class="docutils literal notranslate"><span class="pre">setup.py</span></code> and <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>. In our particular case, ARMI does not benefit
from pointing to special package indices, and most version bounds are semantic. We
therefore follow the recommendation in the above article of including in
<code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> a simple <code class="docutils literal notranslate"><span class="pre">-e</span> <span class="pre">.</span></code>. This tells pip to install <code class="docutils literal notranslate"><span class="pre">armi</span></code> itself,
deferring to <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> for a list of requiremed dependencies. Non-semantic version
bounds, such as those used to avoid bugs in the dependency, should be specified in
<code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code>, rather than <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>. ARMI itself has several requirements
files, located at the root of the project, which can be used as jumping-off points for
more complex scenarios.</p>
</div>
<div class="section" id="module-level-logging">
<h2>7.2. Module-Level Logging<a class="headerlink" href="#module-level-logging" title="Permalink to this headline">¶</a></h2>
<p>In most of the modules in <code class="docutils literal notranslate"><span class="pre">armi</span></code>, you will see logging using the <code class="docutils literal notranslate"><span class="pre">runLog</span></code> module.
This is a custom, global logging object provided by the import:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">armi</span> <span class="kn">import</span> <span class="n">runLog</span>
</pre></div>
</div>
<p>If you want a logger specific to a single module, say to provide debug logging for only
one module, that functionality is provided by what might look like a bare Python logging
import, but is actually calling the same underlying <code class="docutils literal notranslate"><span class="pre">armi</span></code> logging tooling:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="n">runLog</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
</pre></div>
</div>
<p>In either case, you can then log using the same, easy interface:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">runLog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;information here&#39;</span><span class="p">)</span>
<span class="n">runLog</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;extra error info here&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, you can change the logging level in either above scenario by doing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">runLog</span><span class="o">.</span><span class="n">setVerbosity</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="n">runLog</span><span class="o">.</span><span class="n">setVerbosity</span><span class="p">(</span><span class="s1">&#39;debug&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../blog/index.html" class="btn btn-neutral float-right" title="News" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="reports.html" class="btn btn-neutral float-left" title="6. Reports in ARMI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2021, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2021-10-24.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>