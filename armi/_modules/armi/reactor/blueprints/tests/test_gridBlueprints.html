

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>armi.reactor.blueprints.tests.test_gridBlueprints &mdash; ARMI 0.6.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/css/theme_fixes.css?v=2b77b304" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/graphviz.css?v=fd3f3429" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sg_gallery.css?v=61a4c737" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sg_gallery-dataframe.css?v=e5fbc548" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-needs/common_css/need_style.css?v=678fb11e" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-needs/modern.css?v=803738c0" />
      <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-test-results/common.css?v=9ec2c1d5" />

  
    <link rel="shortcut icon" href="../../../../../_static/armiicon_16x16.ico"/>
      <script src="../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../_static/documentation_options.js?v=1c28bd9a"></script>
      <script src="../../../../../_static/doctools.js?v=9a2dae69"></script>
      <script src="../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script src="../../../../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
      <script src="../../../../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
      <script src="../../../../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
      <script src="../../../../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
      <script src="../../../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script src="../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >

          
          
          <a href="../../../../../index.html" class="icon icon-home">
            ARMI
              <img src="../../../../../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../qa_docs/index.html">QA Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../.apidocs/modules.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #233C5B" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">ARMI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../../../armi.html">armi</a></li>
          <li class="breadcrumb-item"><a href="../../../reactor.html">armi.reactor</a></li>
          <li class="breadcrumb-item"><a href="../../blueprints.html">armi.reactor.blueprints</a></li>
      <li class="breadcrumb-item active">armi.reactor.blueprints.tests.test_gridBlueprints</li>
  <li class="wy-breadcrumbs-aside">
    
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for armi.reactor.blueprints.tests.test_gridBlueprints</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2019 TerraPower, LLC</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="sd">&quot;&quot;&quot;Tests for grid blueprints.&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">io</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">unittest</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">armi</span><span class="w"> </span><span class="kn">import</span> <span class="n">configure</span><span class="p">,</span> <span class="n">isConfigured</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">isConfigured</span><span class="p">():</span>
    <span class="n">configure</span><span class="p">()</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">armi.reactor.blueprints</span><span class="w"> </span><span class="kn">import</span> <span class="n">Blueprints</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">armi.reactor.blueprints.gridBlueprint</span><span class="w"> </span><span class="kn">import</span> <span class="n">Grids</span><span class="p">,</span> <span class="n">Pitch</span><span class="p">,</span> <span class="n">saveToStream</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">armi.utils.customExceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">InputError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">armi.utils.directoryChangers</span><span class="w"> </span><span class="kn">import</span> <span class="n">TemporaryDirectoryChanger</span>

<span class="n">LATTICE_BLUEPRINT</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">control:</span>
<span class="s2">    geom: hex_corners_up</span>
<span class="s2">    symmetry: full</span>
<span class="s2">    lattice pitch: </span>
<span class="s2">      hex: 1.2</span>
<span class="s2">    lattice map: |</span>
<span class="s2">       - - - - - - - - - 1 1 1 1 1 1 1 1 1 4</span>
<span class="s2">        - - - - - - - - 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">         - - - - - - - 1 8 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">          - - - - - - 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">           - - - - - 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">            - - - - 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">             - - - 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">              - - 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">               - 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">                7 1 1 1 1 1 1 1 1 0 1 1 1 1 1 1 1 1 1</span>
<span class="s2">                 1 1 1 1 1 1 1 1 2 1 1 1 1 1 1 1 1 1</span>
<span class="s2">                  1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">                   1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">                    1 1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">                     1 1 1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">                      1 1 1 1 1 1 1 1 1 3 1 1 1</span>
<span class="s2">                       1 1 1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">                        1 6 1 1 1 1 1 1 1 1 1</span>
<span class="s2">                         1 1 1 1 1 1 1 1 1 1</span>
<span class="s2">pins:</span>
<span class="s2">  geom: hex</span>
<span class="s2">  symmetry: full</span>
<span class="s2">  lattice pitch: </span>
<span class="s2">    hex: 1.3</span>
<span class="s2">  lattice map: |</span>
<span class="s2">    -   -   FP</span>
<span class="s2">      -   FP  FP</span>
<span class="s2">    -   CL  CL  CL</span>
<span class="s2">      FP  FP  FP  FP</span>
<span class="s2">    FP  FP  FP  FP  FP</span>
<span class="s2">      CL  CL  CL  CL</span>
<span class="s2">    FP  FP  FP  FP  FP</span>
<span class="s2">      FP  FP  FP  FP</span>
<span class="s2">    CL  CL  CL  CL  CL</span>
<span class="s2">      FP  FP  FP  FP</span>
<span class="s2">    FP  FP  FP  FP  FP</span>
<span class="s2">      CL  CL  CL  CL</span>
<span class="s2">    FP  FP  FP  FP  FP</span>
<span class="s2">      FP  FP  FP  FP</span>
<span class="s2">        CL  CL  CL</span>
<span class="s2">          FP  FP</span>
<span class="s2">            FP</span>

<span class="s2">sfp:</span>
<span class="s2">    geom: cartesian</span>
<span class="s2">    symmetry: full</span>
<span class="s2">    lattice map: |</span>
<span class="s2">        2 2 2 2 2</span>
<span class="s2">        2 1 1 1 2</span>
<span class="s2">        2 1 3 1 2</span>
<span class="s2">        2 3 1 1 2</span>
<span class="s2">        2 2 2 2 2</span>

<span class="s2">sfp quarter:</span>
<span class="s2">    geom: cartesian</span>
<span class="s2">    symmetry: quarter through center assembly</span>
<span class="s2">    lattice map: |</span>
<span class="s2">        2 2 2 2 2</span>
<span class="s2">        2 1 1 1 2</span>
<span class="s2">        2 1 3 1 2</span>
<span class="s2">        2 3 1 1 2</span>
<span class="s2">        2 2 2 2 2</span>

<span class="s2">sfp quarter even:</span>
<span class="s2">    geom: cartesian</span>
<span class="s2">    symmetry: quarter core</span>
<span class="s2">    lattice map: |</span>
<span class="s2">        2 2 2 2 2</span>
<span class="s2">        2 1 1 1 2</span>
<span class="s2">        2 1 3 1 2</span>
<span class="s2">        2 3 1 1 2</span>
<span class="s2">        2 2 2 2 2</span>

<span class="s2">sfp even:</span>
<span class="s2">    geom: cartesian</span>
<span class="s2">    symmetry: full</span>
<span class="s2">    lattice map: |</span>
<span class="s2">        1 2 2 2 2 2</span>
<span class="s2">        1 2 1 1 1 2</span>
<span class="s2">        1 2 1 4 1 2</span>
<span class="s2">        1 2 2 1 1 2</span>
<span class="s2">        1 2 2 2 2 2</span>
<span class="s2">        1 1 1 1 1 1</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">RZT_BLUEPRINT</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">rzt_core:</span>
<span class="s2">    geom: thetarz</span>
<span class="s2">    symmetry: eighth core periodic</span>
<span class="s2">    grid bounds:</span>
<span class="s2">        r:</span>
<span class="s2">            - 0.0</span>
<span class="s2">            - 14.2857142857</span>
<span class="s2">            - 28.5714285714</span>
<span class="s2">            - 42.8571428571</span>
<span class="s2">            - 57.1428571429</span>
<span class="s2">            - 71.4285714286</span>
<span class="s2">            - 85.7142857143</span>
<span class="s2">            - 100.001</span>
<span class="s2">            - 115.001</span>
<span class="s2">            - 130.001</span>
<span class="s2">        theta:</span>
<span class="s2">            - 0.0</span>
<span class="s2">            - 0.11556368446681414</span>
<span class="s2">            - 0.2311273689343264</span>
<span class="s2">            - 0.34669105340061696</span>
<span class="s2">            - 0.43870710999683127</span>
<span class="s2">            - 0.5542707944631219</span>
<span class="s2">            - 0.6698344789311578</span>
<span class="s2">            - 0.7853981633974483</span>
<span class="s2">    grid contents:</span>
<span class="s2">        [0,0]: assembly1_1 fuel</span>
<span class="s2">        [0,1]: assembly1_2 fuel</span>
<span class="s2">        [0,2]: assembly1_3 fuel</span>
<span class="s2">        [0,3]: assembly1_4 fuel</span>
<span class="s2">        [0,4]: assembly1_5 fuel</span>
<span class="s2">        [0,5]: assembly1_6 fuel</span>
<span class="s2">        [0,6]: assembly1_7 fuel</span>

<span class="s2">        [1,0]: assembly2_1 fuel</span>
<span class="s2">        [1,1]: assembly2_2 fuel</span>
<span class="s2">        [1,2]: assembly2_3 fuel</span>
<span class="s2">        [1,3]: assembly2_4 fuel</span>
<span class="s2">        [1,4]: assembly2_5 fuel</span>
<span class="s2">        [1,5]: assembly2_6 fuel</span>
<span class="s2">        [1,6]: assembly2_7 fuel</span>

<span class="s2">        [2,0]: assembly3_1 fuel</span>
<span class="s2">        [2,1]: assembly3_2 fuel</span>
<span class="s2">        [2,2]: assembly3_3 fuel</span>
<span class="s2">        [2,3]: assembly3_4 fuel</span>
<span class="s2">        [2,4]: assembly3_5 fuel</span>
<span class="s2">        [2,5]: assembly3_6 fuel</span>
<span class="s2">        [2,6]: assembly3_7 fuel</span>

<span class="s2">        [3,0]: assembly4_1 fuel</span>
<span class="s2">        [3,1]: assembly4_2 fuel</span>
<span class="s2">        [3,2]: assembly4_3 fuel</span>
<span class="s2">        [3,3]: assembly4_4 fuel</span>
<span class="s2">        [3,4]: assembly4_5 fuel</span>
<span class="s2">        [3,5]: assembly4_6 fuel</span>
<span class="s2">        [3,6]: assembly4_7 fuel</span>

<span class="s2">        [4,0]: assembly5_1 fuel</span>
<span class="s2">        [4,1]: assembly5_2 fuel</span>
<span class="s2">        [4,2]: assembly5_3 fuel</span>
<span class="s2">        [4,3]: assembly5_4 fuel</span>
<span class="s2">        [4,4]: assembly5_5 fuel</span>
<span class="s2">        [4,5]: assembly5_6 fuel</span>
<span class="s2">        [4,6]: assembly5_7 fuel</span>

<span class="s2">        [5,0]: assembly6_1 fuel</span>
<span class="s2">        [5,1]: assembly6_2 fuel</span>
<span class="s2">        [5,2]: assembly6_3 fuel</span>
<span class="s2">        [5,3]: assembly6_4 fuel</span>
<span class="s2">        [5,4]: assembly6_5 fuel</span>
<span class="s2">        [5,5]: assembly6_6 fuel</span>
<span class="s2">        [5,6]: assembly6_7 fuel</span>

<span class="s2">        [6,0]: assembly7_1 fuel</span>
<span class="s2">        [6,1]: assembly7_2 fuel</span>
<span class="s2">        [6,2]: assembly7_3 fuel</span>
<span class="s2">        [6,3]: assembly7_4 fuel</span>
<span class="s2">        [6,4]: assembly7_5 fuel</span>
<span class="s2">        [6,5]: assembly7_6 fuel</span>
<span class="s2">        [6,6]: assembly7_7 fuel</span>

<span class="s2">        [7,0]: assembly8_1 fuel</span>
<span class="s2">        [7,1]: assembly8_2 fuel</span>
<span class="s2">        [7,2]: assembly8_3 fuel</span>
<span class="s2">        [7,3]: assembly8_4 fuel</span>
<span class="s2">        [7,4]: assembly8_5 fuel</span>
<span class="s2">        [7,5]: assembly8_6 fuel</span>
<span class="s2">        [7,6]: assembly8_7 fuel</span>

<span class="s2">        [8,0]: assembly9_1 fuel</span>
<span class="s2">        [8,1]: assembly9_2 fuel</span>
<span class="s2">        [8,2]: assembly9_3 fuel</span>
<span class="s2">        [8,3]: assembly9_4 fuel</span>
<span class="s2">        [8,4]: assembly9_5 fuel</span>
<span class="s2">        [8,5]: assembly9_6 fuel</span>
<span class="s2">        [8,6]: assembly9_7 fuel</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">SMALL_HEX</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;core:</span>
<span class="s2">  geom: hex</span>
<span class="s2">  symmetry: third periodic</span>
<span class="s2">  lattice map: |</span>
<span class="s2">    F</span>
<span class="s2">     F</span>
<span class="s2">    F F</span>
<span class="s2">     F</span>
<span class="s2">    F F</span>
<span class="s2">pins:</span>
<span class="s2">  geom: hex</span>
<span class="s2">  symmetry: full</span>
<span class="s2">  lattice map: |</span>
<span class="s2">    -   -   FP</span>
<span class="s2">      -   FP  FP</span>
<span class="s2">    -   CL  CL  CL</span>
<span class="s2">      FP  FP  FP  FP</span>
<span class="s2">    FP  FP  FP  FP  FP</span>
<span class="s2">      CL  CL  CL  CL</span>
<span class="s2">    FP  FP  FP  FP  FP</span>
<span class="s2">      FP  FP  FP  FP</span>
<span class="s2">    CL  CL  CL  CL  CL</span>
<span class="s2">      FP  FP  FP  FP</span>
<span class="s2">    FP  FP  FP  FP  FP</span>
<span class="s2">      CL  CL  CL  CL</span>
<span class="s2">    FP  FP  FP  FP  FP</span>
<span class="s2">      FP  FP  FP  FP</span>
<span class="s2">        CL  CL  CL</span>
<span class="s2">          FP  FP</span>
<span class="s2">            FP</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">TINY_GRID</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;core:</span>
<span class="s2">    geom: hex</span>
<span class="s2">    lattice map:</span>
<span class="s2">    grid bounds:</span>
<span class="s2">    symmetry: full</span>
<span class="s2">    grid contents:</span>
<span class="s2">       ? - 0</span>
<span class="s2">         - 0</span>
<span class="s2">       : IF</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">BIG_FULL_HEX_CORE</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;core:</span>
<span class="s2">  geom: hex</span>
<span class="s2">  symmetry: full</span>
<span class="s2">  lattice map: |</span>
<span class="s2">    -   -   -   -   -   -   SS  SS</span>
<span class="s2">      -   -   -   -   SS  SS  SS  SS  SS</span>
<span class="s2">    -   -   -   -   SS  DD  DD  DD  DD  SS</span>
<span class="s2">      -   -   -   SS  DD  DD  DD  DD  DD  SS</span>
<span class="s2">    -   -   -   SS  DD  DD  DD  DD  DD  DD  SS</span>
<span class="s2">      -   -   SS  DD  DD  DD  DD  DD  DD  DD  SS</span>
<span class="s2">    -   -   SS  DD  DD  DD  DD  DD  DD  DD  DD  SS</span>
<span class="s2">      -   -   SS  DD  DD  DD  RB  DD  DD  DD  SS</span>
<span class="s2">    -   -   SS  DD  DD  RB  RB  RB  RB  DD  DD  SS</span>
<span class="s2">      -   SS  DD  DD  RB  RB  FF  RB  RB  DD  DD  SS</span>
<span class="s2">    -   SS  SS  DD  RB  FF  FF  FF  FF  RB  DD  DD  SS</span>
<span class="s2">      -   SS  DD  RB  FF  FF  FF  FF  FF  RB  DD  RR</span>
<span class="s2">    -   SS  DD  DD  FF  FF  PC  PC  PC  FF  DD  DD  SS</span>
<span class="s2">      SS  SS  DD  RB  FF  II  PC  FF  FF  RB  DD  DD  SS</span>
<span class="s2">    -   SS  DD  RB  FF  SS  II  II  PC  FF  RB  DD  RR</span>
<span class="s2">      SS  DD  DD  FF  II  II  II  II  II  FF  DD  DD  SS</span>
<span class="s2">    -   SS  DD  RB  II  II  II  II  II  II  RB  DD  SS</span>
<span class="s2">      SS  DD  RB  FF  RC  II  SS  II  II  FF  RB  DD  SS</span>
<span class="s2">    SS  DD  DD  FF  II  II  II  RC  PC  II  FF  DD  DD  SS</span>
<span class="s2">      SS  DD  RB  II  PC  II  II  II  PC  II  RB  DD  SS</span>
<span class="s2">    SS  DD  RB  FF  II  II  II  II  II  II  FF  RB  DD  SS</span>
<span class="s2">      SS  DD  FF  II  II  WW  II  II  II  II  FF  DD  SS</span>
<span class="s2">    SS  DD  RB  FF  II  II  WW  XX  PC  II  FF  RB  DD  SS</span>
<span class="s2">      SS  DD  FF  PC  II  BB  AA  YY  SS  DC  FF  DD  SS</span>
<span class="s2">    SS  DD  RB  FF  II  RC  CC  ZZ  II  II  FF  RB  DD  SS</span>
<span class="s2">      SS  DD  FF  II  II  II  II  II  II  II  FF  DD  SS</span>
<span class="s2">    SS  DD  RB  FF  II  II  II  II  II  II  FF  RB  DD  SS</span>
<span class="s2">      SS  DD  RB  II  II  II  II  RC  II  II  RB  DD  SS</span>
<span class="s2">    SS  DD  DD  FF  PC  II  SS  II  II  PC  FF  DD  DD  SS</span>
<span class="s2">      SS  DD  RB  II  II  II  II  II  II  II  RB  DD  SS</span>
<span class="s2">    -   SS  DD  FF  II  PC  II  II  II  II  FF  DD  SS</span>
<span class="s2">      SS  DD  RB  FF  II  II  PC  II  II  FF  RB  DD  SS</span>
<span class="s2">    -   SS  DD  RB  FF  SS  II  II  PC  FF  RB  DD  SS</span>
<span class="s2">      SS  SS  DD  RB  FF  II  II  II  FF  RB  DD  SS  SS</span>
<span class="s2">    -   SS  DD  DD  FF  FF  II  II  FF  FF  DD  DD  SS</span>
<span class="s2">      -   SS  DD  RB  FF  FF  FF  FF  FF  RB  DD  SS</span>
<span class="s2">    -   SS  SS  DD  RB  FF  FF  FF  FF  RB  DD  SS  SS</span>
<span class="s2">      -   SS  DD  DD  RB  RB  RB  RB  RB  DD  DD  SS</span>
<span class="s2">        -   SS  DD  DD  RB  RB  RB  RB  DD  DD  SS</span>
<span class="s2">          -   SS  DD  DD  DD  DD  DD  DD  DD  SS</span>
<span class="s2">            SS  DD  DD  DD  DD  DD  DD  DD  DD  SS</span>
<span class="s2">              SS  DD  DD  DD  DD  DD  DD  DD  SS</span>
<span class="s2">                SS  DD  DD  DD  DD  DD  DD  SS</span>
<span class="s2">                  SS  DD  DD  DD  DD  DD  SS</span>
<span class="s2">                    SS  DD  DD  DD  DD  SS</span>
<span class="s2">                      SS  SS  SS  SS  SS</span>
<span class="s2">                        -   SS  SS  -</span>
<span class="s2">&quot;&quot;&quot;</span>


<div class="viewcode-block" id="TestGridBPRoundTrip">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBPRoundTrip">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TestGridBPRoundTrip</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grids</span> <span class="o">=</span> <span class="n">Grids</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">SMALL_HEX</span><span class="p">)</span>

<div class="viewcode-block" id="TestGridBPRoundTrip.test_contents">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBPRoundTrip.test_contents">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_contents</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;core&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grids</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestGridBPRoundTrip.test_roundTrip">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBPRoundTrip.test_roundTrip">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_roundTrip</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test saving blueprint data to a stream.</span>

<span class="sd">        .. test:: Grid blueprints can be written to disk.</span>
<span class="sd">            :id: T_ARMI_BP_TO_DB0</span>
<span class="sd">            :tests: R_ARMI_BP_TO_DB</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="n">saveToStream</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">grids</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">gridBp</span> <span class="o">=</span> <span class="n">Grids</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;third&quot;</span><span class="p">,</span> <span class="n">gridBp</span><span class="p">[</span><span class="s2">&quot;core&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">symmetry</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestGridBPRoundTrip.test_tinyMap">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBPRoundTrip.test_tinyMap">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_tinyMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that a lattice map can be defined, written, and read in from blueprint file.</span>

<span class="sd">        .. test:: Define a lattice map in reactor core.</span>
<span class="sd">            :id: T_ARMI_BP_GRID1</span>
<span class="sd">            :tests: R_ARMI_BP_GRID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="n">Grids</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">TINY_GRID</span><span class="p">)</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="n">saveToStream</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tryMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;IF&quot;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">gridBp</span> <span class="o">=</span> <span class="n">Grids</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;full&quot;</span><span class="p">,</span> <span class="n">gridBp</span><span class="p">[</span><span class="s2">&quot;core&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">symmetry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;IF&quot;</span><span class="p">,</span> <span class="n">gridBp</span><span class="p">[</span><span class="s2">&quot;core&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">latticeMap</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TestGridBPRoundTripFull">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBPRoundTripFull">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TestGridBPRoundTripFull</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestGridBPRoundTripFull.test_fullMap">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBPRoundTripFull.test_fullMap">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_fullMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that a lattice map can be defined, written, and read in from blueprint file.</span>

<span class="sd">        .. test:: Define a lattice map in reactor core.</span>
<span class="sd">            :id: T_ARMI_BP_GRID2</span>
<span class="sd">            :tests: R_ARMI_BP_GRID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="n">Grids</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">BIG_FULL_HEX_CORE</span><span class="p">)</span>
        <span class="n">gridDesign</span> <span class="o">=</span> <span class="n">grid</span><span class="p">[</span><span class="s2">&quot;core&quot;</span><span class="p">]</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">gridDesign</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>

        <span class="c1"># test before the round-trip</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;AA&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;BB&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;CC&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;WW&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;XX&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;YY&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;ZZ&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;RC&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;PC&quot;</span><span class="p">)</span>

        <span class="c1"># perform a roundtrip</span>
        <span class="n">stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="n">saveToStream</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">grid</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">tryMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">gridBp</span> <span class="o">=</span> <span class="n">Grids</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
        <span class="n">gridDesign</span> <span class="o">=</span> <span class="n">gridBp</span><span class="p">[</span><span class="s2">&quot;core&quot;</span><span class="p">]</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">gridDesign</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>

        <span class="c1"># test again after the round-trip</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;AA&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;BB&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;CC&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;WW&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;XX&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;YY&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;ZZ&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;RC&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;PC&quot;</span><span class="p">)</span></div>
</div>



<div class="viewcode-block" id="TestGridBlueprintsSection">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBlueprintsSection">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TestGridBlueprintsSection</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tests for lattice blueprint section.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">td</span> <span class="o">=</span> <span class="n">TemporaryDirectoryChanger</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="o">.</span><span class="fm">__enter__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grids</span> <span class="o">=</span> <span class="n">Grids</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">LATTICE_BLUEPRINT</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_testMethodName</span><span class="p">))</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">td</span><span class="o">.</span><span class="fm">__exit__</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<div class="viewcode-block" id="TestGridBlueprintsSection.test_simpleRead">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBlueprintsSection.test_simpleRead">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_simpleRead</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">gridDesign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grids</span><span class="p">[</span><span class="s2">&quot;control&quot;</span><span class="p">]</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="n">gridDesign</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">pitch</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;6&quot;</span><span class="p">)</span>

        <span class="n">gridDesign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grids</span><span class="p">[</span><span class="s2">&quot;pins&quot;</span><span class="p">]</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="n">gridDesign</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">pitch</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;FP&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;CL&quot;</span><span class="p">)</span>

        <span class="c1"># Cartesian full, odd</span>
        <span class="n">gridDesign2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grids</span><span class="p">[</span><span class="s2">&quot;sfp&quot;</span><span class="p">]</span>
        <span class="n">_</span> <span class="o">=</span> <span class="n">gridDesign2</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign2</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign2</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;3&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign2</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;3&quot;</span><span class="p">)</span>

        <span class="c1"># Cartesian quarter, odd</span>
        <span class="n">gridDesign3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grids</span><span class="p">[</span><span class="s2">&quot;sfp quarter&quot;</span><span class="p">]</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="n">gridDesign3</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign3</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign3</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;3&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign3</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;3&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign3</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">symmetry</span><span class="o">.</span><span class="n">isThroughCenterAssembly</span><span class="p">)</span>

        <span class="c1"># cartesian quarter, even not through center</span>
        <span class="n">gridDesign3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grids</span><span class="p">[</span><span class="s2">&quot;sfp quarter even&quot;</span><span class="p">]</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="n">gridDesign3</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">symmetry</span><span class="o">.</span><span class="n">isThroughCenterAssembly</span><span class="p">)</span>

        <span class="c1"># Cartesian full, even/odd hybrid</span>
        <span class="n">gridDesign4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grids</span><span class="p">[</span><span class="s2">&quot;sfp even&quot;</span><span class="p">]</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="n">gridDesign4</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign4</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;4&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign4</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign4</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign4</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign4</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;1&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestGridBlueprintsSection.test_pitchBasics">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBlueprintsSection.test_pitchBasics">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_pitchBasics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># use only hex input</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Pitch</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">hex</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="c1"># use only X, Y, Z inputs</span>
        <span class="n">p</span> <span class="o">=</span> <span class="n">Pitch</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">hex</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestGridBlueprintsSection.test_pitchEdgeCases">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBlueprintsSection.test_pitchEdgeCases">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_pitchEdgeCases</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">InputError</span><span class="p">):</span>
            <span class="c1"># cannot mix hex with x,y,z pitch</span>
            <span class="n">Pitch</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="n">InputError</span><span class="p">):</span>
            <span class="c1"># SOMETHING needs to be non-zero</span>
            <span class="n">Pitch</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div>


<div class="viewcode-block" id="TestGridBlueprintsSection.test_simpleReadLatticeMap">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBlueprintsSection.test_simpleReadLatticeMap">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_simpleReadLatticeMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read lattice map and create a grid.</span>

<span class="sd">        .. test:: Define a lattice map in reactor core.</span>
<span class="sd">            :id: T_ARMI_BP_GRID0</span>
<span class="sd">            :tests: R_ARMI_BP_GRID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">armi.reactor.blueprints.tests.test_blockBlueprints</span><span class="w"> </span><span class="kn">import</span> <span class="n">FULL_BP</span>

        <span class="c1"># Cartesian full, even/odd hybrid</span>
        <span class="n">gridDesign4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grids</span><span class="p">[</span><span class="s2">&quot;sfp even&quot;</span><span class="p">]</span>
        <span class="n">_grid</span> <span class="o">=</span> <span class="n">gridDesign4</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>

        <span class="c1"># test that we can correctly save this to a YAML</span>
        <span class="n">bp</span> <span class="o">=</span> <span class="n">Blueprints</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">FULL_BP</span><span class="p">)</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="s2">&quot;TestGridBlueprintsSection__test_simpleReadLatticeMap.log&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="n">saveToStream</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">bp</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="c1"># test that the output looks valid, and includes a lattice map</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">outText</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;blocks:&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;shape: Circle&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;assemblies:&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;flags: fuel test&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;grid contents:&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;lattice map:&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="n">before</span><span class="p">,</span> <span class="n">after</span> <span class="o">=</span> <span class="n">outText</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;lattice map:&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">before</span><span class="p">),</span> <span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">after</span><span class="p">),</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;1 2 1 2 1 2 1&quot;</span><span class="p">,</span> <span class="n">after</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;lattice map not showing up&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="s2">&quot;- -3&quot;</span><span class="p">,</span> <span class="n">after</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;grid contents are showing up when they shouldn&#39;t&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="s2">&quot;readFromLatticeMap&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filePath</span><span class="p">))</span></div>


<div class="viewcode-block" id="TestGridBlueprintsSection.test_simpleReadNoLatticeMap">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestGridBlueprintsSection.test_simpleReadNoLatticeMap">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_simpleReadNoLatticeMap</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">armi.reactor.blueprints.tests.test_blockBlueprints</span><span class="w"> </span><span class="kn">import</span> <span class="n">FULL_BP_GRID</span>

        <span class="c1"># Cartesian full, even/odd hybrid</span>
        <span class="n">gridDesign4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grids</span><span class="p">[</span><span class="s2">&quot;sfp even&quot;</span><span class="p">]</span>
        <span class="n">_grid</span> <span class="o">=</span> <span class="n">gridDesign4</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>

        <span class="c1"># test that we can correctly save this to a YAML</span>
        <span class="n">bp</span> <span class="o">=</span> <span class="n">Blueprints</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">FULL_BP_GRID</span><span class="p">)</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="s2">&quot;TestGridBlueprintsSection__test_simpleReadNoLatticeMap.log&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
            <span class="n">saveToStream</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span> <span class="n">bp</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

        <span class="c1"># test that the output looks valid, and includes a lattice map</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">outText</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;blocks:&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;shape: Circle&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;assemblies:&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;flags: fuel test&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;grid contents:&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;lattice map:&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>
            <span class="n">before</span><span class="p">,</span> <span class="n">after</span> <span class="o">=</span> <span class="n">outText</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;grid contents:&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">before</span><span class="p">),</span> <span class="mi">100</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">after</span><span class="p">),</span> <span class="mi">20</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;- -3&quot;</span><span class="p">,</span> <span class="n">after</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;grid contents not showing up&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="s2">&quot;1 3 1 2 1 3 1&quot;</span><span class="p">,</span> <span class="n">after</span><span class="p">,</span> <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;lattice map showing up when it shouldn&#39;t&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="s2">&quot;readFromLatticeMap&quot;</span><span class="p">,</span> <span class="n">outText</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filePath</span><span class="p">))</span></div>
</div>



<div class="viewcode-block" id="TestRZTGridBlueprint">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestRZTGridBlueprint">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">TestRZTGridBlueprint</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tests for R-Z-Theta grid inputs.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grids</span> <span class="o">=</span> <span class="n">Grids</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">RZT_BLUEPRINT</span><span class="p">)</span>

<div class="viewcode-block" id="TestRZTGridBlueprint.test_construct">
<a class="viewcode-back" href="../../../../../.apidocs/armi.reactor.blueprints.tests.test_gridBlueprints.html#armi.reactor.blueprints.tests.test_gridBlueprints.TestRZTGridBlueprint.test_construct">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">test_construct</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">gridDesign</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grids</span><span class="p">[</span><span class="s2">&quot;rzt_core&quot;</span><span class="p">]</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="n">gridDesign</span><span class="o">.</span><span class="n">construct</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">gridDesign</span><span class="o">.</span><span class="n">gridContents</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;assembly3_3 fuel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="n">grid</span><span class="o">.</span><span class="n">indicesOfBounds</span><span class="p">(</span><span class="mf">57.1428571429</span><span class="p">,</span> <span class="mf">71.4285714286</span><span class="p">,</span> <span class="mf">0.5542707944631219</span><span class="p">,</span> <span class="mf">0.6698344789311578</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">)</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2025, TerraPower, LLC.
      <span class="lastupdated">Last updated on 2025-12-05.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>