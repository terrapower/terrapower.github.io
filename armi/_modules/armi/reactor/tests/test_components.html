<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>armi.reactor.tests.test_components &mdash; ARMI 0.5.0 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme_fixes.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/sg_gallery-rendered-html.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../_static/armiicon_16x16.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            ARMI
              <img src="../../../../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.5.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../.apidocs/modules.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #233C5B" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">ARMI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../../armi.html">armi</a></li>
          <li class="breadcrumb-item"><a href="../../reactor.html">armi.reactor</a></li>
      <li class="breadcrumb-item active">armi.reactor.tests.test_components</li>
  <li class="wy-breadcrumbs-aside">
    
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for armi.reactor.tests.test_components</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2019 TerraPower, LLC</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>

<span class="sd">&quot;&quot;&quot;Tests functionalities of components within ARMI.&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy.testing</span> <span class="kn">import</span> <span class="n">assert_equal</span>

<span class="kn">from</span> <span class="nn">armi.materials</span> <span class="kn">import</span> <span class="n">air</span><span class="p">,</span> <span class="n">alloy200</span>
<span class="kn">from</span> <span class="nn">armi.materials.material</span> <span class="kn">import</span> <span class="n">Material</span>
<span class="kn">from</span> <span class="nn">armi.reactor</span> <span class="kn">import</span> <span class="n">components</span>
<span class="kn">from</span> <span class="nn">armi.reactor</span> <span class="kn">import</span> <span class="n">flags</span>
<span class="kn">from</span> <span class="nn">armi.reactor.blocks</span> <span class="kn">import</span> <span class="n">Block</span>
<span class="kn">from</span> <span class="nn">armi.reactor.components</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Circle</span><span class="p">,</span>
    <span class="n">Component</span><span class="p">,</span>
    <span class="n">ComponentType</span><span class="p">,</span>
    <span class="n">Cube</span><span class="p">,</span>
    <span class="n">DerivedShape</span><span class="p">,</span>
    <span class="n">DifferentialRadialSegment</span><span class="p">,</span>
    <span class="n">Helix</span><span class="p">,</span>
    <span class="n">Hexagon</span><span class="p">,</span>
    <span class="n">HexHoledCircle</span><span class="p">,</span>
    <span class="n">HoledHexagon</span><span class="p">,</span>
    <span class="n">HoledRectangle</span><span class="p">,</span>
    <span class="n">HoledSquare</span><span class="p">,</span>
    <span class="n">NullComponent</span><span class="p">,</span>
    <span class="n">RadialSegment</span><span class="p">,</span>
    <span class="n">Rectangle</span><span class="p">,</span>
    <span class="n">SolidRectangle</span><span class="p">,</span>
    <span class="n">Sphere</span><span class="p">,</span>
    <span class="n">Square</span><span class="p">,</span>
    <span class="n">Triangle</span><span class="p">,</span>
    <span class="n">UnshapedComponent</span><span class="p">,</span>
    <span class="n">UnshapedVolumetricComponent</span><span class="p">,</span>
    <span class="n">materials</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">armi.reactor.tests.test_reactors</span> <span class="kn">import</span> <span class="n">loadTestReactor</span>


<div class="viewcode-block" id="TestComponentFactory"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentFactory">[docs]</a><span class="k">class</span> <span class="nc">TestComponentFactory</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestComponentFactory.getCircleVoidDict"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentFactory.getCircleVoidDict">[docs]</a>    <span class="k">def</span> <span class="nf">getCircleVoidDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">shape</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;gap&quot;</span><span class="p">,</span>
            <span class="n">Tinput</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
            <span class="n">Thot</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
            <span class="n">od</span><span class="o">=</span><span class="mf">2.1</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">mult</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
            <span class="n">material</span><span class="o">=</span><span class="s2">&quot;Void&quot;</span><span class="p">,</span>
            <span class="n">isotopics</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="TestComponentFactory.getCircleFuelDict"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentFactory.getCircleFuelDict">[docs]</a>    <span class="k">def</span> <span class="nf">getCircleFuelDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span>
            <span class="n">shape</span><span class="o">=</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fuel&quot;</span><span class="p">,</span>
            <span class="n">Tinput</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
            <span class="n">Thot</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
            <span class="n">od</span><span class="o">=</span><span class="mf">2.1</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">mult</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span>
            <span class="n">material</span><span class="o">=</span><span class="s2">&quot;UZr&quot;</span><span class="p">,</span>
            <span class="n">isotopics</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="TestComponentFactory.test_factory"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentFactory.test_factory">[docs]</a>    <span class="k">def</span> <span class="nf">test_factory</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creating and verifying void and fuel components.</span>

<span class="sd">        .. test:: Example void and fuel components are initialized.</span>
<span class="sd">            :id: T_ARMI_COMP_DEF0</span>
<span class="sd">            :tests: R_ARMI_COMP_DEF</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">voidAttrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCircleVoidDict</span><span class="p">()</span>
        <span class="n">voidComp</span> <span class="o">=</span> <span class="n">components</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="n">voidAttrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;shape&quot;</span><span class="p">),</span> <span class="p">[],</span> <span class="n">voidAttrs</span><span class="p">)</span>
        <span class="n">fuelAttrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCircleFuelDict</span><span class="p">()</span>
        <span class="n">fuelComp</span> <span class="o">=</span> <span class="n">components</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="n">fuelAttrs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;shape&quot;</span><span class="p">),</span> <span class="p">[],</span> <span class="n">fuelAttrs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">voidComp</span><span class="p">,</span> <span class="n">components</span><span class="o">.</span><span class="n">Circle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">voidComp</span><span class="o">.</span><span class="n">material</span><span class="p">,</span> <span class="n">materials</span><span class="o">.</span><span class="n">Void</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">fuelComp</span><span class="p">,</span> <span class="n">components</span><span class="o">.</span><span class="n">Circle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsInstance</span><span class="p">(</span><span class="n">fuelComp</span><span class="o">.</span><span class="n">material</span><span class="p">,</span> <span class="n">materials</span><span class="o">.</span><span class="n">UZr</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestComponentFactory.test_componentInitializationAndDuplication"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentFactory.test_componentInitializationAndDuplication">[docs]</a>    <span class="k">def</span> <span class="nf">test_componentInitializationAndDuplication</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize and duplicate a component, veifying the parameters.</span>

<span class="sd">        .. test:: Verify the parameters of an initialized component.</span>
<span class="sd">            :id: T_ARMI_COMP_DEF1</span>
<span class="sd">            :tests: R_ARMI_COMP_DEF</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># populate the class/signature dict, and create a basis attrs</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCircleVoidDict</span><span class="p">()</span>
        <span class="k">del</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;shape&quot;</span><span class="p">]</span>
        <span class="k">del</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;od&quot;</span><span class="p">]</span>
        <span class="k">del</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
        <span class="k">del</span> <span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;mult&quot;</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">klass</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ComponentType</span><span class="o">.</span><span class="n">TYPES</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="c1"># hack together a dictionary input</span>
            <span class="n">thisAttrs</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="mf">1.0</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">klass</span><span class="o">.</span><span class="n">INIT_SIGNATURE</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">attrs</span><span class="p">)}</span>
            <span class="k">del</span> <span class="n">thisAttrs</span><span class="p">[</span><span class="s2">&quot;components&quot;</span><span class="p">]</span>
            <span class="n">thisAttrs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">attrs</span><span class="p">)</span>
            <span class="n">thisAttrs</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;banana</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;modArea&quot;</span> <span class="ow">in</span> <span class="n">thisAttrs</span><span class="p">:</span>
                <span class="n">thisAttrs</span><span class="p">[</span><span class="s2">&quot;modArea&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">component</span> <span class="o">=</span> <span class="n">components</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">[],</span> <span class="n">thisAttrs</span><span class="p">)</span>
            <span class="n">duped</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">component</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;area&quot;</span><span class="p">,</span> <span class="s2">&quot;volume&quot;</span><span class="p">,</span> <span class="s2">&quot;serialNum&quot;</span><span class="p">]:</span>  <span class="c1"># they get recomputed</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
                        <span class="n">val</span><span class="p">,</span>
                        <span class="n">duped</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="n">key</span><span class="p">],</span>
                        <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Key: </span><span class="si">{}</span><span class="s2">, val1: </span><span class="si">{}</span><span class="s2">, val2: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                            <span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">duped</span><span class="o">.</span><span class="n">p</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                        <span class="p">),</span>
                    <span class="p">)</span></div>

<div class="viewcode-block" id="TestComponentFactory.test_factoryBadShapeName"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentFactory.test_factoryBadShapeName">[docs]</a>    <span class="k">def</span> <span class="nf">test_factoryBadShapeName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">badDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCircleFuelDict</span><span class="p">()</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
            <span class="n">components</span><span class="o">.</span><span class="n">factory</span><span class="p">(</span><span class="s2">&quot;turtle&quot;</span><span class="p">,</span> <span class="p">[],</span> <span class="n">badDict</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestComponentFactory.test_invalidCoolantComponentAssignment"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentFactory.test_invalidCoolantComponentAssignment">[docs]</a>    <span class="k">def</span> <span class="nf">test_invalidCoolantComponentAssignment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">invalidComponentTypes</span> <span class="o">=</span> <span class="p">[</span><span class="n">Component</span><span class="p">,</span> <span class="n">NullComponent</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">CompType</span> <span class="ow">in</span> <span class="n">invalidComponentTypes</span><span class="p">:</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
                <span class="n">_c</span> <span class="o">=</span> <span class="n">CompType</span><span class="p">(</span><span class="s2">&quot;coolant&quot;</span><span class="p">,</span> <span class="s2">&quot;Sodium&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestGeneralComponents"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestGeneralComponents">[docs]</a><span class="k">class</span> <span class="nc">TestGeneralComponents</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Base test for all individual component tests.&quot;&quot;&quot;</span>

    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">Component</span>
    <span class="n">componentMaterial</span> <span class="o">=</span> <span class="s2">&quot;HT9&quot;</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">component</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Most of the time nothing will be passed as `component` and the result will</span>
<span class="sd">        be stored in self, but you can also pass a component object as `component`,</span>
<span class="sd">        in which case the object will be returned with the `parent` attribute assigned.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">_Parent</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">getSymmetryFactor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="mf">1.0</span>

            <span class="k">def</span> <span class="nf">getHeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="mf">1.0</span>

            <span class="k">def</span> <span class="nf">clearCache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">pass</span>

            <span class="k">def</span> <span class="nf">getChildren</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">[]</span>

            <span class="n">derivedMustUpdate</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">component</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">componentCls</span><span class="p">(</span>
                <span class="s2">&quot;TestComponent&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">componentMaterial</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">_Parent</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">component</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">_Parent</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">component</span></div>


<div class="viewcode-block" id="TestComponent"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponent">[docs]</a><span class="k">class</span> <span class="nc">TestComponent</span><span class="p">(</span><span class="n">TestGeneralComponents</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test the base component.&quot;&quot;&quot;</span>

    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">Component</span>

<div class="viewcode-block" id="TestComponent.test_initializeComponentMaterial"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponent.test_initializeComponentMaterial">[docs]</a>    <span class="k">def</span> <span class="nf">test_initializeComponentMaterial</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creating component with single material.</span>

<span class="sd">        .. test:: Components are made of one material.</span>
<span class="sd">            :id: T_ARMI_COMP_1MAT0</span>
<span class="sd">            :tests: R_ARMI_COMP_1MAT</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expectedName</span> <span class="o">=</span> <span class="s2">&quot;TestComponent&quot;</span>
        <span class="n">actualName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
        <span class="n">expectedMaterialName</span> <span class="o">=</span> <span class="s2">&quot;HT9&quot;</span>
        <span class="n">actualMaterialName</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expectedName</span><span class="p">,</span> <span class="n">actualName</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">expectedMaterialName</span><span class="p">,</span> <span class="n">actualMaterialName</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestComponent.test_setNumberDensity"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponent.test_setNumberDensity">[docs]</a>    <span class="k">def</span> <span class="nf">test_setNumberDensity</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test setting a single number density.</span>

<span class="sd">        .. test:: Users can set Component number density.</span>
<span class="sd">            :id: T_ARMI_COMP_NUCLIDE_FRACS0</span>
<span class="sd">            :tests: R_ARMI_COMP_NUCLIDE_FRACS</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">component</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">component</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">),</span> <span class="mf">0.000780</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">component</span><span class="o">.</span><span class="n">setNumberDensity</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="mf">0.57</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">component</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">),</span> <span class="mf">0.57</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestComponent.test_setNumberDensities"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponent.test_setNumberDensities">[docs]</a>    <span class="k">def</span> <span class="nf">test_setNumberDensities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test setting multiple number densities.</span>

<span class="sd">        .. test:: Users can set Component number densities.</span>
<span class="sd">            :id: T_ARMI_COMP_NUCLIDE_FRACS1</span>
<span class="sd">            :tests: R_ARMI_COMP_NUCLIDE_FRACS</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">component</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">component</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s2">&quot;MN&quot;</span><span class="p">),</span> <span class="mf">0.000426</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">component</span><span class="o">.</span><span class="n">setNumberDensities</span><span class="p">({</span><span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;MN&quot;</span><span class="p">:</span> <span class="mf">0.58</span><span class="p">})</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">component</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">component</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s2">&quot;MN&quot;</span><span class="p">),</span> <span class="mf">0.58</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestComponent.test_solid_material"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponent.test_solid_material">[docs]</a>    <span class="k">def</span> <span class="nf">test_solid_material</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine if material is solid.</span>

<span class="sd">        .. test:: Determine if material is solid.</span>
<span class="sd">            :id: T_ARMI_COMP_SOLID</span>
<span class="sd">            :tests: R_ARMI_COMP_SOLID</span>

<span class="sd">        .. test:: Components have material properties.</span>
<span class="sd">            :id: T_ARMI_COMP_MAT</span>
<span class="sd">            :tests: R_ARMI_COMP_MAT</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getProperties</span><span class="p">(),</span> <span class="n">Material</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">material</span><span class="p">,</span> <span class="s2">&quot;density&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;HT9&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getProperties</span><span class="p">()))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="n">air</span><span class="o">.</span><span class="n">Air</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">containsSolidMaterial</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">material</span> <span class="o">=</span> <span class="n">alloy200</span><span class="o">.</span><span class="n">Alloy200</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">containsSolidMaterial</span><span class="p">())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getProperties</span><span class="p">(),</span> <span class="n">Material</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">material</span><span class="p">,</span> <span class="s2">&quot;density&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s2">&quot;Alloy200&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getProperties</span><span class="p">()))</span></div></div>


<div class="viewcode-block" id="TestNullComponent"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestNullComponent">[docs]</a><span class="k">class</span> <span class="nc">TestNullComponent</span><span class="p">(</span><span class="n">TestGeneralComponents</span><span class="p">):</span>
    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">NullComponent</span>

<div class="viewcode-block" id="TestNullComponent.test_cmp"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestNullComponent.test_cmp">[docs]</a>    <span class="k">def</span> <span class="nf">test_cmp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test null component.&quot;&quot;&quot;</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">DerivedShape</span><span class="p">(</span><span class="s2">&quot;DerivedShape&quot;</span><span class="p">,</span> <span class="s2">&quot;Material&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertLess</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestNullComponent.test_nonzero"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestNullComponent.test_nonzero">[docs]</a>    <span class="k">def</span> <span class="nf">test_nonzero</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestNullComponent.test_getDimension"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestNullComponent.test_getDimension">[docs]</a>    <span class="k">def</span> <span class="nf">test_getDimension</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test getting empty component.</span>

<span class="sd">        .. test:: Retrieve a null dimension.</span>
<span class="sd">            :id: T_ARMI_COMP_DIMS0</span>
<span class="sd">            :tests: R_ARMI_COMP_DIMS</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">temp</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">901</span><span class="p">,</span> <span class="mi">25</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">Tc</span><span class="o">=</span><span class="n">temp</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestUnshapedComponent"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestUnshapedComponent">[docs]</a><span class="k">class</span> <span class="nc">TestUnshapedComponent</span><span class="p">(</span><span class="n">TestGeneralComponents</span><span class="p">):</span>
    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">UnshapedComponent</span>
    <span class="n">componentMaterial</span> <span class="o">=</span> <span class="s2">&quot;HT9&quot;</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">}</span>

<div class="viewcode-block" id="TestUnshapedComponent.test_getComponentArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestUnshapedComponent.test_getComponentArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_getComponentArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># a case without thermal expansion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getComponentArea</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>

        <span class="c1"># a case with thermal expansion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getComponentArea</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
            <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getThermalExpansionFactor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">temperatureInC</span><span class="p">)</span>
            <span class="o">**</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># show that area expansion is consistent with the density change in the material</span>
        <span class="n">hotDensity</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">density</span><span class="p">()</span>
        <span class="n">hotArea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="n">thermalExpansionFactor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getThermalExpansionFactor</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">temperatureInC</span>
        <span class="p">)</span>

        <span class="n">coldComponent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setUp</span><span class="p">(</span>
            <span class="n">UnshapedComponent</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;coldComponent&quot;</span><span class="p">,</span>
                <span class="n">material</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">componentMaterial</span><span class="p">,</span>
                <span class="n">Tinput</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">inputTemperatureInC</span><span class="p">,</span>
                <span class="n">Thot</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">inputTemperatureInC</span><span class="p">,</span>
                <span class="n">area</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">coldDensity</span> <span class="o">=</span> <span class="n">coldComponent</span><span class="o">.</span><span class="n">density</span><span class="p">()</span>
        <span class="n">coldArea</span> <span class="o">=</span> <span class="n">coldComponent</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="n">thermalExpansionFactor</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="c1"># thermalExpansionFactor accounts for density being 3D while area is 2D</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
            <span class="p">(</span><span class="n">coldDensity</span> <span class="o">*</span> <span class="n">coldArea</span><span class="p">),</span>
            <span class="p">(</span><span class="n">thermalExpansionFactor</span> <span class="o">*</span> <span class="n">hotDensity</span> <span class="o">*</span> <span class="n">hotArea</span><span class="p">),</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="TestUnshapedComponent.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestUnshapedComponent.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># a case without thermal expansion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="mf">2.0</span><span class="p">)</span>

        <span class="c1"># a case with thermal expansion</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
            <span class="mf">2.0</span>
            <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getThermalExpansionFactor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">temperatureInC</span><span class="p">),</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="TestUnshapedComponent.test_component_less_than"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestUnshapedComponent.test_component_less_than">[docs]</a>    <span class="k">def</span> <span class="nf">test_component_less_than</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure that comparisons between components properly reference bounding circle outer diameter.</span>

<span class="sd">        .. test:: Order components by their outermost diameter</span>
<span class="sd">            :id: T_ARMI_COMP_ORDER</span>
<span class="sd">            :tests: R_ARMI_COMP_ORDER</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">componentCls</span> <span class="o">=</span> <span class="n">UnshapedComponent</span>
        <span class="n">componentMaterial</span> <span class="o">=</span> <span class="s2">&quot;HT9&quot;</span>

        <span class="n">smallDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">}</span>
        <span class="n">sameDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">}</span>
        <span class="n">bigDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">}</span>

        <span class="n">smallComponent</span> <span class="o">=</span> <span class="n">componentCls</span><span class="p">(</span><span class="s2">&quot;TestComponent&quot;</span><span class="p">,</span> <span class="n">componentMaterial</span><span class="p">,</span> <span class="o">**</span><span class="n">smallDims</span><span class="p">)</span>
        <span class="n">sameComponent</span> <span class="o">=</span> <span class="n">componentCls</span><span class="p">(</span><span class="s2">&quot;TestComponent&quot;</span><span class="p">,</span> <span class="n">componentMaterial</span><span class="p">,</span> <span class="o">**</span><span class="n">sameDims</span><span class="p">)</span>
        <span class="n">bigComponent</span> <span class="o">=</span> <span class="n">componentCls</span><span class="p">(</span><span class="s2">&quot;TestComponent&quot;</span><span class="p">,</span> <span class="n">componentMaterial</span><span class="p">,</span> <span class="o">**</span><span class="n">bigDims</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="n">smallComponent</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">bigComponent</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="n">sameComponent</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestUnshapedComponent.test_fromComponent"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestUnshapedComponent.test_fromComponent">[docs]</a>    <span class="k">def</span> <span class="nf">test_fromComponent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">circle</span> <span class="o">=</span> <span class="n">components</span><span class="o">.</span><span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;testCircle&quot;</span><span class="p">,</span> <span class="s2">&quot;HT9&quot;</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">unshaped</span> <span class="o">=</span> <span class="n">components</span><span class="o">.</span><span class="n">UnshapedComponent</span><span class="o">.</span><span class="n">fromComponent</span><span class="p">(</span><span class="n">circle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">circle</span><span class="o">.</span><span class="n">getComponentArea</span><span class="p">(),</span> <span class="n">unshaped</span><span class="o">.</span><span class="n">getComponentArea</span><span class="p">())</span></div></div>


<div class="viewcode-block" id="TestShapedComponent"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestShapedComponent">[docs]</a><span class="k">class</span> <span class="nc">TestShapedComponent</span><span class="p">(</span><span class="n">TestGeneralComponents</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract class for all shaped components.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="TestShapedComponent.test_preserveMassDuringThermalExpansion"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestShapedComponent.test_preserveMassDuringThermalExpansion">[docs]</a>    <span class="k">def</span> <span class="nf">test_preserveMassDuringThermalExpansion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that when we thermally expand any arbitrary shape, mass is conserved.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">temperatures</span> <span class="o">=</span> <span class="p">[</span><span class="mf">25.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">,</span> <span class="mf">40.0</span><span class="p">,</span> <span class="mf">60.0</span><span class="p">,</span> <span class="mf">80.0</span><span class="p">,</span> <span class="mf">430.0</span><span class="p">]</span>
        <span class="n">masses</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">report</span> <span class="o">=</span> <span class="s2">&quot;Temperature, mass, volume, dLL</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">ht</span> <span class="ow">in</span> <span class="n">temperatures</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span><span class="n">ht</span><span class="p">)</span>
            <span class="n">mass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getMass</span><span class="p">()</span>
            <span class="n">masses</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mass</span><span class="p">)</span>
            <span class="n">report</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{:10.1f}</span><span class="s2">, </span><span class="si">{:7.5e}</span><span class="s2">, </span><span class="si">{:7.5e}</span><span class="s2">, </span><span class="si">{:7.5e}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">ht</span><span class="p">,</span>
                <span class="n">mass</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getVolume</span><span class="p">(),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getThermalExpansionFactor</span><span class="p">(),</span>
            <span class="p">)</span>

        <span class="k">for</span> <span class="n">mass</span> <span class="ow">in</span> <span class="n">masses</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertNotAlmostEqual</span><span class="p">(</span><span class="n">mass</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
                <span class="n">masses</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                <span class="n">mass</span><span class="p">,</span>
                <span class="n">msg</span><span class="o">=</span><span class="s2">&quot;Masses are not preserved during thermal expansion of component </span><span class="si">{}</span><span class="s2"> at </span><span class="si">{}</span><span class="s2"> C. &quot;</span>
                <span class="s2">&quot;Original Mass: </span><span class="si">{}</span><span class="s2">, Thermally Expanded Mass: </span><span class="si">{}</span><span class="se">\n</span><span class="si">{}</span><span class="s2">&quot;</span>
                <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="p">,</span> <span class="n">ht</span><span class="p">,</span> <span class="n">masses</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">mass</span><span class="p">,</span> <span class="n">report</span><span class="p">),</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="TestShapedComponent.test_volumeAfterClearCache"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestShapedComponent.test_volumeAfterClearCache">[docs]</a>    <span class="k">def</span> <span class="nf">test_volumeAfterClearCache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test volume after cache has been cleared.</span>

<span class="sd">        .. test:: Clear cache after a dimensions updated.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL0</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">UnshapedVolumetricComponent</span><span class="p">(</span><span class="s2">&quot;testComponent&quot;</span><span class="p">,</span> <span class="s2">&quot;Custom&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">volume</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">getVolume</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
        <span class="n">c</span><span class="o">.</span><span class="n">clearCache</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">getVolume</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestShapedComponent.test_densityConsistent"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestShapedComponent.test_densityConsistent">[docs]</a>    <span class="k">def</span> <span class="nf">test_densityConsistent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Testing the Component matches quick hand calc.&quot;&quot;&quot;</span>
        <span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span>

        <span class="c1"># no volume defined</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="p">(</span><span class="n">DerivedShape</span><span class="p">,</span> <span class="n">UnshapedVolumetricComponent</span><span class="p">)):</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="n">Component</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># basic density sanity test</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span> <span class="n">c</span><span class="o">.</span><span class="n">getMass</span><span class="p">()</span> <span class="o">/</span> <span class="n">c</span><span class="o">.</span><span class="n">getVolume</span><span class="p">())</span>

        <span class="c1"># test 2D expanding density</span>
        <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">temperatureInC</span> <span class="o">==</span> <span class="n">c</span><span class="o">.</span><span class="n">inputTemperatureInC</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
                <span class="n">c</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span> <span class="n">c</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">pseudoDensity</span><span class="p">(</span><span class="n">Tc</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">temperatureInC</span><span class="p">),</span> <span class="n">delta</span><span class="o">=</span><span class="mf">0.001</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span><span class="o">.</span><span class="n">is3D</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
                <span class="n">c</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span> <span class="o">*</span> <span class="n">c</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">getHeight</span><span class="p">()</span> <span class="o">*</span> <span class="n">c</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getMass</span><span class="p">(),</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="TestShapedComponent.test_density"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestShapedComponent.test_density">[docs]</a>    <span class="k">def</span> <span class="nf">test_density</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Testing the Component density gets the correct 3D material density.&quot;&quot;&quot;</span>

        <span class="k">class</span> <span class="nc">StrangeMaterial</span><span class="p">(</span><span class="n">Material</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;material designed to make the test easier to understand.&quot;&quot;&quot;</span>

            <span class="k">def</span> <span class="nf">pseduoDensity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Tk</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Tc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
                <span class="k">return</span> <span class="mf">1.0</span>

            <span class="k">def</span> <span class="nf">density</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">Tk</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">Tc</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
                <span class="k">return</span> <span class="mf">3.0</span>

        <span class="n">c</span> <span class="o">=</span> <span class="n">Sphere</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;strangeBall&quot;</span><span class="p">,</span>
            <span class="n">material</span><span class="o">=</span><span class="n">StrangeMaterial</span><span class="p">(),</span>
            <span class="n">Tinput</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
            <span class="n">Thot</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span>
            <span class="n">od</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">mult</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># we expect to see the 3D material density here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span> <span class="mf">3.0</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestDerivedShape"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestDerivedShape">[docs]</a><span class="k">class</span> <span class="nc">TestDerivedShape</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">DerivedShape</span>
    <span class="n">componentMaterial</span> <span class="o">=</span> <span class="s2">&quot;Sodium&quot;</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">400.0</span><span class="p">,</span> <span class="s2">&quot;area&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span>

<div class="viewcode-block" id="TestDerivedShape.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestDerivedShape.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="mf">0.0</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="TestDerivedShape.test_computeVolume"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestDerivedShape.test_computeVolume">[docs]</a>    <span class="k">def</span> <span class="nf">test_computeVolume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test the computeVolume method on a number of components in a block.</span>

<span class="sd">        .. test:: Compute the volume of a DerivedShape inside solid shapes.</span>
<span class="sd">            :id: T_ARMI_COMP_FLUID</span>
<span class="sd">            :tests: R_ARMI_COMP_FLUID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">armi.reactor.tests.test_blocks</span> <span class="kn">import</span> <span class="n">buildSimpleFuelBlock</span>

        <span class="c1"># Calculate the total volume of the block</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">buildSimpleFuelBlock</span><span class="p">()</span>
        <span class="n">totalVolume</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">getVolume</span><span class="p">()</span>

        <span class="c1"># calculate the total volume by adding up all the components</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="o">.</span><span class="n">getComponent</span><span class="p">(</span><span class="n">flags</span><span class="o">.</span><span class="n">Flags</span><span class="o">.</span><span class="n">COOLANT</span><span class="p">)</span>
        <span class="n">totalByParts</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">co</span> <span class="ow">in</span> <span class="n">b</span><span class="o">.</span><span class="n">getComponents</span><span class="p">():</span>
            <span class="n">totalByParts</span> <span class="o">+=</span> <span class="n">co</span><span class="o">.</span><span class="n">computeVolume</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">totalByParts</span><span class="p">,</span> <span class="n">totalVolume</span><span class="p">)</span>

        <span class="c1"># test the computeVolume method on the one DerivedShape in thi block</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">computeVolume</span><span class="p">(),</span> <span class="mf">1386.5232044586771</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestDerivedShapeGetArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestDerivedShapeGetArea">[docs]</a><span class="k">class</span> <span class="nc">TestDerivedShapeGetArea</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<div class="viewcode-block" id="TestDerivedShapeGetArea.test_getAreaColdTrue"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestDerivedShapeGetArea.test_getAreaColdTrue">[docs]</a>    <span class="k">def</span> <span class="nf">test_getAreaColdTrue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Prove that the DerivedShape.getArea() works at cold=True.&quot;&quot;&quot;</span>
        <span class="c1"># load one-block test reactor</span>
        <span class="n">_o</span><span class="p">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">loadTestReactor</span><span class="p">(</span>
            <span class="n">inputFileName</span><span class="o">=</span><span class="s2">&quot;smallestTestReactor/armiRunSmallest.yaml&quot;</span>
        <span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">r</span><span class="o">.</span><span class="n">core</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># ensure there is a DerivedShape in this Block</span>
        <span class="n">shapes</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">b</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">Circle</span><span class="p">,</span> <span class="n">shapes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">DerivedShape</span><span class="p">,</span> <span class="n">shapes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">Helix</span><span class="p">,</span> <span class="n">shapes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">Hexagon</span><span class="p">,</span> <span class="n">shapes</span><span class="p">)</span>

        <span class="c1"># prove that getArea works on the block level</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">getArea</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">b</span><span class="o">.</span><span class="n">getArea</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="n">delta</span><span class="o">=</span><span class="mf">1e-10</span><span class="p">)</span>

        <span class="c1"># prove that getArea preserves the sum of all the areas, even if there is a DerivedShape</span>
        <span class="n">totalAreaCold</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">c</span><span class="o">.</span><span class="n">getArea</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">b</span><span class="p">])</span>
        <span class="n">totalAreaHot</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">c</span><span class="o">.</span><span class="n">getArea</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">b</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">totalAreaCold</span><span class="p">,</span> <span class="n">totalAreaHot</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="mf">1e-10</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestCircle"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle">[docs]</a><span class="k">class</span> <span class="nc">TestCircle</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test circle shaped component.&quot;&quot;&quot;</span>

    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">Circle</span>
    <span class="n">_id</span> <span class="o">=</span> <span class="mf">5.0</span>
    <span class="n">_od</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">_coldTemp</span> <span class="o">=</span> <span class="mf">25.0</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="n">_coldTemp</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="n">_od</span><span class="p">,</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">_id</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="TestCircle.test_getThermalExpansionFactorConservedMassByLinearExpansionPercent"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_getThermalExpansionFactorConservedMassByLinearExpansionPercent">[docs]</a>    <span class="k">def</span> <span class="nf">test_getThermalExpansionFactorConservedMassByLinearExpansionPercent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that when ARMI thermally expands a circle, mass is conserved.</span>

<span class="sd">        .. test:: Calculate thermal expansion.</span>
<span class="sd">            :id: T_ARMI_COMP_EXPANSION0</span>
<span class="sd">            :tests: R_ARMI_COMP_EXPANSION</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hotTemp</span> <span class="o">=</span> <span class="mf">700.0</span>
        <span class="n">dLL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">linearExpansionFactor</span><span class="p">(</span>
            <span class="n">Tc</span><span class="o">=</span><span class="n">hotTemp</span><span class="p">,</span> <span class="n">T0</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_coldTemp</span>
        <span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">+</span> <span class="n">dLL</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getThermalExpansionFactor</span><span class="p">(</span><span class="n">Tc</span><span class="o">=</span><span class="n">hotTemp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_getDimension"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_getDimension">[docs]</a>    <span class="k">def</span> <span class="nf">test_getDimension</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test getting component dimension at specific temperature.</span>

<span class="sd">        .. test:: Retrieve a dimension at a temperature.</span>
<span class="sd">            :id: T_ARMI_COMP_DIMS1</span>
<span class="sd">            :tests: R_ARMI_COMP_DIMS</span>

<span class="sd">        .. test:: Calculate thermal expansion.</span>
<span class="sd">            :id: T_ARMI_COMP_EXPANSION1</span>
<span class="sd">            :tests: R_ARMI_COMP_EXPANSION</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">hotTemp</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span> <span class="mi">901</span><span class="p">,</span> <span class="mi">25</span><span class="p">):</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_od</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getThermalExpansionFactor</span><span class="p">(</span><span class="n">Tc</span><span class="o">=</span><span class="n">hotTemp</span><span class="p">)</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;od&quot;</span><span class="p">,</span> <span class="n">Tc</span><span class="o">=</span><span class="n">hotTemp</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that ARMI can thermally expands a circle.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_od</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_getCircleInnerDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_getCircleInnerDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getCircleInnerDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getCircleInnerDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_id</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_dimensionThermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_dimensionThermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_dimensionThermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">expandedDims</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;od&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">]</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">expandedDims</span><span class="p">):</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div>

<div class="viewcode-block" id="TestCircle.test_getArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_getArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_getArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of circle.</span>

<span class="sd">        .. test:: Calculate area of circle.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL1</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># show we can calculate the area once</span>
        <span class="n">od</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;od&quot;</span><span class="p">)</span>
        <span class="n">idd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">((</span><span class="n">od</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">idd</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">mult</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span>

        <span class="c1"># show we can clear the cache, change the temp, and correctly re-calc the area</span>
        <span class="k">for</span> <span class="n">newTemp</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">690</span><span class="p">,</span> <span class="mi">19</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">clearCache</span><span class="p">()</span>

            <span class="c1"># re-calc area</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">temperatureInC</span> <span class="o">=</span> <span class="n">newTemp</span>
            <span class="n">od</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;od&quot;</span><span class="p">,</span> <span class="n">Tc</span><span class="o">=</span><span class="n">newTemp</span><span class="p">)</span>
            <span class="n">idd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Tc</span><span class="o">=</span><span class="n">newTemp</span><span class="p">)</span>
            <span class="n">ref</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">((</span><span class="n">od</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">idd</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">mult</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_componentInteractionsLinkingByDimensions"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_componentInteractionsLinkingByDimensions">[docs]</a>    <span class="k">def</span> <span class="nf">test_componentInteractionsLinkingByDimensions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tests linking of Components by dimensions.</span>

<span class="sd">        The component ``gap``, representing the fuel-clad gap filled with Void, is defined with</span>
<span class="sd">        dimensions that depend on the fuel outer diameter and clad inner diameter. The</span>
<span class="sd">        :py:meth:`~armi.reactor.components.component.Component.resolveLinkedDims` method links the</span>
<span class="sd">        gap dimensions appropriately when the Component is constructed, and the test shows the area</span>
<span class="sd">        of the gap is calculated correctly based on the thermally-expanded dimensions of the fuel</span>
<span class="sd">        and clad Components.</span>

<span class="sd">        .. test:: Show the dimensions of a liquid Component can be defined to depend on the solid</span>
<span class="sd">            Components that bound it.</span>
<span class="sd">            :id: T_ARMI_COMP_FLUID1</span>
<span class="sd">            :tests: R_ARMI_COMP_FLUID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nPins</span> <span class="o">=</span> <span class="mi">217</span>
        <span class="n">fuelDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span> <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="n">nPins</span><span class="p">}</span>
        <span class="n">cladDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span> <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="mf">1.1</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="n">nPins</span><span class="p">}</span>
        <span class="n">fuel</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;fuel&quot;</span><span class="p">,</span> <span class="s2">&quot;UZr&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">fuelDims</span><span class="p">)</span>
        <span class="n">clad</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;clad&quot;</span><span class="p">,</span> <span class="s2">&quot;HT9&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">cladDims</span><span class="p">)</span>
        <span class="n">gapDims</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
            <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
            <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="s2">&quot;clad.id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fuel.od&quot;</span><span class="p">,</span>
            <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="n">nPins</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">gapDims</span><span class="p">[</span><span class="s2">&quot;components&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;clad&quot;</span><span class="p">:</span> <span class="n">clad</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">:</span> <span class="n">fuel</span><span class="p">}</span>
        <span class="n">gap</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;gap&quot;</span><span class="p">,</span> <span class="s2">&quot;Void&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">gapDims</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="n">gap</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">od</span> <span class="o">=</span> <span class="n">gap</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;od&quot;</span><span class="p">)</span>
        <span class="n">idd</span> <span class="o">=</span> <span class="n">gap</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">((</span><span class="n">od</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="n">idd</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">gap</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_badComponentName"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_badComponentName">[docs]</a>    <span class="k">def</span> <span class="nf">test_badComponentName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This shows that resolveLinkedDims cannot support names with periods in them.&quot;&quot;&quot;</span>
        <span class="n">nPins</span> <span class="o">=</span> <span class="mi">12</span>
        <span class="n">fuelDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span> <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="n">nPins</span><span class="p">}</span>
        <span class="n">cladDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span> <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="mf">1.1</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="n">nPins</span><span class="p">}</span>
        <span class="n">fuel</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;fuel&quot;</span><span class="p">,</span> <span class="s2">&quot;UZr&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">fuelDims</span><span class="p">)</span>
        <span class="n">clad</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;clad_4.2.3&quot;</span><span class="p">,</span> <span class="s2">&quot;HT9&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">cladDims</span><span class="p">)</span>
        <span class="n">gapDims</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
            <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
            <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="s2">&quot;clad_4.2.3.id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;fuel.od&quot;</span><span class="p">,</span>
            <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="n">nPins</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">gapDims</span><span class="p">[</span><span class="s2">&quot;components&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;clad_4.2.3&quot;</span><span class="p">:</span> <span class="n">clad</span><span class="p">,</span> <span class="s2">&quot;fuel&quot;</span><span class="p">:</span> <span class="n">fuel</span><span class="p">}</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
            <span class="n">_gap</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;gap&quot;</span><span class="p">,</span> <span class="s2">&quot;Void&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">gapDims</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_componentInteractionsLinkingBySubtraction"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_componentInteractionsLinkingBySubtraction">[docs]</a>    <span class="k">def</span> <span class="nf">test_componentInteractionsLinkingBySubtraction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Tests linking of components by subtraction.&quot;&quot;&quot;</span>
        <span class="n">nPins</span> <span class="o">=</span> <span class="mi">217</span>
        <span class="n">gapDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span> <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="n">nPins</span><span class="p">}</span>
        <span class="n">gap</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;gap&quot;</span><span class="p">,</span> <span class="s2">&quot;Void&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">gapDims</span><span class="p">)</span>
        <span class="n">fuelDims</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
            <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
            <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="mf">0.9</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
            <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="n">nPins</span><span class="p">,</span>
            <span class="s2">&quot;modArea&quot;</span><span class="p">:</span> <span class="s2">&quot;gap.sub&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">fuel</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;fuel&quot;</span><span class="p">,</span> <span class="s2">&quot;UZr&quot;</span><span class="p">,</span> <span class="n">components</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;gap&quot;</span><span class="p">:</span> <span class="n">gap</span><span class="p">},</span> <span class="o">**</span><span class="n">fuelDims</span><span class="p">)</span>
        <span class="n">gapArea</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">gap</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
            <span class="o">*</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">gap</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;od&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
                <span class="o">-</span> <span class="p">(</span><span class="n">gap</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">fuelArea</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">fuel</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
            <span class="o">*</span> <span class="p">(</span>
                <span class="p">(</span><span class="n">fuel</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;od&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
                <span class="o">-</span> <span class="p">(</span><span class="n">fuel</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">fuelArea</span> <span class="o">-</span> <span class="n">gapArea</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="n">fuel</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_getNumberDensities"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_getNumberDensities">[docs]</a>    <span class="k">def</span> <span class="nf">test_getNumberDensities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that demonstrates that number densities can be retrieved on from component.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">numberDensities</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;NA23&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s2">&quot;NA23&quot;</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_changeNumberDensities"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_changeNumberDensities">[docs]</a>    <span class="k">def</span> <span class="nf">test_changeNumberDensities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that demonstates that the number densities on a component can be modified.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">numberDensities</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;NA23&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">detailedNDens</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">pinNDens</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s2">&quot;NA23&quot;</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">changeNDensByFactor</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s2">&quot;NA23&quot;</span><span class="p">),</span> <span class="mf">3.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">detailedNDens</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">3.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">pinNDens</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">3.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_fuelMass"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_fuelMass">[docs]</a>    <span class="k">def</span> <span class="nf">test_fuelMass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">nominalMass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getMass</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">flags</span><span class="o">.</span><span class="n">Flags</span><span class="o">.</span><span class="n">FUEL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getFuelMass</span><span class="p">(),</span> <span class="n">nominalMass</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">flags</span><span class="o">.</span><span class="n">Flags</span><span class="o">.</span><span class="n">MODERATOR</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getFuelMass</span><span class="p">(),</span> <span class="mf">0.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCircle.test_theoreticalDensitySetter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCircle.test_theoreticalDensitySetter">[docs]</a>    <span class="k">def</span> <span class="nf">test_theoreticalDensitySetter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure only fraction theoretical densities are supported.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span> <span class="o">=</span> <span class="mf">2.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span> <span class="o">=</span> <span class="mf">0.2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestComponentExpansion"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentExpansion">[docs]</a><span class="k">class</span> <span class="nc">TestComponentExpansion</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="n">tCold</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">tWarm</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">tHot</span> <span class="o">=</span> <span class="mi">500</span>
    <span class="n">coldOuterDiameter</span> <span class="o">=</span> <span class="mf">1.0</span>

<div class="viewcode-block" id="TestComponentExpansion.test_HT9Expansion"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentExpansion.test_HT9Expansion">[docs]</a>    <span class="k">def</span> <span class="nf">test_HT9Expansion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runExpansionTests</span><span class="p">(</span><span class="n">mat</span><span class="o">=</span><span class="s2">&quot;HT9&quot;</span><span class="p">,</span> <span class="n">isotope</span><span class="o">=</span><span class="s2">&quot;FE&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestComponentExpansion.test_UZrExpansion"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentExpansion.test_UZrExpansion">[docs]</a>    <span class="k">def</span> <span class="nf">test_UZrExpansion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runExpansionTests</span><span class="p">(</span><span class="n">mat</span><span class="o">=</span><span class="s2">&quot;UZr&quot;</span><span class="p">,</span> <span class="n">isotope</span><span class="o">=</span><span class="s2">&quot;U235&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestComponentExpansion.test_B4CExpansion"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentExpansion.test_B4CExpansion">[docs]</a>    <span class="k">def</span> <span class="nf">test_B4CExpansion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runExpansionTests</span><span class="p">(</span><span class="n">mat</span><span class="o">=</span><span class="s2">&quot;B4C&quot;</span><span class="p">,</span> <span class="n">isotope</span><span class="o">=</span><span class="s2">&quot;B10&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestComponentExpansion.runExpansionTests"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentExpansion.runExpansionTests">[docs]</a>    <span class="k">def</span> <span class="nf">runExpansionTests</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">isotope</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">componentMassIndependentOfInputTemp</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expansionConservationHotHeightDefined</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="n">isotope</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">expansionConservationColdHeightDefined</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestComponentExpansion.componentMassIndependentOfInputTemp"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentExpansion.componentMassIndependentOfInputTemp">[docs]</a>    <span class="k">def</span> <span class="nf">componentMassIndependentOfInputTemp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">circle1</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tCold</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tHot</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">coldOuterDiameter</span><span class="p">)</span>
        <span class="c1"># pick the input dimension to get the same hot component</span>
        <span class="n">hotterDim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">coldOuterDiameter</span> <span class="o">*</span> <span class="p">(</span>
            <span class="mi">1</span> <span class="o">+</span> <span class="n">circle1</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">linearExpansionFactor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tCold</span> <span class="o">+</span> <span class="mi">200</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tCold</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">circle2</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tCold</span> <span class="o">+</span> <span class="mi">200</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tHot</span><span class="p">,</span> <span class="n">hotterDim</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">circle1</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;od&quot;</span><span class="p">),</span> <span class="n">circle2</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;od&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">circle1</span><span class="o">.</span><span class="n">getArea</span><span class="p">(),</span> <span class="n">circle2</span><span class="o">.</span><span class="n">getArea</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">circle1</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span> <span class="n">circle2</span><span class="o">.</span><span class="n">density</span><span class="p">())</span></div>

<div class="viewcode-block" id="TestComponentExpansion.expansionConservationHotHeightDefined"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentExpansion.expansionConservationHotHeightDefined">[docs]</a>    <span class="k">def</span> <span class="nf">expansionConservationHotHeightDefined</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">isotope</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Demonstrate tutorial for how to expand and relationships conserved at during expansion.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        - height taken as hot height and show how quantity is conserved with</span>
<span class="sd">          inputHeightsConsideredHot = True (the default)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hotHeight</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="n">circle1</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tCold</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tWarm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">coldOuterDiameter</span><span class="p">)</span>
        <span class="n">circle2</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tCold</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tHot</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">coldOuterDiameter</span><span class="p">)</span>

        <span class="c1"># mass density is proportional to Fe number density and derived from</span>
        <span class="c1"># all the number densities and atomic masses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
            <span class="n">circle1</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">numberDensities</span><span class="p">[</span><span class="n">isotope</span><span class="p">]</span> <span class="o">/</span> <span class="n">circle2</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">numberDensities</span><span class="p">[</span><span class="n">isotope</span><span class="p">],</span>
            <span class="n">circle1</span><span class="o">.</span><span class="n">density</span><span class="p">()</span> <span class="o">/</span> <span class="n">circle2</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span>
        <span class="p">)</span>

        <span class="c1"># the colder one has more because it is the same cold outer diameter</span>
        <span class="c1"># but it would be taller at the same temperature</span>
        <span class="n">mass1</span> <span class="o">=</span> <span class="n">circle1</span><span class="o">.</span><span class="n">density</span><span class="p">()</span> <span class="o">*</span> <span class="n">circle1</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span> <span class="o">*</span> <span class="n">hotHeight</span>
        <span class="n">mass2</span> <span class="o">=</span> <span class="n">circle2</span><span class="o">.</span><span class="n">density</span><span class="p">()</span> <span class="o">*</span> <span class="n">circle2</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span> <span class="o">*</span> <span class="n">hotHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertGreater</span><span class="p">(</span><span class="n">mass1</span><span class="p">,</span> <span class="n">mass2</span><span class="p">)</span>

        <span class="c1"># they are off by factor of thermal exp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
            <span class="n">mass1</span> <span class="o">*</span> <span class="n">circle1</span><span class="o">.</span><span class="n">getThermalExpansionFactor</span><span class="p">(),</span>
            <span class="n">mass2</span> <span class="o">*</span> <span class="n">circle2</span><span class="o">.</span><span class="n">getThermalExpansionFactor</span><span class="p">(),</span>
        <span class="p">)</span>

        <span class="c1"># material.pseudoDensity is the 2D density of a material</span>
        <span class="c1"># material.density is true density and not equal in this case</span>
        <span class="k">for</span> <span class="n">circle</span> <span class="ow">in</span> <span class="p">[</span><span class="n">circle1</span><span class="p">,</span> <span class="n">circle2</span><span class="p">]:</span>
            <span class="c1"># 2D density is not equal after application of coldMatAxialExpansionFactor</span>
            <span class="c1"># which happens during construction</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertNotAlmostEqual</span><span class="p">(</span>
                <span class="n">circle</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span>
                <span class="n">circle</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">pseudoDensity</span><span class="p">(</span><span class="n">Tc</span><span class="o">=</span><span class="n">circle</span><span class="o">.</span><span class="n">temperatureInC</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="c1"># 2D density is off by the material thermal exp factor</span>
            <span class="n">percent</span> <span class="o">=</span> <span class="n">circle</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">linearExpansionPercent</span><span class="p">(</span><span class="n">Tc</span><span class="o">=</span><span class="n">circle</span><span class="o">.</span><span class="n">temperatureInC</span><span class="p">)</span>
            <span class="n">thermalExpansionFactorFromColdMatTemp</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">percent</span> <span class="o">/</span> <span class="mi">100</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
                <span class="n">circle</span><span class="o">.</span><span class="n">density</span><span class="p">()</span> <span class="o">*</span> <span class="n">thermalExpansionFactorFromColdMatTemp</span><span class="p">,</span>
                <span class="n">circle</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">pseudoDensity</span><span class="p">(</span><span class="n">Tc</span><span class="o">=</span><span class="n">circle</span><span class="o">.</span><span class="n">temperatureInC</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
                <span class="n">circle</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span>
                <span class="n">circle</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">density</span><span class="p">(</span><span class="n">Tc</span><span class="o">=</span><span class="n">circle</span><span class="o">.</span><span class="n">temperatureInC</span><span class="p">),</span>
            <span class="p">)</span>

        <span class="c1"># brief 2D expansion with set temp to show mass is conserved hot height would come from</span>
        <span class="c1"># block value</span>
        <span class="n">warmMass</span> <span class="o">=</span> <span class="n">circle1</span><span class="o">.</span><span class="n">density</span><span class="p">()</span> <span class="o">*</span> <span class="n">circle1</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span> <span class="o">*</span> <span class="n">hotHeight</span>
        <span class="n">circle1</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tHot</span><span class="p">)</span>
        <span class="n">hotMass</span> <span class="o">=</span> <span class="n">circle1</span><span class="o">.</span><span class="n">density</span><span class="p">()</span> <span class="o">*</span> <span class="n">circle1</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span> <span class="o">*</span> <span class="n">hotHeight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">warmMass</span><span class="p">,</span> <span class="n">hotMass</span><span class="p">)</span>
        <span class="n">circle1</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tWarm</span><span class="p">)</span>

        <span class="c1"># Change temp to circle 2 temp  to show equal to circle2 and then change back to show</span>
        <span class="c1"># recoverable to original values</span>
        <span class="n">oldArea</span> <span class="o">=</span> <span class="n">circle1</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="n">initialDens</span> <span class="o">=</span> <span class="n">circle1</span><span class="o">.</span><span class="n">density</span><span class="p">()</span>

        <span class="c1"># when block.setHeight is called (which effectively changes component height)</span>
        <span class="c1"># component.setNumberDensity is called (for solid isotopes) to adjust the number density so</span>
        <span class="c1"># that now the 2D expansion will be approximated/expanded around the hot temp which is akin</span>
        <span class="c1"># to these adjustments</span>
        <span class="n">heightFactor</span> <span class="o">=</span> <span class="n">circle1</span><span class="o">.</span><span class="n">getHeightFactor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tHot</span><span class="p">)</span>
        <span class="n">circle1</span><span class="o">.</span><span class="n">adjustDensityForHeightExpansion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tHot</span><span class="p">)</span>  <span class="c1"># apply temp at new height</span>
        <span class="n">circle1</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tHot</span><span class="p">)</span>

        <span class="c1"># now its density is same as hot component</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
            <span class="n">circle1</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span>
            <span class="n">circle2</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span>
        <span class="p">)</span>

        <span class="c1"># show that mass is conserved after expansion</span>
        <span class="n">circle1NewHotHeight</span> <span class="o">=</span> <span class="n">hotHeight</span> <span class="o">*</span> <span class="n">heightFactor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
            <span class="n">mass1</span><span class="p">,</span> <span class="n">circle1</span><span class="o">.</span><span class="n">density</span><span class="p">()</span> <span class="o">*</span> <span class="n">circle1</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span> <span class="o">*</span> <span class="n">circle1NewHotHeight</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
            <span class="n">circle1</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span>
            <span class="n">circle1</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">density</span><span class="p">(</span><span class="n">Tc</span><span class="o">=</span><span class="n">circle1</span><span class="o">.</span><span class="n">temperatureInC</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="c1"># change back to old temp</span>
        <span class="n">circle1</span><span class="o">.</span><span class="n">adjustDensityForHeightExpansion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tWarm</span><span class="p">)</span>
        <span class="n">circle1</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tWarm</span><span class="p">)</span>

        <span class="c1"># check for consistency</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">initialDens</span><span class="p">,</span> <span class="n">circle1</span><span class="o">.</span><span class="n">density</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">oldArea</span><span class="p">,</span> <span class="n">circle1</span><span class="o">.</span><span class="n">getArea</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">mass1</span><span class="p">,</span> <span class="n">circle1</span><span class="o">.</span><span class="n">density</span><span class="p">()</span> <span class="o">*</span> <span class="n">circle1</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span> <span class="o">*</span> <span class="n">hotHeight</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestComponentExpansion.expansionConservationColdHeightDefined"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestComponentExpansion.expansionConservationColdHeightDefined">[docs]</a>    <span class="k">def</span> <span class="nf">expansionConservationColdHeightDefined</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Demonstrate that material is conserved at during expansion.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        - height taken as cold height and show how quantity is conserved with</span>
<span class="sd">          inputHeightsConsideredHot = False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coldHeight</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">circle1</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tCold</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tWarm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">coldOuterDiameter</span><span class="p">)</span>
        <span class="n">circle2</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tCold</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tHot</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">coldOuterDiameter</span><span class="p">)</span>
        <span class="c1"># same as 1 but we will make like 2</span>
        <span class="n">circle1AdjustTo2</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span>
            <span class="s2">&quot;circle&quot;</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tCold</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tWarm</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">coldOuterDiameter</span>
        <span class="p">)</span>

        <span class="c1"># make it hot like 2</span>
        <span class="n">circle1AdjustTo2</span><span class="o">.</span><span class="n">adjustDensityForHeightExpansion</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tHot</span><span class="p">)</span>
        <span class="n">circle1AdjustTo2</span><span class="o">.</span><span class="n">setTemperature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tHot</span><span class="p">)</span>
        <span class="c1"># check that its like 2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">circle2</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span> <span class="n">circle1AdjustTo2</span><span class="o">.</span><span class="n">density</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">circle2</span><span class="o">.</span><span class="n">getArea</span><span class="p">(),</span> <span class="n">circle1AdjustTo2</span><span class="o">.</span><span class="n">getArea</span><span class="p">())</span>

        <span class="k">for</span> <span class="n">circle</span> <span class="ow">in</span> <span class="p">[</span><span class="n">circle1</span><span class="p">,</span> <span class="n">circle2</span><span class="p">,</span> <span class="n">circle1AdjustTo2</span><span class="p">]:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
                <span class="n">circle</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span>
                <span class="n">circle</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">density</span><span class="p">(</span><span class="n">Tc</span><span class="o">=</span><span class="n">circle</span><span class="o">.</span><span class="n">temperatureInC</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="c1"># total mass consistent between hot and cold</span>
            <span class="c1"># Hot height will be taller</span>
            <span class="n">hotHeight</span> <span class="o">=</span> <span class="n">coldHeight</span> <span class="o">*</span> <span class="n">circle</span><span class="o">.</span><span class="n">getThermalExpansionFactor</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
                <span class="n">coldHeight</span>
                <span class="o">*</span> <span class="n">circle</span><span class="o">.</span><span class="n">getArea</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="o">*</span> <span class="n">circle</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">density</span><span class="p">(</span><span class="n">Tc</span><span class="o">=</span><span class="n">circle</span><span class="o">.</span><span class="n">inputTemperatureInC</span><span class="p">),</span>
                <span class="n">hotHeight</span> <span class="o">*</span> <span class="n">circle</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span> <span class="o">*</span> <span class="n">circle</span><span class="o">.</span><span class="n">density</span><span class="p">(),</span>
            <span class="p">)</span></div></div>


<div class="viewcode-block" id="TestTriangle"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestTriangle">[docs]</a><span class="k">class</span> <span class="nc">TestTriangle</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test triangle shaped component.&quot;&quot;&quot;</span>

    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">Triangle</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;base&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>
        <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="TestTriangle.test_getArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestTriangle.test_getArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_getArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of triangle.</span>

<span class="sd">        .. test:: Calculate area of triangle.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL2</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>

<span class="sd">        .. test:: Triangle shaped component</span>
<span class="sd">            :id: T_ARMI_COMP_SHAPES1</span>
<span class="sd">            :tests: R_ARMI_COMP_SHAPES</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;base&quot;</span><span class="p">)</span>
        <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">b</span> <span class="o">*</span> <span class="n">h</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestTriangle.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestTriangle.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that ARMI can thermally expands a triangle.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestTriangle.test_dimensionThermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestTriangle.test_dimensionThermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_dimensionThermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">expandedDims</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;base&quot;</span><span class="p">,</span> <span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">]</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">expandedDims</span><span class="p">):</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="TestRectangle"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestRectangle">[docs]</a><span class="k">class</span> <span class="nc">TestRectangle</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test rectangle shaped component.&quot;&quot;&quot;</span>

    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">Rectangle</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;lengthOuter&quot;</span><span class="p">:</span> <span class="mf">6.0</span><span class="p">,</span>
        <span class="s2">&quot;lengthInner&quot;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span>
        <span class="s2">&quot;widthOuter&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
        <span class="s2">&quot;widthInner&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="TestRectangle.test_negativeArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestRectangle.test_negativeArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_negativeArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
            <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
            <span class="s2">&quot;lengthOuter&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
            <span class="s2">&quot;lengthInner&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
            <span class="s2">&quot;widthOuter&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
            <span class="s2">&quot;widthInner&quot;</span><span class="p">:</span> <span class="mf">6.0</span><span class="p">,</span>
            <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">refArea</span> <span class="o">=</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;mult&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span>
            <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;lengthOuter&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">]</span>
            <span class="o">-</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;lengthInner&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;widthInner&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">negativeRectangle</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;Void&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">dims</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">negativeRectangle</span><span class="o">.</span><span class="n">getArea</span><span class="p">(),</span> <span class="n">refArea</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ArithmeticError</span><span class="p">):</span>
            <span class="n">negativeRectangle</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;UZr&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">dims</span><span class="p">)</span>
            <span class="n">negativeRectangle</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span></div>

<div class="viewcode-block" id="TestRectangle.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestRectangle.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get outer diameter bounding circle.</span>

<span class="sd">        .. test:: Rectangle shaped component</span>
<span class="sd">            :id: T_ARMI_COMP_SHAPES2</span>
<span class="sd">            :tests: R_ARMI_COMP_SHAPES</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">61.0</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span>

        <span class="c1"># verify the area of the rectangle is correct</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;lengthOuter&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">]</span>
        <span class="n">ref</span> <span class="o">-=</span> <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;lengthInner&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;widthInner&quot;</span><span class="p">]</span>
        <span class="n">ref</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;mult&quot;</span><span class="p">]</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestRectangle.test_getCircleInnerDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestRectangle.test_getCircleInnerDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getCircleInnerDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getCircleInnerDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">25.0</span><span class="p">),</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestRectangle.test_getArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestRectangle.test_getArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_getArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of rectangle.</span>

<span class="sd">        .. test:: Calculate area of rectangle.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL3</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">outerL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;lengthOuter&quot;</span><span class="p">)</span>
        <span class="n">innerL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;lengthInner&quot;</span><span class="p">)</span>
        <span class="n">outerW</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">)</span>
        <span class="n">innerW</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;widthInner&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="p">(</span><span class="n">outerL</span> <span class="o">*</span> <span class="n">outerW</span> <span class="o">-</span> <span class="n">innerL</span> <span class="o">*</span> <span class="n">innerW</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestRectangle.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestRectangle.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that ARMI can thermally expands a rectangle.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestRectangle.test_dimensionThermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestRectangle.test_dimensionThermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_dimensionThermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">expandedDims</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;lengthInner&quot;</span><span class="p">,</span>
            <span class="s2">&quot;lengthOuter&quot;</span><span class="p">,</span>
            <span class="s2">&quot;widthInner&quot;</span><span class="p">,</span>
            <span class="s2">&quot;widthOuter&quot;</span><span class="p">,</span>
            <span class="s2">&quot;mult&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">expandedDims</span><span class="p">):</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="TestSolidRectangle"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSolidRectangle">[docs]</a><span class="k">class</span> <span class="nc">TestSolidRectangle</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">SolidRectangle</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;lengthOuter&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
        <span class="s2">&quot;widthOuter&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="TestSolidRectangle.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSolidRectangle.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test get bounding circle of the outer diameter.&quot;&quot;&quot;</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestSolidRectangle.test_getArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSolidRectangle.test_getArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_getArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of solid rectangle.</span>

<span class="sd">        .. test:: Calculate area of solid rectangle.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL4</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">outerL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;lengthOuter&quot;</span><span class="p">)</span>
        <span class="n">outerW</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="p">(</span><span class="n">outerL</span> <span class="o">*</span> <span class="n">outerW</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestSolidRectangle.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSolidRectangle.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that ARMI can thermally expands a solid rectangle.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestSolidRectangle.test_dimensionThermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSolidRectangle.test_dimensionThermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_dimensionThermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">expandedDims</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lengthOuter&quot;</span><span class="p">,</span> <span class="s2">&quot;widthOuter&quot;</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">]</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">expandedDims</span><span class="p">):</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="TestSquare"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSquare">[docs]</a><span class="k">class</span> <span class="nc">TestSquare</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test square shaped component.&quot;&quot;&quot;</span>

    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">Square</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;widthOuter&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>
        <span class="s2">&quot;widthInner&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="TestSquare.test_negativeArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSquare.test_negativeArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_negativeArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
            <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
            <span class="s2">&quot;widthOuter&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
            <span class="s2">&quot;widthInner&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
            <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">refArea</span> <span class="o">=</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;mult&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span>
            <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">]</span>
            <span class="o">-</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;widthInner&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;widthInner&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">negativeRectangle</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;Void&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">dims</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">negativeRectangle</span><span class="o">.</span><span class="n">getArea</span><span class="p">(),</span> <span class="n">refArea</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ArithmeticError</span><span class="p">):</span>
            <span class="n">negativeRectangle</span> <span class="o">=</span> <span class="n">Square</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;UZr&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">dims</span><span class="p">)</span>
            <span class="n">negativeRectangle</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span></div>

<div class="viewcode-block" id="TestSquare.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSquare.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get bounding circle outer diameter.</span>

<span class="sd">        .. test:: Square shaped component</span>
<span class="sd">            :id: T_ARMI_COMP_SHAPES3</span>
<span class="sd">            :tests: R_ARMI_COMP_SHAPES</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">18.0</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span>

        <span class="c1"># verify the area of the circle is correct</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;widthInner&quot;</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span>
        <span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getComponentArea</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestSquare.test_getCircleInnerDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSquare.test_getCircleInnerDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getCircleInnerDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">8.0</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getCircleInnerDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestSquare.test_getArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSquare.test_getArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_getArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of square.</span>

<span class="sd">        .. test:: Calculate area of square.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL5</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">outerW</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">)</span>
        <span class="n">innerW</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;widthInner&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="p">(</span><span class="n">outerW</span> <span class="o">*</span> <span class="n">outerW</span> <span class="o">-</span> <span class="n">innerW</span> <span class="o">*</span> <span class="n">innerW</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestSquare.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSquare.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that ARMI can thermally expands a square.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestSquare.test_dimensionThermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSquare.test_dimensionThermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_dimensionThermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">expandedDims</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">,</span> <span class="s2">&quot;widthInner&quot;</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">]</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">expandedDims</span><span class="p">):</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="TestCube"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCube">[docs]</a><span class="k">class</span> <span class="nc">TestCube</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">Cube</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;lengthOuter&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
        <span class="s2">&quot;lengthInner&quot;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span>
        <span class="s2">&quot;widthOuter&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
        <span class="s2">&quot;widthInner&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>
        <span class="s2">&quot;heightOuter&quot;</span><span class="p">:</span> <span class="mf">20.0</span><span class="p">,</span>
        <span class="s2">&quot;heightInner&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="TestCube.test_negativeVolume"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCube.test_negativeVolume">[docs]</a>    <span class="k">def</span> <span class="nf">test_negativeVolume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
            <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
            <span class="s2">&quot;lengthOuter&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
            <span class="s2">&quot;lengthInner&quot;</span><span class="p">:</span> <span class="mf">20.0</span><span class="p">,</span>
            <span class="s2">&quot;widthOuter&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
            <span class="s2">&quot;widthInner&quot;</span><span class="p">:</span> <span class="mf">30.0</span><span class="p">,</span>
            <span class="s2">&quot;heightOuter&quot;</span><span class="p">:</span> <span class="mf">20.0</span><span class="p">,</span>
            <span class="s2">&quot;heightInner&quot;</span><span class="p">:</span> <span class="mf">30.0</span><span class="p">,</span>
            <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">refVolume</span> <span class="o">=</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;mult&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span>
            <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;lengthOuter&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;heightOuter&quot;</span><span class="p">]</span>
            <span class="o">-</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;lengthInner&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;widthInner&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="s2">&quot;heightInner&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">negativeCube</span> <span class="o">=</span> <span class="n">Cube</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;Void&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">dims</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">negativeCube</span><span class="o">.</span><span class="n">getVolume</span><span class="p">(),</span> <span class="n">refVolume</span><span class="p">)</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ArithmeticError</span><span class="p">):</span>
            <span class="n">negativeCube</span> <span class="o">=</span> <span class="n">Cube</span><span class="p">(</span><span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="s2">&quot;UZr&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">dims</span><span class="p">)</span>
            <span class="n">negativeCube</span><span class="o">.</span><span class="n">getVolume</span><span class="p">()</span></div>

<div class="viewcode-block" id="TestCube.test_getVolume"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCube.test_getVolume">[docs]</a>    <span class="k">def</span> <span class="nf">test_getVolume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of cube.</span>

<span class="sd">        .. test:: Calculate area of cube.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL6</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lengthO</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;lengthOuter&quot;</span><span class="p">)</span>
        <span class="n">widthO</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">)</span>
        <span class="n">heightO</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;heightOuter&quot;</span><span class="p">)</span>
        <span class="n">lengthI</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;lengthInner&quot;</span><span class="p">)</span>
        <span class="n">widthI</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;widthInner&quot;</span><span class="p">)</span>
        <span class="n">heightI</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;heightInner&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="p">(</span><span class="n">lengthO</span> <span class="o">*</span> <span class="n">widthO</span> <span class="o">*</span> <span class="n">heightO</span> <span class="o">-</span> <span class="n">lengthI</span> <span class="o">*</span> <span class="n">widthI</span> <span class="o">*</span> <span class="n">heightI</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getVolume</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestCube.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestCube.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that ARMI can thermally expands a cube.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestHexagon"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexagon">[docs]</a><span class="k">class</span> <span class="nc">TestHexagon</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test hexagon shaped component.&quot;&quot;&quot;</span>

    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">Hexagon</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span> <span class="s2">&quot;op&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s2">&quot;ip&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

<div class="viewcode-block" id="TestHexagon.test_getPerimeter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexagon.test_getPerimeter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getPerimeter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get perimeter of hexagon.</span>

<span class="sd">        .. test:: Hexagon shaped component</span>
<span class="sd">            :id: T_ARMI_COMP_SHAPES4</span>
<span class="sd">            :tests: R_ARMI_COMP_SHAPES</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="p">(</span><span class="n">ip</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span> <span class="o">*</span> <span class="n">mult</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getPerimeter</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHexagon.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexagon.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHexagon.test_getCircleInnerDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexagon.test_getCircleInnerDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getCircleInnerDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="mf">5.0</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getCircleInnerDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHexagon.test_getArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexagon.test_getArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_getArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of hexagon.</span>

<span class="sd">        .. test:: Calculate area of hexagon.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL7</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;op&quot;</span><span class="p">)</span>
        <span class="n">ip</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;ip&quot;</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="p">(</span><span class="n">op</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">ip</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">mult</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHexagon.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexagon.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that ARMI can thermally expands a hexagon.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHexagon.test_dimensionThermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexagon.test_dimensionThermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_dimensionThermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">expandedDims</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;op&quot;</span><span class="p">,</span> <span class="s2">&quot;ip&quot;</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">]</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">expandedDims</span><span class="p">):</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="TestHoledHexagon"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledHexagon">[docs]</a><span class="k">class</span> <span class="nc">TestHoledHexagon</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test holed hexagon shaped component.&quot;&quot;&quot;</span>

    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">HoledHexagon</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;op&quot;</span><span class="p">:</span> <span class="mf">16.5</span><span class="p">,</span>
        <span class="s2">&quot;holeOD&quot;</span><span class="p">:</span> <span class="mf">3.6</span><span class="p">,</span>
        <span class="s2">&quot;nHoles&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="TestHoledHexagon.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledHexagon.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="mf">16.5</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHoledHexagon.test_getCircleInnerDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledHexagon.test_getCircleInnerDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getCircleInnerDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># there are multiple holes, so the function should return 0</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getCircleInnerDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span>

        <span class="c1"># make and test another one with just 1 hole</span>
        <span class="n">simpleHoledHexagon</span> <span class="o">=</span> <span class="n">HoledHexagon</span><span class="p">(</span>
            <span class="s2">&quot;hex&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Void&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;Tinput&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;Thot&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;op&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;holeOD&quot;</span><span class="p">],</span>
            <span class="n">nHoles</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;holeOD&quot;</span><span class="p">],</span>
            <span class="n">simpleHoledHexagon</span><span class="o">.</span><span class="n">getCircleInnerDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="TestHoledHexagon.test_getArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledHexagon.test_getArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_getArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of holed hexagon.</span>

<span class="sd">        .. test:: Calculate area of holed hexagon.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL8</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">op</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;op&quot;</span><span class="p">)</span>
        <span class="n">odHole</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;holeOD&quot;</span><span class="p">)</span>
        <span class="n">nHoles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;nHoles&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">hexarea</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="p">(</span><span class="n">op</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">holeArea</span> <span class="o">=</span> <span class="n">nHoles</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">((</span><span class="n">odHole</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="p">(</span><span class="n">hexarea</span> <span class="o">-</span> <span class="n">holeArea</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHoledHexagon.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledHexagon.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that ARMI can thermally expands a holed hexagon.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHoledHexagon.test_dimensionThermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledHexagon.test_dimensionThermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_dimensionThermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">expandedDims</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;op&quot;</span><span class="p">,</span> <span class="s2">&quot;holeOD&quot;</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">]</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">expandedDims</span><span class="p">):</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="TestHexHoledCircle"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexHoledCircle">[docs]</a><span class="k">class</span> <span class="nc">TestHexHoledCircle</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">HexHoledCircle</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="mf">16.5</span><span class="p">,</span>
        <span class="s2">&quot;holeOP&quot;</span><span class="p">:</span> <span class="mf">3.6</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="TestHexHoledCircle.test_getCircleInnerDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexHoledCircle.test_getCircleInnerDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getCircleInnerDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">simpleHexHoledCircle</span> <span class="o">=</span> <span class="n">HexHoledCircle</span><span class="p">(</span>
            <span class="s2">&quot;Circle&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Void&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;Tinput&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;Thot&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;od&quot;</span><span class="p">],</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;holeOP&quot;</span><span class="p">],</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;holeOP&quot;</span><span class="p">],</span>
            <span class="n">simpleHexHoledCircle</span><span class="o">.</span><span class="n">getCircleInnerDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="TestHexHoledCircle.test_getArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexHoledCircle.test_getArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_getArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of hex holed circle.</span>

<span class="sd">        .. test:: Calculate area of hex holed circle.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL9</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">od</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;od&quot;</span><span class="p">)</span>
        <span class="n">holeOP</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;holeOP&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">hexarea</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">3.0</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="p">(</span><span class="n">holeOP</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">holeArea</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">((</span><span class="n">od</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="p">(</span><span class="n">holeArea</span> <span class="o">-</span> <span class="n">hexarea</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHexHoledCircle.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexHoledCircle.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test that ARMI can thermally expands a holed hexagon.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHexHoledCircle.test_dimensionThermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHexHoledCircle.test_dimensionThermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_dimensionThermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">expandedDims</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;od&quot;</span><span class="p">,</span> <span class="s2">&quot;holeOP&quot;</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">]</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">expandedDims</span><span class="p">):</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="TestHoledRectangle"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledRectangle">[docs]</a><span class="k">class</span> <span class="nc">TestHoledRectangle</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tests HoledRectangle, and provides much support for HoledSquare test.&quot;&quot;&quot;</span>

    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">HoledRectangle</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;lengthOuter&quot;</span><span class="p">:</span> <span class="mf">16.0</span><span class="p">,</span>
        <span class="s2">&quot;widthOuter&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span>
        <span class="s2">&quot;holeOD&quot;</span><span class="p">:</span> <span class="mf">3.6</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">dimsToTestExpansion</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;lengthOuter&quot;</span><span class="p">,</span> <span class="s2">&quot;widthOuter&quot;</span><span class="p">,</span> <span class="s2">&quot;holeOD&quot;</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">TestShapedComponent</span><span class="o">.</span><span class="n">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setClassDims</span><span class="p">()</span>

<div class="viewcode-block" id="TestHoledRectangle.setClassDims"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledRectangle.setClassDims">[docs]</a>    <span class="k">def</span> <span class="nf">setClassDims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This enables subclassing testing for square</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;lengthOuter&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHoledRectangle.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledRectangle.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># hypotenuse</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">**</span> <span class="mf">0.5</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHoledRectangle.test_getCircleInnerDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledRectangle.test_getCircleInnerDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getCircleInnerDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;holeOD&quot;</span><span class="p">]</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getCircleInnerDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHoledRectangle.test_getArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledRectangle.test_getArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_getArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of holed rectangle.</span>

<span class="sd">        .. test:: Calculate area of holed rectangle.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL10</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rectArea</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span>
        <span class="n">odHole</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;holeOD&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">holeArea</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">((</span><span class="n">odHole</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="p">(</span><span class="n">rectArea</span> <span class="o">-</span> <span class="n">holeArea</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHoledRectangle.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledRectangle.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHoledRectangle.test_dimensionThermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledRectangle.test_dimensionThermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_dimensionThermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dimsToTestExpansion</span><span class="p">)</span>
        <span class="n">ref</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># mult shouldn&#39;t expand</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dimsToTestExpansion</span><span class="p">):</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div></div>


<div class="viewcode-block" id="TestHoledSquare"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledSquare">[docs]</a><span class="k">class</span> <span class="nc">TestHoledSquare</span><span class="p">(</span><span class="n">TestHoledRectangle</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test holed square shaped component.&quot;&quot;&quot;</span>

    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">HoledSquare</span>

    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;widthOuter&quot;</span><span class="p">:</span> <span class="mf">16.0</span><span class="p">,</span>
        <span class="s2">&quot;holeOD&quot;</span><span class="p">:</span> <span class="mf">3.6</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">dimsToTestExpansion</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">,</span> <span class="s2">&quot;holeOD&quot;</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">]</span>

<div class="viewcode-block" id="TestHoledSquare.setClassDims"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledSquare.setClassDims">[docs]</a>    <span class="k">def</span> <span class="nf">setClassDims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># This enables subclassing testing for square</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;widthOuter&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHoledSquare.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledSquare.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHoledSquare.test_getCircleInnerDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHoledSquare.test_getCircleInnerDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getCircleInnerDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">componentDims</span><span class="p">[</span><span class="s2">&quot;holeOD&quot;</span><span class="p">]</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getCircleInnerDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestHelix"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHelix">[docs]</a><span class="k">class</span> <span class="nc">TestHelix</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test helix shaped component.&quot;&quot;&quot;</span>

    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">Helix</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">,</span>
        <span class="s2">&quot;axialPitch&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mf">1.5</span><span class="p">,</span>
        <span class="s2">&quot;helixDiameter&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="TestHelix.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHelix.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">+</span> <span class="mf">0.25</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHelix.test_getCircleInnerDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHelix.test_getCircleInnerDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getCircleInnerDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">-</span> <span class="mf">0.25</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getCircleInnerDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">ref</span><span class="p">,</span> <span class="n">cur</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHelix.test_getArea"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHelix.test_getArea">[docs]</a>    <span class="k">def</span> <span class="nf">test_getArea</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of helix.</span>

<span class="sd">        .. test:: Calculate area of helix.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL11</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getArea</span><span class="p">()</span>
        <span class="n">axialPitch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;axialPitch&quot;</span><span class="p">)</span>
        <span class="n">helixDiameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;helixDiameter&quot;</span><span class="p">)</span>
        <span class="n">innerDiameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="n">outerDiameter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;od&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">axialPitch</span> <span class="o">/</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
        <span class="n">helixFactor</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">((</span><span class="n">helixDiameter</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">c</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">c</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">mult</span>
            <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
            <span class="o">*</span> <span class="p">(</span><span class="n">outerDiameter</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="mf">4.0</span> <span class="o">-</span> <span class="n">innerDiameter</span><span class="o">**</span><span class="mi">2</span> <span class="o">/</span> <span class="mf">4.0</span><span class="p">)</span>
            <span class="o">*</span> <span class="n">helixFactor</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHelix.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHelix.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestHelix.test_dimensionThermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHelix.test_dimensionThermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_dimensionThermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">expandedDims</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;od&quot;</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;axialPitch&quot;</span><span class="p">,</span> <span class="s2">&quot;helixDiameter&quot;</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">]</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">expandedDims</span><span class="p">):</span>
            <span class="n">cur</span> <span class="o">=</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div>

<div class="viewcode-block" id="TestHelix.test_validParameters"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestHelix.test_validParameters">[docs]</a>    <span class="k">def</span> <span class="nf">test_validParameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Testing the Helix class performs as expected with various inputs.&quot;&quot;&quot;</span>
        <span class="c1"># stupid/simple inputs</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">Helix</span><span class="p">(</span><span class="s2">&quot;thing&quot;</span><span class="p">,</span> <span class="s2">&quot;Cu&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">h</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;axialPitch&quot;</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>

        <span class="c1"># standard case / inputs ordered well</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">Helix</span><span class="p">(</span>
            <span class="s2">&quot;what&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Cu&quot;</span><span class="p">,</span>
            <span class="n">Tinput</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span>
            <span class="n">Thot</span><span class="o">=</span><span class="mf">425.0</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
            <span class="n">od</span><span class="o">=</span><span class="mf">0.35</span><span class="p">,</span>
            <span class="n">mult</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
            <span class="n">axialPitch</span><span class="o">=</span><span class="mf">1.123</span><span class="p">,</span>
            <span class="n">helixDiameter</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="mf">1.123</span> <span class="o">&lt;</span> <span class="n">h</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;axialPitch&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1.15</span><span class="p">)</span>

        <span class="c1"># inputs ordered crazy</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">Helix</span><span class="p">(</span>
            <span class="n">material</span><span class="o">=</span><span class="s2">&quot;Cu&quot;</span><span class="p">,</span>
            <span class="nb">id</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
            <span class="n">mult</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
            <span class="n">Tinput</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span>
            <span class="n">Thot</span><span class="o">=</span><span class="mf">425.0</span><span class="p">,</span>
            <span class="n">axialPitch</span><span class="o">=</span><span class="mf">1.123</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;stuff&quot;</span><span class="p">,</span>
            <span class="n">od</span><span class="o">=</span><span class="mf">0.35</span><span class="p">,</span>
            <span class="n">helixDiameter</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertTrue</span><span class="p">(</span><span class="mf">1.123</span> <span class="o">&lt;</span> <span class="n">h</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;axialPitch&quot;</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1.15</span><span class="p">)</span>

        <span class="c1"># missing helixDiameter input</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
            <span class="n">h</span> <span class="o">=</span> <span class="n">Helix</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;helix&quot;</span><span class="p">,</span>
                <span class="n">material</span><span class="o">=</span><span class="s2">&quot;Cu&quot;</span><span class="p">,</span>
                <span class="n">Tinput</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span>
                <span class="n">Thot</span><span class="o">=</span><span class="mf">425.0</span><span class="p">,</span>
                <span class="nb">id</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
                <span class="n">od</span><span class="o">=</span><span class="mf">0.35</span><span class="p">,</span>
                <span class="n">mult</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
                <span class="n">axialPitch</span><span class="o">=</span><span class="mf">1.123</span><span class="p">,</span>
            <span class="p">)</span></div></div>


<div class="viewcode-block" id="TestSphere"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSphere">[docs]</a><span class="k">class</span> <span class="nc">TestSphere</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">Sphere</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span> <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">}</span>

<div class="viewcode-block" id="TestSphere.test_getVolume"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSphere.test_getVolume">[docs]</a>    <span class="k">def</span> <span class="nf">test_getVolume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calculate area of sphere.</span>

<span class="sd">        .. test:: Calculate volume of sphere.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL12</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">od</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;od&quot;</span><span class="p">)</span>
        <span class="n">idd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="mf">4.0</span> <span class="o">/</span> <span class="mf">3.0</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">((</span><span class="n">od</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">-</span> <span class="p">(</span><span class="n">idd</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">)</span> <span class="o">**</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getVolume</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestSphere.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestSphere.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestRadialSegment"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestRadialSegment">[docs]</a><span class="k">class</span> <span class="nc">TestRadialSegment</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">RadialSegment</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;inner_radius&quot;</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span>
        <span class="s2">&quot;outer_radius&quot;</span><span class="p">:</span> <span class="mi">170</span><span class="p">,</span>
        <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="mi">160</span><span class="p">,</span>
        <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="TestRadialSegment.test_getVolume"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestRadialSegment.test_getVolume">[docs]</a>    <span class="k">def</span> <span class="nf">test_getVolume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">outerRad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;outer_radius&quot;</span><span class="p">)</span>
        <span class="n">innerRad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;inner_radius&quot;</span><span class="p">)</span>
        <span class="n">outerTheta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;outer_theta&quot;</span><span class="p">)</span>
        <span class="n">innerTheta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;inner_theta&quot;</span><span class="p">)</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">)</span>
        <span class="n">radialArea</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">outerRad</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">innerRad</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">aziFraction</span> <span class="o">=</span> <span class="p">(</span><span class="n">outerTheta</span> <span class="o">-</span> <span class="n">innerTheta</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">2.0</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="n">radialArea</span> <span class="o">*</span> <span class="n">aziFraction</span> <span class="o">*</span> <span class="n">height</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getVolume</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestRadialSegment.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestRadialSegment.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestRadialSegment.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestRadialSegment.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="mf">170.0</span>
        <span class="p">)</span></div></div>


<div class="viewcode-block" id="TestDifferentialRadialSegment"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestDifferentialRadialSegment">[docs]</a><span class="k">class</span> <span class="nc">TestDifferentialRadialSegment</span><span class="p">(</span><span class="n">TestShapedComponent</span><span class="p">):</span>
    <span class="n">componentCls</span> <span class="o">=</span> <span class="n">DifferentialRadialSegment</span>
    <span class="n">componentDims</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span>
        <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">430.0</span><span class="p">,</span>
        <span class="s2">&quot;inner_radius&quot;</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span>
        <span class="s2">&quot;radius_differential&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;inner_axial&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="mi">160</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="TestDifferentialRadialSegment.test_getVolume"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestDifferentialRadialSegment.test_getVolume">[docs]</a>    <span class="k">def</span> <span class="nf">test_getVolume</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;mult&quot;</span><span class="p">)</span>
        <span class="n">outerRad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;outer_radius&quot;</span><span class="p">)</span>
        <span class="n">innerRad</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;inner_radius&quot;</span><span class="p">)</span>
        <span class="n">outerTheta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;outer_theta&quot;</span><span class="p">)</span>
        <span class="n">innerTheta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;inner_theta&quot;</span><span class="p">)</span>
        <span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">)</span>
        <span class="n">radialArea</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">outerRad</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">innerRad</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">aziFraction</span> <span class="o">=</span> <span class="p">(</span><span class="n">outerTheta</span> <span class="o">-</span> <span class="n">innerTheta</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">2.0</span><span class="p">)</span>
        <span class="n">ref</span> <span class="o">=</span> <span class="n">mult</span> <span class="o">*</span> <span class="n">radialArea</span> <span class="o">*</span> <span class="n">aziFraction</span> <span class="o">*</span> <span class="n">height</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getVolume</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span> <span class="n">ref</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDifferentialRadialSegment.test_updateDims"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestDifferentialRadialSegment.test_updateDims">[docs]</a>    <span class="k">def</span> <span class="nf">test_updateDims</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test Update dimensions.</span>

<span class="sd">        .. test:: Dimensions can be updated.</span>
<span class="sd">            :id: T_ARMI_COMP_VOL13</span>
<span class="sd">            :tests: R_ARMI_COMP_VOL</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;inner_radius&quot;</span><span class="p">),</span> <span class="mi">110</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;radius_differential&quot;</span><span class="p">),</span> <span class="mi">60</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">updateDims</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;outer_radius&quot;</span><span class="p">),</span> <span class="mi">170</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;outer_axial&quot;</span><span class="p">),</span> <span class="mi">220</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="s2">&quot;outer_theta&quot;</span><span class="p">),</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDifferentialRadialSegment.test_thermallyExpands"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestDifferentialRadialSegment.test_thermallyExpands">[docs]</a>    <span class="k">def</span> <span class="nf">test_thermallyExpands</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertFalse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">THERMAL_EXPANSION_DIMS</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestDifferentialRadialSegment.test_getBoundingCircleOuterDiameter"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestDifferentialRadialSegment.test_getBoundingCircleOuterDiameter">[docs]</a>    <span class="k">def</span> <span class="nf">test_getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">component</span><span class="o">.</span><span class="n">getBoundingCircleOuterDiameter</span><span class="p">(</span><span class="n">cold</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="mi">170</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestMaterialAdjustments"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments">[docs]</a><span class="k">class</span> <span class="nc">TestMaterialAdjustments</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tests to make sure enrichment and mass fractions can be adjusted properly.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Tinput&quot;</span><span class="p">:</span> <span class="mf">25.0</span><span class="p">,</span> <span class="s2">&quot;Thot&quot;</span><span class="p">:</span> <span class="mf">600.0</span><span class="p">,</span> <span class="s2">&quot;od&quot;</span><span class="p">:</span> <span class="mf">10.0</span><span class="p">,</span> <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span> <span class="s2">&quot;mult&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="s2">&quot;fuel&quot;</span><span class="p">,</span> <span class="s2">&quot;UZr&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">dims</span><span class="p">)</span>

        <span class="k">class</span> <span class="nc">fakeBlock</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">getHeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># unit height</span>
                <span class="k">return</span> <span class="mf">1.0</span>

            <span class="k">def</span> <span class="nf">getSymmetryFactor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">return</span> <span class="mf">1.0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">fakeBlock</span><span class="p">()</span>

<div class="viewcode-block" id="TestMaterialAdjustments.test_setMassFrac"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments.test_setMassFrac">[docs]</a>    <span class="k">def</span> <span class="nf">test_setMassFrac</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Make sure we can set a mass fraction properly.&quot;&quot;&quot;</span>
        <span class="n">target35</span> <span class="o">=</span> <span class="mf">0.2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">setMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">,</span> <span class="n">target35</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">),</span> <span class="n">target35</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestMaterialAdjustments.test_setMassFracOnComponentMaterial"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments.test_setMassFracOnComponentMaterial">[docs]</a>    <span class="k">def</span> <span class="nf">test_setMassFracOnComponentMaterial</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks for valid and invalid mass fraction assignments on a component&#39;s material.&quot;&quot;&quot;</span>
        <span class="c1"># Negative value is not acceptable.</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">setMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">)</span>

        <span class="c1"># Greater than 1.0 value is not acceptable.</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">setMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">)</span>

        <span class="c1"># String is not acceptable.</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">setMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

        <span class="c1"># `NoneType` is not acceptable.</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">setMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="c1"># Zero is acceptable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">setMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">)</span>

        <span class="c1"># One is acceptable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">setMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestMaterialAdjustments.test_adjustMassFrac_invalid"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments.test_adjustMassFrac_invalid">[docs]</a>    <span class="k">def</span> <span class="nf">test_adjustMassFrac_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">adjustMassFrac</span><span class="p">(</span><span class="n">nuclideToAdjust</span><span class="o">=</span><span class="s2">&quot;ZR&quot;</span><span class="p">,</span> <span class="n">val</span><span class="o">=-</span><span class="mf">0.23</span><span class="p">)</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">adjustMassFrac</span><span class="p">(</span><span class="n">nuclideToAdjust</span><span class="o">=</span><span class="s2">&quot;ZR&quot;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">1.12</span><span class="p">)</span>

        <span class="n">alwaysFalse</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">:</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getAncestorAndDistance</span><span class="p">(</span><span class="n">alwaysFalse</span><span class="p">))</span></div>

<div class="viewcode-block" id="TestMaterialAdjustments.test_adjustMassFrac_U235"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments.test_adjustMassFrac_U235">[docs]</a>    <span class="k">def</span> <span class="nf">test_adjustMassFrac_U235</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">zrMass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMass</span><span class="p">(</span><span class="s2">&quot;ZR&quot;</span><span class="p">)</span>
        <span class="n">uMass</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMass</span><span class="p">(</span><span class="s2">&quot;U&quot;</span><span class="p">)</span>
        <span class="n">zrFrac</span> <span class="o">=</span> <span class="n">zrMass</span> <span class="o">/</span> <span class="p">(</span><span class="n">uMass</span> <span class="o">+</span> <span class="n">zrMass</span><span class="p">)</span>

        <span class="n">enrichmentFrac</span> <span class="o">=</span> <span class="mf">0.3</span>
        <span class="n">u235Frac</span> <span class="o">=</span> <span class="n">enrichmentFrac</span> <span class="o">*</span> <span class="n">uMass</span> <span class="o">/</span> <span class="p">(</span><span class="n">uMass</span> <span class="o">+</span> <span class="n">zrMass</span><span class="p">)</span>
        <span class="n">u238Frac</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">enrichmentFrac</span><span class="p">)</span> <span class="o">*</span> <span class="n">uMass</span> <span class="o">/</span> <span class="p">(</span><span class="n">uMass</span> <span class="o">+</span> <span class="n">zrMass</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">adjustMassFrac</span><span class="p">(</span>
            <span class="n">nuclideToAdjust</span><span class="o">=</span><span class="s2">&quot;U235&quot;</span><span class="p">,</span> <span class="n">elementToHoldConstant</span><span class="o">=</span><span class="s2">&quot;ZR&quot;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">u235Frac</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">),</span> <span class="n">u235Frac</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U238&quot;</span><span class="p">),</span> <span class="n">u238Frac</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;ZR&quot;</span><span class="p">),</span> <span class="n">zrFrac</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestMaterialAdjustments.test_adjustMassFrac_U"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments.test_adjustMassFrac_U">[docs]</a>    <span class="k">def</span> <span class="nf">test_adjustMassFrac_U</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">adjustMassFrac</span><span class="p">(</span><span class="n">elementToAdjust</span><span class="o">=</span><span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>
        <span class="n">uFrac</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U&quot;</span><span class="p">)</span>
        <span class="n">u235Enrichment</span> <span class="o">=</span> <span class="mf">0.1</span>
        <span class="n">u238Frac</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">u235Enrichment</span><span class="p">)</span> <span class="o">*</span> <span class="n">uFrac</span>
        <span class="n">u235Frac</span> <span class="o">=</span> <span class="n">u235Enrichment</span> <span class="o">*</span> <span class="n">uFrac</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">),</span> <span class="n">u235Frac</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U238&quot;</span><span class="p">),</span> <span class="n">u238Frac</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;ZR&quot;</span><span class="p">),</span> <span class="mf">0.30</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestMaterialAdjustments.test_adjustMassFrac_clear_ZR"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments.test_adjustMassFrac_clear_ZR">[docs]</a>    <span class="k">def</span> <span class="nf">test_adjustMassFrac_clear_ZR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">adjustMassFrac</span><span class="p">(</span><span class="n">nuclideToAdjust</span><span class="o">=</span><span class="s2">&quot;ZR&quot;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;ZR&quot;</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getNumberDensity</span><span class="p">(</span><span class="s2">&quot;ZR&quot;</span><span class="p">),</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U238&quot;</span><span class="p">),</span> <span class="mf">1.0</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="TestMaterialAdjustments.test_adjustMassFrac_set_ZR"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments.test_adjustMassFrac_set_ZR">[docs]</a>    <span class="k">def</span> <span class="nf">test_adjustMassFrac_set_ZR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">u235Enrichment</span> <span class="o">=</span> <span class="mf">0.1</span>
        <span class="n">zrFrac</span> <span class="o">=</span> <span class="mf">0.1</span>
        <span class="n">uFrac</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">zrFrac</span>
        <span class="n">u238Frac</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">u235Enrichment</span><span class="p">)</span> <span class="o">*</span> <span class="n">uFrac</span>
        <span class="n">u235Frac</span> <span class="o">=</span> <span class="n">u235Enrichment</span> <span class="o">*</span> <span class="n">uFrac</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">adjustMassFrac</span><span class="p">(</span><span class="n">nuclideToAdjust</span><span class="o">=</span><span class="s2">&quot;ZR&quot;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">zrFrac</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">),</span> <span class="n">u235Frac</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U238&quot;</span><span class="p">),</span> <span class="n">u238Frac</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;ZR&quot;</span><span class="p">),</span> <span class="n">zrFrac</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestMaterialAdjustments.test_adjustMassFrac_leave_same"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments.test_adjustMassFrac_leave_same">[docs]</a>    <span class="k">def</span> <span class="nf">test_adjustMassFrac_leave_same</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">zrFrac</span> <span class="o">=</span> <span class="mf">0.1</span>
        <span class="n">u238Enrichment</span> <span class="o">=</span> <span class="mf">0.9</span>
        <span class="n">uFrac</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">zrFrac</span>
        <span class="n">u238Frac</span> <span class="o">=</span> <span class="n">uFrac</span> <span class="o">*</span> <span class="n">u238Enrichment</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">adjustMassFrac</span><span class="p">(</span><span class="n">nuclideToAdjust</span><span class="o">=</span><span class="s2">&quot;ZR&quot;</span><span class="p">,</span> <span class="n">val</span><span class="o">=</span><span class="n">zrFrac</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U238&quot;</span><span class="p">),</span> <span class="n">u238Frac</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;ZR&quot;</span><span class="p">),</span> <span class="n">zrFrac</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestMaterialAdjustments.test_adjustMassEnrichment"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments.test_adjustMassEnrichment">[docs]</a>    <span class="k">def</span> <span class="nf">test_adjustMassEnrichment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">adjustMassEnrichment</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U235&quot;</span><span class="p">),</span> <span class="mf">0.18</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;U238&quot;</span><span class="p">),</span> <span class="mf">0.72</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getMassFrac</span><span class="p">(</span><span class="s2">&quot;ZR&quot;</span><span class="p">),</span> <span class="mf">0.1</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestMaterialAdjustments.test_getEnrichment"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments.test_getEnrichment">[docs]</a>    <span class="k">def</span> <span class="nf">test_getEnrichment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">adjustMassEnrichment</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertAlmostEqual</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fuel</span><span class="o">.</span><span class="n">getEnrichment</span><span class="p">(),</span> <span class="mf">0.3</span><span class="p">)</span></div>

<div class="viewcode-block" id="TestMaterialAdjustments.test_finalizeLoadDBAdjustsTD"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestMaterialAdjustments.test_finalizeLoadDBAdjustsTD">[docs]</a>    <span class="k">def</span> <span class="nf">test_finalizeLoadDBAdjustsTD</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Ensure component is fully loaded through finalize methods.&quot;&quot;&quot;</span>
        <span class="n">tdFrac</span> <span class="o">=</span> <span class="mf">0.54321</span>
        <span class="n">comp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fuel</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">theoreticalDensityFrac</span> <span class="o">=</span> <span class="n">tdFrac</span>
        <span class="n">comp</span><span class="o">.</span><span class="n">finalizeLoadingFromDB</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">comp</span><span class="o">.</span><span class="n">material</span><span class="o">.</span><span class="n">getTD</span><span class="p">(),</span> <span class="n">tdFrac</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="TestPinQuantities"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestPinQuantities">[docs]</a><span class="k">class</span> <span class="nc">TestPinQuantities</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Test methods that involve retrieval of pin quantities.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">=</span> <span class="n">loadTestReactor</span><span class="p">(</span>
            <span class="n">inputFileName</span><span class="o">=</span><span class="s2">&quot;smallestTestReactor/armiRunSmallest.yaml&quot;</span>
        <span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

<div class="viewcode-block" id="TestPinQuantities.test_getPinMgFluxes"><a class="viewcode-back" href="../../../../.apidocs/armi.reactor.tests.test_components.html#armi.reactor.tests.test_components.TestPinQuantities.test_getPinMgFluxes">[docs]</a>    <span class="k">def</span> <span class="nf">test_getPinMgFluxes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Test proper retrieval of pin multigroup flux for fuel component.&quot;&quot;&quot;</span>
        <span class="c1"># Get a fuel block and its fuel component from the core</span>
        <span class="n">fuelBlock</span><span class="p">:</span> <span class="n">Block</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">getFirstBlock</span><span class="p">(</span><span class="n">flags</span><span class="o">.</span><span class="n">Flags</span><span class="o">.</span><span class="n">FUEL</span><span class="p">)</span>
        <span class="n">fuelComponent</span><span class="p">:</span> <span class="n">Component</span> <span class="o">=</span> <span class="n">fuelBlock</span><span class="o">.</span><span class="n">getComponent</span><span class="p">(</span><span class="n">flags</span><span class="o">.</span><span class="n">Flags</span><span class="o">.</span><span class="n">FUEL</span><span class="p">)</span>
        <span class="n">numPins</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fuelComponent</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">mult</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">numPins</span><span class="p">,</span> <span class="mi">169</span><span class="p">)</span>

        <span class="c1"># Set pin fluxes at block level</span>
        <span class="n">fuelBlock</span><span class="o">.</span><span class="n">initializePinLocations</span><span class="p">()</span>
        <span class="n">pinMgFluxes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">numPins</span><span class="p">,</span> <span class="mi">33</span><span class="p">)</span>
        <span class="n">pinMgFluxesAdj</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">numPins</span><span class="p">,</span> <span class="mi">33</span><span class="p">)</span>
        <span class="n">pinMgFluxesGamma</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">numPins</span><span class="p">,</span> <span class="mi">33</span><span class="p">)</span>
        <span class="n">fuelBlock</span><span class="o">.</span><span class="n">setPinMgFluxes</span><span class="p">(</span><span class="n">pinMgFluxes</span><span class="p">)</span>
        <span class="n">fuelBlock</span><span class="o">.</span><span class="n">setPinMgFluxes</span><span class="p">(</span><span class="n">pinMgFluxesAdj</span><span class="p">,</span> <span class="n">adjoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">fuelBlock</span><span class="o">.</span><span class="n">setPinMgFluxes</span><span class="p">(</span><span class="n">pinMgFluxesGamma</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Retrieve from component to ensure they match</span>
        <span class="n">simPinMgFluxes</span> <span class="o">=</span> <span class="n">fuelComponent</span><span class="o">.</span><span class="n">getPinMgFluxes</span><span class="p">()</span>
        <span class="n">simPinMgFluxesAdj</span> <span class="o">=</span> <span class="n">fuelComponent</span><span class="o">.</span><span class="n">getPinMgFluxes</span><span class="p">(</span><span class="n">adjoint</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">simPinMgFluxesGamma</span> <span class="o">=</span> <span class="n">fuelComponent</span><span class="o">.</span><span class="n">getPinMgFluxes</span><span class="p">(</span><span class="n">gamma</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">assert_equal</span><span class="p">(</span><span class="n">pinMgFluxes</span><span class="p">,</span> <span class="n">simPinMgFluxes</span><span class="p">)</span>
        <span class="n">assert_equal</span><span class="p">(</span><span class="n">pinMgFluxesAdj</span><span class="p">,</span> <span class="n">simPinMgFluxesAdj</span><span class="p">)</span>
        <span class="n">assert_equal</span><span class="p">(</span><span class="n">pinMgFluxesGamma</span><span class="p">,</span> <span class="n">simPinMgFluxesGamma</span><span class="p">)</span>

        <span class="c1"># Mock the spatial locator of the component to raise error</span>
        <span class="k">with</span> <span class="n">unittest</span><span class="o">.</span><span class="n">mock</span><span class="o">.</span><span class="n">patch</span><span class="o">.</span><span class="n">object</span><span class="p">(</span><span class="n">fuelComponent</span><span class="p">,</span> <span class="s2">&quot;spatialLocator&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">mockLocator</span><span class="p">:</span>
            <span class="n">mockLocator</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">111</span>
            <span class="n">mockLocator</span><span class="o">.</span><span class="n">j</span> <span class="o">=</span> <span class="mi">111</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span>
                <span class="ne">ValueError</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;Failed to retrieve pin indices for component </span><span class="si">{</span><span class="n">fuelComponent</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="p">):</span>
                <span class="n">fuelComponent</span><span class="o">.</span><span class="n">getPinMgFluxes</span><span class="p">()</span>

        <span class="c1"># Check assertion for adjoint gamma flux</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span>
            <span class="ne">ValueError</span><span class="p">,</span> <span class="s2">&quot;Adjoint gamma flux is currently unsupported.&quot;</span>
        <span class="p">):</span>
            <span class="n">fuelComponent</span><span class="o">.</span><span class="n">getPinMgFluxes</span><span class="p">(</span><span class="n">adjoint</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Check assertion for not-found parameter</span>
        <span class="n">fuelBlock</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">pinMgFluxes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">assertRaisesRegex</span><span class="p">(</span>
            <span class="ne">ValueError</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;Failure getting pinMgFluxes from </span><span class="si">{</span><span class="n">fuelComponent</span><span class="si">}</span><span class="s2"> via parent </span><span class="si">{</span><span class="n">fuelBlock</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">):</span>
            <span class="n">fuelComponent</span><span class="o">.</span><span class="n">getPinMgFluxes</span><span class="p">()</span></div></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2024, TerraPower, LLC.
      <span class="lastupdated">Last updated on 2024-12-02.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>