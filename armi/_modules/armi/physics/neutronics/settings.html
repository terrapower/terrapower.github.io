

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>armi.physics.neutronics.settings &mdash; ARMI 0.2.3 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/theme_fixes.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/gallery-dataframe.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../../../_static/armiicon_16x16.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../../../../_static/assets/jsonview.bundle.js"></script>
        <script src="../../../../_static/assets/jsonview_loader.js"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables.min.js"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables_loader.js"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> ARMI
          

          
            
            <img src="../../../../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                0.2.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../requirements/index.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../.apidocs/modules.html">API Docs</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">ARMI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../../armi.html">armi</a> &raquo;</li>
        
          <li><a href="../neutronics.html">armi.physics.neutronics</a> &raquo;</li>
        
      <li>armi.physics.neutronics.settings</li>
    
    
  <li class="wy-breadcrumbs-aside">
    
  </li>

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for armi.physics.neutronics.settings</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2019 TerraPower, LLC</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>

<span class="sd">&quot;&quot;&quot;Some generic neutronics-related settings.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">armi.settings</span> <span class="kn">import</span> <span class="n">setting</span>
<span class="kn">from</span> <span class="nn">armi.settings.settingsRules</span> <span class="kn">import</span> <span class="n">include_as_rule</span>
<span class="kn">from</span> <span class="nn">armi</span> <span class="kn">import</span> <span class="n">runLog</span>

<span class="kn">from</span> <span class="nn">.const</span> <span class="kn">import</span> <span class="n">NEUTRON</span>
<span class="kn">from</span> <span class="nn">.const</span> <span class="kn">import</span> <span class="n">NEUTRONGAMMA</span>
<span class="kn">from</span> <span class="nn">.const</span> <span class="kn">import</span> <span class="n">ALL</span>

<span class="kn">from</span> <span class="nn">.energyGroups</span> <span class="kn">import</span> <span class="n">getGroupStructure</span>


<span class="n">CONF_NEUTRONICS_KERNEL</span> <span class="o">=</span> <span class="s2">&quot;neutronicsKernel&quot;</span>
<span class="n">CONF_NEUTRONICS_TYPE</span> <span class="o">=</span> <span class="s2">&quot;neutronicsType&quot;</span>

<span class="n">CONF_BOUNDARIES</span> <span class="o">=</span> <span class="s2">&quot;boundaries&quot;</span>
<span class="n">CONF_BC_COEFFICIENT</span> <span class="o">=</span> <span class="s2">&quot;bcCoefficient&quot;</span>
<span class="n">CONF_DPA_PER_FLUENCE</span> <span class="o">=</span> <span class="s2">&quot;dpaPerFluence&quot;</span>
<span class="n">CONF_GEN_XS</span> <span class="o">=</span> <span class="s2">&quot;genXS&quot;</span>  <span class="c1"># gamma stuff and neutronics plugin/lattice physics</span>
<span class="n">CONF_GLOBAL_FLUX_ACTIVE</span> <span class="o">=</span> <span class="s2">&quot;globalFluxActive&quot;</span>
<span class="n">CONF_GROUP_STRUCTURE</span> <span class="o">=</span> <span class="s2">&quot;groupStructure&quot;</span>
<span class="n">CONF_EIGEN_PROB</span> <span class="o">=</span> <span class="s2">&quot;eigenProb&quot;</span>
<span class="n">CONF_EXISTING_FIXED_SOURCE</span> <span class="o">=</span> <span class="s2">&quot;existingFixedSource&quot;</span>
<span class="n">CONF_NUMBER_MESH_PER_EDGE</span> <span class="o">=</span> <span class="s2">&quot;numberMeshPerEdge&quot;</span>
<span class="n">CONF_RESTART_NEUTRONICS</span> <span class="o">=</span> <span class="s2">&quot;restartNeutronics&quot;</span>
<span class="n">CONF_OUTERS_</span> <span class="o">=</span> <span class="s2">&quot;outers&quot;</span>
<span class="n">CONF_INNERS_</span> <span class="o">=</span> <span class="s2">&quot;inners&quot;</span>

<span class="n">CONF_EPS_EIG</span> <span class="o">=</span> <span class="s2">&quot;epsEig&quot;</span>
<span class="n">CONF_EPS_FSAVG</span> <span class="o">=</span> <span class="s2">&quot;epsFSAvg&quot;</span>
<span class="n">CONF_EPS_FSPOINT</span> <span class="o">=</span> <span class="s2">&quot;epsFSPoint&quot;</span>

<span class="c1"># used for dpa/dose analysis. These should be relocated to more</span>
<span class="c1"># design-specific places</span>
<span class="n">CONF_LOAD_PAD_ELEVATION</span> <span class="o">=</span> <span class="s2">&quot;loadPadElevation&quot;</span>
<span class="n">CONF_LOAD_PAD_LENGTH</span> <span class="o">=</span> <span class="s2">&quot;loadPadLength&quot;</span>
<span class="n">CONF_ACLP_DOSE_LIMIT</span> <span class="o">=</span> <span class="s2">&quot;aclpDoseLimit&quot;</span>
<span class="n">CONF_DPA_XS_SET</span> <span class="o">=</span> <span class="s2">&quot;dpaXsSet&quot;</span>
<span class="n">CONF_GRID_PLATE_DPA_XS_SET</span> <span class="o">=</span> <span class="s2">&quot;gridPlateDpaXsSet&quot;</span>

<span class="n">CONF_OPT_DPA</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dpa_EBRII_INC600&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dpa_EBRII_INCX750&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dpa_EBRII_HT9&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dpa_EBRII_PE16&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dpa_EBRII_INC625&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># moved from xsSettings</span>
<span class="n">CONF_CLEAR_XS</span> <span class="o">=</span> <span class="s2">&quot;clearXS&quot;</span>
<span class="n">CONF_MINIMUM_FISSILE_FRACTION</span> <span class="o">=</span> <span class="s2">&quot;minimumFissileFraction&quot;</span>
<span class="n">CONF_MINIMUM_NUCLIDE_DENSITY</span> <span class="o">=</span> <span class="s2">&quot;minimumNuclideDensity&quot;</span>
<span class="n">CONF_INFINITE_DILUTE_CUTOFF</span> <span class="o">=</span> <span class="s2">&quot;infiniteDiluteCutoff&quot;</span>
<span class="n">CONF_TOLERATE_BURNUP_CHANGE</span> <span class="o">=</span> <span class="s2">&quot;tolerateBurnupChange&quot;</span>
<span class="n">CONF_XS_BLOCK_REPRESENTATION</span> <span class="o">=</span> <span class="s2">&quot;xsBlockRepresentation&quot;</span>
<span class="n">CONF_DISABLE_BLOCK_TYPE_EXCLUSION_IN_XS_GENERATION</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;disableBlockTypeExclusionInXsGeneration&quot;</span>
<span class="p">)</span>
<span class="n">CONF_XS_KERNEL</span> <span class="o">=</span> <span class="s2">&quot;xsKernel&quot;</span>
<span class="n">CONF_XS_SCATTERING_ORDER</span> <span class="o">=</span> <span class="s2">&quot;xsScatteringOrder&quot;</span>
<span class="n">CONF_XS_BUCKLING_CONVERGENCE</span> <span class="o">=</span> <span class="s2">&quot;xsBucklingConvergence&quot;</span>
<span class="n">CONF_XS_EIGENVALUE_CONVERGENCE</span> <span class="o">=</span> <span class="s2">&quot;xsEigenvalueConvergence&quot;</span>


<div class="viewcode-block" id="defineSettings"><a class="viewcode-back" href="../../../../.apidocs/armi.physics.neutronics.settings.html#armi.physics.neutronics.settings.defineSettings">[docs]</a><span class="k">def</span> <span class="nf">defineSettings</span><span class="p">():</span>
    <span class="n">settings</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_GROUP_STRUCTURE</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;ANL33&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Number of Energy Groups&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Energy group structure to use in neutronics simulations&quot;</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;ANL9&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ANL33&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ANL70&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ANL116&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ANL230&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ANL703&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ANL1041&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ANL2082&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ARMI33&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ARMI45&quot;</span><span class="p">,</span>
                <span class="s2">&quot;CINDER63&quot;</span><span class="p">,</span>
                <span class="s2">&quot;348&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_GLOBAL_FLUX_ACTIVE</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;Neutron&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Global Flux Calculation&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Calculate the global flux at each timestep for the selected &quot;</span>
            <span class="s2">&quot;particle type(s) using the specified neutronics kernel (see Global Flux &quot;</span>
            <span class="s2">&quot;tab).&quot;</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Neutron&quot;</span><span class="p">,</span> <span class="s2">&quot;Neutron and Gamma&quot;</span><span class="p">],</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_GEN_XS</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Multigroup Cross Sections Generation&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Generate multigroup cross sections for the selected particle &quot;</span>
            <span class="s2">&quot;type(s) using the specified lattice physics kernel (see Lattice Physics &quot;</span>
            <span class="s2">&quot;tab). When not set, the XS library will be auto-loaded from an existing ISOTXS &quot;</span>
            <span class="s2">&quot;within then working directory and fail if the ISOTXS does not exist.&quot;</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;Neutron&quot;</span><span class="p">,</span> <span class="s2">&quot;Neutron and Gamma&quot;</span><span class="p">],</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_DPA_PER_FLUENCE</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">4.01568627451e-22</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;DPA Per Fluence&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A quick and dirty conversion that is used to get &quot;</span>
            <span class="s2">&quot;dpaPeak by multiplying the factor and fastFluencePeak&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_BC_COEFFICIENT</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Parameter A for generalized BC&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Value for the parameter A of the generalized boundary &quot;</span>
            <span class="s2">&quot;condition.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_BOUNDARIES</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;Extrapolated&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Neutronic BCs&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;External Neutronic Boundary Conditions. Reflective does not &quot;</span>
            <span class="s2">&quot;include axial.&quot;</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;Extrapolated&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Reflective&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Infinite&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ZeroSurfaceFlux&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ZeroInwardCurrent&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Generalized&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_NEUTRONICS_KERNEL</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Neutronics Kernel&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The neutronics / depletion solver for global flux solve.&quot;</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">enforcedOptions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_NEUTRONICS_TYPE</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;real&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Neutronics Type&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of neutronics solution that is desired.&quot;</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;real&quot;</span><span class="p">,</span> <span class="s2">&quot;adjoint&quot;</span><span class="p">,</span> <span class="s2">&quot;both&quot;</span><span class="p">],</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_EIGEN_PROB</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Eigenvalue Problem&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Whether this is a eigenvalue problem or a fixed source problem&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_EXISTING_FIXED_SOURCE</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Existing fixed source input&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Specify an exiting fixed source input file.&quot;</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;FIXSRC&quot;</span><span class="p">,</span> <span class="s2">&quot;VARSRC&quot;</span><span class="p">],</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_NUMBER_MESH_PER_EDGE</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Number of Mesh per Edge&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Number of mesh per block edge for finite-difference planar &quot;</span>
            <span class="s2">&quot;mesh refinement.&quot;</span><span class="p">,</span>
            <span class="n">oldNames</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;hexSideSubdivisions&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)],</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_EPS_EIG</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">1e-07</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Eigenvalue Epsilon&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Convergence criteria for calculating the eigenvalue in the global flux solver&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_EPS_FSAVG</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">1e-05</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;FS Avg. epsilon&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Convergence criteria for average fission source&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_EPS_FSPOINT</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">1e-05</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;FS Point epsilon&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Convergence criteria for point fission source&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_LOAD_PAD_ELEVATION</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Load pad elevation (cm)&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="p">(</span>
                <span class="s2">&quot;The elevation of the bottom of the above-core load pad (ACLP) in cm &quot;</span>
                <span class="s2">&quot;from the bottom of the upper grid plate. Used for calculating the load &quot;</span>
                <span class="s2">&quot;pad dose&quot;</span>
            <span class="p">),</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_LOAD_PAD_LENGTH</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Load pad length (cm)&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The length of the load pad. Used to compute average and peak dose.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_ACLP_DOSE_LIMIT</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">80.0</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;ALCP dose limit&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Dose limit in dpa used to position the above-core load pad (if one exists)&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_RESTART_NEUTRONICS</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Restart neutronics&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Restart global flux case using outputs from last time as a guess&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_OUTERS_</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Max Outer Iterations&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;XY and Axial partial current sweep max outer iterations.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_INNERS_</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Inner Iterations&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;XY and Axial partial current sweep inner iterations. 0 lets the neutronics code pick a default.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_GRID_PLATE_DPA_XS_SET</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;dpa_EBRII_HT9&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Grid plate DPA XS&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="p">(</span>
                <span class="s2">&quot;The cross sections to use for grid plate blocks DPA when computing &quot;</span>
                <span class="s2">&quot;displacements per atom.&quot;</span>
            <span class="p">),</span>
            <span class="n">options</span><span class="o">=</span><span class="n">CONF_OPT_DPA</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_DPA_XS_SET</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;dpa_EBRII_HT9&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;DPA Cross Sections&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The cross sections to use when computing displacements per atom.&quot;</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="n">CONF_OPT_DPA</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="c1"># moved from XSsettings</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_CLEAR_XS</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Clear XS&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Delete all cross section libraries before regenerating them.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_MINIMUM_FISSILE_FRACTION</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">0.045</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Minimum Fissile Fraction&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Minimum fissile fraction (fissile number densities / heavy metal number densities).&quot;</span><span class="p">,</span>
            <span class="n">oldNames</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;mc2.minimumFissileFraction&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)],</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_MINIMUM_NUCLIDE_DENSITY</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">1e-15</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Minimum nuclide density&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Density to use for nuclides and fission products at infinite dilution. This is also used as the minimum density.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_INFINITE_DILUTE_CUTOFF</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">1e-10</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Infinite Dillute Cutoff&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Do not model nuclides with density less than this cutoff. Used with PARTISN and SERPENT.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_TOLERATE_BURNUP_CHANGE</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Cross Section Burnup Group Tolerance&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Burnup window for computing cross sections. If the prior cross sections were computed within the window, new cross sections will not be generated and the prior calculated cross sections will be used.&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_XS_BLOCK_REPRESENTATION</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;FluxWeightedAverage&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Cross Section Block Averaging Method&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The type of averaging to perform when creating cross sections for a group of blocks&quot;</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span>
                <span class="s2">&quot;Median&quot;</span><span class="p">,</span>
                <span class="s2">&quot;Average&quot;</span><span class="p">,</span>
                <span class="s2">&quot;FluxWeightedAverage&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ComponentAverage1DSlab&quot;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_DISABLE_BLOCK_TYPE_EXCLUSION_IN_XS_GENERATION</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Include All Block Types in XS Generation&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Use all blocks in a cross section group when generating a representative block. When this is disabled only `fuel` blocks will be considered&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_XS_KERNEL</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;MC2v3&quot;</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Lattice Physics Kernel&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Method to determine broad group cross sections for assemblies&quot;</span><span class="p">,</span>
            <span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;MC2v2&quot;</span><span class="p">,</span> <span class="s2">&quot;MC2v3&quot;</span><span class="p">,</span> <span class="s2">&quot;MC2v3-PARTISN&quot;</span><span class="p">,</span> <span class="s2">&quot;SERPENT&quot;</span><span class="p">],</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_XS_SCATTERING_ORDER</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Scattering Order&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Scattering order for the lattice physics calculation&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_XS_BUCKLING_CONVERGENCE</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">1e-05</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Buckling Convergence Criteria&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Convergence criteria for the buckling iteration if it is available in the lattice physics solver&quot;</span><span class="p">,</span>
            <span class="n">oldNames</span><span class="o">=</span><span class="p">[</span>
                <span class="p">(</span><span class="s2">&quot;mc2BucklingConvergence&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
                <span class="p">(</span><span class="s2">&quot;bucklingConvergence&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span>
            <span class="p">],</span>
        <span class="p">),</span>
        <span class="n">setting</span><span class="o">.</span><span class="n">Setting</span><span class="p">(</span>
            <span class="n">CONF_XS_EIGENVALUE_CONVERGENCE</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mf">1e-05</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Eigenvalue Convergence Criteria&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Convergence criteria for the eigenvalue in the lattice physics kernel&quot;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">settings</span></div>


<span class="c1"># OLD STYLE settings rules from settingsRules.py. Prefer validators moving forward.</span>


<span class="nd">@include_as_rule</span><span class="p">(</span><span class="s2">&quot;genXS&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">newGenXSOptions</span><span class="p">(</span><span class="n">_cs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set new values of &#39;genXS&#39; setting based on previous setting values.</span>

<span class="sd">    Arguments</span>
<span class="sd">    ---------</span>
<span class="sd">    cs : setting object</span>
<span class="sd">        ARMi object containing the default and user-specified settings.</span>

<span class="sd">    name : str</span>
<span class="sd">        Setting name to be modified by this rule.</span>

<span class="sd">    value : str</span>
<span class="sd">        Value of the setting identified by name.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict : dict</span>
<span class="sd">        Updated setting name and or value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="n">NEUTRON</span>
    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;False&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="n">newValue</span><span class="p">:</span>
        <span class="n">runLog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;The `genXS` setting has been set to </span><span class="si">{}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">newValue</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">newValue</span><span class="p">}</span>


<span class="nd">@include_as_rule</span><span class="p">(</span><span class="s2">&quot;existingFIXSRC&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">newFixedSourceOption</span><span class="p">(</span><span class="n">cs</span><span class="p">,</span> <span class="n">_name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Migrate the deprecated setting &#39;existingFIXSRC&#39; to &#39;existingFixedSource&#39;.</span>

<span class="sd">    Arguments</span>
<span class="sd">    ---------</span>
<span class="sd">    cs : setting object</span>
<span class="sd">        ARMi object containing the default and user-specified settings.</span>

<span class="sd">    name : str</span>
<span class="sd">        Setting name to be modified by this rule.</span>

<span class="sd">    value : str</span>
<span class="sd">        Value of the setting identified by name.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict : dict</span>
<span class="sd">        Updated setting name and or value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">newName</span> <span class="o">=</span> <span class="s2">&quot;existingFixedSource&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="s2">&quot;FIXSRC&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="n">newValue</span><span class="p">:</span>
        <span class="n">runLog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;The `existingFixedSource` setting has been set to </span><span class="si">{}</span><span class="s2"> based on deprecated &quot;</span>
            <span class="s2">&quot;`existingFIXSRC`.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">newValue</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span><span class="n">newName</span><span class="p">:</span> <span class="n">newValue</span><span class="p">}</span>


<span class="nd">@include_as_rule</span><span class="p">(</span><span class="s2">&quot;boundaries&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">migrateNormalBCSetting</span><span class="p">(</span><span class="n">_cs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Boundary setting is migrated from `Normal` to `Extrapolated`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">newValue</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;Normal&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="s2">&quot;Extrapolated&quot;</span>

    <span class="k">return</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">newValue</span><span class="p">}</span>


<span class="nd">@include_as_rule</span><span class="p">(</span><span class="s2">&quot;asymptoticExtrapolationPowerIters&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">deprecateAsymptoticExtrapolationPowerIters</span><span class="p">(</span><span class="n">_cs</span><span class="p">,</span> <span class="n">_name</span><span class="p">,</span> <span class="n">_value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The setting `asymptoticExtrapolationPowerIters` has been deprecated and replaced by</span>
<span class="sd">    three settings to remove confusion and ensure proper use.</span>

<span class="sd">    The three new settings are:</span>
<span class="sd">        - numOuterIterPriorAsympExtrap</span>
<span class="sd">        - asympExtrapOfOverRelaxCalc</span>
<span class="sd">        - asympExtrapOfNodalCalc</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">runLog</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
        <span class="s2">&quot;The setting `asymptoticExtrapolationPowerIters` has been deprecated and replaced &quot;</span>
        <span class="s2">&quot;with `numOuterIterPriorAsympExtrap`, `asympExtrapOfOverRelaxCalc`, &quot;</span>
        <span class="s2">&quot;`asympExtrapOfNodalCalc`. Please use these settings for intended behavior.&quot;</span>
    <span class="p">)</span>

    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
        <span class="s2">&quot;Setting `asymptoticExtrapolationPowerIters` has been deprecated. &quot;</span>
        <span class="s2">&quot;See stdout for more details.&quot;</span>
    <span class="p">)</span>


<span class="nd">@include_as_rule</span><span class="p">(</span><span class="s2">&quot;groupStructure&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">updateXSGroupStructure</span><span class="p">(</span><span class="n">cs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">getGroupStructure</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">newValue</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
            <span class="n">getGroupStructure</span><span class="p">(</span><span class="n">newValue</span><span class="p">)</span>
            <span class="n">runLog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Updating the cross section group structure from </span><span class="si">{}</span><span class="s2"> to </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">value</span><span class="p">,</span> <span class="n">newValue</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">newValue</span><span class="p">}</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="n">runLog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Unable to automatically convert the `groupStructure` setting of </span><span class="si">{}</span><span class="s2">. Defaulting to </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">value</span><span class="p">,</span> <span class="n">cs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;groupStructure&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">default</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">cs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;groupStructure&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">default</span><span class="p">}</span>


<span class="k">def</span> <span class="nf">_migrateDpa</span><span class="p">(</span><span class="n">_cs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="n">newValue</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;dpaHT9_33&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="s2">&quot;dpaHT9_ANL33_TwrBol&quot;</span>
    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;dpa_SS316&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="s2">&quot;dpaSS316_ANL33_TwrBol&quot;</span>

    <span class="k">return</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">newValue</span><span class="p">}</span>


<span class="nd">@include_as_rule</span><span class="p">(</span><span class="s2">&quot;gridPlateDpaXsSet&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">migrateGridPlateDpa</span><span class="p">(</span><span class="n">_cs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Got more rigorous in dpa XS names.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_migrateDpa</span><span class="p">(</span><span class="n">_cs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>


<span class="nd">@include_as_rule</span><span class="p">(</span><span class="s2">&quot;dpaXsSet&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">migrateDpaXs</span><span class="p">(</span><span class="n">_cs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">_migrateDpa</span><span class="p">(</span><span class="n">_cs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>


<span class="nd">@include_as_rule</span><span class="p">(</span><span class="s2">&quot;saveNeutronicsOutputs&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">resetNeutronicsOutputsToSaveAfterRename</span><span class="p">(</span><span class="n">_cs</span><span class="p">,</span> <span class="n">_name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reset the values of &#39;saveNeutronicsOutputs&#39; setting after it was migrated to &#39;neutronicsOutputsToSave&#39;.</span>

<span class="sd">    Arguments</span>
<span class="sd">    ---------</span>
<span class="sd">    cs : setting object</span>
<span class="sd">        ARMi object containing the default and user-specified settings.</span>

<span class="sd">    name : str</span>
<span class="sd">        Setting name to be modified by this rule.</span>

<span class="sd">    value : str</span>
<span class="sd">        Value of the setting identified by name.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict : dict</span>
<span class="sd">        Updated setting name and or value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">newName</span> <span class="o">=</span> <span class="s2">&quot;neutronicsOutputsToSave&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="n">ALL</span>
    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;False&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="n">runLog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;The `neutronicsOutputsToSave` setting has been set to </span><span class="si">{}</span><span class="s2"> based on deprecated &quot;</span>
        <span class="s2">&quot;`saveNeutronicsOutputs`.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">newValue</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">newName</span><span class="p">:</span> <span class="n">newValue</span><span class="p">}</span>


<span class="nd">@include_as_rule</span><span class="p">(</span><span class="s2">&quot;gammaTransportActive&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">removeGammaTransportActive</span><span class="p">(</span><span class="n">cs</span><span class="p">,</span> <span class="n">_name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Remove &#39;gammaTransportActive&#39; and set values of &#39;globalFluxActive&#39; for the same functionality.</span>

<span class="sd">    Arguments</span>
<span class="sd">    ---------</span>
<span class="sd">    cs : setting object</span>
<span class="sd">        ARMi object containing the default and user-specified settings.</span>

<span class="sd">    name : str</span>
<span class="sd">        Setting name to be modified by this rule.</span>

<span class="sd">    value : str</span>
<span class="sd">        Value of the setting identified by name.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="n">NEUTRONGAMMA</span>
    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;False&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="n">NEUTRON</span>

    <span class="n">cs</span><span class="p">[</span><span class="s2">&quot;globalFluxActive&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span>
    <span class="n">runLog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
        <span class="s2">&quot;The `globalFluxActive` setting has been set to </span><span class="si">{}</span><span class="s2"> based on deprecated &quot;</span>
        <span class="s2">&quot;`gammaTransportActive`.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">newValue</span><span class="p">)</span>
    <span class="p">)</span>


<span class="nd">@include_as_rule</span><span class="p">(</span><span class="s2">&quot;globalFluxActive&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">newGlobalFluxOptions</span><span class="p">(</span><span class="n">_cs</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set new values of &#39;globalFluxActive&#39; setting based on previous setting values.</span>

<span class="sd">    Arguments</span>
<span class="sd">    ---------</span>
<span class="sd">    cs : setting object</span>
<span class="sd">        ARMi object containing the default and user-specified settings.</span>

<span class="sd">    name : str</span>
<span class="sd">        Setting name to be modified by this rule.</span>

<span class="sd">    value : str</span>
<span class="sd">        Value of the setting identified by name.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dict : dict</span>
<span class="sd">        Updated setting name and or value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;True&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="n">NEUTRON</span>
    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;False&quot;</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">newValue</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="n">newValue</span><span class="p">:</span>
        <span class="n">runLog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;The `globalFluxActive` setting has been set to </span><span class="si">{}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">newValue</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">newValue</span><span class="p">}</span>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2009-2022, TerraPower, LLC.
      <span class="lastupdated">
        Last updated on 2022-07-15.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>