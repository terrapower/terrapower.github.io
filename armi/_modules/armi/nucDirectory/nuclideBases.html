<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>armi.nucDirectory.nuclideBases &mdash; ARMI 0.3.0 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme_fixes.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-rendered-html.css" type="text/css" />
    <link rel="shortcut icon" href="../../../_static/armiicon_16x16.ico"/>
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #233C5B" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            ARMI
              <img src="../../../_static/armiicon_24x24.ico" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user/index.html">User Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer/index.html">Developer Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gallery/index.html">Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../.apidocs/modules.html">API Docs</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #233C5B" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">ARMI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
          <li class="breadcrumb-item"><a href="../../armi.html">armi</a></li>
      <li class="breadcrumb-item active">armi.nucDirectory.nuclideBases</li>
  <li class="wy-breadcrumbs-aside">
    
  </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for armi.nucDirectory.nuclideBases</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2019 TerraPower, LLC</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#     http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>
<span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module provides fundamental nuclide information to be used throughout the</span>
<span class="sd">framework and applications.</span>

<span class="sd">.. impl:: Isotopes and isomers can be queried by name, label, MC2-3 ID, MCNP ID, and AAAZZZS ID.</span>
<span class="sd">    :id: I_ARMI_ND_ISOTOPES0</span>
<span class="sd">    :implements: R_ARMI_ND_ISOTOPES</span>

<span class="sd">    The :py:mod:`nuclideBases &lt;armi.nucDirectory.nuclideBases&gt;` module defines</span>
<span class="sd">    the :py:class:`NuclideBase &lt;armi.nucDirectory.nuclideBases.NuclideBase&gt;`</span>
<span class="sd">    class which is used to organize and store metadata about each nuclide. The</span>
<span class="sd">    metadata is read from ``nuclides.dat`` file in the ARMI resources folder,</span>
<span class="sd">    which contains metadata for 4,614 isotopes. The module also contains classes</span>
<span class="sd">    for special types of nuclides, including :py:class:`DummyNuclideBase</span>
<span class="sd">    &lt;armi.nucDirectory.nuclideBases.DummyNuclideBase&gt;` for dummy nuclides,</span>
<span class="sd">    :py:class:`LumpNuclideBase</span>
<span class="sd">    &lt;armi.nucDirectory.nuclideBases.LumpNuclideBase&gt;`, for lumped fission</span>
<span class="sd">    product nuclides, and :py:class:`NaturalNuclideBase</span>
<span class="sd">    &lt;armi.nucDirectory.nuclideBases.NaturalNuclideBase&gt;` for when data is given</span>
<span class="sd">    collectively for an element at natural abundance rather than for individual</span>
<span class="sd">    isotopes.</span>

<span class="sd">    The :py:class:`NuclideBase &lt;armi.nucDirectory.nuclideBases.NuclideBase&gt;`</span>
<span class="sd">    provides a data structure for information about a single nuclide, including</span>
<span class="sd">    the atom number, atomic weight, element, isomeric state, half-life, and</span>
<span class="sd">    name.</span>

<span class="sd">    The :py:mod:`nuclideBases &lt;armi.nucDirectory.nuclideBases&gt;` module provides</span>
<span class="sd">    a factory and associated functions for instantiating the</span>
<span class="sd">    :py:class:`NuclideBase &lt;armi.nucDirectory.nuclideBases.NuclideBase&gt;` objects</span>
<span class="sd">    and building the global nuclide dictionaries, including:</span>

<span class="sd">    * ``instances`` (list of nuclides)</span>
<span class="sd">    * ``byName`` (keyed by name, e.g., ``U235``)</span>
<span class="sd">    * ``byDBName`` (keyed by database name, e.g., ``nU235``)</span>
<span class="sd">    * ``byLabel`` (keyed by label, e.g., ``U235``)</span>
<span class="sd">    * ``byMcc2Id`` (keyed by MC\ :sup:`2`-2 ID, e.g., ``U-2355``)</span>
<span class="sd">    * ``byMcc3Id`` (keyed by MC\ :sup:`2`-3 ID, e.g., ``U235_7``)</span>
<span class="sd">    * ``byMcnpId`` (keyed by MCNP ID, e.g., ``92235``)</span>
<span class="sd">    * ``byAAAZZZSId`` (keyed by AAAZZZS, e.g., ``2350920``)</span>

<span class="sd">The nuclide class structure is outlined :ref:`here</span>
<span class="sd">&lt;nuclide-bases-class-diagram&gt;`.</span>

<span class="sd">.. _nuclide-bases-class-diagram:</span>

<span class="sd">.. pyreverse:: armi.nucDirectory.nuclideBases</span>
<span class="sd">    :align: center</span>
<span class="sd">    :width: 75%</span>

<span class="sd">    Class inheritance diagram for :py:class:`INuclide`.</span>

<span class="sd">Examples</span>
<span class="sd">--------</span>
<span class="sd">&gt;&gt;&gt; nuclideBases.byName[&#39;U235&#39;]</span>
<span class="sd">&lt;NuclideBase U235:  Z:92, A:235, S:0, W:2.350439e+02, Label:U235&gt;, HL:2.22160758861e+16, Abund:7.204000e-03&gt;</span>

<span class="sd">&gt;&gt;&gt; nuclideBases.byLabel[&#39;U235&#39;]</span>
<span class="sd">&lt;NuclideBase U235:  Z:92, A:235, S:0, W:2.350439e+02, Label:U235&gt;, HL:2.22160758861e+16, Abund:7.204000e-03&gt;</span>

<span class="sd">Retrieve U-235 by the MC2-2 ID:</span>

<span class="sd">&gt;&gt;&gt; nuclideBases.byMcc2Id[&#39;U-2355&#39;]</span>
<span class="sd">&lt;NuclideBase U235:  Z:92, A:235, S:0, W:2.350439e+02, Label:U235&gt;, HL:2.22160758861e+16, Abund:7.204000e-03&gt;</span>

<span class="sd">Retrieve U-235 by the MC2-3 ID:</span>

<span class="sd">&gt;&gt;&gt; nuclideBases.byMcc3Id[&#39;U235_7&#39;]</span>
<span class="sd">&lt;NuclideBase U235:  Z:92, A:235, S:0, W:2.350439e+02, Label:U235&gt;, HL:2.22160758861e+16, Abund:7.204000e-03&gt;</span>

<span class="sd">Retrieve U-235 by the MCNP ID:</span>

<span class="sd">&gt;&gt;&gt; nuclideBases.byMcnpId[&#39;92235&#39;]</span>
<span class="sd">&lt;NuclideBase U235:  Z:92, A:235, S:0, W:2.350439e+02, Label:U235&gt;, HL:2.22160758861e+16, Abund:7.204000e-03&gt;</span>

<span class="sd">Retrieve U-235 by the AAAZZZS ID:</span>

<span class="sd">&gt;&gt;&gt; nuclideBases.byAAAZZZSId[&#39;2350920&#39;]</span>
<span class="sd">&lt;NuclideBase U235:  Z:92, A:235, S:0, W:2.350439e+02, Label:U235&gt;, HL:2.22160758861e+16, Abund:7.204000e-03&gt;</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">ruamel.yaml</span> <span class="kn">import</span> <span class="n">YAML</span>
<span class="kn">import</span> <span class="nn">numpy</span>

<span class="kn">from</span> <span class="nn">armi</span> <span class="kn">import</span> <span class="n">context</span>
<span class="kn">from</span> <span class="nn">armi</span> <span class="kn">import</span> <span class="n">runLog</span>
<span class="kn">from</span> <span class="nn">armi.nucDirectory</span> <span class="kn">import</span> <span class="n">transmutations</span>
<span class="kn">from</span> <span class="nn">armi.utils.units</span> <span class="kn">import</span> <span class="n">HEAVY_METAL_CUTOFF_Z</span>

<span class="c1"># used to prevent multiple applications of burn chains, which would snowball</span>
<span class="c1"># unphysically. This is a bit of a crutch for the global state that is the nuclide</span>
<span class="c1"># directory.</span>
<span class="n">burnChainImposed</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">instances</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># The elements must be imported after the instances list is established</span>
<span class="c1"># to allow for simutaneous initialization of the nuclides and elements</span>
<span class="c1"># together to maintain self-consistency.</span>
<span class="kn">from</span> <span class="nn">armi.nucDirectory</span> <span class="kn">import</span> <span class="n">elements</span>  <span class="c1"># noqa: E402</span>


<span class="c1"># Dictionary of INuclides by the INuclide.name for fast indexing</span>
<span class="n">byName</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">byDBName</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">byLabel</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">byMcc2Id</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">byMcc3Id</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">byMcnpId</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">byAAAZZZSId</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1"># lookup table from https://t2.lanl.gov/nis/data/endf/endfvii-n.html</span>
<span class="n">BASE_ENDFB7_MAT_NUM</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;PM&quot;</span><span class="p">:</span> <span class="mi">139</span><span class="p">,</span>
    <span class="s2">&quot;RA&quot;</span><span class="p">:</span> <span class="mi">223</span><span class="p">,</span>
    <span class="s2">&quot;AC&quot;</span><span class="p">:</span> <span class="mi">225</span><span class="p">,</span>
    <span class="s2">&quot;TH&quot;</span><span class="p">:</span> <span class="mi">227</span><span class="p">,</span>
    <span class="s2">&quot;PA&quot;</span><span class="p">:</span> <span class="mi">229</span><span class="p">,</span>
    <span class="s2">&quot;NP&quot;</span><span class="p">:</span> <span class="mi">230</span><span class="p">,</span>
    <span class="s2">&quot;PU&quot;</span><span class="p">:</span> <span class="mi">235</span><span class="p">,</span>
    <span class="s2">&quot;AM&quot;</span><span class="p">:</span> <span class="mi">235</span><span class="p">,</span>
    <span class="s2">&quot;CM&quot;</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span>
    <span class="s2">&quot;BK&quot;</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span>
    <span class="s2">&quot;CF&quot;</span><span class="p">:</span> <span class="mi">240</span><span class="p">,</span>
    <span class="s2">&quot;TC&quot;</span><span class="p">:</span> <span class="mi">99</span><span class="p">,</span>
<span class="p">}</span>


<div class="viewcode-block" id="NuclideInterface"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideInterface">[docs]</a><span class="k">class</span> <span class="nc">NuclideInterface</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;An abstract nuclide implementation which defining various methods required for a nuclide object.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="NuclideInterface.getDatabaseName"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideInterface.getDatabaseName">[docs]</a>    <span class="k">def</span> <span class="nf">getDatabaseName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the the nuclide label for the ARMI database (i.e. &quot;nPu239&quot;).&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="NuclideInterface.getDecay"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideInterface.getDecay">[docs]</a>    <span class="k">def</span> <span class="nf">getDecay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decayType</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a :py:class:`~armi.nucDirectory.transmutations.DecayMode` object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        decType: str</span>
<span class="sd">            Name of decay mode, e.g. &#39;sf&#39;, &#39;alpha&#39;</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        decay : :py:class:`DecayModes &lt;armi.nucDirectory.transmutations.DecayMode&gt;`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="NuclideInterface.getMcc2Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideInterface.getMcc2Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc2Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-2 nuclide identification label based on the ENDF/B-V.2 cross section library.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="NuclideInterface.getMcc3Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideInterface.getMcc3Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc3Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-3 nuclide identification label based on the ENDF/B-VII.0 cross section library.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="NuclideInterface.getSerpentId"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideInterface.getSerpentId">[docs]</a>    <span class="k">def</span> <span class="nf">getSerpentId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the Serpent nuclide identification label.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="NuclideInterface.getNaturalIsotopics"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideInterface.getNaturalIsotopics">[docs]</a>    <span class="k">def</span> <span class="nf">getNaturalIsotopics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the natural isotopics root :py:class:`~elements.Element`.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="NuclideInterface.isFissile"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideInterface.isFissile">[docs]</a>    <span class="k">def</span> <span class="nf">isFissile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return boolean value indicating whether this nuclide is fissile.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="NuclideInterface.isHeavyMetal"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideInterface.isHeavyMetal">[docs]</a>    <span class="k">def</span> <span class="nf">isHeavyMetal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return boolean value indicating whether this nuclide is a heavy metal.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>


<div class="viewcode-block" id="NuclideWrapper"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideWrapper">[docs]</a><span class="k">class</span> <span class="nc">NuclideWrapper</span><span class="p">(</span><span class="n">NuclideInterface</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A nuclide wrapper class, used as a base class for nuclear data file nuclides.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_base</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">container</span> <span class="o">=</span> <span class="n">container</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">containerKey</span> <span class="o">=</span> <span class="n">key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nucLabel</span> <span class="o">=</span> <span class="n">key</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">containerKey</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span> <span class="fm">__format__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_spec</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">format_spec</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the underlying nuclide&#39;s name (i.e. &quot;PU239&quot;).</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        The nuclide name consists of the capitalized 2 character element symbol and atomic mass number.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="o">.</span><span class="n">name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">weight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the underlying nuclide&#39;s weight.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="o">.</span><span class="n">weight</span>

<div class="viewcode-block" id="NuclideWrapper.getDatabaseName"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideWrapper.getDatabaseName">[docs]</a>    <span class="k">def</span> <span class="nf">getDatabaseName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the database name of the underlying nuclide (i.e. &quot;nPu239&quot;).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="o">.</span><span class="n">getDatabaseName</span><span class="p">()</span></div>

<div class="viewcode-block" id="NuclideWrapper.getDecay"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideWrapper.getDecay">[docs]</a>    <span class="k">def</span> <span class="nf">getDecay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decayType</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a :py:class:`~armi.nucDirectory.transmutations.DecayMode` object.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        decType: str</span>
<span class="sd">            Name of decay mode, e.g. &#39;sf&#39;, &#39;alpha&#39;</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        decay : :py:class:`DecayModes &lt;armi.nucDirectory.transmutations.DecayMode&gt;`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="o">.</span><span class="n">getDecay</span><span class="p">(</span><span class="n">decayType</span><span class="p">)</span></div>

<div class="viewcode-block" id="NuclideWrapper.getMcc2Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideWrapper.getMcc2Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc2Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-2 nuclide based on the ENDF/B-V.2 cross section library.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="o">.</span><span class="n">getMcc2Id</span><span class="p">()</span></div>

<div class="viewcode-block" id="NuclideWrapper.getMcc3Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideWrapper.getMcc3Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc3Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-3 nuclide based on the ENDF/B-VII.0 cross section library.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="o">.</span><span class="n">getMcc3Id</span><span class="p">()</span></div>

<div class="viewcode-block" id="NuclideWrapper.getNaturalIsotopics"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideWrapper.getNaturalIsotopics">[docs]</a>    <span class="k">def</span> <span class="nf">getNaturalIsotopics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the natural isotopics root :py:class:`~elements.Element`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="o">.</span><span class="n">getNaturalIsotopics</span><span class="p">()</span></div>

<div class="viewcode-block" id="NuclideWrapper.isFissile"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideWrapper.isFissile">[docs]</a>    <span class="k">def</span> <span class="nf">isFissile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return boolean indicating whether or not the underlying nuclide is fissle.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="o">.</span><span class="n">isFissile</span><span class="p">()</span></div>

<div class="viewcode-block" id="NuclideWrapper.isHeavyMetal"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideWrapper.isHeavyMetal">[docs]</a>    <span class="k">def</span> <span class="nf">isHeavyMetal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return boolean indicating whether or not the underlying nuclide is a heavy metal.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_base</span><span class="o">.</span><span class="n">isHeavyMetal</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="INuclide"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.INuclide">[docs]</a><span class="k">class</span> <span class="nc">INuclide</span><span class="p">(</span><span class="n">NuclideInterface</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Nuclide interface, the base of all nuclide objects.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    z : int</span>
<span class="sd">        Number of protons.</span>

<span class="sd">    a : int</span>
<span class="sd">        Number of nucleons.</span>

<span class="sd">    state : int</span>
<span class="sd">        Indicates excitement, 1 is more excited than 0.</span>

<span class="sd">    abundance : float</span>
<span class="sd">        Isotopic fraction of a naturally occurring nuclide. The sum of all nuclide</span>
<span class="sd">        abundances for a naturally occurring element should be 1.0. This is atom</span>
<span class="sd">        fraction, not mass fraction.</span>

<span class="sd">    name : str</span>
<span class="sd">        ARMI&#39;s unique name for the given nuclide.</span>

<span class="sd">    label : str</span>
<span class="sd">        ARMI&#39;s unique 4 character label for the nuclide.</span>
<span class="sd">        These are not human readable, but do not lose any information.</span>
<span class="sd">        The label is effectively the</span>
<span class="sd">        :attr:`Element.symbol `armi.nucDirectory.elements.Element.symbol`</span>
<span class="sd">        padded to two characters, plus the mass number (A) in base-26 (0-9, A-Z).</span>
<span class="sd">        Additional support for meta-states is provided by adding 100 * the state</span>
<span class="sd">        to the mass number (A).</span>

<span class="sd">    nuSF : float</span>
<span class="sd">        Neutrons released per spontaneous fission.</span>
<span class="sd">        This should probably be moved at some point.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fissile</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;U235&quot;</span><span class="p">,</span> <span class="s2">&quot;PU239&quot;</span><span class="p">,</span> <span class="s2">&quot;PU241&quot;</span><span class="p">,</span> <span class="s2">&quot;AM242M&quot;</span><span class="p">,</span> <span class="s2">&quot;CM244&quot;</span><span class="p">,</span> <span class="s2">&quot;U233&quot;</span><span class="p">]</span>
    <span class="n">TRANSMUTATION</span> <span class="o">=</span> <span class="s2">&quot;transmutation&quot;</span>
    <span class="n">DECAY</span> <span class="o">=</span> <span class="s2">&quot;decay&quot;</span>
    <span class="n">SPONTANEOUS_FISSION</span> <span class="o">=</span> <span class="s2">&quot;nuSF&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">element</span><span class="p">,</span>
        <span class="n">a</span><span class="p">,</span>
        <span class="n">state</span><span class="p">,</span>
        <span class="n">weight</span><span class="p">,</span>
        <span class="n">abundance</span><span class="p">,</span>
        <span class="n">halflife</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">label</span><span class="p">,</span>
        <span class="n">mcc2id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">mcc3id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an instance of an INuclide.</span>

<span class="sd">        Warning</span>
<span class="sd">        -------</span>
<span class="sd">        Do not call this constructor directly; use the factory instead.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">element</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">elements</span><span class="o">.</span><span class="n">byName</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error in initializing nuclide </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">. Element </span><span class="si">{</span><span class="n">element</span><span class="si">}</span><span class="s2"> does not exist in the global element list.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">state</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error in initializing nuclide </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">. An invalid state </span><span class="si">{</span><span class="n">state</span><span class="si">}</span><span class="s2"> is provided. The &quot;</span>
                <span class="s2">&quot;state must be a positive integer.&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">halflife</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Error in initializing nuclide </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">. The halflife must be a positive value.&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">element</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">z</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decays</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trans</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weight</span> <span class="o">=</span> <span class="n">weight</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">abundance</span> <span class="o">=</span> <span class="n">abundance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">halflife</span> <span class="o">=</span> <span class="n">halflife</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nuSF</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mcc2id</span> <span class="o">=</span> <span class="n">mcc2id</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mcc3id</span> <span class="o">=</span> <span class="n">mcc3id</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
        <span class="n">addGlobalNuclide</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__reduce__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">fromName</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,)</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="n">other</span><span class="o">.</span><span class="n">state</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="nb">hash</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_processBurnData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">burnInfo</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Process YAML burn transmutation, decay, and spontaneous fission data for this nuclide.</span>

<span class="sd">        This clears out any existing transmutation/decay information before processing.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        burnInfo: list</span>
<span class="sd">            List of dictionaries containing burn information for the current nuclide</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">decays</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trans</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">nuclideBurnCategory</span> <span class="ow">in</span> <span class="n">burnInfo</span><span class="p">:</span>
            <span class="c1"># Check that the burn category has only one defined burn type</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">nuclideBurnCategory</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Improperly defined ``burn-chain`` of </span><span class="si">{}</span><span class="s2">. </span><span class="si">{}</span><span class="s2"> should be a single burn type.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="bp">self</span><span class="p">,</span> <span class="n">nuclideBurnCategory</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="n">nuclideBurnType</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">nuclideBurnCategory</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">nuclideBurnType</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">TRANSMUTATION</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">trans</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">transmutations</span><span class="o">.</span><span class="n">Transmutation</span><span class="p">(</span>
                        <span class="bp">self</span><span class="p">,</span> <span class="n">nuclideBurnCategory</span><span class="p">[</span><span class="n">nuclideBurnType</span><span class="p">]</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">nuclideBurnType</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">DECAY</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">decays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">transmutations</span><span class="o">.</span><span class="n">DecayMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nuclideBurnCategory</span><span class="p">[</span><span class="n">nuclideBurnType</span><span class="p">])</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">nuclideBurnType</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">SPONTANEOUS_FISSION</span><span class="p">:</span>
                <span class="n">userSpontaneousFissionYield</span> <span class="o">=</span> <span class="n">nuclideBurnCategory</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                    <span class="n">nuclideBurnType</span><span class="p">,</span> <span class="kc">None</span>
                <span class="p">)</span>

                <span class="c1"># Check for user-defined value of nuSF within the burn-chain data. If this is</span>
                <span class="c1"># updated then prefer the user change and then note this to the user. Otherwise,</span>
                <span class="c1"># maintain the default loaded from the nuclide bases.</span>
                <span class="k">if</span> <span class="n">userSpontaneousFissionYield</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">userSpontaneousFissionYield</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nuSF</span><span class="p">:</span>
                        <span class="n">runLog</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;nuSF provided for </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2"> will be updated from &quot;</span>
                            <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">nuSF</span><span class="si">:</span><span class="s2">&lt;8.6e</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">userSpontaneousFissionYield</span><span class="si">:</span><span class="s2">&lt;8.6e</span><span class="si">}</span><span class="s2"> based on &quot;</span>
                            <span class="s2">&quot;user provided burn-chain data.&quot;</span>
                        <span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">nuSF</span> <span class="o">=</span> <span class="n">userSpontaneousFissionYield</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;Undefined Burn Data </span><span class="si">{}</span><span class="s2"> for </span><span class="si">{}</span><span class="s2">. Expected </span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">, or </span><span class="si">{}</span><span class="s2">.&quot;</span>
                    <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">nuclideBurnType</span><span class="p">,</span>
                        <span class="bp">self</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">TRANSMUTATION</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">DECAY</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">SPONTANEOUS_FISSION</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

<div class="viewcode-block" id="INuclide.getDecay"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.INuclide.getDecay">[docs]</a>    <span class="k">def</span> <span class="nf">getDecay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decayType</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get a :py:class:`~armi.nucDirectory.transmutations.DecayMode`.</span>

<span class="sd">        Retrieve the first :py:class:`~armi.nucDirectory.transmutations.DecayMode`</span>
<span class="sd">        matching the specified decType.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        decType: str</span>
<span class="sd">            Name of decay mode e.g. &#39;sf&#39;, &#39;alpha&#39;</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        decay : :py:class:`DecayModes &lt;armi.nucDirectory.transmutations.DecayMode&gt;`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">decays</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">d</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">decayType</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">d</span>

        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="INuclide.isFissile"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.INuclide.isFissile">[docs]</a>    <span class="k">def</span> <span class="nf">isFissile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Determine if the nuclide is fissile.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        answer: bool</span>
<span class="sd">            True if the :py:class:`INuclide` is fissile, otherwise False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fissile</span></div>

<div class="viewcode-block" id="INuclide.getNaturalIsotopics"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.INuclide.getNaturalIsotopics">[docs]</a>    <span class="k">def</span> <span class="nf">getNaturalIsotopics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Gets the naturally occurring nuclides for this nuclide.</span>

<span class="sd">        Abstract method, see concrete types for implementation.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        nuclides: list</span>
<span class="sd">            List of :py:class:`INuclides &lt;INuclide&gt;`</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        :meth:`NuclideBase.getNaturalIsotopics`</span>
<span class="sd">        :meth:`NaturalNuclideBase.getNaturalIsotopics`</span>
<span class="sd">        :meth:`LumpNuclideBase.getNaturalIsotopics`</span>
<span class="sd">        :meth:`DummyNuclideBase.getNaturalIsotopics`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="INuclide.getDatabaseName"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.INuclide.getDatabaseName">[docs]</a>    <span class="k">def</span> <span class="nf">getDatabaseName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the name of the nuclide used in the database (i.e. &quot;nPu239&quot;).&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span></div>

<div class="viewcode-block" id="INuclide.isHeavyMetal"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.INuclide.isHeavyMetal">[docs]</a>    <span class="k">def</span> <span class="nf">isHeavyMetal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">&gt;</span> <span class="n">HEAVY_METAL_CUTOFF_Z</span></div></div>


<div class="viewcode-block" id="IMcnpNuclide"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.IMcnpNuclide">[docs]</a><span class="k">class</span> <span class="nc">IMcnpNuclide</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Abstract class for retrieving nuclide identifiers for the MCNP software.&quot;&quot;&quot;</span>

<div class="viewcode-block" id="IMcnpNuclide.getMcnpId"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.IMcnpNuclide.getMcnpId">[docs]</a>    <span class="k">def</span> <span class="nf">getMcnpId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string that represents a nuclide label for a material card in MCNP.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>

<div class="viewcode-block" id="IMcnpNuclide.getAAAZZZSId"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.IMcnpNuclide.getAAAZZZSId">[docs]</a>    <span class="k">def</span> <span class="nf">getAAAZZZSId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return a string that is ordered by the mass number, A, the atomic number, Z, and the isomeric state, S.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span></div></div>


<div class="viewcode-block" id="NuclideBase"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideBase">[docs]</a><span class="k">class</span> <span class="nc">NuclideBase</span><span class="p">(</span><span class="n">INuclide</span><span class="p">,</span> <span class="n">IMcnpNuclide</span><span class="p">):</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Represents an individual nuclide/isotope.</span>

<span class="sd">    .. impl:: Isotopes and isomers can be queried by name and label.</span>
<span class="sd">        :id: I_ARMI_ND_ISOTOPES1</span>
<span class="sd">        :implements: R_ARMI_ND_ISOTOPES</span>

<span class="sd">        The :py:class:`NuclideBase &lt;armi.nucDirectory.nuclideBases.NuclideBase&gt;`</span>
<span class="sd">        class provides a data structure for information about a single nuclide,</span>
<span class="sd">        including the atom number, atomic weight, element, isomeric state,</span>
<span class="sd">        half-life, and name. The class contains static methods for creating an</span>
<span class="sd">        internal ARMI name or label for a nuclide. There are instance methods</span>
<span class="sd">        for generating the nuclide ID for external codes, e.g. MCNP or Serpent,</span>
<span class="sd">        and retrieving the nuclide ID for MC\ :sup:`2`-2 or MC\ :sup:`2`-3.</span>
<span class="sd">        There are also instance methods for generating an AAAZZZS ID and an ENDF</span>
<span class="sd">        MAT number.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">element</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">abundance</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">halflife</span><span class="p">):</span>
        <span class="n">IMcnpNuclide</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">INuclide</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">element</span><span class="o">=</span><span class="n">element</span><span class="p">,</span>
            <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">,</span>
            <span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
            <span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">,</span>
            <span class="n">abundance</span><span class="o">=</span><span class="n">abundance</span><span class="p">,</span>
            <span class="n">halflife</span><span class="o">=</span><span class="n">halflife</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">NuclideBase</span><span class="o">.</span><span class="n">_createName</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">state</span><span class="p">),</span>
            <span class="n">label</span><span class="o">=</span><span class="n">NuclideBase</span><span class="o">.</span><span class="n">_createLabel</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">state</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:  Z:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="si">}</span><span class="s2">, A:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}</span><span class="s2">, S:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;W:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="si">:</span><span class="s2">&lt;12.6e</span><span class="si">}</span><span class="s2">, Label:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&gt;, HL:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">halflife</span><span class="si">:</span><span class="s2">&lt;15.11e</span><span class="si">}</span><span class="s2">, &quot;</span>
            <span class="o">+</span> <span class="sa">f</span><span class="s2">&quot;Abund:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">abundance</span><span class="si">:</span><span class="s2">&lt;8.6e</span><span class="si">}</span><span class="s2">&gt;&quot;</span>
        <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_createName</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="n">metaChar</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="s2">&quot;M2&quot;</span><span class="p">,</span> <span class="s2">&quot;M3&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">state</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">metaChar</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The state of NuclideBase is not valid and must not be larger than </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">metaChar</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">symbol</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">metaChar</span><span class="p">[</span><span class="n">state</span><span class="p">])</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_createLabel</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Make label for nuclide base.</span>

<span class="sd">        The logic causes labels for things with A&lt;10 to be zero padded like H03 or tritium</span>
<span class="sd">        instead of H3. This avoids the metastable tritium collision which would look</span>
<span class="sd">        like elemental HE. It also allows things like MO100 to be held within 4 characters,</span>
<span class="sd">        which is a constraint of the ISOTXS format if we append 2 characters for XS type.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># len(e.symbol) is 1 or 2 =&gt; a % (either 1000 or 100)</span>
        <span class="c1">#                         =&gt; gives exact a, or last two digits.</span>
        <span class="c1"># the division by 10 removes the last digit.</span>
        <span class="n">firstTwoDigits</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">%</span> <span class="p">(</span><span class="mi">10</span> <span class="o">**</span> <span class="p">(</span><span class="mi">4</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">symbol</span><span class="p">))))</span> <span class="o">//</span> <span class="mi">10</span>
        <span class="c1"># the last digit is either 0-9 if state=0, or A-J if state=1, or K-T if state=2, or U-d if state=3</span>
        <span class="n">lastDigit</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;0123456789&quot;</span> <span class="s2">&quot;ABCDEFGHIJ&quot;</span> <span class="s2">&quot;KLMNOPQRST&quot;</span> <span class="s2">&quot;UVWXYZabcd&quot;</span><span class="p">[(</span><span class="n">a</span> <span class="o">%</span> <span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="n">state</span> <span class="o">*</span> <span class="mi">10</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">symbol</span><span class="p">,</span> <span class="n">firstTwoDigits</span><span class="p">,</span> <span class="n">lastDigit</span><span class="p">)</span>

<div class="viewcode-block" id="NuclideBase.getNaturalIsotopics"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideBase.getNaturalIsotopics">[docs]</a>    <span class="k">def</span> <span class="nf">getNaturalIsotopics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the natural isotopics root :py:class:`~elements.Element`.</span>

<span class="sd">        Gets the naturally occurring nuclides for this nuclide.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        nuclides: list</span>
<span class="sd">            List of :py:class:`INuclides &lt;INuclide&gt;`</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        :meth:`INuclide.getNaturalIsotopics`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">getNaturalIsotopics</span><span class="p">()</span></div>

<div class="viewcode-block" id="NuclideBase.getMcc2Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideBase.getMcc2Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc2Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-2 nuclide identification label based on the ENDF/B-V.2 cross section library.</span>

<span class="sd">        .. impl:: Isotopes and isomers can be queried by MC2-2 ID.</span>
<span class="sd">            :id: I_ARMI_ND_ISOTOPES2</span>
<span class="sd">            :implements: R_ARMI_ND_ISOTOPES</span>

<span class="sd">            This method returns the ``mcc2id`` attribute of a</span>
<span class="sd">            :py:class:`NuclideBase &lt;armi.nucDirectory.nuclideBases.NuclideBase&gt;`</span>
<span class="sd">            instance.  This attribute is initially populated by reading from the</span>
<span class="sd">            mcc-nuclides.yaml file in the ARMI resources folder.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcc2id</span></div>

<div class="viewcode-block" id="NuclideBase.getMcc3Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideBase.getMcc3Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc3Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-3 nuclide identification label based on the ENDF/B-VII.0 cross section library.</span>

<span class="sd">        .. impl:: Isotopes and isomers can be queried by MC2-3 ID.</span>
<span class="sd">            :id: I_ARMI_ND_ISOTOPES3</span>
<span class="sd">            :implements: R_ARMI_ND_ISOTOPES</span>

<span class="sd">            This method returns the ``mcc3id`` attribute of a</span>
<span class="sd">            :py:class:`NuclideBase &lt;armi.nucDirectory.nuclideBases.NuclideBase&gt;`</span>
<span class="sd">            instance.  This attribute is initially populated by reading from the</span>
<span class="sd">            mcc-nuclides.yaml file in the ARMI resources folder.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcc3id</span></div>

<div class="viewcode-block" id="NuclideBase.getMcnpId"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideBase.getMcnpId">[docs]</a>    <span class="k">def</span> <span class="nf">getMcnpId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the MCNP label for this nuclide.</span>

<span class="sd">        .. impl:: Isotopes and isomers can be queried by MCNP ID.</span>
<span class="sd">            :id: I_ARMI_ND_ISOTOPES4</span>
<span class="sd">            :implements: R_ARMI_ND_ISOTOPES</span>

<span class="sd">            This method generates the MCNP ID for an isotope using the standard</span>
<span class="sd">            MCNP format based on the atomic number A, number of protons Z, and</span>
<span class="sd">            excited state. The implementation includes the special rule for</span>
<span class="sd">            Am-242m, which is 95242. 95642 is used for the less common ground</span>
<span class="sd">            state Am-242.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        id : str</span>
<span class="sd">            The MCNP ID e.g. ``92235``, ``94239``, ``6000``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">z</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>

        <span class="k">if</span> <span class="n">z</span> <span class="o">==</span> <span class="mi">95</span> <span class="ow">and</span> <span class="n">a</span> <span class="o">==</span> <span class="mi">242</span><span class="p">:</span>
            <span class="c1"># Am242 has special rules</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># MCNP uses base state for the common metastable state AM242M, so AM242M is just 95242</span>
                <span class="c1"># AM242 base state is called 95642 (+400) in mcnp.</span>
                <span class="c1"># see https://mcnp.lanl.gov/pdf_files/la-ur-08-1999.pdf</span>
                <span class="c1"># New ACE-Formatted Neutron and Proton Libraries Based on ENDF/B-VII.0</span>
                <span class="n">a</span> <span class="o">+=</span> <span class="mi">300</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">*</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># in general mcnp adds 300 + 100*m to the Z number for metastables. see above source</span>
            <span class="n">a</span> <span class="o">+=</span> <span class="mi">300</span> <span class="o">+</span> <span class="mi">100</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span>

        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{z:d}{a:03d}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="n">a</span><span class="p">)</span></div>

<div class="viewcode-block" id="NuclideBase.getAAAZZZSId"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideBase.getAAAZZZSId">[docs]</a>    <span class="k">def</span> <span class="nf">getAAAZZZSId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a string that is ordered by the mass number, A, the atomic number, Z, and the isomeric state, S.</span>

<span class="sd">        .. impl:: Isotopes and isomers can be queried by AAAZZZS ID.</span>
<span class="sd">            :id: I_ARMI_ND_ISOTOPES5</span>
<span class="sd">            :implements: R_ARMI_ND_ISOTOPES</span>

<span class="sd">            This method generates the AAAZZZS format ID for an isotope. Where</span>
<span class="sd">            AAA is the mass number, ZZZ is the atomic number, and S is the</span>
<span class="sd">            isomeric state. This is a general format independent of any code that</span>
<span class="sd">            precisely defines an isotope or isomer.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        An example would be for U235, where A=235, Z=92, and S=0, returning ``2350920``.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="si">:</span><span class="s2">&gt;03d</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="si">}</span><span class="s2">&quot;</span></div>

<div class="viewcode-block" id="NuclideBase.getSerpentId"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideBase.getSerpentId">[docs]</a>    <span class="k">def</span> <span class="nf">getSerpentId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the SERPENT style ID for this nuclide.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        id: str</span>
<span class="sd">            The ID of this nuclide based on it&#39;s elemental name, weight,</span>
<span class="sd">            and state, eg ``U-235``, ``Te-129m``,</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">symbol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">-</span><span class="si">{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">symbol</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="NuclideBase.getEndfMatNum"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NuclideBase.getEndfMatNum">[docs]</a>    <span class="k">def</span> <span class="nf">getEndfMatNum</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the ENDF MAT number.</span>

<span class="sd">        MAT numbers are defined as described in section 0.4.1 of the NJOY manual.</span>
<span class="sd">        Basically, it&#39;s Z * 100 + I where I is an isotope number. I=25 is defined</span>
<span class="sd">        as the lightest known stable isotope of element Z, so for Uranium,</span>
<span class="sd">        Z=92 and I=25 refers to U234. The values of I go up by 3 for each</span>
<span class="sd">        mass number, so U235 is 9228. This leaves room for three isomeric</span>
<span class="sd">        states of each nuclide.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        id : str</span>
<span class="sd">            The MAT number e.g. ``9237`` for U238</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">z</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">symbol</span> <span class="ow">in</span> <span class="n">BASE_ENDFB7_MAT_NUM</span><span class="p">:</span>
            <span class="c1"># no stable isotopes (or other special case). Use lookup table</span>
            <span class="n">smallestStableA</span> <span class="o">=</span> <span class="n">BASE_ENDFB7_MAT_NUM</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">symbol</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">naturalIsotopes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getNaturalIsotopics</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">naturalIsotopes</span><span class="p">:</span>
                <span class="n">smallestStableA</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span>
                    <span class="n">ni</span><span class="o">.</span><span class="n">a</span> <span class="k">for</span> <span class="n">ni</span> <span class="ow">in</span> <span class="n">naturalIsotopes</span>
                <span class="p">)</span>  <span class="c1"># no guarantee they were sorted</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Nuclide </span><span class="si">{</span><span class="bp">self</span><span class="si">}</span><span class="s2"> is unknown in the MAT number lookup&quot;</span><span class="p">)</span>

        <span class="n">isotopeNum</span> <span class="o">=</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">smallestStableA</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">+</span> <span class="mi">25</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="n">z</span> <span class="o">*</span> <span class="mi">100</span> <span class="o">+</span> <span class="n">isotopeNum</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="NaturalNuclideBase"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NaturalNuclideBase">[docs]</a><span class="k">class</span> <span class="nc">NaturalNuclideBase</span><span class="p">(</span><span class="n">INuclide</span><span class="p">,</span> <span class="n">IMcnpNuclide</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents an individual nuclide/isotope that is naturally occurring.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This is meant to represent the combination of all naturally occurring nuclides</span>
<span class="sd">    within an element. The abundance is forced to zero here so that it does not</span>
<span class="sd">    have any interactions with the NuclideBase objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">element</span><span class="p">):</span>
        <span class="n">INuclide</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">element</span><span class="o">=</span><span class="n">element</span><span class="p">,</span>
            <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">state</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">weight</span><span class="o">=</span><span class="nb">sum</span><span class="p">(</span>
                <span class="p">[</span><span class="n">nn</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">nn</span><span class="o">.</span><span class="n">abundance</span> <span class="k">for</span> <span class="n">nn</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">getNaturalIsotopics</span><span class="p">()]</span>
            <span class="p">),</span>
            <span class="n">abundance</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">halflife</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:  Z:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="si">}</span><span class="s2">, W:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="si">:</span><span class="s2">&lt;12.6e</span><span class="si">}</span><span class="s2">, Label:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

<div class="viewcode-block" id="NaturalNuclideBase.getNaturalIsotopics"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NaturalNuclideBase.getNaturalIsotopics">[docs]</a>    <span class="k">def</span> <span class="nf">getNaturalIsotopics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the natural isotopics root :py:class:`~elements.Element`.</span>

<span class="sd">        Gets the naturally occurring nuclides for this nuclide.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        nuclides: list</span>
<span class="sd">            List of :py:class:`INuclides &lt;INuclide&gt;`.</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        :meth:`INuclide.getNaturalIsotopics`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">getNaturalIsotopics</span><span class="p">()</span></div>

<div class="viewcode-block" id="NaturalNuclideBase.getMcnpId"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NaturalNuclideBase.getMcnpId">[docs]</a>    <span class="k">def</span> <span class="nf">getMcnpId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the MCNP ID for this element.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        id : str</span>
<span class="sd">            The MCNP ID e.g. ``1000``, ``92000``. Not zero-padded on the left.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0:d}</span><span class="s2">000&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">)</span></div>

<div class="viewcode-block" id="NaturalNuclideBase.getAAAZZZSId"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NaturalNuclideBase.getAAAZZZSId">[docs]</a>    <span class="k">def</span> <span class="nf">getAAAZZZSId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the AAAZZZS ID for a few elements.</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        the natural nuclides &#39;C&#39; and &#39;V&#39; do not have isotopic nuclide data for MC2 so sometimes they tag along in the</span>
<span class="sd">        list of active nuclides. This method is designed to fail in the same as if there was not getAAAZZZSId method</span>
<span class="sd">        defined.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">symbol</span> <span class="o">==</span> <span class="s2">&quot;C&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;120060&quot;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">symbol</span> <span class="o">==</span> <span class="s2">&quot;V&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;510230&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="NaturalNuclideBase.getMcc2Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NaturalNuclideBase.getMcc2Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc2Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-2 nuclide identification label based on the ENDF/B-V.2 cross section library.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcc2id</span></div>

<div class="viewcode-block" id="NaturalNuclideBase.getMcc3Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NaturalNuclideBase.getMcc3Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc3Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-3 nuclide identification label based on the ENDF/B-VII.0 cross section library.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcc3id</span></div>

<div class="viewcode-block" id="NaturalNuclideBase.getSerpentId"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NaturalNuclideBase.getSerpentId">[docs]</a>    <span class="k">def</span> <span class="nf">getSerpentId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the SERPENT ID for this natural nuclide.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        id: str</span>
<span class="sd">            SERPENT ID: ``C-nat``, `Fe-nat``</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">-nat&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">symbol</span><span class="o">.</span><span class="n">capitalize</span><span class="p">())</span></div>

<div class="viewcode-block" id="NaturalNuclideBase.getEndfMatNum"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.NaturalNuclideBase.getEndfMatNum">[docs]</a>    <span class="k">def</span> <span class="nf">getEndfMatNum</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the ENDF mat number for this element.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">!=</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">runLog</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="s2">&quot;The only elemental in ENDF/B VII.1 is carbon. &quot;</span>
                <span class="s2">&quot;ENDF mat num was requested for the elemental </span><span class="si">{}</span><span class="s2"> and will not be helpful &quot;</span>
                <span class="s2">&quot;for working with ENDF/B VII.1. Try to expandElementalsToIsotopics&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="DummyNuclideBase"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.DummyNuclideBase">[docs]</a><span class="k">class</span> <span class="nc">DummyNuclideBase</span><span class="p">(</span><span class="n">INuclide</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a dummy/placeholder nuclide within the system.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This may be used to store mass from a depletion calculation, specifically</span>
<span class="sd">    in the instances where the burn chain is truncated.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">weight</span><span class="p">):</span>
        <span class="n">INuclide</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">element</span><span class="o">=</span><span class="n">elements</span><span class="o">.</span><span class="n">byName</span><span class="p">[</span><span class="s2">&quot;Dummy&quot;</span><span class="p">],</span>
            <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">state</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">,</span>
            <span class="n">abundance</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">halflife</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;DMP&quot;</span> <span class="o">+</span> <span class="n">name</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:  W:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="si">:</span><span class="s2">&lt;12.6e</span><span class="si">}</span><span class="s2">, Label:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span>
            <span class="n">other</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
            <span class="n">other</span><span class="o">.</span><span class="n">a</span><span class="p">,</span>
            <span class="n">other</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
            <span class="n">other</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span>
        <span class="p">)</span>

<div class="viewcode-block" id="DummyNuclideBase.getNaturalIsotopics"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.DummyNuclideBase.getNaturalIsotopics">[docs]</a>    <span class="k">def</span> <span class="nf">getNaturalIsotopics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the natural isotopics, an empty iterator.</span>

<span class="sd">        Gets the naturally occurring nuclides for this nuclide.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        empty: iterator</span>
<span class="sd">            An empty generator</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        :meth:`INuclide.getNaturalIsotopics`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span>
        <span class="k">yield</span></div>

<div class="viewcode-block" id="DummyNuclideBase.isHeavyMetal"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.DummyNuclideBase.isHeavyMetal">[docs]</a>    <span class="k">def</span> <span class="nf">isHeavyMetal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="DummyNuclideBase.getMcc2Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.DummyNuclideBase.getMcc2Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc2Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-2 nuclide identification label based on the ENDF/B-V.2 cross section library.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcc2id</span></div>

<div class="viewcode-block" id="DummyNuclideBase.getMcc3Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.DummyNuclideBase.getMcc3Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc3Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-3 nuclide identification label based on the ENDF/B-VII.0 cross section library.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcc3id</span></div></div>


<div class="viewcode-block" id="LumpNuclideBase"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.LumpNuclideBase">[docs]</a><span class="k">class</span> <span class="nc">LumpNuclideBase</span><span class="p">(</span><span class="n">INuclide</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a combination of many nuclides from `NuclideBases` into a single lumped nuclide.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    armi.physics.neutronics.fissionProduct model:</span>
<span class="sd">        Describes what nuclides LumpNuclideBase is expend to.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">weight</span><span class="p">):</span>
        <span class="n">INuclide</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">element</span><span class="o">=</span><span class="n">elements</span><span class="o">.</span><span class="n">byName</span><span class="p">[</span><span class="s2">&quot;LumpedFissionProduct&quot;</span><span class="p">],</span>
            <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">state</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">,</span>
            <span class="n">abundance</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
            <span class="n">halflife</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:  W:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="si">:</span><span class="s2">&lt;12.6e</span><span class="si">}</span><span class="s2">, Label:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span> <span class="fm">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">))</span>

    <span class="k">def</span> <span class="fm">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">z</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">weight</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span>
            <span class="n">other</span><span class="o">.</span><span class="n">z</span><span class="p">,</span>
            <span class="n">other</span><span class="o">.</span><span class="n">a</span><span class="p">,</span>
            <span class="n">other</span><span class="o">.</span><span class="n">state</span><span class="p">,</span>
            <span class="n">other</span><span class="o">.</span><span class="n">weight</span><span class="p">,</span>
        <span class="p">)</span>

<div class="viewcode-block" id="LumpNuclideBase.getNaturalIsotopics"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.LumpNuclideBase.getNaturalIsotopics">[docs]</a>    <span class="k">def</span> <span class="nf">getNaturalIsotopics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the natural isotopics, an empty iterator.</span>

<span class="sd">        Gets the naturally occurring nuclides for this nuclide.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        empty: iterator</span>
<span class="sd">            An empty generator</span>

<span class="sd">        See Also</span>
<span class="sd">        --------</span>
<span class="sd">        :meth:`INuclide.getNaturalIsotopics`</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span>
        <span class="k">yield</span></div>

<div class="viewcode-block" id="LumpNuclideBase.isHeavyMetal"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.LumpNuclideBase.isHeavyMetal">[docs]</a>    <span class="k">def</span> <span class="nf">isHeavyMetal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="LumpNuclideBase.getMcc2Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.LumpNuclideBase.getMcc2Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc2Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-2 nuclide identification label based on the ENDF/B-V.2 cross section library.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcc2id</span></div>

<div class="viewcode-block" id="LumpNuclideBase.getMcc3Id"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.LumpNuclideBase.getMcc3Id">[docs]</a>    <span class="k">def</span> <span class="nf">getMcc3Id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the MC2-3 nuclide identification label based on the ENDF/B-VII.0 cross section library.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">mcc3id</span></div></div>


<div class="viewcode-block" id="initReachableActiveNuclidesThroughBurnChain"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.initReachableActiveNuclidesThroughBurnChain">[docs]</a><span class="k">def</span> <span class="nf">initReachableActiveNuclidesThroughBurnChain</span><span class="p">(</span><span class="n">numberDensityDict</span><span class="p">,</span> <span class="n">activeNuclides</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    March through the depletion chain and find all nuclides that can be reached by depleting nuclides passed in.</span>

<span class="sd">    This limits depletion to the smallest set of nuclides that matters.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    numberDensityDict : dict</span>
<span class="sd">        Starting number densities.</span>

<span class="sd">    activeNuclides : OrderedSet</span>
<span class="sd">        Active nuclides defined on the reactor blueprints object. See: armi.reactor.blueprints.py</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">burnChainImposed</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="n">missingActiveNuclides</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">memo</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">difference</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">numberDensityDict</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">memo</span><span class="p">)</span>
    <span class="k">while</span> <span class="nb">any</span><span class="p">(</span><span class="n">difference</span><span class="p">):</span>
        <span class="n">nuclide</span> <span class="o">=</span> <span class="n">difference</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">memo</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">nuclide</span><span class="p">)</span>
        <span class="c1"># Skip the nuclide if it is not `active` in the burn-chain</span>
        <span class="k">if</span> <span class="n">nuclide</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">activeNuclides</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="n">nuclideObj</span> <span class="o">=</span> <span class="n">byName</span><span class="p">[</span><span class="n">nuclide</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">interaction</span> <span class="ow">in</span> <span class="n">nuclideObj</span><span class="o">.</span><span class="n">trans</span> <span class="o">+</span> <span class="n">nuclideObj</span><span class="o">.</span><span class="n">decays</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Interaction nuclides can only be added to the number density</span>
                <span class="c1"># dictionary if they are a part of the user-defined active nuclides</span>
                <span class="n">productNuclide</span> <span class="o">=</span> <span class="n">interaction</span><span class="o">.</span><span class="n">getPreferredProduct</span><span class="p">(</span><span class="n">activeNuclides</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">productNuclide</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">numberDensityDict</span><span class="p">:</span>
                    <span class="n">numberDensityDict</span><span class="p">[</span><span class="n">productNuclide</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="c1"># Keep track of the first production nuclide</span>
                <span class="n">missingActiveNuclides</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">interaction</span><span class="o">.</span><span class="n">productNuclides</span><span class="p">)</span>

        <span class="n">difference</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">numberDensityDict</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">memo</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">burnChainImposed</span> <span class="ow">and</span> <span class="n">missingActiveNuclides</span><span class="p">:</span>
        <span class="n">_failOnMissingActiveNuclides</span><span class="p">(</span><span class="n">missingActiveNuclides</span><span class="p">)</span></div>


<span class="k">def</span> <span class="nf">_failOnMissingActiveNuclides</span><span class="p">(</span><span class="n">missingActiveNuclides</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raise ValueError with notification of which nuclides to include in the burn-chain.&quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Missing active nuclides in loading file. Add the following nuclides:&quot;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nucList</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">missingActiveNuclides</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2"> </span><span class="si">{}</span><span class="s2"> - &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>  <span class="c1"># Index of</span>
        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">nuc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nucList</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">delimiter</span> <span class="o">=</span> <span class="s2">&quot; or &quot;</span> <span class="k">if</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">nucList</span><span class="p">)</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">{}{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">nuc</span><span class="p">,</span> <span class="n">delimiter</span><span class="p">)</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>


<div class="viewcode-block" id="isotopes"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.isotopes">[docs]</a><span class="k">def</span> <span class="nf">isotopes</span><span class="p">(</span><span class="n">z</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">elements</span><span class="o">.</span><span class="n">byZ</span><span class="p">[</span><span class="n">z</span><span class="p">]</span><span class="o">.</span><span class="n">nuclides</span></div>


<div class="viewcode-block" id="getIsotopics"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.getIsotopics">[docs]</a><span class="k">def</span> <span class="nf">getIsotopics</span><span class="p">(</span><span class="n">nucName</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Expand elemental nuc name to isotopic nuc bases.&quot;&quot;&quot;</span>
    <span class="n">nb</span> <span class="o">=</span> <span class="n">byName</span><span class="p">[</span><span class="n">nucName</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nb</span><span class="p">,</span> <span class="p">(</span><span class="n">LumpNuclideBase</span><span class="p">,</span> <span class="n">DummyNuclideBase</span><span class="p">)):</span>
        <span class="c1"># skip lumped fission products or dumps</span>
        <span class="k">return</span> <span class="p">[]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nb</span><span class="p">,</span> <span class="n">NaturalNuclideBase</span><span class="p">):</span>
        <span class="n">isotopics</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">getNaturalIsotopics</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">isotopics</span> <span class="o">=</span> <span class="p">[</span><span class="n">nb</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">isotopics</span></div>


<div class="viewcode-block" id="fromName"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.fromName">[docs]</a><span class="k">def</span> <span class="nf">fromName</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a nuclide from its name.&quot;&quot;&quot;</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="p">[</span><span class="n">nn</span> <span class="k">for</span> <span class="n">nn</span> <span class="ow">in</span> <span class="n">instances</span> <span class="k">if</span> <span class="n">nn</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;Too many or too few (</span><span class="si">{}</span><span class="s2">) matches for </span><span class="si">{}</span><span class="s2">&quot;</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">),</span> <span class="n">name</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>


<div class="viewcode-block" id="isMonoIsotopicElement"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.isMonoIsotopicElement">[docs]</a><span class="k">def</span> <span class="nf">isMonoIsotopicElement</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return true if this is the only naturally occurring isotope of its element.&quot;&quot;&quot;</span>
    <span class="n">base</span> <span class="o">=</span> <span class="n">byName</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">(</span>
        <span class="n">base</span><span class="o">.</span><span class="n">abundance</span> <span class="o">&gt;</span> <span class="mi">0</span>
        <span class="ow">and</span> <span class="nb">len</span><span class="p">([</span><span class="n">e</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">base</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">nuclides</span> <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">abundance</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="p">)</span></div>


<div class="viewcode-block" id="where"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.where">[docs]</a><span class="k">def</span> <span class="nf">where</span><span class="p">(</span><span class="n">predicate</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return all :py:class:`INuclides &lt;INuclide&gt;` objects matching a condition.</span>

<span class="sd">    Returns an iterator of :py:class:`INuclides &lt;INuclide&gt;` matching the specified condition.</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    predicate: lambda</span>
<span class="sd">        A lambda, or function, accepting a :py:class:`INuclide` as a parameter</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from armi.nucDirectory import nuclideBases</span>
<span class="sd">    &gt;&gt;&gt; [nn.name for nn in nuclideBases.where(lambda nb: &#39;Z&#39; in nb.name)]</span>
<span class="sd">    [&#39;ZN64&#39;, &#39;ZN66&#39;, &#39;ZN67&#39;, &#39;ZN68&#39;, &#39;ZN70&#39;, &#39;ZR90&#39;, &#39;ZR91&#39;, &#39;ZR92&#39;, &#39;ZR94&#39;, &#39;ZR96&#39;, &#39;ZR93&#39;, &#39;ZR95&#39;, &#39;ZR&#39;]</span>

<span class="sd">    &gt;&gt;&gt; # in order to get length, convert to list</span>
<span class="sd">    &gt;&gt;&gt; isomers90 = list(nuclideBases.where(lambda nb: nb.a == 95))</span>
<span class="sd">    &gt;&gt;&gt; len(isomers90)</span>
<span class="sd">    3</span>
<span class="sd">    &gt;&gt;&gt; for iso in isomers: print(iso)</span>
<span class="sd">    &lt;NuclideBase MO95: Z:42, A:95, S:0, label:MO2N&gt;</span>
<span class="sd">    &lt;NuclideBase NB95: Z:41, A:95, S:0, label:NB2N&gt;</span>
<span class="sd">    &lt;NuclideBase ZR95: Z:40, A:95, S:0, label:ZR2N&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">nuc</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">predicate</span><span class="p">(</span><span class="n">nuc</span><span class="p">):</span>
            <span class="k">yield</span> <span class="p">(</span><span class="n">nuc</span><span class="p">)</span></div>


<div class="viewcode-block" id="single"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.single">[docs]</a><span class="k">def</span> <span class="nf">single</span><span class="p">(</span><span class="n">predicate</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Return a single :py:class:`INuclide` object meeting the specified condition.</span>

<span class="sd">    Similar to :py:func:`where`, this function uses a lambda input to filter</span>
<span class="sd">    the :py:attr:`INuclide instances &lt;instances&gt;`. If there is not 1 and only</span>
<span class="sd">    1 match for the specified condition, an exception is raised.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; from armi.nucDirectory import nuclideBases</span>
<span class="sd">    &gt;&gt;&gt; nuclideBases.single(lambda nb: nb.name == &#39;C&#39;)</span>
<span class="sd">    &lt;NaturalNuclideBase C: Z:6, w:12.0107358968, label:C&gt;</span>

<span class="sd">    &gt;&gt;&gt; nuclideBases.single(lambda nb: nb.z == 95 and nb.a == 242 and nb.state == 1)</span>
<span class="sd">    &lt;NuclideBase AM242M: Z:95, A:242, S:1, label:AM4C&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="p">[</span><span class="n">nuc</span> <span class="k">for</span> <span class="n">nuc</span> <span class="ow">in</span> <span class="n">instances</span> <span class="k">if</span> <span class="n">predicate</span><span class="p">(</span><span class="n">nuc</span><span class="p">)]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span>
            <span class="s2">&quot;Expected single match, but got </span><span class="si">{}</span><span class="s2"> matches:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">),</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">mo</span><span class="p">)</span> <span class="k">for</span> <span class="n">mo</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>


<div class="viewcode-block" id="changeLabel"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.changeLabel">[docs]</a><span class="k">def</span> <span class="nf">changeLabel</span><span class="p">(</span><span class="n">nuclideBase</span><span class="p">,</span> <span class="n">newLabel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates a nuclide label and modifies the ``byLabel`` look-up dictionary.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Since nuclide objects are defined and stored globally, any change to the</span>
<span class="sd">    attributes will be maintained.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nuclideBase</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">newLabel</span>
    <span class="n">byLabel</span><span class="p">[</span><span class="n">newLabel</span><span class="p">]</span> <span class="o">=</span> <span class="n">nuclideBase</span></div>


<div class="viewcode-block" id="getDepletableNuclides"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.getDepletableNuclides">[docs]</a><span class="k">def</span> <span class="nf">getDepletableNuclides</span><span class="p">(</span><span class="n">activeNuclides</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get nuclides in this object that are in the burn chain.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">activeNuclides</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">getNuclides</span><span class="p">()))</span></div>


<div class="viewcode-block" id="imposeBurnChain"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.imposeBurnChain">[docs]</a><span class="k">def</span> <span class="nf">imposeBurnChain</span><span class="p">(</span><span class="n">burnChainStream</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply transmutation and decay information to each nuclide.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    You cannot impose a burn chain twice. Doing so would require that you clean out the</span>
<span class="sd">    transmutations and decays from all the module-level nuclide bases, which generally</span>
<span class="sd">    requires that you rebuild them. But rebuilding those is not an option because some</span>
<span class="sd">    of them get set as class-level attributes and would be orphaned. If a need to change</span>
<span class="sd">    burn chains mid-run re-arises, then a better nuclideBase-level burnchain cleanup</span>
<span class="sd">    should be implemented so the objects don&#39;t have to change identity.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    We believe the transmutation information would probably be better stored on a</span>
<span class="sd">    less fundamental place (e.g. not on the NuclideBase).</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    armi.nucDirectory.transmutations : describes file format</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">burnChainImposed</span>
    <span class="k">if</span> <span class="n">burnChainImposed</span><span class="p">:</span>
        <span class="c1"># the only time this should happen is if in a unit test that has already</span>
        <span class="c1"># processed conftest.py and is now building a Case that also imposes this.</span>
        <span class="n">runLog</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Burn chain already imposed. Skipping reimposition.&quot;</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="n">burnChainImposed</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">yaml</span> <span class="o">=</span> <span class="n">YAML</span><span class="p">(</span><span class="n">typ</span><span class="o">=</span><span class="s2">&quot;rt&quot;</span><span class="p">)</span>
    <span class="n">yaml</span><span class="o">.</span><span class="n">allow_duplicate_keys</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">burnData</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">burnChainStream</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">nucName</span><span class="p">,</span> <span class="n">burnInfo</span> <span class="ow">in</span> <span class="n">burnData</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">nuclide</span> <span class="o">=</span> <span class="n">byName</span><span class="p">[</span><span class="n">nucName</span><span class="p">]</span>
        <span class="c1"># think of this protected stuff as &quot;module level protection&quot; rather than class.</span>
        <span class="n">nuclide</span><span class="o">.</span><span class="n">_processBurnData</span><span class="p">(</span><span class="n">burnInfo</span><span class="p">)</span></div>


<div class="viewcode-block" id="factory"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.factory">[docs]</a><span class="k">def</span> <span class="nf">factory</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads data files to instantiate the :py:class:`INuclides &lt;INuclide&gt;`.</span>

<span class="sd">    Reads NIST, MC**2 and burn chain data files to instantiate the :py:class:`INuclides &lt;INuclide&gt;`.</span>
<span class="sd">    Also clears and fills in the</span>
<span class="sd">    :py:data:`~armi.nucDirectory.nuclideBases.instances`,</span>
<span class="sd">    :py:data:`byName`, :py:attr:`byLabel`, and</span>
<span class="sd">    :py:data:`byMcc3Id` module attributes. This method is automatically run upon</span>
<span class="sd">    loading the module, hence it is not usually necessary to re-run it unless there is a</span>
<span class="sd">    change to the data files, which should not happen during run time, or a *bad*</span>
<span class="sd">    :py:class`INuclide` is created.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This may cannot be run more than once. NuclideBase instances are used throughout the ARMI</span>
<span class="sd">    ecosystem and are even class attributes in some cases. Re-instantiating them would orphan</span>
<span class="sd">    any existing ones and break everything.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">instances</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Nuclides are already initialized and cannot be re-initialized unless &quot;</span>
            <span class="s2">&quot;`nuclideBases.destroyGlobalNuclides` is called first.&quot;</span>
        <span class="p">)</span>
    <span class="n">addNuclideBases</span><span class="p">()</span>
    <span class="n">__addNaturalNuclideBases</span><span class="p">()</span>
    <span class="n">__addDummyNuclideBases</span><span class="p">()</span>
    <span class="n">__addLumpedFissionProductNuclideBases</span><span class="p">()</span>
    <span class="n">updateNuclideBasesForSpecialCases</span><span class="p">()</span>
    <span class="n">readMCCNuclideData</span><span class="p">()</span>
    <span class="n">__renormalizeNuclideToElementRelationship</span><span class="p">()</span>
    <span class="n">__deriveElementalWeightsByNaturalNuclideAbundances</span><span class="p">()</span>

    <span class="c1"># reload the thermal scattering library with the new nuclideBases too</span>
    <span class="kn">from</span> <span class="nn">armi.nucDirectory</span> <span class="kn">import</span> <span class="n">thermalScattering</span>

    <span class="n">thermalScattering</span><span class="o">.</span><span class="n">factory</span><span class="p">()</span></div>


<div class="viewcode-block" id="addNuclideBases"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.addNuclideBases">[docs]</a><span class="k">def</span> <span class="nf">addNuclideBases</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read natural abundances of any natural nuclides.</span>

<span class="sd">    This adjusts already-existing NuclideBases and Elements with the new information.</span>

<span class="sd">    .. impl:: Separating natural abundance data from code.</span>
<span class="sd">        :id: I_ARMI_ND_DATA0</span>
<span class="sd">        :implements: R_ARMI_ND_DATA</span>

<span class="sd">        This function reads the ``nuclides.dat`` file from the ARMI resources</span>
<span class="sd">        folder. This file contains metadata for 4,614 nuclides, including</span>
<span class="sd">        number of protons, number of neutrons, atomic number, excited</span>
<span class="sd">        state, element symbol, atomic mass, natural abundance, half-life,</span>
<span class="sd">        and spontaneous fission yield. The data in ``nuclides.dat`` have been</span>
<span class="sd">        collected from multiple different sources; the references are given</span>
<span class="sd">        in comments at the top of that file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">RES</span><span class="p">,</span> <span class="s2">&quot;nuclides.dat&quot;</span><span class="p">))</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="c1"># Skip header lines</span>
            <span class="k">if</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;Z&quot;</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">lineData</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="n">_z</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lineData</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">_n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lineData</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">a</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lineData</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">state</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">lineData</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="n">sym</span> <span class="o">=</span> <span class="n">lineData</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
            <span class="n">mass</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">lineData</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
            <span class="n">abun</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">lineData</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
            <span class="n">halflife</span> <span class="o">=</span> <span class="n">lineData</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">halflife</span> <span class="o">==</span> <span class="s2">&quot;inf&quot;</span><span class="p">:</span>
                <span class="n">halflife</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">inf</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">halflife</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">halflife</span><span class="p">)</span>
            <span class="n">nuSF</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">lineData</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>

            <span class="n">element</span> <span class="o">=</span> <span class="n">elements</span><span class="o">.</span><span class="n">bySymbol</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span>
            <span class="n">nb</span> <span class="o">=</span> <span class="n">NuclideBase</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">mass</span><span class="p">,</span> <span class="n">abun</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">halflife</span><span class="p">)</span>
            <span class="n">nb</span><span class="o">.</span><span class="n">nuSF</span> <span class="o">=</span> <span class="n">nuSF</span></div>


<span class="k">def</span> <span class="nf">__addNaturalNuclideBases</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates a complete set of nuclide bases for each naturally occurring element.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="o">.</span><span class="n">byZ</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">symbol</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">byName</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">element</span><span class="o">.</span><span class="n">isNaturallyOccurring</span><span class="p">():</span>
                <span class="n">NaturalNuclideBase</span><span class="p">(</span><span class="n">element</span><span class="o">.</span><span class="n">symbol</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">__addDummyNuclideBases</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a set of dummy nuclides.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    These nuclides can be used to truncate a depletion / burn-up chain within the</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">DummyNuclideBase</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;DUMP1&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">10.0</span><span class="p">)</span>
    <span class="n">DummyNuclideBase</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;DUMP2&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">240.0</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">__addLumpedFissionProductNuclideBases</span><span class="p">():</span>
    <span class="n">LumpNuclideBase</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;LFP35&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">233.273</span><span class="p">)</span>
    <span class="n">LumpNuclideBase</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;LFP38&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">235.78</span><span class="p">)</span>
    <span class="n">LumpNuclideBase</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;LFP39&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">236.898</span><span class="p">)</span>
    <span class="n">LumpNuclideBase</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;LFP40&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">237.7</span><span class="p">)</span>
    <span class="n">LumpNuclideBase</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;LFP41&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">238.812</span><span class="p">)</span>
    <span class="n">LumpNuclideBase</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;LREGN&quot;</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>


<div class="viewcode-block" id="readMCCNuclideData"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.readMCCNuclideData">[docs]</a><span class="k">def</span> <span class="nf">readMCCNuclideData</span><span class="p">():</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Read in the label data for the MC2-2 and MC2-3 cross section codes to the nuclide bases.</span>

<span class="sd">    .. impl:: Separating MCC data from code.</span>
<span class="sd">        :id: I_ARMI_ND_DATA1</span>
<span class="sd">        :implements: R_ARMI_ND_DATA</span>

<span class="sd">        This function reads the mcc-nuclides.yaml file from the ARMI resources</span>
<span class="sd">        folder. This file contains the MC\ :sup:`2`-2 ID (from ENDF/B-V.2) and MC\ :sup:`2`-3 ID</span>
<span class="sd">        (from ENDF/B-VII.0) for all nuclides in MC\ :sup:`2`. The ``mcc2id`` and</span>
<span class="sd">        ``mcc3id`` attributes of each :py:class:`NuclideBase</span>
<span class="sd">        &lt;armi.nucDirectory.nuclideBases.NuclideBase&gt;` instance are updated as</span>
<span class="sd">        the data is read, and the global dictionaries ``byMcc2Id`` and</span>
<span class="sd">        ``byMcc3Id`` are populated with the nuclide bases keyed by their</span>
<span class="sd">        corresponding ID for each code.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">context</span><span class="o">.</span><span class="n">RES</span><span class="p">,</span> <span class="s2">&quot;mcc-nuclides.yaml&quot;</span><span class="p">),</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">yaml</span> <span class="o">=</span> <span class="n">YAML</span><span class="p">(</span><span class="n">typ</span><span class="o">=</span><span class="s2">&quot;rt&quot;</span><span class="p">)</span>
        <span class="n">nuclides</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nuclides</span><span class="p">:</span>
        <span class="n">nb</span> <span class="o">=</span> <span class="n">byName</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>
        <span class="n">mcc2id</span> <span class="o">=</span> <span class="n">nuclides</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="s2">&quot;ENDF/B-V.2&quot;</span><span class="p">]</span>
        <span class="n">mcc3id</span> <span class="o">=</span> <span class="n">nuclides</span><span class="p">[</span><span class="n">n</span><span class="p">][</span><span class="s2">&quot;ENDF/B-VII.0&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">mcc2id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">nb</span><span class="o">.</span><span class="n">mcc2id</span> <span class="o">=</span> <span class="n">mcc2id</span>
            <span class="n">byMcc2Id</span><span class="p">[</span><span class="n">nb</span><span class="o">.</span><span class="n">getMcc2Id</span><span class="p">()]</span> <span class="o">=</span> <span class="n">nb</span>
        <span class="k">if</span> <span class="n">mcc3id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">nb</span><span class="o">.</span><span class="n">mcc3id</span> <span class="o">=</span> <span class="n">mcc3id</span>
            <span class="n">byMcc3Id</span><span class="p">[</span><span class="n">nb</span><span class="o">.</span><span class="n">getMcc3Id</span><span class="p">()]</span> <span class="o">=</span> <span class="n">nb</span></div>


<div class="viewcode-block" id="updateNuclideBasesForSpecialCases"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.updateNuclideBasesForSpecialCases">[docs]</a><span class="k">def</span> <span class="nf">updateNuclideBasesForSpecialCases</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update the nuclide bases for special case name changes.</span>

<span class="sd">    .. impl:: The special case name Am242g is supported.</span>
<span class="sd">        :id: I_ARMI_ND_ISOTOPES6</span>
<span class="sd">        :implements: R_ARMI_ND_ISOTOPES</span>

<span class="sd">        This function updates the keys for the :py:class:`NuclideBase</span>
<span class="sd">        &lt;armi.nucDirectory.nuclideBases.NuclideBase&gt;` instances for Am-242m and</span>
<span class="sd">        Am-242 in the ``byName`` and ``byDBName`` global dictionaries.  This</span>
<span class="sd">        function associates the more common isomer Am-242m with the name</span>
<span class="sd">        &quot;AM242&quot;, and uses &quot;AM242G&quot; to denote the ground state.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function is specifically added to change the definition of</span>
<span class="sd">    `AM242` to refer to its metastable isomer, `AM242M` by default. `AM242M`</span>
<span class="sd">    is most common isomer of `AM242` and is typically the desired isomer</span>
<span class="sd">    when being requested rather than than the ground state (i.e., S=0) of</span>
<span class="sd">    `AM242`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Change the name of `AM242` to specific represent its ground state.</span>
    <span class="n">am242g</span> <span class="o">=</span> <span class="n">byName</span><span class="p">[</span><span class="s2">&quot;AM242&quot;</span><span class="p">]</span>
    <span class="n">am242g</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;AM242G&quot;</span>
    <span class="n">byName</span><span class="p">[</span><span class="s2">&quot;AM242G&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">am242g</span>
    <span class="n">byDBName</span><span class="p">[</span><span class="n">byName</span><span class="p">[</span><span class="s2">&quot;AM242G&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">getDatabaseName</span><span class="p">()]</span> <span class="o">=</span> <span class="n">am242g</span>

    <span class="c1"># Update the pointer of `AM242` to refer to `AM242M`.</span>
    <span class="n">am242m</span> <span class="o">=</span> <span class="n">byName</span><span class="p">[</span><span class="s2">&quot;AM242M&quot;</span><span class="p">]</span>
    <span class="n">byName</span><span class="p">[</span><span class="s2">&quot;AM242&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">am242m</span>
    <span class="n">byDBName</span><span class="p">[</span><span class="s2">&quot;nAm242&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">am242m</span>
    <span class="n">byDBName</span><span class="p">[</span><span class="n">byName</span><span class="p">[</span><span class="s2">&quot;AM242&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">getDatabaseName</span><span class="p">()]</span> <span class="o">=</span> <span class="n">am242m</span></div>


<span class="k">def</span> <span class="nf">__renormalizeNuclideToElementRelationship</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">nuc</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">nuc</span><span class="o">.</span><span class="n">element</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">nuc</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">elements</span><span class="o">.</span><span class="n">byZ</span><span class="p">[</span><span class="n">nuc</span><span class="o">.</span><span class="n">z</span><span class="p">]</span>
            <span class="n">nuc</span><span class="o">.</span><span class="n">element</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nuc</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">__deriveElementalWeightsByNaturalNuclideAbundances</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Derives and sets the standard atomic weights for each element that has naturally occurring nuclides.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">elements</span><span class="o">.</span><span class="n">byName</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">numer</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">denom</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">nb</span> <span class="ow">in</span> <span class="n">element</span><span class="o">.</span><span class="n">getNaturalIsotopics</span><span class="p">():</span>
            <span class="n">numer</span> <span class="o">+=</span> <span class="n">nb</span><span class="o">.</span><span class="n">weight</span> <span class="o">*</span> <span class="n">nb</span><span class="o">.</span><span class="n">abundance</span>
            <span class="n">denom</span> <span class="o">+=</span> <span class="n">nb</span><span class="o">.</span><span class="n">abundance</span>

        <span class="k">if</span> <span class="n">denom</span><span class="p">:</span>
            <span class="n">element</span><span class="o">.</span><span class="n">standardWeight</span> <span class="o">=</span> <span class="n">numer</span> <span class="o">/</span> <span class="n">denom</span>


<div class="viewcode-block" id="addGlobalNuclide"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.addGlobalNuclide">[docs]</a><span class="k">def</span> <span class="nf">addGlobalNuclide</span><span class="p">(</span><span class="n">nuclide</span><span class="p">:</span> <span class="n">NuclideBase</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add an element to the global dictionaries.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span>
        <span class="n">nuclide</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">byName</span>
        <span class="ow">or</span> <span class="n">nuclide</span><span class="o">.</span><span class="n">getDatabaseName</span><span class="p">()</span> <span class="ow">in</span> <span class="n">byDBName</span>
        <span class="ow">or</span> <span class="n">nuclide</span><span class="o">.</span><span class="n">label</span> <span class="ow">in</span> <span class="n">byLabel</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nuclide</span><span class="si">}</span><span class="s2"> has already been added and cannot be duplicated.&quot;</span><span class="p">)</span>

    <span class="n">instances</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nuclide</span><span class="p">)</span>
    <span class="n">byName</span><span class="p">[</span><span class="n">nuclide</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">nuclide</span>
    <span class="n">byDBName</span><span class="p">[</span><span class="n">nuclide</span><span class="o">.</span><span class="n">getDatabaseName</span><span class="p">()]</span> <span class="o">=</span> <span class="n">nuclide</span>
    <span class="n">byLabel</span><span class="p">[</span><span class="n">nuclide</span><span class="o">.</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">nuclide</span>

    <span class="c1"># Add look-up based on the MCNP nuclide ID</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">nuclide</span><span class="p">,</span> <span class="n">IMcnpNuclide</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">nuclide</span><span class="o">.</span><span class="n">getMcnpId</span><span class="p">()</span> <span class="ow">in</span> <span class="n">byMcnpId</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">nuclide</span><span class="si">}</span><span class="s2"> with McnpId </span><span class="si">{</span><span class="n">nuclide</span><span class="o">.</span><span class="n">getMcnpId</span><span class="p">()</span><span class="si">}</span><span class="s2"> has already been added and cannot be duplicated.&quot;</span>
            <span class="p">)</span>
        <span class="n">byMcnpId</span><span class="p">[</span><span class="n">nuclide</span><span class="o">.</span><span class="n">getMcnpId</span><span class="p">()]</span> <span class="o">=</span> <span class="n">nuclide</span>
        <span class="n">byAAAZZZSId</span><span class="p">[</span><span class="n">nuclide</span><span class="o">.</span><span class="n">getAAAZZZSId</span><span class="p">()]</span> <span class="o">=</span> <span class="n">nuclide</span></div>


<div class="viewcode-block" id="destroyGlobalNuclides"><a class="viewcode-back" href="../../../.apidocs/armi.nucDirectory.nuclideBases.html#armi.nucDirectory.nuclideBases.destroyGlobalNuclides">[docs]</a><span class="k">def</span> <span class="nf">destroyGlobalNuclides</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Delete all global nuclide bases.&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">instances</span>
    <span class="k">global</span> <span class="n">byName</span>
    <span class="k">global</span> <span class="n">byDBName</span>
    <span class="k">global</span> <span class="n">byLabel</span>
    <span class="k">global</span> <span class="n">byMcc2Id</span>
    <span class="k">global</span> <span class="n">byMcc3Id</span>
    <span class="k">global</span> <span class="n">byMcnpId</span>
    <span class="k">global</span> <span class="n">byAAAZZZSId</span>

    <span class="n">instances</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">byName</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">byDBName</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">byLabel</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">byMcc2Id</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">byMcc3Id</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">byMcnpId</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">byAAAZZZSId</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2009-2024, TerraPower, LLC.
      <span class="lastupdated">Last updated on 2024-07-03.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>